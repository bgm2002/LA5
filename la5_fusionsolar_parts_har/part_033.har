or\"},i4:function(t){throw\"Error\"}});var Hi=function(t){this._a=t};D.ext(Hi,Object,{i2:function(t){for(var e=0,i=t.an();i.i1();i.i2())null!=this._a.i1(i.i9())&&e++;return e},i4:function(t){return null==this._a.i1(t)},i1:function(t){throw\"Error\"},i3:function(t){throw\"Error\"}});var Wi=function(){Wi.superClass.constructor.call(this),this._kq=!1,this._kp=90};D.ext(Wi,Vi,{a:function(t,e){this._kr=e,this._ks=t,this._kq=!0},i7:function(t){if(this.u(t))for(var e=this.i9(),i=this.ib(t),n=(360-i)/2+i,s=new di(t.ap());;){var o=this.i6(t);o=(360-i)/2;for(var r=null,a=null,h=s._b;null!=h;h=h.a()){var l=h.d(),c=l.a3(),d=this.i0(c),u=this._ks.i3(l),_=u-(o+d._e);if(_>=0&&u+d._d>=n&&(_=o+d.a()<=n?n-o-d.a():2*(n-(u+d._d))),d._f=0,_>=0)d._f=_,r=h,a=d;else{for(-_>d._d+d._e?_=(d._d+d._e)/2:_/=-2,(o-=_)<=n&&o+d.a()>n&&(o+=_,o-=_=o+d.a()-n);null!=r&&_>a._f;a=this.i0(r.d().a3()))if(_-=a._f,a._f=0,null==(r=r.b())){a=null;break}null!=r?a._f-=_:o+=_}o+=d.a()}if(o<=n){for(var g=0,f=(360-i)/2,v=t.ap();v.i1();v.i2()){var m=v.i8(),p=m.a3(),w=this._ks.i3(m),y=this.i0(p),A=f+y._f+y._e;g<Math.abs(A-w)&&(g=Math.abs(A-w)),f+=y.a()}if(g<=this._kp)break}for(var x=t.aw();x.i1();x.i2()){var C=x.i9();this.i0(C)._g*=1+e}}else Wi.superClass.i7.call(this,t)},ib:function(t){return this.u(t)?0===t.ak()?this.ic():this.ia():Wi.superClass.ib.call(this,t)},u:function(t){return!(!this._kq||0===t.ao())&&null!=this._ks.i1(t.ag())}});var Zi=function(t){this._a=t};D.ext(Zi,Object,{i1:function(t){return this._a.i1(t)},i2:function(t){throw\"Error\"},i3:function(t){throw\"Error\"},i4:function(t){throw\"Error\"}});var Gi=function(){};D.ext(Gi,Object,{w1:function(t){this._bb=t},w2:function(){return this._bb},w4:function(t){null!=this._bb&&this._bb.i2(t)},w3:function(t){return null==this._bb||this._bb.i1(t)}});var Xi=function(){this._cg=45,this._ce=400,this._ch=400,this._cf=0};D.ext(Xi,Gi,{i1:function(t){if(null!=this.w2()){for(var e=!0,i=t.xk(),n=Je.a3(t,i),s=kn.d(n),o=kn.d(n),r=0;r<n;r++)s[r]=new Li,o[r]=new di;for(var a=t.xf();a.i1();a.i2()){var h=a.i8();o[i.i2(h.a2())].aa(h),t.h1(h)}for(var l=t.x9();l.i1();l.i2()){var c=l.i9();s[i.i2(c)].aa(c),t.h2(l.i9())}for(var d=0;d<n;d++){for(var u=s[d].x1();u.i1();u.i2())t.h3(u.i9());for(var _=o[d].c1();_.i1();_.i2())t.u1(_.i8());e=this.w3(t);for(var g=o[d].c1();g.i1();g.i2())t.h1(g.i8());for(var f=s[d].x1();f.i1();f.i2())t.h2(f.i9());if(!e)break}for(var v=0;v<n;v++)for(var m=s[v].x1();m.i1();m.i2())t.h3(m.i9());for(var p=0;p<n;p++)for(var w=o[p].c1();w.i1();w.i2())t.u1(w.i8());return t.xi(i),e}return!0},i2:function(t){if(!t.xb()){for(var e=t.xk(),i=Je.a3(t,e),n=kn.d(i),s=kn.d(i),o=kn.d(i),r=kn.d(i),a=0;a<i;a++)n[a]=new Li,s[a]=new di;for(var h=t.xf();h.i1();h.i2()){var l=h.i8();s[e.i2(l.a2())].aa(l),t.h1(l)}for(var c=t.x9();c.i1();c.i2()){var d=c.i9();n[e.i2(d)].aa(d),t.h2(c.i9())}for(var u=0;u<i;u++){for(var _=n[u].x1();_.i1();_.i2())t.h3(_.i9());for(var g=s[u].c1();g.i1();g.i2())t.u1(g.i8());this.w4(t);var f=t.g3();o[u]=new Ue(f.x,f.y,f.width,f.height);var v={};if(r[u]=v,this._cf>0){var m=this._cg+Math.ceil((f.width+1)/this._cf)*this._cf,p=this._cg+Math.ceil((f.height+1)/this._cf)*this._cf;v.x=f.x,v.y=f.y,v.width=m,v.height=p}else v.x=f.x,v.y=f.y,v.width=f.width+this._cg,v.height=f.height+this._cg;for(var w=s[u].c1();w.i1();w.i2())t.h1(w.i8());for(var y=n[u].x1();y.i1();y.i2())t.h2(y.i9())}for(var A=0;A<i;A++)for(var x=n[A].x1();x.i1();x.i2())t.h3(x.i9());for(var C=0;C<i;C++)for(var E=s[C].c1();E.i1();E.i2())t.u1(E.i8());if(hn.a(r,null,this._ce/this._ch),this._cf<=0)for(var T=0;T<r.length;T++)this.w5(t,n[T],s[T],new ze(r[T].x,r[T].y),o[T]);else for(var k=0;k<r.length;k++){var b=Math.floor((r[k].x-o[k].x)/this._cf)*this._cf,S=Math.floor((r[k].y-o[k].y)/this._cf)*this._cf,L=o[k].x+b,I=o[k].y+S;this.w5(t,n[k],s[k],new ze(L,I),o[k])}t.xi(e)}},w5:function(t,e,i,n,s){for(var o=-s.x+n.x,r=-s.y+n.y,a=e.x1();a.i1();a.i2()){var h=t.ga(a.i9());t.s4(a.i9(),new ze(h.x+o,h.y+r))}for(var l=i.c1();l.i1();l.i2()){for(var c=l.i8(),d=new oe,u=t.gp(c).c();u.i1();u.i2()){var _=u.i6();d.add(new ze(_.x+o,_.y+r))}t.s5(c,new We(d))}}});var Yi=function(){};D.ext(Yi,Gi,{i1:function(t){return this.w3(t)},i2:function(t){this.w7(t),null!=this.w2()&&this.w4(t),this.w6(t)},w7:function(t){this.e(t),this.k(t),this.i(t)},e:function(t){for(var e=t.x9();e.i1();e.i2()){var i=t.g4(e.i9());t.s1(e.i9(),i)}},w6:function(t){this.l(t),this.j(t),this.f(t)},l:function(t){for(var e=t.x9();e.i1();e.i2()){var i=t.g4(e.i9());t.s1(e.i9(),i)}},j:function(t){for(var e=t.xf();e.i1();e.i2()){var i=t.g7(e.i8()),n=i.i6();i.i8(n),n=i.i7(),i.i9(n);for(var s=0;s<i.i1();s++){var o=i.i2(s);i.i3(s,o.x,o.y)}}},k:function(t){for(var e=t.xf();e.i1();e.i2()){var i=t.g7(e.i8()),n=i.i6();i.i8(n),n=i.i7(),i.i9(n);for(var s=0;s<i.i1();s++){var o=i.i2(s);i.i3(s,o.x,o.y)}}},f:function(t){null!=this._ca&&(t.x1(\"A\",this._ca),this._ca=null,this._b6=null),null!=this._b8&&(t.x1(\"B\",this._b8),this._b8=null,this._b9=null)},i:function(t){this._ca=t.xc(\"A\"),null!=this._ca&&(this._b6=new Zi(this._ca),t.x1(\"A\",this._b6)),this._b8=t.xc(\"B\"),null!=this._b8&&(this._b9=new Zi(this._b8),t.x1(\"B\",this._b9))}});var ji=function(){this._a=new di,this._c=10};D.ext(ji,Gi,{i2:function(t){this._b=t.xl(),this.w9(t),this.w4(t),this.c(t),this.w8(t,this._b),t.xj(this._b)},i1:function(t){if(null==this.w2())return!0;this._b=t.xl(),this.w9(t);var e=this.w3(t);return this.c(t),t.xj(this._b),e},w8:function(t,e){for(var i=t.xf();i.i1();i.i2()){var n=i.i8();if(null!=e.i1(n)){var s=e.i1(n);hn.g(t,n,s,this._c)}}},w9:function(t){for(var e=t.xk(),i=t.x9();i.i1();i.i2()){for(var n=i.i9(),s=n.af();s.i1();s.i2()){var o=s.i8(),r=o.a1(n),a=e.i1(r);if(a!==o)if(null==a)e.z1(r,o);else{null==this._b.i1(a)&&this._b.i8(a,new di);this._b.i1(a).aa(o),this._a.ac(o),t.h1(o)}}for(var h=n.af();h.i1();h.i2()){var l=h.i8().a1(n);e.z1(l,null)}}t.xi(e)},c:function(t){for(;!this._a.ar();t.u1(this._a.c3()));}});var Ki=function(t){this._a=t};D.ext(Ki,Object,{i2:function(t){this._a.i3(t)},i1:function(t){return this._a.i4(t)}});var Ji=function(){Ji.superClass.constructor.call(this),this._jo=30,this._jp=new tn,this._jt=5};D.ext(Ji,Bi,{i4:function(t){return!0},i3:function(t){this._ju=t,hn.c(t);for(var e=this._jp.i1(t),i=0,n=t.x9();n.i1();n.i2())i=Math.max(i,this.e(n.i9()));i<this._jt&&(i=this._jt),this.a(e,i)},a:function(t,e){var i=t.i7(),n=2*Math.PI/i,s=0,o=kn.a(i);t.i4();for(var r=0;r<i;)o[r]=this.e(t.i9())+this._jo,s+=o[r],r++,t.i2();var a=s/i,h=s/(2*Math.PI);h<e&&(h=e),t.i4();for(var l=0,c=0;c<i;){var d=n/a*o[c];l+=d/2;var u=Math.cos(l)*h,_=Math.sin(l)*h;l+=d/2,this._ju.s2(t.i9(),u,_),c++,t.i2()}return h},e:function(t){var e=this._ju.gj(t),i=this._ju.g9(t);return e<=i?i:e}});var qi=function(){qi.superClass.constructor.call(this),this._jm=new Ji,this._jk=new Wi};D.ext(qi,Bi,{i4:function(t){return!0},i3:function(t){if(!(t.x0()<2)){this._jn=t,hn.c(this._jn),hn.e(this._jn);var e=new rn(this._jn);e.a1(),e.h();var i=new Pi(this._jn);i.a();for(var n=e.x9();n.i1();n.i2()){var s=n.i9(),o=e.c2(s);if(o.ay()>1){var r=e.d1(s);Pi.h(this._jn,r.c1()),this._jm.i3(this._jn);var a=this._jn.g3();e.s7(s,a.width,a.height)}else if(1===o.ay()){var h=o.x2();e.s8(s,this._jn.gm(h)),this._jn.s2(h,0,0)}else e.s7(s,1,1);Pi.i(this._jn,this._jn.xf())}i.b();var l=this.a7(e);ni.a4(e,l);var c=e.xk(),d=e.xl();this.a2(e,d,c),this.a1(e,d),this.a3(e,l,d),this._jk.a(d,c),this._jk.i3(e),this.a5(e,l,c);for(var u=e.x9();u.i1();u.i2())for(var _=u.i9(),g=e.g4(_),f=e.c2(_).x1();f.i1();f.i2()){var v=f.i9();this._jn.s2(v,g.x+this._jn.g5(v),g.y+this._jn.g6(v))}}},a7:function(t){for(var e=-1,i=null,n=t.x9();n.i1();n.i2()){var s=n.i9();t.c2(s).ay()>e&&(i=s,e=t.c2(s).ay())}return i},a1:function(t,e){for(var i=function(t,i){var n=e.i3(t)-e.i3(i);return n>0?1:n>=0?0:-1},n=t.x9();n.i1();n.i2())n.i9().av(i)},a2:function(t,e,i){for(var n=kn.a(this._jn.x0()),s=t.x9();s.i1();s.i2())for(var o=s.i9(),r=t.c2(o).x1();r.i1();r.i2()){n[r.i9().al()]=o.al()}var a=ni.a2(t);this.a4(t,a,n,e,i)},a3:function(t,e,i){if(t.c2(e).ay()>1){for(var n=0,s=0,o=0,r=e.ap();r.i1();r.i2()){var a=r.i8(),h=i.i3(a);h-n>s&&(s=h-n,o=(n+h)/2),n=h}360-n>s&&(o=(360+n)/2),this.a6(t,e,o);for(var l=e.ap();l.i1();l.i2()){var c=l.i8(),d=i.i3(c);for(d-=o;d<0;d+=360);i.i6(c,d)}e.av(function(t,e){var n=i.i3(t)-i.i3(e);return n>0?1:n>=0?0:-1})}},a4:function(t,e,i,n,s){for(var o=e.al(),r=s.i3(e),a=e.ap();a.i1();a.i2()){for(var h=a.i8(),l=0,c=0,d=0,u=0,_=t.b(h).c1();_.i1();_.i2()){var g=_.i8(),f=null,v=null;i[g.a2().al()]===o?(f=g.a2(),v=g.a3()):(f=g.a3(),v=g.a2()),d-=this._jn.g5(f),u+=this._jn.g6(f),l-=this._jn.g5(v),c+=this._jn.g6(v)}if(0!==d||0!==u){var m;for(m=180*Math.atan2(u,d)/Math.PI-r;m<0;m+=360);n.i6(h,m)}if(0!==l&&0!==c){var p=180*Math.atan2(c,l)/Math.PI;p<0&&(p+=360),s.i6(h.a3(),p)}this.a4(t,h.a3(),i,n,s)}},a5:function(t,e,i){for(var n=t.g4(e),s=e.ap();s.i1();s.i2()){var o=s.i8().a3(),r=t.g4(o),a=r.x-n.x,h=r.y-n.y,l=180*Math.atan2(h,a)/Math.PI;if(null!=i.i1(o)){l+=i.i3(o)}this.a6(t,o,l),this.a5(t,o,i)}},a6:function(t,e,i){i=i/180*Math.PI;var n=t.c2(e);if(!(n.ay()<=1))for(var s=n.x1();s.i1();s.i2()){var o=s.i9(),r=this._jn.g5(o),a=this._jn.g6(o),h=Math.cos(i),l=Math.sin(i),c=r*h-l*a,d=r*l+h*a;this._jn.s2(o,c,d)}}});var Qi=function(){this._a=(new Date).getTime()};D.ext(Qi,Object,{b:function(){return(new Date).getTime()-this._a}});var $i={};$i._A=new ze(0,0),$i.b=function(t,e,i){return $i.c(t.x,t.y,e.x,e.y,i.x,i.y)},$i.c=function(t,e,i,n,s,o){var r=(s-=t)*(n-=e)-(o-=e)*(i-=t);return Math.abs(r)<1e-5?0:r>=0?r<=0?0:-1:1},$i.d=function(t,e,i){return $i.b(t,e,i)>0},$i.f=function(t,e,i){return $i.b(t,e,i)<0},$i.g=function(t,e,i){return 0===$i.b(t,e,i)},$i.h=function(t){return $i.i(t)},$i.i=function(t){var e=new ci(t.ah()),i=new ci;if(e.a2(),e.ar())return i;var n=e.at();for(i.ae(n);!e.ar()&&n.equals(e.am());e.at());if(e.ar())return i;n=e.at();for(var s=i.ae(n),o=e.ah();o.i1();o.i2()){var r=o.i6();if(!r.equals(n))if(n=r,2===i.ay()&&$i.g(i.am(),i.as(),r))s.c(r);else{var a;for(a=s;!$i.f(i.ai(a).d(),a.d(),r);a=i.ai(a));var h;for(h=s;!$i.d(i.aj(h).d(),h.d(),r);h=i.aj(h));for(;h!==i.aj(a);i.aw(i.aj(a)));s=i.an(r,a)}}return i},$i.j=function(){return $i.k(Number.MAX_VALUE)},$i.k=function(t){return Math.floor(R.Util.random()*t)},$i.l=function(t,e){return R.Util.random()*(e-t)+t};var tn=function(){};D.ext(tn,Object,{i1:function(t){this._b=t;var e=new di;(e=Je.a6(t)).az(Je.a7(t));for(var i=this.a1();!e.ar();t.x5(e.c3()));return i.x1()},a1:function(){if(this._b.x0()<3)return new Li(this._b.x9());for(var t=this._b.xk(),e=this._b.xk(),i=this._b.xl(),n=new Ri(this._b,new Ui,0,this.a3(this._b)),s=this._b.x0(),o=new di,r=new di,a=new Pi(this._b);s>3;s--){for(var h=n.g(),l=h.an();l.i1();l.i2())t.z1(l.i9(),s),e.i5(l.i9(),!1);for(var c=h.an();c.i1();c.i2())for(var d=c.i9().ap();d.i1();d.i2()){var u=d.i8();t.i2(u.a3())===s&&(r.aa(u),e.i5(u.a2(),!0),e.i5(u.a3(),!0))}if(r.ay()<h.ad()-1){for(var _=null,g=h.an();g.i1();g.i2()){var f=g.i9();if(t.i2(f)===s&&!e.i4(f))if(null==_)_=f;else{var v=this._b.xo(_,f);i.i7(v,!0),r.aa(v),_=null}}if(null!=_)for(var m=h.an();m.i1();m.i2()){var p=m.i9();if(p!==_&&null==p.aj(_)){var w=this._b.xo(_,p);i.i7(w,!0),r.aa(w);break}}if(r.ay()<h.ad()-1){for(var y=2147483647,A=null,x=h.an();x.i1();x.i2()){var C=x.i9();C.ad()<y&&(A=C,y=C.ad())}for(var E=h.an();E.i1();E.i2()){var T=E.i9();if(null==A.aj(T)&&A!==T){var k=this._b.xo(A,T);if(i.i7(k,!0),r.aa(k),r.ay()>=h.ad()-1)break}}}}for(var b=h.an();b.i1();b.i2())n.b(b.i9());for(var S=r.c1();S.i1();S.i2()){var L=S.i8();i.i4(L)&&(n.d(L.a2()),n.d(L.a3()))}o.az(r),a.e(h)}a.b(),n.c();for(var I=o.c1();I.i1();I.i2()){var P=I.i8();null!=P._h&&(i.i4(P)?this._b.x5(P):this._b.h1(P))}var R=this.a4(this._b),D=new Li,M=R.ak(0),O=R.ak(1),B=null;B=M.a2()===O.a2()||M.a2()===O.a3()?M.a3():M.a2(),D.aa(B);for(var N=R.c1();N.i1();N.i2()){B=N.i8().a1(B),D.aa(B)}for(var z=o.c1();z.i1();z.i2()){var F=z.i8();i.i4(F)||null!=F._h||this._b.u1(F)}return this._b.xi(e),this._b.xj(i),this._b.xi(t),this.a2(D),D},a2:function(t){if(t.ay()<this._b.x0()){for(var e=this._b.xk(),i=t._b;null!=i;i=i.a()){var n=i.d();e.z1(n,i)}var s;for(s=new Ri(this._b,new Hi(e),0,t.ay(),new Hi(e));!s.e();){for(var o=s.f(),r=o.an();r.i1();r.i2()){var a=r.i9();if(null!=e.i1(a)){var h=e.i1(a),l=t.ai(h).d(),c=null;c=null!=o.aj(l)?t.ao(o,h):t.an(o,h),e.z1(o,c);break}}for(var d=o.an();d.i1();d.i2()){var u=d.i9();null==e.i1(u)&&s.d(u)}}this._b.xi(e),s.c()}},a3:function(t){for(var e=0,i=t.x9();i.i1();i.i2())e=Math.max(e,i.i9().ad());return e},a4:function(t){for(var e=[],i=0,n=t.x0();i<n;i++)e[i]=new ei;var s=new $e(e);s.a6(!1),s.a8(t);for(var o=-1,r=null,a=t.x9();a.i1();a.i2()){var h=a.i9(),l=e[h.al()];l._a+l._c>o&&(o=l._a+l._c,r=h)}for(var c=new di,d=r,u=e[d.al()]._d;null!=u;u=e[d.al()]._d)c.ac(u),d=u.a1(d);for(var _=e[(d=r).al()]._b;null!=_;_=e[d.al()]._d)c.ae(_),d=_.a1(d);return c}});var en=function(){this._v=new ui,this._x=new ui,this._z=new Ci(3,5),this._w=new Ci(3,5),this._y=!1,this._u=!1,this._t={}};D.ext(en,Object,{xm:function(){return new Ei(this)},xo:function(t,e){return this.xn(t,null,e,null,0,0)},xn:function(t,e,i,n,s,o){return new pi(this,t,e,i,n,s,o)},x4:function(t){this.b3(t)},b3:function(t){for(var e;null!=(e=t._o[0]);)this.x5(e);for(;null!=(e=t._o[1]);)this.x5(e);this._v.c(t),t._g=null,this._y=!0},x5:function(t){this.a11(t)},a11:function(t){if(t._h!==this)throw\"Error\";var e=t.a2(),i=t.a3();this.a12(t,e,i),this._x.c(t),t._h=null,this._u=!0},x7:function(t){t._p=this._v._c,t._g=this,t.ac(),t._c.length<this._z._b&&this._z.a3(t,t._c.length,this._z._b),this._v.a(t),this._y=!0},x8:function(t){if(null!=t._h)throw\"Error\";t._c.length<this._w._b&&this._w.a3(t,t._c.length,this._w._b),null==t._a||t._a._h!==this?this._x.a(t):this._x.b(t,t._a),t._h=this,t.a4(),this.b2(t,t.a2(),null,t.a3(),null,0,0),this._u=!0},xr:function(t,e,i){var n=t.a2(),s=t.a3();null==t._h?(t._d=e,t._e=i):(n!==e&&(n.ar(t,0,0),t._d=e,e.ab(t,null,0,0,0)),s!==i&&(s.ar(t,1,1),t._e=i,i.ab(t,null,1,1,0)))},x3:function(t){this.xr(t,t.a3(),t.a2())},h1:function(t){this.a11(t)},u1:function(t){this.x8(t)},h2:function(t){this.x4(t)},h3:function(t){this.x7(t)},xa:function(){return this._v._c},x0:function(){return this._v._c},xh:function(){return this._x._c},xg:function(){return this._x._c},xb:function(){return 0===this._v._c},xq:function(t){return t._g===this},xp:function(t){return t._h===this},xd:function(){return this._v._a},x9:function(){return new Si(this._v)},xf:function(){return new Si(this._x)},x2:function(t,e){var i=kn.d(this.xh());if(null!=t&&null!=e)for(var n=this.x9();n.i1();n.i2())n.i9().at(t,1,i),n.i9().at(e,0,i);else if(null==e&&null!=t)for(var s=this.x9();s.i1();s.i2())s.i9().at(t,1,i);else if(null!=e&&null==t)for(var o=this.x9();o.i1();o.i2())o.i9().at(e,0,i)},xk:function(){return this._z.b(this._v)},xl:function(){return this._w.c(this._x)},xi:function(t){this._z.a5(t,this._v)},xj:function(t){this._w.a6(t,this._x)},xc:function(t){return this._t[t]},x1:function(t,e){this._t[t]=e},x6:function(t){delete this._t[t]},b2:function(t,e,i,n,s,o,r){e.ab(t,i,0,0,o),n.ab(t,s,1,1,r)},a12:function(t,e,i){e.ar(t,0,0),i.ar(t,1,1)},c:function(){for(var t=0,e=this.x9();e.i1();e.i2())e.i9()._p=t++;this._y=!1},b1:function(){for(var t=0,e=this.xf();e.i1();e.i2())e.i8()._g=t++;this._u=!1},xs:function(t){t.as(this,this._z._b),t._p=this._v._c,this._v.a(t)},xt:function(t,e,i,n,s,o,r){t.a6(this,e,n,this._w._b),t._g=this._x._c,this._x.a(t),this.b2(t,t.a2(),i,t.a3(),s,o,r)}});var nn=function(){nn.superClass.constructor.call(this)};D.ext(nn,en,{gb:function(t){return this.g1(t)},g7:function(t){return this.g2(t)},g5:function(t){var e=this.g1(t);return e.i1()+e.i3()/2},g6:function(t){var e=this.g1(t);return e.i2()+e.i4()/2},g4:function(t){return new ze(this.g5(t),this.g6(t))},gi:function(t){return this.g1(t).i1()},gh:function(t){return this.g1(t).i2()},ga:function(t){var e=this.g1(t);return new ze(e.i1(),e.i2())},gj:function(t){return this.g1(t).i3()},g9:function(t){return this.g1(t).i4()},gm:function(t){return new Fe(this.gj(t),this.g9(t))},s1:function(t,e){this.s2(t,e.x,e.y)},s2:function(t,e,i){var n=this.g1(t);n.i5(e-n.i3()/2,i-n.i4()/2)},s7:function(t,e,i){this.g1(t).i6(e,i)},s8:function(t,e){this.s7(t,e.width,e.height)},s3:function(t,e,i){this.g1(t).i5(e,i)},s4:function(t,e){this.s3(t,e.x,e.y)},gp:function(t){for(var e=this.g2(t),i=new oe,n=0;n<e.i1();n++)i.add(e.i2(n));return new We(i)},gf:function(t){for(var e=this.g2(t),i=new ci,n=0;n<e.i1();n++)i.aa(e.i2(n));return i},gc:function(t){var e=new oe;e.add(this.gs(t));for(var i=this.gp(t).d();i.i1();i.i2())e.add(i.i6());return e.add(this.gl(t)),new We(e)},gd:function(t){var e=new ci;e.aa(this.gs(t));for(var i=this.gp(t).d();i.i1();i.i2())e.aa(i.i6());return e.aa(this.gl(t)),e},m1:function(t,e){var i=this.g2(t);i.i5();var n=e.ah(),s=n.i6();this.gx(t,s);var o=e.as();for(n.i2();n.i6()!==o;n.i2()){var r=n.i6();i.i4(r.x,r.y)}this.gy(t,o)},s5:function(t,e){var i=this.g2(t);i.i5();for(var n=e.d();n.i1();n.i2()){var s=n.i6();i.i4(s.x,s.y)}},s6:function(t,e){var i=this.g2(t);i.i5();for(var n=e.ah();n.i1();n.i2()){var s=n.i6();i.i4(s.x,s.y)}},m2:function(t,e,i){this.gx(t,e),this.gy(t,i)},gn:function(t){return this.g2(t).i6()},gk:function(t){return this.g2(t).i7()},gt:function(t,e){this.g2(t).i8(e)},gz:function(t,e){this.g2(t).i9(e)},gs:function(t){var e=this.g2(t).i6();if(null==e)return this.g4(t.a2());return new ze(this.g5(t.a2())+e.x,this.g6(t.a2())+e.y)},gl:function(t){var e=this.g2(t).i7();if(null==e)return this.g4(t.a3());return new ze(this.g5(t.a3())+e.x,this.g6(t.a3())+e.y)},gx:function(t,e){var i=new ze(e.x-this.g5(t.a2()),e.y-this.g6(t.a2()));this.g2(t).i8(i)},gy:function(t,e){var i=new ze(e.x-this.g5(t.a3()),e.y-this.g6(t.a3()));this.g2(t).i9(i)},g8:function(){for(var t=new di,e=this.xf();e.i1();e.i2())t.aa(e.i8());return t},g3:function(){for(var t,e,i=t=Number.MAX_VALUE,n=e=Number.MIN_VALUE,s=this.x9();s.i1();s.i2()){var o=this.ga(s.i9()),r=this.gm(s.i9());i=Math.min(o.x,i),t=Math.min(o.y,t),n=Math.max(o.x+r.width,n),e=Math.max(o.y+r.height,e)}for(var a=this.xf();a.i1();a.i2())for(var h=this.gp(a.i8()).c();h.i1();h.i2()){var l=h.i6();i=Math.min(l.x,i),t=Math.min(l.y,t),n=Math.max(l.x,n),e=Math.max(l.y,e)}return{x:Math.floor(i),y:Math.floor(t),width:Math.floor(n-i),height:Math.floor(e-t)}}});var sn=function(){sn.superClass.constructor.call(this),this.a(new Ke,new Ye)};D.ext(sn,nn,{a:function(t,e){this._a3=t,this._a4=e},xo:function(t,e){return this.l2(t,e,this._a4.a6())},l2:function(t,e,i){return this.l1(t,null,e,null,0,0,i)},xn:function(t,e,i,n,s,o){return this.l1(t,e,i,n,s,o,this._a4.a6())},l1:function(t,e,i,n,s,o,r){var a=new pi(this,t,e,i,n,s,o);return a._l=r,a},xm:function(){var t=new Ei(this);return t._r=this._a3.m3(),t},g3:function(){for(var t={x:0,y:0,width:-1,height:-1},e=this.x9();e.i1();e.i2())e.i9()._r.m1(t);return t},g1:function(t){return t._r},g2:function(t){return t._l},g5:function(t){return t._r.m4()},g6:function(t){return t._r.m5()},gi:function(t){return t._r.i1()},gh:function(t){return t._r.i2()},gj:function(t){return t._r.i3()},g9:function(t){return t._r.i4()},s2:function(t,e,i){t._r.m6(e,i)},s7:function(t,e,i){t._r.i6(e,i)},s3:function(t,e,i){t._r.i5(e,i)}});var on=function(){on.superClass.constructor.call(this),this._ap=this.xk(),this._as=this.xl()};D.ext(on,nn,{g1:function(t){var e=this._ap.i1(t);return null==e&&(e=new Ai,this._ap.z1(t,e)),e},g2:function(t){var e=this._as.i1(t);return null==e&&(e=new yi,this._as.i8(t,e)),e}});var rn=function(t){rn.superClass.constructor.call(this),this._ay=t,this._a0=this.xk(),this._au=this.xl()};D.ext(rn,on,{c2:function(t){return this._a0.i1(t)},a2:function(t,e){this._a0.z1(t,e)},h:function(){null==this._az&&(this._az=this.xk());for(var t=kn.a(this._ay.x0()+1),e=1,i=this.x9();i.i1();){for(var n=this.c2(i.i9()),s=n.x1();s.i1();s.i2()){t[s.i9().al()]=e}for(var o=new di,r=n.x1();r.i1();r.i2())for(var a=r.i9(),h=t[a.al()],l=a.ap();l.i1();l.i2()){var c=l.i8();t[c.a3().al()]===h&&o.ac(c)}this._az.z1(i.i9(),o),i.i2(),e++}},d1:function(t){return this._az.i1(t)},b:function(t){return this._au.i1(t)},a3:function(t,e){this._au.i8(t,e)},a1:function(){var t=this._ay.xk(),e=Di.a4(kn.a(this._ay.xh())),i=Je.a1(this._ay,e,t),n=Je.a5(this._ay,e,i);this.d2(t,n),this._ay.xi(t)},c1:function(t){for(var e=null,i=-1,n=0,s=t.length;n<s;n++){var o=t[n];o.ay()>i&&(e=o,i=o.ay())}return e},d2:function(t,e){for(var i=this._ay.xl(),n=this._ay.xk(),s=e.length,o=0;o<s;o++)for(var r=e[o],a=r.c1();a.i1();a.i2())i.i8(a.i8(),r);var h=this.c1(e);this.a4(h,t,i,new oe,n);var l={};s=e.length;for(var c=0;c<s;c++){var d=e[c];if(d.ay()>1){var u=this.xm();l[d._id]=u}}for(var _=this._ay.x9();_.i1();_.i2()){var g=_.i9();if(t.i4(g)&&null==n.i1(g)){var f=this.xm();l[g._id]=f;var v=new Li;v.aa(g),this.a2(f,v)}}var m=kn.d(2);s=e.length;for(var p=0;p<s;p++){var w=e[p];if(1===w.ay()){var y=w.c2();m[0]=y.a2(),m[1]=y.a3();for(var A=0;A<2;A++){var x=m[A];if(1===x.ad()){var C=this.xm();l[x._id]=C;var E=new Li;E.aa(x),this.a2(C,E)}}}}for(var T=this._ay.x9();T.i1();T.i2()){var k=T.i9();if(null!=n.i1(k))for(var b=n.i1(k),S=l[b._id],L=k.af();L.i1();L.i2()){var I=L.i8();if(i.i1(I)!==b){var P=l[i.i1(I)._id];if(null==P){var R=I.a1(k),D=n.i1(R);P=null!=D?l[D._id]:l[R._id]}var M=S.aj(P),O=null;null==M?(M=this.xo(S,P),O=new di):O=this.b(M),O.aa(I),this.a3(M,O)}}else if(t.i4(k))for(var B=l[k._id],N=k.af();N.i1();N.i2()){var z=N.i8(),F=l[z.a1(k)._id];if(null!=F){if(null==B.aj(F)){var V=this.xo(B,F),U=new di;U.aa(z),this.a3(V,U)}}}}if(2===this._ay.x0()&&1===this._ay.xg()){var H=this._ay.xf().i8(),W=l[H.a2()._id],Z=l[H.a3()._id];if(null!=Z&&null!=W&&null==Z.aj(W)){var G=this.xo(W,Z),X=new di;X.aa(H),this.a3(G,X)}}var Y=kn.a(this._ay.x0());s=e.length;for(var j=0;j<s;j++){var K=e[j],J=l[K._id];if(null!=J){var q=this.c2(J);null==q&&(q=new Li,this.a2(J,q));for(var Q=K.c1();Q.i1();Q.i2()){var $=Q.i8(),tt=$.a2();1===Y[tt.al()]||t.i4(tt)&&n.i1(tt)!==K||(Y[tt.al()]=1,q.aa(tt)),1===Y[(tt=$.a3()).al()]||t.i4(tt)&&n.i1(tt)!==K||(Y[tt.al()]=1,q.aa(tt))}}}this._ay.xj(i),this._ay.xi(n)},a4:function(t,e,i,n,s){if(!n.contains(t)){n.add(t);for(var o=[],r=t.c1();r.i1();r.i2()){var a=r.i8();o[0]=a.a2(),o[1]=a.a3();for(var h=0;h<2;h++){var l=o[h];if(e.i4(l)&&null==s.i1(l)){t.ay()>1&&s.z1(l,t);for(var c=l.af();c.i1();c.i2()){var d=i.i1(c.i8());this.a4(d,e,i,n,s)}}}}}}});var an=function(t,e,i,n,s){this._a={},an.superClass.constructor.call(this);var o,r,a=new oe;for(o=0,r=e.size();o<r;o++){var h=e.get(o);if(h instanceof R.Link)a.add(h);else{var l=n&&null==s&&h instanceof De;l&&h.setExpanded(!0);var c=t.getDimension(h);if(l&&h.setExpanded(!1),null==c)continue;var d=this.xm(),u=t._repulsion;\"rightleft\"===i||\"leftright\"===i?this.s7(d,c.height*u,c.width*u):this.s7(d,c.width*u,c.height*u),d.node=h,this._a[h.getId()]=d}}for(o=0,r=a.size();o<r;o++){var _=a.get(o),g=_.getFromAgent(),f=_.getToAgent(),v=this._a[g.getId()],m=this._a[f.getId()];null!=v&&null!=m&&v!==m&&this.xo(v,m)}};D.ext(an,sn,{});var hn={};hn._D=new We,hn._E=new ze(0,0),hn.b=function(t){if(t.i1()>0){for(var e=new oe,i=t.i1()-1;i>=0;i--)e.add(t.i2(i));t.i5();for(var n=0,s=e.size();n<s;n++){var o=e.get(n);t.i4(o.x,o.y)}}var r=t.i6();t.i8(t.i7()),t.i9(r)},hn.c=function(t){hn.d(t,!0)},hn.d=function(t,e){if(e)for(var i=t.xf();i.i1();i.i2()){var n=i.i8();t.gt(n,hn._E),t.gz(n,hn._E),t.s5(n,hn._D)}else for(var s=t.xf();s.i1();s.i2())t.s5(s.i8(),hn._D)},hn.e=function(t){for(var e=new ze(0,0),i=t.xf();i.i1();i.i2()){var n=i.i8();t.gt(n,e),t.gz(n,e)}},hn.f=function(t,e,i,n){for(var s=t.gc(e).b(),o=kn.d(s),r=0,a=t.gc(e).c();a.i1();a.i2()){var h=a.i6();(r<=0||!h.equals(o[r-1]))&&(o[r]=new ze(h.x,h.y),r++)}if(!((s=r)<2)){var l=new oe,c=new Ve(o[1].x-o[0].x,o[1].y-o[0].y),d=hn.i(c);d.x*=n,d.y*=n;for(var u=hn.h(o[0],d),_=hn.h(o[1],d),g=new He(u,_),f=1;f<s-1;f++){var v=g,m=hn.i(new Ve(o[f+1].x-o[f].x,o[f+1].y-o[f].y));m.x*=n,m.y*=n;var p=hn.h(o[f],m),w=hn.h(o[f+1],m);g=new He(p,w);var y=He.a6(v,g);null!=y&&l.add(new ze(y.x,y.y))}var A=new Ve(o[s-1].x-o[s-2].x,o[s-1].y-o[s-2].y);(A=hn.i(A)).x*=n,A.y*=n;var x=hn.h(o[s-1],A),C=new We(l);e.a2()===i.a2()?(t.s5(i,C),t.m2(i,u,x)):(t.s5(i,C.a()),t.m2(i,x,u))}},hn.g=function(t,e,i,n){for(var s=n,o=i.c1();o.i1();o.i2()){var r=o.i8();hn.f(t,e,r,s),s<0&&(s-=n),s=-s}},hn.a=function(t,e,i){return hn.j(t,e,i,1)},hn.l=function(t,e,i){if(null==t||t.length<1)return null!=e&&(e.x=0,e.y=0,e.width=0,e.height=0),{width:0,height:0};for(var n=0,s=0,o=0;o<t.length;o++){var r=t[o];n=Math.max(n,r.width),s=Math.max(s,r.height)}var a,h,l=n*s*t.length,c=l/Math.sqrt(l/i),d=Math.floor(c/n),u=Math.ceil(c/n),_=Math.ceil(t.length/d),g=Math.ceil(t.length/u);d*_<u*g?(a=d,h=_):(a=u,h=g);var f,v=0,m=0,p=0,w=0;if(n>s)for(var y=0;y<t.length;y++)(f=t[y]).x=m*n,f.y=v*s,p=Math.max(p,f.x+f.width),w=Math.max(w,f.y+f.height),++m>=a&&(v++,m=0);else for(var A=0;A<t.length;A++)(f=t[A]).x=m*n,f.y=v*s,p=Math.max(p,f.x+f.width),w=Math.max(w,f.y+f.height),++v>=h&&(m++,v=0);return null!=e&&(e.x=0,e.y=0,e.width=p,e.height=w),{width:h,height:a}},hn.j=function(t,e,i,n){if(null==t||t.length<1)return null!=e&&(e.x=0,e.y=0,e.width=0,e.height=0),0;for(var s,o,r=s=t[0].width,a=o=t[0].height,h=t.length,l=1;l<h;l++){var c=t[l].width;r=Math.min(r,c),s=Math.max(s,c);var d=t[l].height;a=Math.min(a,d),o=Math.max(o,d)}if(a/o>.95&&r/s>.95)return hn.l(t,e,i).width;for(var u=new ci,_=0,g=0;g<h;g++){var f=t[g];u.aa(t[g]),_=Math.floor(_+f.width*f.height)}u.a1(function(t,e){var i=Math.floor(e.height)-Math.floor(t.height);return 0===i?Math.floor(e.width)-Math.floor(t.width):i});var v=0,m=0,p=Math.floor(i*Math.sqrt(_/i)),w=0,y=new ci;do{var A=new ci;y.aa(A);for(var x,C,E=x=C=0,T=u.ah();T.i1();T.i2()){var k=T.i6();E+k.width>p&&A.ay()>0?(C=Math.max(C,E),(A=new ci).aa(k),y.aa(A),E=Math.floor(k.width)):(A.aa(k),E=Math.floor(E+k.width)),1===A.ay()&&(x=Math.floor(x+A.am().height))}i*x>(C=Math.max(C,E))&&w!==C&&(y.af(),p=Math.floor(1.1*p),w=C)}while(y.ar());for(var b=0,S=y.ah();S.i1();S.i2()){for(var L=0,I=S.i6(),P=I.ah();P.i1();P.i2()){var R=P.i6();R.x=L,R.y=b,L+=R.width}v=Math.max(v,L),b+=hn.k(I),m=Math.max(m,b)}return null!=e&&(e.x=0,e.y=0,e.width=v,e.height=m),y.ay()},hn.k=function(t){for(var e=0,i=t.ah();i.i1();i.i2())e=Math.max(i.i6().height,e);return e},hn.h=function(t,e){return new ze(t.x+e.x,t.y+e.y)},hn.i=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return new Ve(-t.y/e,t.x/e)};var ln=function(t){this._a=t,this._b=!1};D.ext(ln,Object,{a:function(){return this._b},b:function(){return this._a},c:function(){return 1===this._a},d:function(){return 2===this._a},e:function(){return 4===this._a},f:function(){return 8===this._a},g:function(){return 0===this._a}}),ln.h=function(t,e){var i=t.xc(\"A\");return null==i?null:i.i1(e)},ln.i=function(t,e){var i=t.xc(\"B\");return null==i?null:i.i1(e)},ln.j=function(t){switch(t){case 1:return ln.k;case 2:return ln.l}return null},ln.k=new ln(1),ln.l=new ln(2);var cn=function(t,e,i,n,s){this._o=0,this._l=0,this._i=0,this._d=0,this._f=0,this._b=t,this._a=1e-4,this._r=e,this._p=1,this._e=(s.gj(t)+s.g9(t))/4;var o=.45*i*Math.sqrt(n);this._k=$i.l(-o,o),this._h=$i.l(-o,o),this._g=$i.l(-o,o)};D.ext(cn,Object,{});var dn=function(){this._a=0,this._c=0,this._b=0};D.ext(dn,Object,{});var un=function(){un.superClass.constructor.call(this),this._dj=0,this._dh=0,this._dq=0,this._dp=0,this._dt=0,this._de=0,this._d3=0,this._dr=0,this._ed=0,this._dw=.65,this._ea=1,this._dl=80,this._dx=3,this._d8=!0,this._eb=3e5,this._ee=2,this._di=2,this._df=1e3};D.ext(un,Bi,{i4:function(t){return!0},i3:function(t){if(null!=t&&(this._d5=t,this.s(t))){var e=new dn,i=0,n=Math.floor(this._dx*(this._dz.length*this._dz.length)+20*this._dz.length);n=Math.max(n,1e4);var s=this._ea*this._ea*this._dz.length,o=this._df;try{for(;this._dj>s&&i<n;i++){var r=this.b(2147483647&i);0==o--&&(this._dy.b()>this._eb&&(i=n),o=this._df),this.h(r,e),this.d(r,e),this.i(r,e),this._d8?(this.g(r,e),this.j(r,e)):(this.f(r,e),this.c(r,e));var a=Math.sqrt(e._a*e._a+e._c*e._c+e._b*e._b);this.ac(r,e,a),this.aa(r,e,a)}}catch(t){}finally{this.r()}}},s:function(t){if(null==t||t.xa()<1)return!1;this._d5=t,this._dp=1,this._dy=new Qi,this._dt=t.x0(),this._d2=kn.d(this._dt),this._df=1+1e5/this._dt,this._ed=1/(2*this._di),this._de=this._ed*this._ee/(.05*this._dl),this._d3=Math.pow(this._dl,-1)*this._ed,this._dr=Math.pow(this._dl,3)*this._ed,this._dj=0,this._du=new dn,this._dq=Math.max(20*this._dl,10);var e=Math.max(.1,Math.min(this._dw*this._dl,this._dq)),i=this._dt;hn.c(t),this._dz=kn.d(i);for(var n=t.x9();n.i1();n.i2()){var s=n.i9(),o=new cn(s,e,this._dl,this._dt,t);this._dz[--i]=o,this._dj+=o._r,this._dh+=o._r*o._r,this._du._a+=o._k,this._du._c+=o._h,this._du._b+=o._g,this._d2[s.al()]=o}return this._d8=!1,this._dz.length>0},b:function(t){var e=this._dz.length,i=e-t%e-1,n=$i.k(i+1),s=this._dz[n];return this._dz[n]=this._dz[i],this._dz[i]=s,s},f:function(t,e){for(var i,n,s=i=n=0,o=t._b.ae();null!=o;o=o.a7()){var r,a=this._d2[o.a2().al()],h=a._k-t._k,l=a._h-t._h,c=a._g-t._g,d=h*h+l*l+c*c,u=Math.sqrt(d),_=u-(a._e+t._e);_<=0||(s+=h*(r=_*_*this._d3/u),i+=l*r,n+=c*r)}for(var g=t._b.ag();null!=g;g=g.a8()){var f,v=this._d2[g.a3().al()],m=v._k-t._k,p=v._h-t._h,w=v._g-t._g,y=m*m+p*p+w*w,A=Math.sqrt(y),x=A-(v._e+t._e);x<=0||(s+=m*(f=x*x*this._d3/A),i+=p*f,n+=w*f)}e._a+=s,e._c+=i,e._b+=n},g:function(t,e){var i,n,s=i=n=0;this._dp++,t._f=this._dp;for(var o=t._b.ae();null!=o;o=o.a7()){var r=this._d2[o.a2().al()];r._f=this._dp;var a=r._k-t._k,h=r._h-t._h,l=r._g-t._g,c=a*a+h*h+l*l,d=Math.sqrt(c);if(0!==d){var u=Math.max(1e-6,d-(t._e+r._e)),_=-this._ef[o.a5()]/(u*u);_+=u*u*this._d1[o.a5()],s+=a*(_/=d),i+=h*_,n+=l*_}}for(var g=t._b.ag();null!=g;g=g.a8()){var f=this._d2[g.a3().al()];f._f=this._dp;var v=f._k-t._k,m=f._h-t._h,p=f._g-t._g,w=v*v+m*m+p*p,y=Math.sqrt(w);if(0!==y){var A=Math.max(1e-6,y-(t._e+f._e)),x=-this._ef[g.a5()]/(A*A);x+=A*A*this._d1[g.a5()],s+=v*(x/=y),i+=m*x,n+=p*x}}e._a+=s,e._c+=i,e._b+=n},j:function(t,e){for(var i,n,s=i=n=0,o=this._dt-1;o>=0;o--){var r=this._d2[o];if(r._f!==t._f){var a=t._k-r._k,h=t._h-r._h,l=t._g-r._g,c=a*a+h*h+l*l;if(0!==c){var d=Math.sqrt(c),u=Math.max(1e-6,d-(t._e+r._e)),_=this._dr/(u*u*d);s+=a*_,i+=h*_,n+=l*_}}}e._a+=s,e._c+=i,e._b+=n},c:function(t,e){for(var i,n,s=i=n=0,o=this._dt-1;o>=0;o--){var r=this._d2[o],a=t._k-r._k,h=t._h-r._h,l=t._g-r._g,c=a*a+h*h+l*l;if(0!==c){var d,u=Math.sqrt(c),_=u-(t._e+r._e);s+=a*(d=_<=0?this._dr/(1e-8*u):this._dr/(_*_*u)),i+=h*d,n+=l*d}}e._a+=s,e._c+=i,e._b+=n},i:function(t,e){var i=this._du._b/this._dt-t._g;e._b+=i*this._dl*this._dt/this._dh},d:function(t,e){if(0!==this._de){var i=this._du._a/this._dt-t._k,n=this._du._c/this._dt-t._h,s=this._du._b/this._dt-t._g;e._a+=i*this._de,e._c+=n*this._de,e._b+=s*this._de}},h:function(t,e){var i=.05*(t._r+2);i>0&&(e._a=$i.l(-i,i),e._c=$i.l(-i,i),e._b=$i.l(-i,i))},ac:function(t,e,i){if(0!==i&&0!==t._a){var n=(e._a*t._o+e._c*t._l+e._b*t._i)/(i*t._a);this._dh-=t._r*t._r,this._dj-=t._r,t._p*n>0?t._r+=.45*n:t._r+=.15*n,t._r>this._dq?t._r=this._dq:t._r<.1&&(t._r=.1),this._dj+=t._r,this._dh+=t._r*t._r,t._p=n}},aa:function(t,e,i){if(i>0){var n=t._r/i,s=e._a*n,o=e._c*n,r=e._b*n;t._k+=s,t._h+=o,t._g+=r,this._du._a+=s,this._du._c+=o,this._du._b+=r,t._a=i,t._o=e._a,t._l=e._c,t._i=e._b}},r:function(){for(var t=this._d2.length-1;t>=0;t--){var e=this._d2[t];this._d5.s2(e._b,e._k,e._h)}}});var _n=function(t,e,i,n){this._e=t,this._f=e,this._a=i,this._b=n,this._c={}};D.ext(_n,Object,{resetGroup:function(){if(this._a&&null==this._b)for(var t in this._c){var e=this._c[t];this._e.isExpandGroup()?e.group.setExpanded(!0):e.group.setExpanded(e.b)}},process:function(){for(var t=new oe,e=0,i=this._f.size();e<i;e++){var n=this._f.get(e);if(n instanceof R.Link)n.isLooped()||t.add(n);else{if(null==this._b&&n.getParent()instanceof De)continue;(null==this._b||null!=this._b&&this._b!==n)&&t.add(n),null==this._b&&n instanceof De&&this.layoutGroup(n)}}return t},layoutGroup:function(t){if(this._a&&null==this._c[t.getId()]&&null==this._b){this._c[t.getId()]={group:t,b:t.isExpanded()};var e=this._e.getGroupLayoutType(t);if(e){t.setExpanded(!0);for(var i,n=new oe,s=t.getChildren(),o=0,r=s.size();o<r;o++)if((i=s.get(o))instanceof De&&(this.layoutGroup(i),i.setExpanded(!1)),i instanceof R.Link||n.contains(i)||n.add(i),i instanceof Pe){var a=i.getLinks();if(null!=a)for(var h=0,l=a.size();h<l;h++){var c=a.get(h);n.contains(c)||n.add(c)}}var d=new an(this._e,n,e,this._a,this._b);try{var u=null;if(\"round\"===e?u=new qi:\"symmetry\"===e?u=new un:\"hierarchic\"===e?u=new xn:\"topbottom\"!==e&&\"bottomtop\"!==e&&\"rightleft\"!==e&&\"leftright\"!==e||(u=new Ni),null!=u){u.i2(d);var _=_n.createMatrix(e),g={},f={};for(var v in d._a){var m=d._a[v],p=m.node,w=d.g4(m);if(g[v]=p.getCenterLocation(),null!=_){var y=_.transform(w);p.setCenterLocation(y.x,y.y)}else p.setCenterLocation(w.x,w.y);f[v]=p.getCenterLocation()}}}catch(t){}for(o=0,r=(s=t.getChildren()).size();o<r;o++)(i=s.get(o))instanceof De&&i.setExpanded(!0)}}}}),_n.createMatrix=function(t){return\"rightleft\"===t?W.createMatrix(Math.PI/2,0,0):\"leftright\"===t?W.createMatrix(-Math.PI/2,0,0):\"bottomtop\"===t?W.createMatrix(Math.PI,0,0):null};var gn=function(){};D.ext(gn,Object,{i1:function(t,e,i){var n=this.a1(t,e);return this.a2(t,e,i),n},a1:function(t,e){var i=gn.i4(t);i.ax();for(var n=0,s=i.x1();s.i1();s.i2())e.i7(s.i9(),-1);for(var o=i.x1();o.i1();o.i2()){for(var r=o.i9(),a=-1,h=r.aq();h.i1();h.i2())a=Math.max(a,e.i2(h.i9()));e.i7(r,a+1),n=Math.max(n,a+1)}return n+1},a2:function(t,e,i){i.az(gn.i3(t,e))}}),gn.i3=function(t,e){for(var i=new di,n=t.xf();n.i1();n.i2()){var s=n.i8();e.i2(s.a2())>e.i2(s.a3())&&(t.x3(s),i.ac(s))}return i},gn.i4=function(t){var e=kn.a(t.xa());return(new ii).a1(t,e),gn.i2(t,e)},gn.i2=function(t,e){for(var i=kn.d(t.x0()),n=t.x9();n.i1();n.i2()){var s=n.i9();i[e[s.al()]]=s}return new Li(i)};var fn=function(){fn.superClass.constructor.call(this),this.c0()};D.ext(fn,di,{c0:function(){this._bc=1,this._bd=0}});var vn=function(){this._m1=20,this._m2=60,this._m3=5,this._m4=0};D.ext(vn,Object,{i4:function(t){this._m3=t},i5:function(t){this._m4=t},i3:function(t){this._m1=t},i6:function(t){this._m2=t},i2:function(t){this._m5=t},t1:function(){return this._m2},a1:function(t,e){for(var i=kn.d(e.length),n=0;n<e.length;n++)i[n]=e[n].x1();this.a2(t,i)},a2:function(t,e){for(var i=kn.a(e.length),n=0,s=0;s<e.length;s++){var o=0,r=e[s];for(r.i4();r.i1();r.i2())o=Math.max(o,t.g9(r.i9()));for(i[s]=o,r.i4();r.i1();r.i2()){var a=(i[s]-t.g9(r.i9()))/2;t.s4(r.i9(),new ze(t.gi(r.i9()),n+a))}var h=this.t1();n+=i[s]+h,r.i4()}},i1:function(t,e,i){this._m6=t,this.t2(e,i)}});var mn=function(t,e){mn.superClass.constructor.call(this)};D.ext(mn,vn,{t2:function(t,e){var i=this._m6;this._a=i.xc(\"D\"),this._h=i.xc(\"C\"),this.a1(i,t),this.tg(i,t),this.tf(t,Di.a5(this._e),this._m5,this._l),this.tb(i,this._f[0]),this.ta(t),this.th(i,this._f[0],t),this.b(t),this.tb(i,this._f[1]),this.ta(t),this.th(i,this._f[1],t),this.b(t),this.a11(this._f[1]),this.a12(t),this.tb(i,this._f[2]),this.ta(t),this.th(i,this._f[2],t),this.b(t),this.tb(i,this._f[3]),this.ta(t),this.th(i,this._f[3],t),this.b(t),this.a11(this._f[3]),this.a12(t),this.tc(i),this.tj()},a11:function(t){for(var e=0;e<t.length;e++)t[e]=-t[e]},b:function(t){for(var e=0;e<t.length;e++){t[e].ax()}for(var i=0;i<t.length;i++)for(var n=0,s=null,o=t[i].x1();o.i1();o.i2()){var r=o.i9(),a=r.al();this._l[a]=n++,this._b[a]=s,this._k[a]=null,null!=s&&(this._k[s.al()]=r),s=r}var h=this._a;this._a=this._h,this._h=h;for(var l=this._m6.xf();l.i1();l.i2()){var c=l.i8(),d=this._m6.gn(c);this._m6.gt(c,new ze(-d.x,d.y));var u=this._m6.gk(c);this._m6.gz(c,new ze(-u.x,u.y))}var _=this._l;this._m6.x2(function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:_[t.a2().al()]-_[e.a2().al()]},function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:_[t.a3().al()]-_[e.a3().al()]})},a12:function(t){for(var e=this._m6.xf();e.i1();e.i2()){var i=e.i8();this._m6.x3(i);var n=this._m6.gn(i),s=this._m6.gk(i);this._m6.gz(i,n),this._m6.gt(i,s)}for(var o=new ci,r=0;r<t.length;r++)o.ae(t[r]);for(var a=0;a<t.length;a++)t[a]=o.au();var h=this._l;this._m6.x2(function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:h[t.a2().al()]-h[e.a2().al()]},function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:h[t.a3().al()]-h[e.a3().al()]})},tg:function(t,e){var i=t.x0(),n=t.xg();this._l=kn.a(i),this._b=kn.d(i),this._k=kn.d(i),this._m=kn.d(i),this._i=kn.d(i),this._o=kn.d(i),this._f=kn.e(4,i),this._c=kn.a(i),this._g=kn.a(i),this._j=kn.a(i),this._d=kn.b(i),this._e=kn.b(n);for(var s=0;s<e.length;s++)for(var o=0,r=null,a=e[s].x1();a.i1();a.i2()){var h=a.i9(),l=h.al();this._l[l]=o++,this._b[l]=r,this._k[l]=null,null!=r&&(this._k[r.al()]=h),r=h}var c=this._l;t.x2(function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:c[t.a2().al()]-c[e.a2().al()]},function(t,e){return null==t&&null!=e?1:null!=t&&null==e?-1:null==t&&null==e?0:c[t.a3().al()]-c[e.a3().al()]})},tb:function(t,e){for(var i=t.x9();i.i1();i.i2()){var n=i.i9(),s=n.al();this._m[s]=n,this._i[s]=n,e[s]=Number.MAX_VALUE,this._o[s]=n,this._c[s]=Number.MAX_VALUE,this._d[s]=!1,this._j[s]=this._g[s]=0}},ta:function(t){for(var e=1;e<t.length;e++)for(var i=-1,n=t[e]._b;null!=n;n=n.a()){var s=n.d(),o=s.al(),r=s.ak();if(0!==r){var a,h=Math.floor((r+1)/2),l=Math.ceil((r+1)/2),c=1;for(a=s.ae();c<h;a=a.a7())c++;for(var d=!1;c<=l&&!d;c++){var u=this._m6.g2(a),_=a.a2().al();this._i[o]===s&&!this._e[a.a5()]&&i<this._l[_]&&(i=this._l[_],this._i[_]=s,this._m[o]=this._m[_],this._i[o]=this._m[o],d=!0,this._j[_]=u.i6().x,this._g[o]=u.i7().x),a=a.a7()}}}},th:function(t,e,i){for(var n=t.x9();n.i1();n.i2()){var s=n.i9(),o=s.al();this._m[o]===s&&this.td(t,s,e)}for(var r=0;r<i.length;r++){if(i[r].x1().i1()){var a=i[r].x1().i9(),h=a.al();this._o[this._m[h].al()]===a&&this.tk(t,a,e)}}for(var l=t.x9();l.i1();l.i2()){var c=l.i9().al(),d=this._c[this._o[this._m[c].al()].al()];d<Number.MAX_VALUE&&(e[c]+=d)}},td:function(t,e,i){var n=e.al();if(i[n]===Number.MAX_VALUE){i[n]=0;var s=e,o=0;do{var r=s.al();if(r!==n&&(o-=this._g[r]),this._l[r]>0){var a=this._b[r],h=this._m[this._b[r].al()],l=h.al();this.td(t,h,i),this._o[n]===e&&(this._o[n]=this._o[l]),this._o[n]===this._o[l]&&(i[n]=Math.max(i[n],i[a.al()]+this.ti(t,a,s)-o))}o+=this._j[r],s=this._i[r]}while(s!==e);o=0,s=e;do{var c=s.al();c!==n&&(o-=this._g[c]),i[c]=i[n]+o,o+=this._j[c],s=this._i[c]}while(s!==e)}},tk:function(t,e,i){var n=e.al();if(!this._d[n]){this._d[n]=!0;var s=e;do{var o=s.al(),r=this._k[o];if(null!=r){var a=r.al(),h=this._o[this._m[a].al()];if(h!==this._o[n]){var l=i[a]-i[n]-this.ti(t,s,r);this._c[h.al()]!==Number.MAX_VALUE&&(l+=this._c[h.al()]),this._c[this._o[n].al()]=Math.min(this._c[this._o[n].al()],l)}else this.tk(t,this._m[a],i)}s=this._i[o]}while(s!==e)}},tc:function(t){for(var e=kn.a(4),i=kn.a(4),n=t.x9();n.i1();n.i2()){var s=n.i9().al();i[0]+=this._f[0][s],i[1]+=this._f[1][s],i[2]+=this._f[2][s],i[3]+=this._f[3][s]}i[0]/=t.xa(),i[1]/=t.xa(),i[2]/=t.xa(),i[3]/=t.xa();for(var o=t.x9();o.i1();o.i2()){var r=o.i9(),a=r.al(),h=t.g4(r);e[0]=this._f[0][a]-i[0],e[1]=this._f[1][a]-i[1],e[2]=this._f[2][a]-i[2],e[3]=this._f[3][a]-i[3],e.sort(kn.n);var l=(e[1]+e[2])/2;t.s1(r,new ze(l,h.y))}},ti:function(t,e,i){var n,s=t.gj(e),o=t.gj(i);return n=s>1&&o>1?this._m1+(s+o)/2:this._m3+(s+o)/2,this._l[e.al()]<this._l[i.al()]?(null!=this._a&&(n+=this._a.i3(i)),null!=this._h&&(n+=this._h.i3(e))):(null!=this._a&&(n+=this._a.i3(e)),null!=this._h&&(n+=this._h.i3(i))),n},tj:function(){this._l=null,this._b=null,this._k=null,this._e=null,this._m=null,this._i=null,this._f=null,this._c=null,this._o=null,this._d=null,this._j=null,this._g=null},tf:function(t,e,i,n){for(var s=t.length,o=2;o<s-1;o++)for(var r=-1,a=0,h=0,l=t[o].x1(),c=t[o].x1();c.i1();c.i2()){var d=c.i9(),u=null,_=!1;if(1===d.ak()&&(u=d.ae().a2(),null!=i.i1(u)&&null!=i.i1(d)&&(_=!0)),h===t[o].ay()-1||_){for(var g=_?n[u.al()]:t[o-1].ay();a<=h;a++){for(var f=l.i9().am();f.i1();f.i2()){var v=n[f.i8().a2().al()];(v<r||v>g)&&e.i7(f.i8(),!0)}l.i2()}r=g}h++}}});var pn=function(t,e){this._b=20,this._a=e,this._d=t,this._f={}};D.ext(pn,Object,{a3:function(t){this._b=t},a4:function(t,e,i,n,s){if(this.a2(t)){var o=this.b2(t);o._o=e,o._m=s,o._n=n,o._f=i}},b2:function(t){var e=this._f[t._id];return null==e&&(e=new wn,this._f[t._id]=e),e},a2:function(t){return null!=this._f[t._id]},c:function(){for(var t=Di.a1(kn.a(this._d.xa())),e=Di.a1(kn.a(this._d.xa())),i=this._d.x9();i.i1();i.i2()){var n=i.i9();if(this.a2(n)){var s=this.b2(n);t.i6(n,this._b*(s.c()-1)),e.i6(n,this._b*(s.b()-1))}}this._d.x1(\"D\",t),this._d.x1(\"C\",e)},g:function(){this._d.x6(\"D\"),this._d.x6(\"C\")},f:function(){for(var t=this._d.x9();t.i1();t.i2()){var e=t.i9();if(this.a2(e)){var i=this._d.gi(e),n=this._d.gh(e),s=this._d.gj(e),o=this._d.g9(e),r=this.b2(e),a=r._q.ay()+r._b.ay()+r._f,h=r._d.ay()+r._g.ay()+r._o,l=r._i.ay()+r._l.ay()+r._n,c=r._h.ay()+r._k.ay()+r._m,d=this._a.a7(s,a),u=this._a.a7(s,h),_=this._a.a7(o,c),g=this._a.a7(o,l);r.a2(this._a.a8(s,a,d),this._a.a8(s,h,u),this._a.a8(o,c,_),this._a.a8(o,l,g));for(var f=r._j.c1();f.i1();f.i2()){var v=f.i8(),m=this.a1(v),p=this.b1(v),w=new ci;m.b()===p.b()?(m.c()?(w.aa(new ze(i+r._g._bd*u+r._c,n)),w.aa(new ze(i+r._g._bd*u+r._c,n-this._b)),r._g._bd++,w.aa(new ze(i+r._g._bd*u+r._c,n-this._b)),w.aa(new ze(i+r._g._bd*u+r._c,n)),r._g._bd++,r._g._bc=Math.max(r._g._bc,2)):m.d()?(w.aa(new ze(i+r._b._bd*d+r._p,n+o)),w.aa(new ze(i+r._b._bd*d+r._p,n+o+this._b)),r._b._bd++,w.aa(new ze(i+r._b._bd*d+r._p,n+o+this._b)),w.aa(new ze(i+r._b._bd*d+r._p,n+o)),r._b._bd++,r._b._bc=Math.max(r._b._bc,2)):m.f()?(w.aa(new ze(i,n+r._i._bd*g+r._a)),w.aa(new ze(i-this._b,n+r._i._bd*g+r._a)),r._i._bd++,w.aa(new ze(i-this._b,n+r._i._bd*g+r._a)),w.aa(new ze(i,n+r._i._bd*g+r._a)),r._i._bd++,r._i._bc=Math.max(r._i._bc,2)):m.e()&&(w.aa(new ze(i+s,n+r._h._bd*_+r._e)),w.aa(new ze(i+s+this._b,n+r._h._bd*_+r._e)),r._h._bd++,w.aa(new ze(i+s+this._b,n+r._h._bd*_+r._e)),w.aa(new ze(i+s,n+r._h._bd*_+r._e)),r._h._bd++,r._h._bc=Math.max(r._h._bc,2)),this._d.m1(v,w)):m.c()||p.c()?m.e()||p.e()?(w.aa(new ze(i+s-r._d._bd*u-r._c,n)),w.aa(new ze(i+s-r._d._bd*u-r._c,n-this._b*r._d._bc)),w.aa(new ze(i+s+this._b*r._h._bc,n-this._b*r._d._bc)),w.aa(new ze(i+s+this._b*r._h._bc,n+r._h._bd*_+r._e)),w.aa(new ze(i+s,n+r._h._bd*_+r._e)),r._d._bd++,r._d._bc++,r._h._bd++,r._h._bc++,p.c()&&w.ax(),this._d.m1(v,w)):m.f()||p.f()?(w.aa(new ze(i+r._g._bd*u+r._c,n)),w.aa(new ze(i+r._g._bd*u+r._c,n-this._b*r._g._bc)),w.aa(new ze(i-this._b*r._i._bc,n-this._b*r._g._bc)),w.aa(new ze(i-this._b*r._i._bc,n+r._i._bd*g+r._a)),w.aa(new ze(i,n+r._i._bd*g+r._a)),r._g._bd++,r._g._bc++,r._i._bd++,r._i._bc++,p.c()&&w.ax(),this._d.m1(v,w)):(m.d()||p.d())&&(w.aa(new ze(i+s-r._d._bd*u-r._c,n)),w.aa(new ze(i+s-r._d._bd*u-r._c,n-this._b*r._d._bc)),w.aa(new ze(i+s+this._b*r.b(),n-this._b*r._d._bc)),w.aa(new ze(i+s+this._b*r.b(),n+o+this._b*r._q._bc)),w.aa(new ze(i+s-r._q._bd*d-r._p,n+o+this._b*r._q._bc)),w.aa(new ze(i+s-r._q._bd*d-r._p,n+o)),r._d._bd++,r._d._bc++,r._k._bc++,r._h._bc++,r._q._bc++,r._q._bd++,p.c()&&w.ax(),this._d.m1(v,w)):m.d()||p.d()?m.e()||p.e()?(w.aa(new ze(i+s-r._q._bd*d-r._p,n+o)),w.aa(new ze(i+s-r._q._bd*d-r._p,n+o+this._b*r._q._bc)),w.aa(new ze(i+s+this._b*r._k._bc,n+o+this._b*r._q._bc)),w.aa(new ze(i+s+this._b*r._k._bc,n+o-r._k._bd*_-r._e)),w.aa(new ze(i+s,n+o-r._k._bd*_-r._e)),r._q._bd++,r._q._bc++,r._k._bd++,r._k._bc++,p.d()&&w.ax(),this._d.m1(v,w)):(m.f()||p.f())&&(w.aa(new ze(i+r._b._bd*d+r._p,n+o)),w.aa(new ze(i+r._b._bd*d+r._p,n+o+this._b*r._b._bc)),w.aa(new ze(i-this._b*r._l._bc,n+o+this._b*r._b._bc)),w.aa(new ze(i-this._b*r._l._bc,n+o-r._l._bd*g-r._a)),w.aa(new ze(i,n+o-r._l._bd*g-r._a)),r._b._bd++,r._b._bc++,r._l._bd++,r._l._bc++,p.d()&&w.ax(),this._d.m1(v,w)):(w.aa(new ze(i,n+o-r._l._bd*g-r._a)),w.aa(new ze(i-this._b*r._l._bc,n+o-r._l._bd*g-r._a)),w.aa(new ze(i-this._b*r._l._bc,n+o+this._b*r.a1())),w.aa(new ze(i+s+this._b*r._k._bc,n+o+this._b*r.a1())),w.aa(new ze(i+s+this._b*r._k._bc,n+o-r._k._bd*_-r._e)),w.aa(new ze(i+s,n+o-r._k._bd*_-r._e)),r._l._bd++,r._l._bc++,r._b._bc++,r._q._bc++,r._k._bc++,r._k._bd++,p.f()&&w.ax(),this._d.m1(v,w))}}}},a5:function(t,e){for(var i=0;i<t.length;i++)for(var n=t[i],s=e[i],o=n.x1();o.i1();o.i2()){var r=o.i9();if(this.a2(r)){var a=this.b2(r);s._g=Math.max(s._g,this._b*(a.d()-1)),s._j=Math.max(s._j,this._b*(a.a1()-1))}}},a1:function(t){var e=this._d.xc(\"A\"),i=null;if(null!=e&&(i=e.i1(t)),null==i||i.g()){var n=this._d.xc(\"B\");if(null==n)return ln.j(1);var s=n.i1(t);if(null==s||s.g())return ln.j(1);if(s.c())return ln.j(8);if(s.f())return ln.j(1);if(s.d())return ln.j(4);if(s.e())return ln.j(2)}return i},b1:function(t){var e=this._d.xc(\"B\"),i=null;if(null!=e&&(i=e.i1(t)),null==i||i.g()){var n=this._d.xc(\"A\");if(null==n)return ln.j(8);var s=n.i1(t);if(null==s||s.g())return ln.j(8);if(s.c())return ln.j(8);if(s.f())return ln.j(1);if(s.d())return ln.j(4);if(s.e())return ln.j(2)}return i}});var wn=function(){this._o=0,this._f=0,this._n=0,this._m=0,this._c=0,this._p=0,this._e=0,this._a=0,this._j=new di,this._g=new fn,this._d=new fn,this._b=new fn,this._q=new fn,this._h=new fn,this._k=new fn,this._i=new fn,this._l=new fn};D.ext(wn,Object,{a1:function(){return Math.max(this._q._bc,this._b._bc)},d:function(){return Math.max(this._d._bc,this._g._bc)},b:function(){return Math.max(this._k._bc,this._h._bc)},c:function(){return Math.max(this._l._bc,this._i._bc)},a2:function(t,e,i,n){this._c=e,this._a=n,this._p=t,this._e=i,this._g.c0(),this._d.c0(),this._b.c0(),this._q.c0(),this._k.c0(),this._h.c0(),this._l.c0(),this._i.c0()}});var yn=function(t,e,i,n){this._k=20,this._r=.5,this._d=t,this._c=e,this._j=i,this._m=n,this._i=null!=t.xc(\"A\")||null!=t.xc(\"B\"),this._t=new Cn(t,e,i,n),this._b=new pn(t,this)};D.ext(yn,Object,{a6:function(t){this._k=t,this._t.a1(t),this._b.a3(t)},g1:function(){return this._k},a9:function(t){return this.c1(),t},a5:function(t){return this.a1(),t},b3:function(t){return this.c1(),t=this.c4(t),this._b.c(),t},g2:function(t){return this._b.g(),t},e2:function(t){t=this.f(t),this._b.f()},e1:function(){this._t.d(),null!=this._n&&this._d.xi(this._n),this.a1(),this._d=null},a1:function(){this._i&&(null!=this._q&&(this._d.x1(\"A\",this._q),this._q=null),null!=this._p&&(this._d.x1(\"B\",this._p),this._p=null),null!=this._h&&(this._d.xj(this._h),this._h=null),null!=this._l&&(this._d.xj(this._l),this._l=null))},c1:function(){if(this._i){null==this._h&&(this._h=this._d.xl()),null==this._l&&(this._l=this._d.xl());for(var t=this._d.xf();t.i1();t.i2()){var e=t.i8(),i=null!=this._j.i1(e.a2()),n=null!=this._j.i1(e.a3());if(i&&!n){var s=this._j.i1(e.a2());this._m.i4(s)?this._l.i8(e,ln.h(this._d,s)):this._l.i8(e,ln.i(this._d,s))}else if(!i&&n){var o=this._j.i1(e.a3());this._m.i4(o)?this._h.i8(e,ln.i(this._d,o)):this._h.i8(e,ln.h(this._d,o))}else i||n||(this._m.i4(e)?(this._h.i8(e,ln.i(this._d,e)),this._l.i8(e,ln.h(this._d,e))):(this._h.i8(e,ln.h(this._d,e)),this._l.i8(e,ln.i(this._d,e))))}this._q=this._d.xc(\"A\"),this._p=this._d.xc(\"B\"),this._d.x1(\"A\",this._h),this._d.x1(\"B\",this._l)}},c4:function(t){this._n=this._d.xk(),this._a=this._d.xl(),this._g=this._d.xl();for(var e=new di,i=new di,n=new di,s=new di,o=new di,r=new di,a=new di,h=new di,l=new di,c=this._d.xk(),d=0;d<t.length;d++)for(var u=0,_=t[d].x1();_.i1();)c.i6(_.i9(),u),_.i2(),u++;for(var g=function(t,e){var i=c.i3(t.a3())-c.i3(e.a3());return i<=0?i>=0?0:-1:1},f=function(t,e){var i=c.i3(t.a2())-c.i3(e.a2());return i<=0?i>=0?0:-1:1},v=0;v<t.length;v++)for(var m=t[v],p=m._b;null!=p;p=p.a()){var w=p.d();w.av(g),w.au(f);e.af(),i.af(),n.af(),s.af(),o.af(),r.af(),a.af(),h.af(),l.af();for(var y=w.ap();y.i1();){var A=y.i8(),x=this.b1(A);null==x||x.d()||x.g()?n.aa(A):x.e()?e.aa(A):x.f()?(i.aa(A),l.aa(A)):x.c()&&(h.aa(A),l.aa(A)),y.i2(),0}0;for(var C=w.am();C.i1();){var E=C.i8(),T=this.a2(E);null==T||T.c()||T.g()?s.aa(E):T.e()?e.aa(E):T.f()?(i.aa(E),l.aa(E)):T.d()&&(r.aa(E),l.aa(E)),C.i2(),0}var k=c.i3(w);if(!l.ar())for(var b=.1/l.ay(),S=k-.4;!l.ar();S+=b){var L=l.c3();if(L.a2()===w){var I=this._d.xm();this._n.z1(I,L.a2()),this._d.s7(I,1,1),this._c.z1(I,this._c.i1(w)),c.i6(I,S),this._a.i8(L,this._d.gn(L)),this._d.gt(L,$i._A),this._d.xr(L,I,L.a3()),m.ao(I,p)}else{var P=this._d.xm();this._n.z1(P,L.a3()),this._d.s7(P,1,1),this._c.z1(P,this._c.i1(w)),c.i6(P,S),this._g.i8(L,this._d.gk(L)),this._d.gz(L,$i._A),this._d.xr(L,L.a2(),P),m.ao(P,p)}}if(!e.ar())for(var R=.1/e.ay(),D=k+.1;!e.ar();D+=R){var M=e.c3();if(M.a2()===w){var O=this._d.xm();this._n.z1(O,M.a2()),this._d.s7(O,1,1),this._c.z1(O,this._c.i1(w)),c.i6(O,D),this._a.i8(M,this._d.gn(M)),this._d.gt(M,$i._A),this._d.xr(M,O,M.a3()),p=m.an(O,p)}else{var B=this._d.xm();this._n.z1(B,M.a3()),this._d.s7(B,1,1),this._c.z1(B,this._c.i1(w)),c.i6(B,D),this._g.i8(M,this._d.gk(M)),this._d.gz(M,$i._A),this._d.xr(M,M.a2(),B),p=m.an(B,p)}}var N=yn._z;this._b.a2(w)&&(N=this._b.b2(w));var z=N._b.ay()+r.ay()+w.ao()+o.ay()+N._q.ay();if(z>0)for(var F=this._d.g9(w)/2,V=this._d.gj(w),U=this.a7(V,z),H=-.5*V+this.a8(this._d.gj(w),z,U)+U*(N._b.ay()+r.ay()),W=w.ap();W.i1();W.i2()){var Z=W.i8();this.c2(Z)||null!=this._j.i1(Z.a2())||(this._d.g2(Z).i8(new ze(H,F)),H+=U)}var G=this._t.a3(w),X=0,Y=0,j=0,K=0;if(null!=G&&(X=G._e.ay(),Y=G._c.ay(),j=G._b.ay(),K=G._d.ay()),(z=N._g.ay()+X+h.ay()+w.ak()+a.ay()+Y+N._d.ay())>0){for(var J=this._d.gj(w),q=this.a7(J,z),Q=this.a8(J,z,q),$=-.5*J+Q+q*(N._g.ay()+X+h.ay()),tt=-this._d.g9(w)/2,et=w.am();et.i1();et.i2()){var it=et.i8();this.d1(it)||null!=this._j.i1(it.a3())||(this._d.g2(it).i9(new ze($,tt)),$+=q)}if(null!=G){for(var nt=-.5*J+Q+q*(N._g.ay()+h.ay()+G._e.ay()-1),st=G._e.c1();st.i1();st.i2()){var ot=st.i8();this._d.u1(ot),ot.a2()!==w||this.c2(ot)?this.d1(ot)||(this._d.g2(st.i8()).i9(new ze(nt,tt)),nt-=q):(this._d.g2(st.i8()).i8(new ze(nt,tt)),nt-=q),this._d.h1(ot)}nt=.5*J-Q-q*(N._d.ay()+a.ay());for(var rt=G._c.c1();rt.i1();rt.i2()){var at=rt.i8();this._d.u1(at),at.a2()!==w||this.c2(at)?this.d1(at)||(this._d.g2(rt.i8()).i9(new ze(nt,tt)),nt-=q):(this._d.g2(rt.i8()).i8(new ze(nt,tt)),nt-=q),this._d.h1(at)}}}this._b.a2(w)&&this._b.a4(w,X+h.ay()+w.ak()+a.ay()+Y,r.ay()+w.ao()+o.ay(),j+i.ay(),K+e.ay())}return this._d.xi(c),t},a7:function(t,e){return e<=1?0:t/(e-1+2*this._r)},a8:function(t,e,i){return e<=1?.5*t:.5*(t-i*(e-1))},f:function(t){var e=this.g1();this._f=this._d.xk();for(var i=0;i<t.length;i++)for(var n=t[i]._b;null!=n;){var s=n.d();if(null!=this._n.i1(s)||this._t.b2(s))n=n.a();else{var o=new Li,r=new Li,a=new Li,h=new Li,l=new Li,c=new Li,d=new di,u=new di,_=new Tn(o,r,a,h,l,c,d,u);this._f.z1(s,_),d.ab(s.am()),u.ab(s.ap());for(var g=n.b();null!=g&&this._n.i1(g.d())===s;g=g.b()){var f=g.d(),v=this.c3(f);v.f()?r.ac(f):v.c()?h.ac(f):v.d()&&c.ac(f)}var m;for(m=n.a();null!=m&&this._n.i1(m.d())===s;m=m.a()){var p=m.d(),w=this.c3(p);w.e()?o.aa(p):w.c()?a.aa(p):w.d()&&l.aa(p)}n=m}}for(var y=this.d2(t),A=0,x=0;x<t.length;x++){var C=y[x];x>0&&(A+=y[x-1]._j+y[x-1]._h+y[x-1]._b),A+=C._g+C._f+C._a+C._d;for(var E=t[x].x1();E.i1();E.i2()){var T=E.i9();this._d.s3(T,this._d.gi(T),this._d.gh(T)+A)}C._c+=A,C._i+=A}for(var k=0;k<t.length;k++)for(var b=t[k],S=b.x1();S.i1();S.i2()){var L=S.i9();null!=this._n.i1(L)&&b.av(S)}for(var I=this,P=function(t,e){return I.a3(t)?I.a3(e)&&I._d.gi(t)>=I._d.gi(e)?-1:1:I.a3(e)?-1:I._d.gi(t)>=I._d.gi(e)?1:-1},R=function(t,e){return I.a3(t)?I.a3(e)?I._d.gi(t)>=I._d.gi(e)?1:-1:1:I.a3(e)?-1:I._d.gi(t)>=I._d.gi(e)?-1:1},D=0;D<t.length;D++)for(var M=y[D],O=t[D].x1();O.i1();O.i2()){var B=O.i9();if(!this._t.b2(B)){var N=this._f.i1(B),z=N._d,F=N._a,V=N._b,U=N._h,H=N._f,W=N._c,Z=N._g,G=N._e,X=0,Y=0,j=0,K=0,J=B.ao(),q=B.ak(),Q=this._d.gi(B),$=this._d.gh(B),tt=this._d.gj(B),et=this._d.g9(B),it=this._t.a3(B),nt=yn._z;if(this._b.a2(B)&&(nt=this._b.b2(B)),null!=it){if(X=it._d.ay(),Y=it._b.ay(),j=it._e.ay(),K=it._c.ay(),X>0)for(var st=nt._h.ay()+z.ay()+X+nt._k.ay(),ot=this.a7(et,st),rt=$+this.a8(et,st,ot)+ot*(nt._h.ay()+this.a4(z)),at=it._d.c1();at.i1();at.i2()){var ht=at.i8();this._d.u1(ht),ht.a2()===B?this.c2(ht)||this._d.gx(ht,new ze(Q+tt,rt)):(this.d1(ht),this._d.gy(ht,new ze(Q+tt,rt))),rt+=ot,this._d.h1(ht)}if(Y>0)for(var lt=nt._i.ay()+F.ay()+Y+nt._l.ay(),ct=this.a7(et,lt),dt=$+this.a8(et,lt,ct)+ct*(nt._i.ay()+this.a4(F)),ut=it._b.c1();ut.i1();ut.i2()){var _t=ut.i8();this._d.u1(_t),_t.a2()===B?this.c2(_t)||this._d.gx(_t,new ze(Q,dt)):this.d1(_t)||this._d.gy(_t,new ze(Q,dt)),dt+=ct,this._d.h1(_t)}}if(z.ay()>0){z.a1(P);for(var gt=nt._h.ay()+z.ay()+X+nt._k.ay(),ft=this.a7(et,gt),vt=$+this.a8(et,gt,ft)+ft*nt._h.ay(),mt=!0;!z.ar();){var pt=z.x4();if(this.a3(pt)){mt&&(mt=!1,vt+=ft*X);var wt=pt.ag(),yt=this._d.gd(wt),At=yt.at();if(yt.ac(new ze(At.x,M.b())),this.c2(wt)){var xt=this._a.i1(wt);yt.ac(new ze(At.x,xt.y+this._d.g6(B))),yt.ac(new ze(xt.x+this._d.g5(B),xt.y+this._d.g6(B)))}else yt.ac(new ze(At.x,vt)),yt.ac(new ze(Q+tt,vt));this._d.xr(wt,B,wt.a3()),this._d.m1(wt,yt)}else{var Ct=pt.ae(),Et=this._d.gd(Ct),Tt=Et.au();if(Et.ae(new ze(Tt.x,M.a())),this.d1(Ct)){var kt=this._g.i1(Ct);Et.ae(new ze(Tt.x,kt.y+this._d.g6(B))),Et.ae(new ze(kt.x+this._d.g5(B),kt.y+this._d.g6(B)))}else Et.ae(new ze(Tt.x,vt)),Et.ae(new ze(Q+tt,vt));this._d.xr(Ct,Ct.a2(),B),this._d.m1(Ct,Et)}this._d.x4(pt),vt+=ft}}if(F.ay()>0){F.a1(R);for(var bt=nt._i.ay()+F.ay()+Y+nt._l.ay(),St=this.a7(et,bt),Lt=$+this.a8(et,bt,St)+St*nt._i.ay(),It=!0;!F.ar();){var Pt=F.x4();if(this.a3(Pt)){It&&(It=!1,Lt+=St*Y);var Rt=Pt.ag(),Dt=this._d.gd(Rt),Mt=Dt.at();if(Dt.ac(new ze(Mt.x,M.b())),this.c2(Rt)){var Ot=this._a.i1(Rt);Dt.ac(new ze(Mt.x,Ot.y+this._d.g6(B))),Dt.ac(new ze(Ot.x+this._d.g5(B),Ot.y+this._d.g6(B)))}else Dt.ac(new ze(Mt.x,Lt)),Dt.ac(new ze(Q,Lt));this._d.xr(Rt,B,Rt.a3()),this._d.m1(Rt,Dt)}else{var Bt=Pt.ae(),Nt=this._d.gd(Bt),zt=Nt.au();if(Nt.ae(new ze(zt.x,M.a())),this.d1(Bt)){var Ft=this._g.i1(Bt);Nt.ae(new ze(zt.x,Ft.y+this._d.g6(B))),Nt.ae(new ze(Ft.x+this._d.g5(B),Ft.y+this._d.g6(B)))}else Nt.ae(new ze(zt.x,Lt)),Nt.ae(new ze(Q,Lt));this._d.xr(Bt,Bt.a2(),B),this._d.m1(Bt,Nt)}this._d.x4(Pt),Lt+=St}}var Vt=nt._g.ay()+nt._d.ay()+q+U.ay()+V.ay()+j+K;tt=this._d.gj(B);var Ut=this.a7(tt,Vt),Ht=this.a8(tt,Vt,Ut);Vt=nt._b.ay()+nt._q.ay()+J+W.ay()+H.ay();var Wt=this.a7(tt,Vt),Zt=this.a8(tt,Vt,Wt);if(U.ay()>0)for(var Gt,Xt=Ut,Yt=e,jt=this._d.gi(B)+Ht+Xt*(nt._g.ay()+U.ay()-1),Kt=this._d.gh(B),Jt=M._c-M._g-U.ay()*Yt;!U.ar();this._d.x4(Gt)){var qt=(Gt=U.x4()).ag(),Qt=this._d.gd(qt),$t=Qt.at();if(Qt.ac(new ze($t.x,M.b())),Qt.ac(new ze($t.x,Jt)),this.c2(qt)){var te=this._a.i1(qt);Qt.ac(new ze(te.x+this._d.g5(B),Jt)),Qt.ac(new ze(te.x+this._d.g5(B),te.y+this._d.g6(B)))}else Qt.ac(new ze(jt,Jt)),Qt.ac(new ze(jt,Kt)),jt-=Xt;Jt+=Yt,this._d.xr(qt,B,qt.a3()),this._d.m1(qt,Qt)}if(V.ay()>0)for(var ee,ie=Ut,ne=e,se=this._d.gi(B)+this._d.gj(B)-Ht-ie*nt._d.ay(),oe=this._d.gh(B),re=M._c-M._g-ne;!V.ar();this._d.x4(ee)){var ae=(ee=V.x4()).ag(),he=this._d.gd(ae),le=he.at();if(he.ac(new ze(le.x,M.b())),he.ac(new ze(le.x,re)),this.c2(ae)){var ce=this._a.i1(ae);he.ac(new ze(ce.x+this._d.g5(B),re)),he.ac(new ze(ce.x+this._d.g5(B),ce.y+this._d.g6(B)))}else he.ac(new ze(se,re)),he.ac(new ze(se,oe)),se-=ie;re-=ne,this._d.xr(ae,B,ae.a3()),this._d.m1(ae,he)}if(W.ay()>0)for(var de,ue=Wt,_e=e,ge=this._d.gi(B)+Zt+ue*(nt._b.ay()+W.ay()-1),fe=this._d.gh(B)+this._d.g9(B),ve=fe+W.ay()*_e;!W.ar();this._d.x4(de)){var me=(de=W.x4()).ae(),pe=this._d.gd(me),we=pe.au();if(pe.ae(new ze(we.x,M.a())),pe.ae(new ze(we.x,ve)),this.d1(me)){var ye=this._g.i1(me);pe.ae(new ze(ye.x+this._d.g5(B),ve)),pe.ae(new ze(ye.x+this._d.g5(B),ye.y+this._d.g6(B)))}else pe.ae(new ze(ge,ve)),pe.ae(new ze(ge,fe)),ge-=ue;ve-=_e,this._d.xr(me,me.a2(),B),this._d.m1(me,pe)}if(H.ay()>0)for(var Ae,xe=Wt,Ce=e,Ee=this._d.gi(B)+this._d.gj(B)-Zt-Wt*nt._q.ay(),Te=this._d.gh(B)+this._d.g9(B),ke=Te+Ce;!H.ar();this._d.x4(Ae)){var be=(Ae=H.x4()).ae(),Se=this._d.gd(be),Le=Se.au();if(Se.ae(new ze(Le.x,M.a())),Se.ae(new ze(Le.x,ke)),this.d1(be)){var Ie=this._g.i1(be);Se.ae(new ze(Ie.x+this._d.g5(B),ke)),Se.ae(new ze(Ie.x+this._d.g5(B),Ie.y+this._d.g6(B)))}else Se.ae(new ze(Ee,ke)),Se.ae(new ze(Ee,Te)),Ee-=xe;ke+=Ce,this._d.xr(be,be.a2(),B),this._d.m1(be,Se)}for(;!G.ar();){var Pe=G.c3(),Re=this._d.gl(Pe);M.a()+12<Re.y&&this._d.g7(Pe).i4(Re.x,M.a())}for(;!Z.ar();){var De=Z.c3(),Me=this._d.gs(De);if(M.b()-12>Me.y){var Oe=this._d.gf(De);Oe.ac(new ze(Me.x,M.b())),this._d.s6(De,Oe)}}}}for(var Be=0;Be<t.length;Be++)for(var Ne=t[Be],Fe=Ne._b;null!=Fe;Fe=Fe.a()){var Ve=Fe.d(),Ue=this._t.a3(Ve);null!=Ue&&null!=Ue._a&&(this._d.x4(Ue._a),Ne.aw(Fe.b()))}return this._d.xi(this._f),this._d.xj(this._a),this._d.xj(this._g),t},c3:function(t){return this.a3(t)?this.b1(t.ag()):this.a2(t.ae())},b1:function(t){return null==this._h?yn.s:this._h.i1(t)},a2:function(t){return null==this._l?yn.u:this._l.i1(t)},c2:function(t){if(null==t)return!1;var e=this.b1(t);return null!=e&&e.a()},d1:function(t){if(null==t)return!1;var e=this.a2(t);return null!=e&&e.a()},a3:function(t){return 1===t.ao()},b2:function(t){return 1===t.ak()},a4:function(t){for(var e=0,i=t._b;null!=i;i=i.a())this.b2(i.d())&&e++;return e},d2:function(t){for(var e=this._k,i=kn.d(t.length+1),n=0;n<t.length;n++){var s=t[n],o=new En;i[n]=o,o._c=Number.MAX_VALUE,o._i=Number.MIN_VALUE;for(var r=s.x1();r.i1();r.i2()){var a=r.i9(),h=this._d.gb(a);o._c=Math.min(o._c,h.i2()),o._i=Math.max(o._i,h.i2()+h.i4())}}this._b.a5(t,i);for(var l=0;l<t.length;l++)for(var c=i[l],d=t[l].x1();d.i1();d.i2()){var u=d.i9(),_=this._f.i1(u);null!=_&&(c._h=Math.max(c._h,Math.max(_._f.ay()*e,_._c.ay()*e)),c._f=Math.max(c._f,Math.max(_._b.ay()*e,_._h.ay()*e)))}return i}}),yn.s=ln.j(2),yn.u=ln.j(1),yn._z=new wn;var An=function(){this._af=0,this._b=0};D.ext(An,Object,{ib:function(t){this._af=t},ia:function(t,e,i){this.a6(t,e,i),this.b2(!1);var n=this.g();if(this.o()&&n>0){for(var s=this.r(),o=0;o<20&&n>0&&this.o();o++){this.b2(!0);var r=this.g();r<n&&(this.a7(s),n=r)}this.b3(s),this.b1()}return this.c()},a6:function(t,e,i){this._b=(new Date).getTime(),this._ac=t,this._ah=e;var n=this;this._p=function(t,e){var i=n._n[t.al()]-n._n[e.al()];return i>0?1:i>=0?0:-1},this._ad=kn.d(i);for(var s=0;s<this._ad.length;s++)this._ad[s]=new Li;this._ab=kn.a(this._ac.x0()),this._f=kn.d(this._ac.x0()),this._n=kn.a(this._ac.x0()+1);var o=this._ab;this._o=function(t,e){if(null==t&&null!=e)return 1;if(null!=t&&null==e)return-1;if(null==t&&null==e)return 0;var i=t,n=e,s=i._h,r=i.a2(),a=n.a2(),h=o[r.al()]-o[a.al()];if(0===h){var l=An.b(ln.h(s,i),s.gn(i))-An.b(ln.h(s,n),s.gn(n));if(0===l){var c=o[i.a3().al()]-o[n.a3().al()];if(0===c){return An.a(ln.i(s,i),s.gk(i))-An.a(ln.i(s,n),s.gk(n))}return c}return l}return h},this._l=function(t,e){if(null==t&&null!=e)return 1;if(null!=t&&null==e)return-1;if(null==t&&null==e)return 0;var i=t,n=e,s=i._h,r=i.a3(),a=n.a3(),h=o[r.al()]-o[a.al()];if(0===h){var l=An.a(ln.i(s,i),s.gk(i))-An.a(ln.i(s,n),s.gk(n));if(0===l){var c=o[i.a2().al()]-o[n.a2().al()];if(0===c){return An.b(ln.h(s,i),s.gn(i))-An.b(ln.h(s,n),s.gn(n))}return c}return l}return h},this._z=function(t,e){if(null==t&&null!=e)return 1;if(null!=t&&null==e)return-1;if(null==t&&null==e)return 0;var i=t,n=e,s=i._h;return An.b(ln.h(s,i),s.gn(i))-An.b(ln.h(s,n),s.gn(n))},this._e=function(t,e){if(null==t&&null!=e)return 1;if(null!=t&&null==e)return-1;if(null==t&&null==e)return 0;var i=t,n=e,s=i._h;return An.a(ln.i(s,i),s.gk(i))-An.a(ln.i(s,n),s.gk(n))},this._ac.x2(this._e,this._z)},c:function(){this._ah=null,this._aa=null,this._f=null,this._n=null,this._p=null,this._o=null,this._l=null,this._ac=null;var t=this._ad;return this._ad=null,t},o:function(){return(new Date).getTime()-this._b<=this._af},m:function(){for(var t=this,e=function(e,i){return Math.ceil(t._n[e.a3().al()])-Math.ceil(t._n[i.a3().al()])},i=this._ac.x9();i.i1();i.i2()){for(var n=i.i9().aw();n.i1();n.i2())this._n[n.i9().al()]=$i.j();i.i9().av(e)}},b2:function(t){for(var e=0;e<this._ad.length;e++)this._ad[e].af();if(t){this.m();for(var i=0,n=this._ab.length;i<n;i++)this._ab[i]=0;this._ac.x2(null,this._z)}var s=this._ac.xm();this._ah.i7(s,0);for(var o=this._ac.x9();o.i1();o.i2())0===o.i9().ak()&&o.i9()!==s&&this._ac.xo(s,o.i9());var r=new Qe(this);r.a6(!0),r.a9(this._ac,s),this._ad[0].at(),this._ac.x4(s),this.d()},a1:function(){this._ac.x2(this._o,this._l);for(var t=0,e=1;e<this._ad.length;e++){t+=this.a2(this._ad[e-1],this._ad[e])}return t+=0},a2:function(t,e){var i=t.ah(),n=e.ah(),s=new ci,o=new ci;this._aa=kn.d(this._ac.x0());for(var r=0;i.i1()&&n.i1();n.i2())r+=this.a8(i.i6(),s,o,!0),r+=this.a8(n.i6(),o,s,!1),i.i2();for(;i.i1();i.i2())r+=this.a8(i.i6(),s,o,!0);for(;n.i1();n.i2())r+=this.a8(n.i6(),o,s,!1);return r},a8:function(t,e,i,n){var s=0,o=0,r=0;if(null!=this._aa[t.al()])for(var a=this._aa[t.al()].a(),h=e._b;h!==a;h=h.a()){h._c===t?(s++,r+=o,e.aw(h)):o++}var l=s*i.ay()+r;if(n)for(var c=t.ag();null!=c;c=c.a8()){var d=c.a3();this._ab[d.al()]>=this._ab[t.al()]&&(this._aa[d.al()]=i.ae(d))}else for(var u=t.ae();null!=u;u=u.a7()){var _=u.a2();this._ab[_.al()]>this._ab[t.al()]&&(this._aa[_.al()]=i.ae(_))}return l},g:function(){for(var t=this.r(),e=this.a1(),i=!0,n=0;n<3&&this.o()&&e>0;){var s=this.k();s<e?(this.a7(t),e=s):n++,i=!i}if(this.b3(t),this.b1(),e>0){for(var o=1,r=0;1===o&&e>0;r++){this.e(),this.i();var a=this.a1();a<e?(o=1,this.a7(t)):o=-1,e=a}this.b3(t),this.b1()}return e},e:function(){for(var t=this.l(),e=this.r(),i=kn.d(this._ac.x0()),n=this._ad.length-1;n>=0;n--)for(var s=this._ad[n].ah();s.i1();s.i2()){var o=s.i6();if(1===o.ak()&&1===o.ao()){var r=t.i1(o.ag());if(null!=r&&null==i[r.al()])for(var a=this.a4(o,r),h=i[r.al()]=kn.d(a+1),l=h.length-1;l>=0;l--)h[l]=new ci}}for(var c=0;c<this._ad.length;c++)for(var d=this._ad[c].ah();d.i1();d.i2()){var u=d.i6();if(1===u.ak()&&1===u.ao()){var _=t.i1(u.ag());if(null!=_){var g=_.al(),f=this.a4(u,_)-1;i[g][f].ae(u.ae())}}else for(var v=u.ae();null!=v;v=v.a7()){var m=t.i1(v);if(null!=m){var p=m.al(),w=this.a4(u,m)-1;i[p][w].ae(v)}}}for(var y=this._ac.x9();y.i1();y.i2()){var A=y.i9();if(null!=i[A.al()])for(var x=A.ag();null!=x;x=x.a8()){var C=t.i1(x);if(null!=C)for(var E=i[C.al()];E[0].ay()>0;){for(var T,k=0;;){var b=(T=E[k].am()).a3();if(1!==b.ak()||1!==b.ao())break;k++}var S=E[k].at().a3();k--,S=T.a2();for(var L=(T=E[k].at()).a3();k>=0;)if(e[S.al()]!==e[L.al()]&&(this._ab[S.al()]=e[L.al()]),S=S.ae().a2(),--k>=0){L=E[k].at().a3()}}}}this.b1(),this._ac.xj(t)},i:function(){for(var t=this.f(),e=this.r(),i=kn.d(this._ac.x0()),n=0;n<this._ad.length;n++)for(var s=this._ad[n].ah();s.i1();s.i2()){var o=s.i6();if(1===o.ak()&&1===o.ao()){var r=t.i1(o.ae());if(null!=r&&null==i[r.al()])for(var a=this.a4(r,o),h=i[r.al()]=kn.d(a+1),l=h.length-1;l>=0;l--)h[l]=new ci}}for(var c=this._ad.length-1;c>=0;c--)for(var d=this._ad[c].ah();d.i1();d.i2()){var u=d.i6();if(1===u.ak()&&1===u.ao()){var _=t.i1(u.ae());if(null!=_){var g=_.al(),f=this.a4(_,u)-1;i[g][f].ae(u.ag())}}else for(var v=u.ag();null!=v;v=v.a8()){var m=t.i1(v);if(null!=m){var p=m.al(),w=this.a4(m,u)-1;i[p][w].ae(v)}}}for(var y=this._ac.x9();y.i1();y.i2()){var A=y.i9();if(null!=i[A.al()])for(var x=A.ae();null!=x;x=x.a7()){var C=t.i1(x);if(null!=C)for(var E=i[C.al()];E[0].ay()>0;){for(var T,k=0;;){var b=(T=E[k].am()).a2();if(1!==b.ak()||1!==b.ao())break;k++}var S=E[k].at().a2();k--,S=T.a3();for(var L=(T=E[k].at()).a2();k>=0;)if(e[S.al()]!==e[L.al()]&&(this._ab[S.al()]=e[L.al()]),S=S.ag().a3(),--k>=0){L=E[k].at().a2()}}}}this.b1(),this._ac.xj(t)},a4:function(t,e){return this._ah.i2(t)-this._ah.i2(e)},l:function(){for(var t=Di.a6(kn.d(this._ac.xg())),e=this._ac.x9();e.i1();e.i2()){var i=e.i9();if(i.ao()>1){for(var n=0,s=i.ag();null!=s;s=s.a8()){var o=s.a3();1===o.ak()&&1===o.ao()&&n++}if(n>1)for(var r=i.ag();null!=r;r=r.a8()){var a=r,h=a.a3();if(1===h.ak()&&1===h.ao()){for(;1===h.ak()&&1===h.ao();h=a.a3())t.i8(a,i),a=h.ag();t.i8(a,i)}}}}return t},f:function(){for(var t=Di.a6(kn.d(this._ac.xg())),e=this._ac.x9();e.i1();e.i2()){var i=e.i9();if(i.ak()>1){for(var n=0,s=i.ae();null!=s;s=s.a7()){var o=s.a2();1===o.ak()&&1===o.ao()&&n++}if(n>1)for(var r=i.ae();null!=r;r=r.a7()){var a=r,h=a.a2();if(1===h.ak()&&1===h.ao()){for(;1===h.ak()&&1===h.ao();h=a.a2())t.i8(a,i),a=h.ae();t.i8(a,i)}}}}return t},k:function(){for(var t=1;t<this._ad.length;t++){for(var e=this._ad[t],i=e.ah();i.i1();i.i2()){var n=i.i6();this._n[n.al()]=this.a5(n,e.ay(),n.am(),this._ad[t-1].ay()),this._n[n.al()]+=this._ab[n.al()]/(3*this._ad[t-1].ay())}this.a3(e,this._p)}return this.a1()},a5:function(t,e,i,n){var s=0;if(0===i.i7())s=n*this._ab[t.al()]/e;else{for(;i.i1();i.i2()){var o=i.i8();o.a2()===t?s+=this._ab[o.a3().al()]:s+=this._ab[o.a2().al()]}s/=i.i7()}return s},a7:function(t){kn.f(this._ab,t,t.length)},b3:function(t){kn.f(t,this._ab,t.length)},r:function(){var t=kn.a(this._ab.length);return this.a7(t),t},d:function(){for(var t=0;t<this._ad.length;t++)for(var e=0,i=this._ad[t].ah();i.i1();)this._ab[i.i6().al()]=e,i.i2(),e++},b1:function(){for(var t=0;t<this._ad.length;t++){for(var e=this._ad[t],i=e._b;null!=i;i=i.a()){var n=i.d();this._f[this._ab[n.al()]]=n}for(var s=0,o=e._b;null!=o;)o.c(this._f[s]),o=o.a(),s++}},a3:function(t,e){for(var i=t.ah(),n=0;n<t.ay();i.i2())this._f[n]=i.i6(),n++;kn.s(this._f,t.ay(),e);for(var s=0,o=t._b;null!=o;)o.c(this._f[s]),this._ab[this._f[s].al()]=s,o=o.a(),s++}}),An.b=function(t,e){if(null==t)return 0;var i=t.a()?Math.floor(e.x):0,n=t.a()?Math.floor(e.y):0;return t.e()?1e4-n:t.f()?-1e4+n:t.c()?-2e4-i:i},An.a=function(t,e){if(null==t)return 0;var i=t.a()?Math.floor(e.x):0,n=t.a()?Math.floor(e.y):0;return t.e()?1e4+n:t.f()?-1e4-n:t.d()?-2e4-i:i};var xn=function(){xn.superClass.constructor.call(this),this._i6=0,this._i3=2147483647,this._i0=60,this._iz=20,this._i2=20,this._i4=20,this.i5(!1),this._i7=new gn,this._i1=new An,this._i8=new mn};D.ext(xn,Bi,{j2:function(){return this._i2},i4:function(t){return!0},i3:function(t){this._i6=(new Date).getTime(),hn.d(t,!1);var e=t.xk(),i=t.xk(),n=t.xl(),s=new di,o=new yn(t,e,i,n);o.a6(this.j2()),this._i8.i3(this._iz),this._i8.i6(this._i0),this._i8.i4(this._i2),this._i8.i5(this._i4),this._i8.i2(i);for(var r=this._i7.i1(t,e,s),a=s.c1();a.i1();a.i2()){var h=a.i8();n.i7(h,!0);var l=t.gn(h);t.gt(h,t.gk(h)),t.gz(h,l)}this.a2(t,e,i),r=o.a9(r);var c=this.j1(t,e,r);c=o.a5(c),c=o.b3(c),this._i8.i1(t,c,e),c=o.g2(c),o.e2(c),this.b(t,i),this.w(t),this.a1(t,s),o.e1(),t.xj(n),t.xi(i),t.xi(e)},j1:function(t,e,i){if(this._i1 instanceof An){var n=this._i1,s=(new Date).getTime()-this._i6;n.ib(this._i3-s)}return this._i1.ia(t,e,i)},a1:function(t,e){for(var i=e.c1();i.i1();i.i2()){var n=i.i8(),s=t.gs(n),o=t.gl(n);t.x3(n);var r=t.gp(n);t.s5(n,r.a()),t.gy(n,s),t.gx(n,o)}},b:function(t,e){for(var i=t.x9();i.i1();i.i2()){var n=i.i9(),s=e.i1(n);if(null!=s&&!t.xp(s)){for(var o=n.am().i8().a2();null!=e.i1(o);o=n.am().i8().a2())n=o;t.u1(s);for(var r=n.ae(),a=new ci;null!=e.i1(r.a3());r=r.a3().ag()){var h=t.gs(r);a.aa(h),a.az(t.gf(r));var l=t.gl(r);l.equals(h)||a.aa(l)}var c=t.gs(r);a.aa(c),a.az(t.gf(r));var d=t.gl(r);d.equals(c)||a.aa(d),t.m1(s,a)}}for(var u=t.x9();u.i1();u.i2())null!=e.i1(u.i9())&&t.x4(u.i9())},w:function(t){for(var e=t.xf();e.i1();e.i2()){var i=e.i8(),n=t.g2(i);if(n.i1()>0){var s=new oe,o=t.gc(i).c(),r=o.i6();o.i2();var a=r.x,h=r.y;if(o.i1()){var l=o.i6(),c=l.x,d=l.y;for(o.i2();o.i1();o.i2()){var u=o.i6(),_=u.x,g=u.y,f=(a-_)*(d-g)/(h-g)+_;Math.abs(f-c)>=1&&(s.add(l),a=c,h=d),l=u,c=_,d=g}}s.size()<n.i1()&&t.s5(i,new We(s))}}},a2:function(t,e,i){var n=t.g8().c1();for(n.i5();n.i1();n.i3()){var s=n.i8().a2(),o=n.i8().a3(),r=e.i2(o)-e.i2(s);if(r>1){for(var a=null,h=null,l=s;r>1;r--)a=t.xm(),t.s7(a,1,1),t.s4(a,$i._A),h=t.xo(l,a),l===s&&t.gt(h,t.gn(n.i8())),e.i7(a,e.i2(l)+1),i.z1(a,n.i8()),l=a;h=t.xo(a,o),t.gz(h,t.gk(n.i8())),t.h1(n.i8())}}}});var Cn=function(t,e,i,n){this._i=20,this._j=t,this._g=e,this._a=i,this._h=n};D.ext(Cn,Object,{a1:function(t){this._i=t},b2:function(t){return null!=this._e&&this._e.i4(t)},a3:function(t){return null==this._f?null:this._f.i1(t)},d:function(){this._j.xi(this._f),this._j.xi(this._e)}});var En=function(){this._c=0,this._i=0,this._g=0,this._j=0,this._f=0,this._h=0,this._d=0,this._e=0,this._a=0,this._b=0};D.ext(En,Object,{a:function(){return this._c-this._g-this._f-this._a},b:function(){return this._i+this._j+this._h+this._b}});D.ext(function(){this._d=new di,this._b=new di,this._c=new di,this._e=new di},Object,{});var Tn=function(t,e,i,n,s,o,r,a){this._d=t,this._a=e,this._b=i,this._h=n,this._f=s,this._c=o,this._e=r,this._g=a};D.ext(Tn,Object,{});var kn={};if(kn.a=function(t,e){for(var i=[],n=0;n<t;n++)i[n]=e||0;return i},kn.b=function(t){for(var e=[],i=0;i<t;i++)e[i]=!1;return e},kn.c=function(t,e){if(t instanceof ze)return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y<=e.y?0:1;if(t instanceof Fe)return e.width>t.width?-1:e.width<t.width?1:e.height>t.height?-1:e.height>=t.height?0:1;if(t instanceof Ue)return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:e.width>t.width?-1:e.width<t.width?1:e.height>t.height?-1:e.height>=t.height?0:1;throw\"Unkown Type: \"+t},kn.d=function(t){for(var e=[],i=0;i<t;i++)e[i]=null;return e},kn.e=function(t,e){for(var i=[],n=0;n<t;n++)i[n]=kn.a(e);return i},kn.f=function(t,e,i){for(var n=0;n<i;n++)e[n]=t[n]},kn.s=function(t,e,i){var n=[];kn.f(t,n,e),n.sort(i),kn.f(n,t,e)},kn.n=function(t,e){return t-e},window.make)bn=window.make;else{var bn,Sn={},Ln={},In=[],Pn={};(bn=window.make={}).Default={path:\"./\",resPath:\"\",getImagePath:function(t){return this.path+this.resPath+\"res/images/\"+(t||\"\")},register:function(t,e,i){(i=i||{}).name=i.name||t,i.modelDefaultParameters=i.modelDefaultParameters||{},i.description=i.description||i.name,Sn[t]&&console.log(t,\" already exist\"),Sn[t]=e;var n=i.category||\"\",s=Ln[n]||{};s[t]=e,Ln[n]=s,Pn[t]=i,-1==In.indexOf(n)&&In.push(n),this.checkModelDefaultParameters(i.modelDefaultParameters)},checkModelDefaultParameters:function(t){if(t)for(var e in t){var i=t[e];i instanceof Object||(i={value:i},t[e]=i),i.propertyName=e,i.hidden=!!i.hidden,i.propertyType=i.propertyType||bn.Default.PARAMETER_PROPERTY_TYPE_FIELD,i.type=i.type||bn.Default.PARAMETER_TYPE_STRING,i.category=i.category||bn.Default.PARAMETER_CATEGORY_DETAIL,i.editable=void 0===i.editable||!!i.editable,i.index=void 0===i.index?100:parseInt(i.index)}},remove:function(t){if(Sn[t]){Sn[t]=void 0,delete Sn[t];var e=bn.Default.getCategory(t),i=Ln[e];delete i[t];var n=0;for(var s in i)s&&n++;if(0==n)for(s=0;s<In.length;s++){var o=In.indexOf(e);o>=0&&In.splice(o,1)}delete Pn[t]}else console.log(t,\" not exist\")},getCategories:function(){return In},getCreatorsForCategory:function(t){return Ln[t]},getCreator:function(t){return Sn[t]},getIds:function(t){var e=[];for(var i in Sn)(!t||t&&t(this.getParameters(i)))&&e.push(i);return e},getModelDefaultParameters:function(t){return this.getParameters(t).modelDefaultParameters},getDescription:function(t){return this.getParameters(t).description},getName:function(t){return this.getParameters(t).name},getIcon:function(t){var e=this.getParameters(t);return this.path+e.icon},isAsync:function(t){return this.getParameters(t).async},isCombo:function(t){return this.getParameters(t).combo},getCategory:function(t){return this.getParameters(t).category},getOrder:function(t){return this.getParameters(t).order||0},getType:function(t){return this.getParameters(t).type},getOtherParameter:function(t,e){return this.getParameters(t)[e]},registerIcon:function(t,e){var i=this.getParameters(t);if(i)return i.icon=e,i.icon},registerDescription:function(t,e){var i=this.getParameters(t);return i.description=e,i.description},registerName:function(t,e){var i=this.getParameters(t);return i.name=e,i.name},registerOther:function(t,e,i){var n=s[e],s=this.getParameters(t);return s[e]=i,\"modelDefaultParameters\"===e&&(console.warn(\"rewrite modelDefaultParameters: id={0}, oldValue={}, newValue={}\",t,n,i),this.checkModelDefaultParameters(i)),n},appendModelDefaultParameter:function(t,e,i,n,s,o,r){},getParameters:function(t){return Pn[t]||{}},load:function(t,e,i){var n,s=(i=i||{}).isRelation;if(e){var o=e;e=function(e){s&&t instanceof Array&&t.length>1&&e instanceof Array&&e.length>1&&this._relation(t,e),o(e)}}if(t instanceof Array){var r={};if(e){var a=function(i,n){var s=t.length;return function(t){i.datas=i.datas||[],i.datas.push(t),i._total===s&&e(i.datas)}(n)};r._total=0;for(var h=0;h<t.length;h++){var l=t[h];this.load(l,function(t){r._total++,a(r,t)})}return null}n=[];for(h=0;h<t.length;h++){l=t[h];var c=this.load(l);c&&n.push(c)}}else{var d={};\"string\"==typeof t?d.id=t:d=t,d=this.filterJson(d),e?this._load(d,e):n=this._load(d)}return s&&n instanceof Array&&n.length>1&&this._relation(t,n),n},_relation:function(t,e){var i={};e.forEach(function(t){t.getId&&(i[t.getId()]=t)}),t.forEach(function(t){t.objectId&&t.parentId&&i[t.objectId]&&i[t.parentId]&&i[t.objectId].setParent&&i[t.objectId].setParent(i[t.parentId])})},_load:function(t,e){var i=t.id,n=this.getCreator(i);if(!n)return console.log(\"unknown id: \",i),null;if(!e){var s=n(t);return bn.Default._setObjectClientId(s,i),s}n(t,function(t){bn.Default._setObjectClientId(t,i),e&&e(t)})},_setObjectClientId:function(t,e){t&&t.setClient&&t.setClient(\"id\",e)},copyArray:function(t,e,i){if(e=[],t)for(var n,s=0,o=t.length;s<o;s++)n={},this.copyProperties(t[s],n),e.push(n);return e},copyProperties:function(t,e,i){if(t&&e)for(var n in t)i&&i.indexOf(n)>=0||0==n.indexOf(\"_\")||(void 0===e[n]&&(t[n]instanceof Array?e[n]=[]:t[n]instanceof Function?e[n]=t[n]:t[n]instanceof Object?e[n]={}:e[n]=t[n]),!(t[n]instanceof Function)&&t[n]instanceof Object&&e[n]instanceof Object&&bn.Default.copyProperties(t[n],e[n]))},getModelDefaultParametersValues:function(t,e){var i=this.getModelDefaultParameters(t),n={};for(var s in i){var o=i[s];e&&e(o)||(o.propertyType==bn.Default.PARAMETER_PROPERTY_TYPE_CLIENT?(n.client=n.client||{},n.client[s]=o.value):o.propertyType==bn.Default.PARAMETER_PROPERTY_TYPE_STYLE?(n.style=n.style||{},n.style[s]=o.value):n[s]=o.value)}return n},getModelDefaultParameterProperties:function(t,e){var i=this,n=[],s=this.getModelDefaultParameters(t);if(!s)return n;e&&!s.id&&(s.id={propertyName:\"id\",name:\"模型ID\",category:bn.Default.PARAMETER_CATEGORY_BASIC,editable:!1,propertyType:bn.Default.PARAMETER_PROPERTY_TYPE_FIELD,type:bn.Default.PARAMETER_TYPE_STRING,exportable:!1,index:-2}),e&&!s.objectId&&(s.objectId={propertyName:\"objectId\",name:\"实例ID\",category:bn.Default.PARAMETER_CATEGORY_BASIC,editable:!1,propertyType:bn.Default.PARAMETER_PROPERTY_TYPE_FIELD,type:bn.Default.PARAMETER_TYPE_STRING,exportable:!1,index:-1});for(var o in s)n.push(s[o]);return n.sort(function(t,e){return t.index-e.index}),n=n.map(function(t){return i.modelParameterToProperty(t)})},_getNameFromPropertyName:function(t){for(var e=t.split(\".\"),i=\"\",n=0;n<e.length;n++)e[n].length>0&&(i+=e[n].substring(0,1).toUpperCase()+e[n].substring(1,e[n].length)),n<e.length-1&&(i+=\" \");return i},modelParameterToProperty:function(t){var e=new R.Property;return e.setCategoryName(t.category),t.name||(t.name=this._getNameFromPropertyName(t.propertyName)),e.setName(t.name),e.setEditable(t.editable),e.setPropertyType(t.propertyType),e.setPropertyName(t.propertyName),e.setValueType(t.type),e.setEnumInfo(t.enumInfo),e.isVisible=function(){return!t.hidden},e},filterJson:function(t){var e=this.getModelDefaultParameters(t.id);for(var i in e){var n=e[i].propertyType||\"client\",s=e[i].value;n==bn.Default.PARAMETER_PROPERTY_TYPE_STYLE?t.style&&void 0!==t.style[i]||(t.style=t.style||{},t.style[i]=s):n==bn.Default.PARAMETER_PROPERTY_TYPE_CLIENT?t.client&&void 0!==t.client[i]||(t.client=t.client||{},t.client[i]=s):void 0===t[i]&&(t[i]=s)}return t},UNIT_HEIGHT:4.445,EQUIPMENT_WIDTH:45.5,RACK_OFFSET_X:7.25,RACK_OFFSET_Y:6.655,RACK_WIDTH:60,getUnitHeight:function(){return this.UNIT_HEIGHT},getEquipmentWidth:function(){return this.EQUIPMENT_WIDTH},getEquipmentHeight:function(t){return parseInt(t)>0||console.error(\"method getEquipmentHeight's first argument scale value is zero\"),this.UNIT_HEIGHT*t},getRackWidth:function(){return this.RACK_WIDTH},getRackHeight:function(t){return parseInt(t)>0||console.error(\"method getRackHeight's first argument scale value is zero\"),this.RACK_OFFSET_Y+this.UNIT_HEIGHT*parseInt(t)+this.RACK_OFFSET_Y}},bn.Default.toJson=function(t,e){if(t&&t.getClient){var i=t.getClient(\"id\"),n=bn.Default.getModelDefaultParameters(i),s={},o=null,r=null;for(var a in n)if(!1!==n[a].exportable){var h=n[a].propertyType;r=n[a].value;h==bn.Default.PARAMETER_PROPERTY_TYPE_ACCESSOR?(o=t[D.getter(a)](),bn.Default.equals(o,r)||(s[a]=o)):h==bn.Default.PARAMETER_PROPERTY_TYPE_FIELD?(o=t[a],bn.Default.equals(o,r)||(s[a]=o)):h==bn.Default.PARAMETER_PROPERTY_TYPE_STYLE?(o=t.getStyle(a),bn.Default.equals(o,r)||(s.style=s.style||{},s.style[a]=o)):h==bn.Default.PARAMETER_PROPERTY_TYPE_CLIENT&&(o=t.getClient(a),bn.Default.equals(o,r)||(s.client=s.client||{},s.client[a]=o))}return s.id=i,bn.Default.EXPORT_OBJECT_ID&&(s.objectId=t.getId()),e&&(s=e(s)),s}return e&&(t=e(t)),t},bn.Default.copy=function(t,e,i,n,s){!function(t,e,i,n,s){s=s||{};var o={},r={},a=bn.Default.getParameters(e);if(a=bn.Default.clone(a),bn.Default.copyProperties(a,r),n instanceof Function?o=n(r)||{}:bn.Default.copyProperties(n,o),s.copyDefaultParamCoverage&&delete r.modelDefaultParameters,s.copyParamCoverage||bn.Default.copyProperties(r,o),s.defaultValue&&o.modelDefaultParameters)for(var h in s.defaultValue)void 0!==o.modelDefaultParameters[h]&&(o.modelDefaultParameters[h]instanceof Object?o.modelDefaultParameters[h].value=s.defaultValue[h]:o.modelDefaultParameters[h]=s.defaultValue[h]);bn.Default.register(t,function(t,n){var s={id:e};return i instanceof Function?i(t):bn.Default.copyProperties(i,s),bn.Default.copyProperties(t,s),bn.Default.load(s,n)},o)}(t,e,i,n,s)},bn.Default.PARAMETER_CATEGORY_BASIC=\"BASIC\",bn.Default.PARAMETER_CATEGORY_DETAIL=\"Detail\",bn.Default.PARAMETER_TYPE_STRING=\"string\",bn.Default.PARAMETER_TYPE_BOOLEAN=\"boolean\",bn.Default.PARAMETER_TYPE_COLOR=\"color\",bn.Default.PARAMETER_TYPE_INT=\"int\",bn.Default.PARAMETER_TYPE_NUMBER=\"number\",bn.Default.PARAMETER_TYPE_IMAGE=\"image\",bn.Default.PARAMETER_TYPE_ARRAY_STRING=\"array.string\",bn.Default.PARAMETER_TYPE_ARRAY_NUMBER=\"array.number\",bn.Default.PARAMETER_TYPE_ARRAY_INT=\"array.int\",bn.Default.PARAMETER_PROPERTY_TYPE_FIELD=\"field\",bn.Default.PARAMETER_PROPERTY_TYPE_ACCESSOR=\"accessor\",bn.Default.PARAMETER_PROPERTY_TYPE_STYLE=\"style\",bn.Default.PARAMETER_PROPERTY_TYPE_CLIENT=\"client\",String.prototype.replaceAll=function(t,e,i){return RegExp.prototype.isPrototypeOf(t)?this.replace(t,e):this.replace(new RegExp(t,i?\"gi\":\"g\"),e)},String.prototype.format=function(t){var e=this;if(arguments.length>1){for(var i=[],n=0;n<arguments.length;n++)i.push(arguments[n]);t=i}if(t){if(t instanceof Array)t.forEach(function(t,i){t instanceof Object&&(t=JSON.stringify(t)),e=e.replaceAll(\"{\"+i+\"}\",t)});else{if(!(t instanceof Object))return e.replaceAll(\"{}\",t);for(var s in t){var o=t[s];o instanceof Object&&(o=JSON.stringify(o)),e=e.replaceAll(\"{\"+s+\"}\",o)}}}return e},bn.Default.getId=function(t){return t.getClient(\"id\")},bn.Default.objectWrapper=function(t,e,i,n){Object.defineProperty(t,e,{get:function(){var n=t[\"___\"+e];return i&&(n=i.call(t,n,t,e)),n},set:function(i){var s=t[e];n&&(i=n.call(t,i,t,e)),s!==i&&(t[\"___\"+e]=i,this.firePropertyChange&&this.firePropertyChange(e,s,i))}})},bn.Default.equals=function(t,e){return t instanceof Object&&e instanceof Object?JSON.stringify(t)==JSON.stringify(e):t==e},bn.Default.clone=function(t){try{return JSON.parse(JSON.stringify(t))}catch(e){throw console.error(e,t),e}},bn.Default.EXPORT_OBJECT_ID=!0}bn.Utils2D={create2dShapeNode:function(t){var e=t.position||[0,0,0],i=t.data,n=t.image,s=(t.objType,t.objectId),o=t.closed,r=new bn.Default.WallShapeNode(s);\"innerWall\"==t.objType?r=new bn.Default.InnerWallShapeNode(s):\"floor\"==t.objType?r=new bn.Default.FloorShapeNode(s):\"cable\"==t.objType&&(r=new bn.Default.LineWidthShapeNode(s));var a=bn.Default.create2dShapePath(i,e);return bn.Default.objectWrapper(r,\"id\",function(){return this.getClient(\"id\")}),bn.Default.objectWrapper(r,\"objectId\",function(){return this.getId()}),r.setSegments(a.segments),r.setPoints(a.points),o&&r.setClient(\"closed\",!0),n&&r.setClient(\"imageSrc\",n),bn.Default.setObject2dCSProps(r,t),r},create2dShapePath:function(t,e){var i=new R.List,n=new R.List;if(t.length>0)if(i.add(\"moveto\"),t[0]instanceof Array){n.add({x:parseFloat(t[0][0])+parseFloat(e[0]),y:parseFloat(t[0][1])+parseFloat(e[2])});for(var s=1;s<t.length;s++){var o=t[s];\"c\"==o[0]?(i.add(\"quadto\"),n.add({x:parseFloat(o[1])+parseFloat(e[0]),y:parseFloat(o[2])+parseFloat(e[2])}),n.add({x:parseFloat(o[3])+parseFloat(e[0]),y:parseFloat(o[4])+parseFloat(e[2])})):(i.add(\"lineto\"),n.add({x:parseFloat(o[0])+parseFloat(e[0]),y:parseFloat(o[1])+parseFloat(e[2])}))}}else{n.add({x:parseFloat(t[0])+parseFloat(e[0]),y:parseFloat(t[1])+parseFloat(e[2])});for(s=2;s<t.length;s+=2)i.add(\"lineto\"),n.add({x:parseFloat(t[s])+parseFloat(e[0]),y:parseFloat(t[s+1])+parseFloat(e[2])})}return{segments:i,points:n}},setObject2dCSProps:function(t,e){var i=e.style,n=e.client;if(i)for(var s in i)t.setStyle(s,i[s]);if(n)for(var s in n)t.setClient(s,n[s])},createBlockObject:function(t,e){var i=t.objectId,n=new bn.Default.Block(i);\"door\"==e?n=new bn.Default.Door(i):\"window\"==e&&(n=new bn.Default.Window(i)),t.width&&n.setClient(\"length\",t.width);var s=t.client||{};return n.setClient(\"edgeIndex\",s.edgeIndex||1),n.setClient(\"offset\",s.offset||0),bn.Default.setObject2dCSProps(n,t),n},createNode:function(t){var e=t.position||[0,0,0],i=t.rotation||[0,0,0],n=t.width||50,s=t.depth||50,o=t.image,r=t.objectId,a=new R.Follower(r),h=t.color||\"#CCCCFF\";return bn.Default.objectWrapper(a,\"id\",function(){return this.getClient(\"id\")}),bn.Default.objectWrapper(a,\"objectId\",function(){return this.getId()}),a.setSize(parseFloat(n),parseFloat(s)),a.setCenterLocation({x:parseFloat(e[0]),y:parseFloat(e[2])}),a.setAngle(i[1]),a.setClient(\"positionY\",e[1]),\"string\"==typeof o?a.setImageUrl(o):\"object\"==typeof o?a.setImage(o):(a.setStyle(\"body.type\",\"vector\"),a.setStyle(\"vector.shape\",\"rectangle\"),a.setStyle(\"vector.fill.color\",h)),a.setStyle(\"select.style\",\"border\"),a.setStyle(\"select.color\",\"#F07819\"),a.setStyle(\"select.width\",.7),a.setStyle(\"vector.outline.width\",1),a.setStyle(\"vector.outline.color\",\"#BEC9BE\"),a.getWidth()>20&&a.setStyle(\"label.maxlength\",Math.min(a.getWidth(),a.getHeight())),a.setStyle(\"label.position\",\"center\"),bn.Default.setObject2dCSProps(a,t),a},createFollower:function(t){var e=t;t={};bn.Default.copyProperties(e,t),t.id=t.objectId||D.id(),t.scale=t.scale||1,t.depth=t.depth||5,t.position=t.position||[0,0,0],t.rotation=t.rotation||[0,0,0];var i=new R.Follower(t);return bn.Default.objectWrapper(i,\"id\",function(){return i.getClient(\"id\")}),bn.Default.objectWrapper(i,\"objectId\",function(){return i.getId()}),bn.Default.objectWrapper(i,\"depth\"),bn.Default.objectWrapper(i,\"position\",null,function(t){return this.setLocation({x:t[0],y:t[1]}),t}),bn.Default.objectWrapper(i,\"rotation\",null,function(t){return this.setAngle(t[2]),t}),bn.Default.objectWrapper(i,\"scale\",null,function(t){var e=this.getSize();e.width=e.width*t,e.height=e.height*t,this.setSize(e);var n=this.getLocation();return n.x=n.x*t,n.y=n.y*t,i.setLocation(n),t}),i.depth=t.depth,i.position=t.position,i.rotation=t.rotation,i.scale=t.scale,i.addPropertyChangeListener(function(t){var e=t.property,i=t.source;\"location\"==e?(i.position[0]=t.newValue.x,i.position[1]=t.newValue.y):\"angle\"==e&&(i.rotation[2]=t.newValue)},i),t.x&&i.setX(t.x),t.y&&i.setY(t.y),i.z=t.z,t.location&&(t.location instanceof Array?i.setLocation({x:t.location[0],y:t.location[1]}):i.setLocation(t.location)),t.centerLocation&&(t.centerLocation instanceof Array?i.setCenterLocation({x:t.centerLocation[0],y:t.centerLocation[1]}):i.setCenterLocation(t.centerLocation)),t.size&&i.setSize(t.size),t.angle&&i.setAngle(t.angle),i.setStyle(\"select.style\",\"border\"),i.setStyle(\"select.color\",\"#F07819\"),i.setStyle(\"select.width\",.7),i.setStyle(\"vector.outline.color\",\"#BEC9BE\"),bn.Default.setObject2dCSProps(i,t),i},align:function(t,e){if(e&&t&&!(t.size()<2)){var i=this[\"_align_\"+e];i&&i.call(this,t)}},_align_up:function(t){for(var e=t.get(0).getLocation().y,i=1;i<t.size();i++)e=Math.min(e,t.get(i).getLocation().y);t.forEach(function(t){t.setY(e)})},_align_down:function(t){for(var e=t.get(0).getLocation().y+t.get(0).getSize().height,i=1;i<t.size();i++)e=Math.max(e,t.get(i).getLocation().y+t.get(i).getSize().height);t.forEach(function(t){t.setY(e-t.getSize().height)})},_align_left:function(t){for(var e=t.get(0).getLocation().x,i=1;i<t.size();i++)e=Math.min(e,t.get(i).getLocation().x);t.forEach(function(t){t.setX(e)})},_align_right:function(t){for(var e=t.get(0).getLocation().x+t.get(0).getSize().width,i=1;i<t.size();i++)e=Math.max(e,t.get(i).getLocation().x+t.get(i).getSize().width);t.forEach(function(t){t.setX(e-t.getSize().width)})},_align_center:function(t){for(var e=0,i=0;i<t.size();i++)e+=t.get(i).getCenterLocation().y;var n=e/t.size();t.forEach(function(t){t.setY(n-t.getSize().height/2)})},_align_middle:function(t){for(var e=0,i=0;i<t.size();i++)e+=t.get(i).getCenterLocation().x;var n=e/t.size();t.forEach(function(t){t.setX(n-t.getSize().width/2)})},flow:function(t,e,i){if(e&&t&&!(t.size()<2)){var n=this[\"_flow_\"+e];n&&n.call(this,t,i)}},_flow_hor:function(t,e){this.sort(t,function(t,e){return t.getLocation().y-e.getLocation().y}),this.sort(t,function(t,e){return t.getLocation().x-e.getLocation().x});for(var i=t.get(0),n=1;n<t.size();n++){var s=t.get(n),o=i.getLocation().x;s.setX(o+e),i=s}},_flow_ver:function(t,e){this.sort(t,function(t,e){return t.getLocation().x-e.getLocation().x}),this.sort(t,function(t,e){return t.getLocation().y-e.getLocation().y});for(var i=t.get(0),n=1;n<t.size();n++){var s=t.get(n),o=i.getLocation().y;s.setY(o+e),i=s}},sort:function(t,e){for(var i,n,s,o=t.size(),r=0;r<o;r++){i=t.get(r);for(var a=r+1;a<o;a++)n=t.get(a),(e?e(i,n):0)>0&&(s=n,n=i,i=s,t.set(r,i),t.set(a,n))}},wrapper:function(t,e){bn.Default.objectWrapper(t,\"id\",function(){return this.getClient(\"id\")}),bn.Default.objectWrapper(t,\"objectId\",function(){return this.getId()}),bn.Default.objectWrapper(t,\"width\"),bn.Default.objectWrapper(t,\"height\"),bn.Default.objectWrapper(t,\"depth\"),bn.Default.objectWrapper(t,\"px\"),bn.Default.objectWrapper(t,\"py\"),bn.Default.objectWrapper(t,\"pz\"),bn.Default.objectWrapper(t,\"rx\"),bn.Default.objectWrapper(t,\"ry\"),bn.Default.objectWrapper(t,\"rz\"),bn.Default.objectWrapper(t,\"position\"),bn.Default.objectWrapper(t,\"rotation\"),e&&e.forEach(function(e){bn.Default.objectWrapper(t,e)})}},bn.Default.register(\"twaver.cube.top\",function(t,e){var i=bn.Utils2D.createNode(t);return e&&e(i),i});for(var ut in bn.Utils2D)bn.Default[ut]=bn.Utils2D[ut]}();\nsetTimeout(function() {\n  twaver.Util.validateLicense('l=1.0\\ntype=3\\ngis=0\\n3d=0\\nstart=2017-03-03\\nlicensee=Huawei Software Technologies Ltd.\\nlicensedUser=1 USER\\nvalidity=PERMANENT\\nmaintenance=12 MONTH\\nbuyer=Shenzhen Chinasoft Technology Corporation Limited\\nsignature=541748c3446227421182d0d8a28f5069416ef6cc8d19efe5492b2b777958ef656bf8180d0560ad562d65044cba4fa4b58510095a766c79850b697f9b3a53521e514c0c345963ef9ad8b505b5ac24fc8f5652b669cd0cecc07bcc3e019d0ff45b0ac45561674c61932230cdcb7fea321565b37a730ad3dd00a3713f8dc611f10466cdcda505f4eeaf04c12d48883646824a37c64239fce1e95ff5345622243c4f843380f2867f1cb0142f0a4cac633f1a4ed4f31910b619eb4cec8f6b8d4ba4da19324affbe2070729ec49b4058fbb21c2ca50c49f7a6474f1b06d115ad01b55a8b71afef4a8e41233c29ab5608a298f5e5505386c455d5c271cbd33735dc2446')\n})"
          },
          "redirectURL": "",
          "headersSize": 417,
          "bodySize": 0,
          "_transferSize": 417,
          "_error": null,
          "_fetchedViaServiceWorker": false
        },
        "serverIPAddress": "119.8.229.117",
        "startedDateTime": "2025-08-12T13:53:47.553Z",
        "time": 76.51499996427447,
        "timings": {
          "blocked": 0.6919999646767974,
          "dns": -1,
          "ssl": -1,
          "connect": -1,
          "send": 0.09100000000000003,
          "wait": 73.06499994800984,
          "receive": 2.66700005158782,
          "_blocked_queueing": 0.3469999646767974,
          "_workerStart": -1,
          "_workerReady": -1,
          "_workerFetchStart": -1,
          "_workerRespondWithSettled": -1
        }
      },
      {
        "_fromCache": "disk",
        "_initiator": {
          "type": "script",
          "stack": {
            "callFrames": [
              {
                "functionName": "n",
                "scriptId": "114",
                "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                "lineNumber": 1,
                "columnNumber": 530806
              },
              {
                "functionName": "",
                "scriptId": "114",
                "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                "lineNumber": 1,
                "columnNumber": 531024
              },
              {
                "functionName": "Jt",
                "scriptId": "114",
                "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                "lineNumber": 1,
                "columnNumber": 530965
              },
              {
                "functionName": "getExternalScripts",
                "scriptId": "114",
                "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                "lineNumber": 1,
                "columnNumber": 534833
              },
              {
                "functionName": "",
                "scriptId": "114",
                "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                "lineNumber": 1,
                "columnNumber": 583273
              },
              {
                "functionName": "v",
                "scriptId": "114",
                "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                "lineNumber": 1,
                "columnNumber": 482618
              },
              {
                "functionName": "",
                "scriptId": "114",
                "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                "lineNumber": 1,
                "columnNumber": 483960
              },
              {
                "functionName": "",
                "scriptId": "114",
                "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                "lineNumber": 1,
                "columnNumber": 483047
              },
              {
                "functionName": "r",
                "scriptId": "114",
                "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                "lineNumber": 1,
                "columnNumber": 491861
              },
              {
                "functionName": "l",
                "scriptId": "114",
                "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                "lineNumber": 1,
                "columnNumber": 492064
              }
            ],
            "parent": {
              "description": "Promise.then",
              "callFrames": [
                {
                  "functionName": "r",
                  "scriptId": "114",
                  "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                  "lineNumber": 1,
                  "columnNumber": 491932
                },
                {
                  "functionName": "l",
                  "scriptId": "114",
                  "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                  "lineNumber": 1,
                  "columnNumber": 492064
                },
                {
                  "functionName": "",
                  "scriptId": "114",
                  "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                  "lineNumber": 1,
                  "columnNumber": 492123
                },
                {
                  "functionName": "",
                  "scriptId": "114",
                  "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                  "lineNumber": 1,
                  "columnNumber": 492004
                },
                {
                  "functionName": "Mo",
                  "scriptId": "114",
                  "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                  "lineNumber": 1,
                  "columnNumber": 582593
                },
                {
                  "functionName": "",
                  "scriptId": "114",
                  "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                  "lineNumber": 1,
                  "columnNumber": 642911
                },
                {
                  "functionName": "v",
                  "scriptId": "114",
                  "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                  "lineNumber": 1,
                  "columnNumber": 482618
                },
                {
                  "functionName": "",
                  "scriptId": "114",
                  "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                  "lineNumber": 1,
                  "columnNumber": 483960
                },
                {
                  "functionName": "",
                  "scriptId": "114",
                  "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                  "lineNumber": 1,
                  "columnNumber": 483047
                },
                {
                  "functionName": "r",
                  "scriptId": "114",
                  "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                  "lineNumber": 1,
                  "columnNumber": 491861
                },
                {
                  "functionName": "l",
                  "scriptId": "114",
                  "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                  "lineNumber": 1,
                  "columnNumber": 492064
                }
              ],
              "parent": {
                "description": "Promise.then",
                "callFrames": [
                  {
                    "functionName": "r",
                    "scriptId": "114",
                    "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                    "lineNumber": 1,
                    "columnNumber": 491932
                  },
                  {
                    "functionName": "l",
                    "scriptId": "114",
                    "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                    "lineNumber": 1,
                    "columnNumber": 492064
                  },
                  {
                    "functionName": "",
                    "scriptId": "114",
                    "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                    "lineNumber": 1,
                    "columnNumber": 492123
                  },
                  {
                    "functionName": "",
                    "scriptId": "114",
                    "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                    "lineNumber": 1,
                    "columnNumber": 492004
                  },
                  {
                    "functionName": "",
                    "scriptId": "114",
                    "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                    "lineNumber": 1,
                    "columnNumber": 643491
                  },
                  {
                    "functionName": "",
                    "scriptId": "114",
                    "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                    "lineNumber": 1,
                    "columnNumber": 514777
                  }
                ],
                "parent": {
                  "description": "Promise.then",
                  "callFrames": [
                    {
                      "functionName": "",
                      "scriptId": "114",
                      "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                      "lineNumber": 1,
                      "columnNumber": 514752
                    }
                  ],
                  "parent": {
                    "description": "Promise.then",
                    "callFrames": [
                      {
                        "functionName": "ue",
                        "scriptId": "114",
                        "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                        "lineNumber": 1,
                        "columnNumber": 514627
                      },
                      {
                        "functionName": "",
                        "scriptId": "114",
                        "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                        "lineNumber": 1,
                        "columnNumber": 523462
                      },
                      {
                        "functionName": "",
                        "scriptId": "114",
                        "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                        "lineNumber": 1,
                        "columnNumber": 523438
                      }
                    ],
                    "parent": {
                      "description": "Promise.then",
                      "callFrames": [
                        {
                          "functionName": "He",
                          "scriptId": "114",
                          "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                          "lineNumber": 1,
                          "columnNumber": 522919
                        },
                        {
                          "functionName": "Re",
                          "scriptId": "114",
                          "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                          "lineNumber": 1,
                          "columnNumber": 520869
                        },
                        {
                          "functionName": "",
                          "scriptId": "114",
                          "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                          "lineNumber": 1,
                          "columnNumber": 642717
                        },
                        {
                          "functionName": "",
                          "scriptId": "114",
                          "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                          "lineNumber": 1,
                          "columnNumber": 642612
                        },
                        {
                          "functionName": "Zc",
                          "scriptId": "114",
                          "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                          "lineNumber": 1,
                          "columnNumber": 643549
                        },
                        {
                          "functionName": "b",
                          "scriptId": "114",
                          "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                          "lineNumber": 1,
                          "columnNumber": 646852
                        }
                      ],
                      "parent": {
                        "description": "await",
                        "callFrames": [
                          {
                            "functionName": "",
                            "scriptId": "114",
                            "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                            "lineNumber": 1,
                            "columnNumber": 647298
                          },
                          {
                            "functionName": "",
                            "scriptId": "114",
                            "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                            "lineNumber": 1,
                            "columnNumber": 647309
                          },
                          {
                            "functionName": "",
                            "scriptId": "114",
                            "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                            "lineNumber": 1,
                            "columnNumber": 82578
                          },
                          {
                            "functionName": "Gn",
                            "scriptId": "114",
                            "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                            "lineNumber": 1,
                            "columnNumber": 82523
                          },
                          {
                            "functionName": "ht",
                            "scriptId": "114",
                            "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                            "lineNumber": 1,
                            "columnNumber": 66848
                          },
                          {
                            "functionName": "it",
                            "scriptId": "114",
                            "url": "https://la5.fusionsolar.huawei.com/framework/static/js/main.63d0a1cd.js",
                            "lineNumber": 1,
                            "columnNumber": 66438
                          }
                        ],
                        "parentId": {
                          "id": "339",
                          "debuggerId": "-6060000868116882005.8926023096971503728"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "_priority": "High",
        "_resourceType": "fetch",
        "cache": {},
        "connection": "443",
        "pageref": "page_5",
        "request": {
          "method": "GET",
          "url": "https://la5.fusionsolar.huawei.com/pvmswebsite/assets/build/static/js/main.37fa4adb.js",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            },
            {
              "name": "Referer",
              "value": "https://la5.fusionsolar.huawei.com/uniportal/pvmswebsite/assets/build/cloud.html?app-id=smartpvms&instance-id=smartpvms&zone-id=region-1-a30723bb-f51d-46f4-8eab-6a21dd3a8563"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Not;A=Brand\";v=\"99\", \"Microsoft Edge\";v=\"139\", \"Chromium\";v=\"139\""
            },
            {
              "name": "DNT",
              "value": "1"
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            }
          ],
          "queryString": [],
          "cookies": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "http/1.1",
          "headers": [
            {
              "name": "cache-control",
              "value": "private max-age=31536000"
            },
            {
              "name": "Content-Encoding",
              "value": "gzip"
            },
            {
              "name": "etag",
              "value": "W/\"6399581-1752456992000\""
            },
            {
              "name": "x-envoy-upstream-service-time",
              "value": "1"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "x-download-options",
              "value": "noopen"
            },
            {
              "name": "lubanops-nenv-id",
              "value": "36"
            },
            {
              "name": "lubanops-ntrace-id",
              "value": "5044-1755006836432-2443488"
            },
            {
              "name": "lubanops-gtrace-id",
              "value": "5044-1755006836432-2443488"
            },
            {
              "name": "Date",
              "value": "Tue, 12 Aug 2025 13:53:24 GMT"
            },
            {
              "name": "x-xss-protection",
              "value": "1; mode=block"
            },
            {
              "name": "Content-Type",
              "value": "application/javascript"
            },
            {
              "name": "last-modified",
              "value": "Mon, 14 Jul 2025 01:36:32 GMT"
            },
            {
              "name": "Server",
              "value": "elb"
            },
            {
              "name": "x-frame-options",
              "value": "SAMEORIGIN"
            }
          ],
          "cookies": [],
          "content": {
            "size": 6399581,
            "mimeType": "application/javascript",
            "text": "/*! For license information please see main.37fa4adb.js.LICENSE.txt */\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"PVMSWebsite-website-main\"]=t():e[\"PVMSWebsite-website-main\"]=t()}(self,(()=>(()=>{var t,n,r,i,o,a,s,l,c={22864:()=>{},85506:(e,t,n)=>{\"use strict\";n.d(t,{E:()=>r,S:()=>i});const r=\"NCOPUSHSETTING/NCO_PUSH_SETTING_LOADINGING\",i=\"NCOPUSHSETTING/NCO_PUSH_SETTING_LOADEDING\"},8277:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(85506);const i={loading:!1,tableData:(0,n(44184).W_)()},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.E:return{...n,loading:!0};case r.S:return{...n,loading:!1,tableData:t.tableData};default:return n}}},15837:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>i});const r={loading:!1,isShowModal:!1,plantTreeData:[]},i=(e,t)=>{const n=null!=e?e:r;switch(t.type){case\"NCOPUSHSETTINGTEMPLATE/START_LOADING\":return{...n,loading:!0};case\"NCOPUSHSETTINGTEMPLATE/REMOTE_MAIL_CHECK\":return{...n,isShowModal:t.payload};case\"NCOPUSHSETTINGTEMPLATE/FINISH_LOADING\":return{...n,loading:!1,plantTreeData:t.payload};default:return n}}},21172:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(88391),i=n(23712);function o(e){class t extends r.Component{constructor(e){super(e),this.state={component:null}}async componentDidMount(){const{default:{component:t}}=await e();this.setState({component:t})}async componentWillUnmount(){this.setState=()=>{}}render(){const{component:e}=this.state;return e?(0,i.jsx)(e,{...this.props}):null}}return t}},82621:(e,t,n)=>{\"use strict\";n.d(t,{Jm:()=>d,OV:()=>s,R4:()=>p,WO:()=>a,XO:()=>r,kj:()=>c,nc:()=>o,qQ:()=>i,tg:()=>u,uf:()=>l});const r=\"NCOSEARCHBAR/SELECT_TREE_NODE\",i=\"NCOCOMPANYMANAGEMENT/UPDATE_PATH\",o=\"NCOCOMPANYMANAGEMENT/UPDATE_CURRENT_COMPANY\",a=\"NCOCOMPANYMANAGEMENT/START_SAVE\",s=\"NCOCOMPANYMANAGEMENT/FINISH_SAVE\",l=\"NCOCOMPANYMANAGEMENT/START_DELETE\",c=\"NCOCOMPANYMANAGEMENT/FINISH_DELETE\",u=\"NCOCOMPANYMANAGEMENT/SET_COMPANY_POVERTY_LICENSE_CONTROL\",d=\"NCOCOMPANYMANAGEMENT/FINISH_LOAD_MAP_SETTINGS\",p=\"NCOCOMPANYMANAGEMENT/RESET_REDUCER\"},62819:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(82621);const i={loading:!1,saving:!1,deleting:!1,pathFromRoot:\"/\",company:{},mapSettings:null,isEmptyMap:!0,mapConfigs:[],hasSetupPovertyLicense:!1},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.WO:return{...n,saving:!0};case r.OV:return{...n,saving:!1};case r.uf:return{...n,deleting:!0};case r.kj:return{...n,deleting:!1};case r.qQ:return{...n,pathFromRoot:t.payload};case r.nc:return{...n,company:t.payload};case r.Jm:return{...n,mapSettings:{...t.payload.commonConfig,...t.payload.mapConfigs.find((e=>{let{defaultMap:t}=e;return t}))},mapConfigs:t.payload.mapConfigs,isEmptyMap:t.payload.isEmptyMap};case r.XO:return{...n,dn:t.payload};case r.tg:return{...n,hasSetupPovertyLicense:t.payload};case r.R4:return{...i};default:return n}}},74794:(e,t,n)=>{\"use strict\";n.d(t,{Bo:()=>l,EG:()=>c,yx:()=>s});var r=n(88391),i=n(37825),o=n(23712);const a={type:i.M5.smartpvms},s=r.createContext(a);s.displayName=\"NcoSystemTypeContext\";const l=s.Consumer,c=e=>{let{type:t,children:n}=e;return(0,o.jsx)(s.Provider,{value:{type:t},children:n})}},97117:(e,t,n)=>{\"use strict\";n.d(t,{X:()=>a,f:()=>s});var r=n(88391),i=n(4342),o=n(23712);const a=(0,r.createContext)();function s(e){const t=(0,i.bG)();return(0,o.jsx)(a.Provider,{value:t,children:e.children})}},95560:(e,t,n)=>{\"use strict\";n.d(t,{CJ:()=>o,PT:()=>a,Pc:()=>s,en:()=>r,g2:()=>l,h2:()=>i});const r=\"NCOACTIVATESTATISTIC/START_LOADING\",i=\"NCOACTIVATESTATISTIC/FINISH_LOADING\",o=\"NCOACTIVATESTATISTIC/FAIL_LOADING\",a=\"NCOACTIVATESTATISTIC/LOAD_DEVICE_TYPE_LIST\",s=\"NCOACTIVATESTATISTIC/SELECTED_ROWS_SET\",l=\"NCOACTIVATESTATISTIC/SAVE_TIME_ZONE\"},39705:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(95560);const i={loading:!1,selectedRows:[],tableData:{list:[],total:0,page:1,pageSize:10},sortCondition:{},deviceTypeList:[],selectedRows:[],timeZone:8},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.en:return{...n,loading:!0};case r.h2:return{...n,loading:!1,tableData:t.payload};case r.CJ:return{...n,loading:!1};case r.PT:return{...n,deviceTypeList:t.payload};case r.Pc:return{...n,selectedRows:t.payload};case r.g2:return{...n,timeZone:t.payload};default:return n}}},93911:(e,t,n)=>{\"use strict\";n.d(t,{CJ:()=>o,en:()=>r,h2:()=>i});const r=\"NCODEVICEINSPECTION/START_LOADING\",i=\"NCODEVICEINSPECTION/FINISH_LOADING\",o=\"NCODEVICEINSPECTION/FAIL_INSPECTION\"},37819:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(93911);const i={selectedRows:[],loading:!1,tableData:{list:[],total:0,page:1,pageSize:10},sortCondition:{}},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.en:return{...n,loading:!0};case r.h2:return{...n,loading:!1,tableData:t.payload};case r.CJ:return{...n,loading:!1};default:return n}}},54236:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>Ze});var r=n(23774),i=n(93706),o=n(34428),a=n(29266),s=n(90701),l=n(41541),c=n(45258),u=n(32449),d=n(88391),p=n(78939),f=n(9490),h=n(37825),m=n(10749),g=n(31251),v=n(49453),y=n(64218),b=n(95059),S=n(5083),x=n(28494),w=n(70535),C=n(17489),T=n(7029),A=n(62073),E=n(92252),O=n(4071),M=n(8508),P=n(15319),D=n(96519),I=n(57644),N=n(77531),_=n(59709),j=n(28107),k=n(64436),L=n(14077),R=n(59516),Z=n(44184),B=n(54568),F=n(13528),z=n(16910),V=n(92902),H=n(23712);const{Option:U}=E.Z,{neteco:G}=window,Y=230200061,W=230200223,K=[21021,230320241,230190100,230154821],q=230700059,Q=230320283,X=230190101,J=230320486,$=230700179,ee=230320484,te=230320279,ne=230200219,re=230190172,{operationConfirm:ie,operationInfo:oe}=b.Z,{refreshTouParam:ae}=m.Z,se=[\"dongleProtectSignalTip\",\"dongleReportSignalMoTip\"];class le extends d.Component{constructor(e){super(e),this.isPowerIncreaseThreshold=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 230200031===t},this.makeNormalInput=()=>{const{signal:e={},itemValue:t=\"\",tips:n=\"\"}=this.state,{edit:r=!1,validatePattern:i}=e,o=i?G.util.iUnescape(i):void 0,{intl:s}=this.props;return(0,H.jsx)(a.Z.Item,{children:(0,H.jsx)(A.Z,{value:t,disabled:!r||e.disabled,onChange:e=>{const{formTouchConfig:t={}}=this.props,{isFormTouched:n,touchForm:r=()=>{}}=t;n||r(),o&&!new RegExp(o).test(e.target.value)?this.setState({isWrongValue:!0}):this.setState({itemValue:e.target.value,isWrongValue:!1})},onBlur:t=>{const{signalRefresh:r,validatePattern:i}=e,o=i?G.util.iUnescape(i):void 0;o&&!new RegExp(o).test(t.target.value)&&(this.setState({isWrongValue:!0}),oe(s,n)),\"HW_MODBUS_DEVICE_REFRESH\"===r&&new RegExp(o).test(t.target.value)&&(0,y.Nu)(\"add_chain_value\",{sig:e,value:t.target.value,shouldReload:!0})}})})},this.makeNormalInputNumber=()=>{const{signal:e,itemValue:t,isWrongValue:n}=this.state,{edit:r=!1}=e,i=n?{border:\"1px solid red\"}:{},{precision:o=0,id:s}=e,l=o>0?1/Math.pow(10,o):1;let c={};return(0,F.Dq)()&&(c={decimalSeparator:\",\"}),(0,H.jsx)(a.Z.Item,{children:(0,H.jsx)(T.Z,{...c,step:l,style:{...i},value:t,disabled:!r||e.disabled,onChange:t=>{const{formTouchConfig:n={}}=this.props,{touchForm:r=()=>{}}=n;r({id:e.id,value:t}),this.setState({itemValue:t}),(0,B.mE)(e,`${t}`)?(this.setState({isWrongValue:!1}),(0,y.Nu)(\"change_form_uncontrolled_error\",{signalId:s,remove:!0})):(this.setState({isWrongValue:!0}),(0,y.Nu)(\"change_form_uncontrolled_error\",{signalId:s,remove:!1}))},onBlur:t=>{const{signalRefresh:n}=e;(0,B.mE)(e,`${(0,F.xP)(t.target.value)}`)?(this.setState({isWrongValue:!1}),\"HW_MODBUS_DEVICE_REFRESH\"===n&&(0,y.Nu)(\"add_chain_value\",{sig:e,value:(0,F.xP)(t.target.value),shouldReload:!0})):this.setState({isWrongValue:!0})}})})},this.checkRefresh=e=>{const{signal:t={}}=this.state,{signalRefresh:n}=t;\"HW_MODBUS_DEVICE_REFRESH\"===n&&(0,y.Nu)(\"add_chain_value\",{sig:t,value:e,shouldReload:!0})},this.findGridStatus=e=>{for(const t of e){const e=t.signals&&t.signals.find((e=>e.id===te));if(e&&\"0\"===e.value)return!0}return!1},this.findPeakShavingStatus=e=>{for(const t of e){const e=t.signals&&t.signals.find((e=>e.id===ee));if(e&&\"1\"===e.value)return!0}return!1},this.peakShavingSpecialHandle=(e,t,n,r)=>t.id===ee&&\"1\"===n&&this.findGridStatus(r)?(oe(e,e.formatMessage({id:\"neteco.pvms.device.peakShaving.tips\"})),!0):!(t.id!==te||\"0\"!==n||!this.findPeakShavingStatus(r)||(oe(e,e.formatMessage({id:\"neteco.pvms.device.gridCharge.tips\"})),0)),this.makeNormalSelect=()=>{const{intl:e,signals:t}=this.props,{signal:n,itemValue:r,rulesConfig:i={}}=this.state,{edit:o=!1}=n;let s;const l=(0,B.dY)(n);return s=l.find((e=>e.key===r))?r:\"\",(0,H.jsx)(a.Z.Item,{children:(0,H.jsx)(E.Z,{value:s,disabled:!o||n.disabled,virtual:!1,showSearch:!0,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,getPopupContainer:e=>e.parentNode||document.body,onChange:r=>{const{formTouchConfig:o={},groups:a}=this.props,{touchForm:s=()=>{}}=o;if(this.peakShavingSpecialHandle(e,n,r,a))return;if(i){const{pass:n=!0,message:o}=(0,k.T)(\"select\")(t,i,r);if(!n)return void oe(e,e.formatMessage({id:o}))}const{confirmation:l,config:c,dependSignalIds:u}=i;if(u){const{pass:o=!0,message:a}=(0,k.C)(t,i,r);if(!o)return void ie(e,e.formatMessage({id:a}),(()=>{this.checkRefresh(r),this.setState({itemValue:r}),(0,Z.mf)(s)&&s({...n,value:r})}))}l?c?c===r?ie(e,e.formatMessage({id:l}),(()=>{this.checkRefresh(r),this.setState({itemValue:r}),s({...n,value:r})})):(this.checkRefresh(r),this.setState({itemValue:r}),s({...n,value:r})):ie(e,e.formatMessage({id:l}),(()=>{this.checkRefresh(r),this.setState({itemValue:r}),s({...n,value:r})})):((0,Z.mf)(s)&&s({...n,value:r}),this.checkRefresh(r),this.setState({itemValue:r}))},children:l.map((e=>(0,H.jsx)(U,{children:e.displayName},e.key)))})})},this.makeFormItemRules=()=>{const{signal:e}=this.state,{validatePattern:t,tips:n,id:r}=e,i=t?G.util.iUnescape(t):void 0,o=[];return i&&o.push({pattern:new RegExp(i),message:n||\"\"}),(0,y.Cx)(r)&&o.push({pattern:/^((2(5[0-5]|[0-4]\\d))|[0-1]?\\d{1,2})(\\.((2(5[0-5]|[0-4]\\d))|[0-1]?\\d{1,2})){3}$/,message:\"\"}),o},this.makeControlledInput=()=>{const{intl:e}=this.props,{signal:t}=this.state,{value:n,id:r}=t,i=33595393===r;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(a.Z.Item,{name:`${r}`,rules:this.makeFormItemRules(),initialValue:n,children:(0,H.jsx)(A.Z,{disabled:i||t.disabled,onChange:e=>{const{formTouchConfig:n={}}=this.props,{touchForm:r=()=>{}}=n;r({id:t.id,value:String(e.target.value)})}})}),(()=>{if(\"21018\"===String(r))return(0,H.jsxs)(\"div\",{className:\"pvms-sensitive-operation-tip-div\",children:[(0,H.jsx)(\"img\",{src:\"/pvmswebsite/assets/build/images/groupIcon/ic_importmdpi.png\"}),(0,H.jsx)(\"span\",{className:\"pvms-sensitive-operation-tip\",children:e.formatMessage({id:\"neteco.pvms.stationInfo.addStation.devNameCheck\"})})]})})()]})},this.hideFormExplain=()=>{const{signal:e={}}=this.state,{id:t}=e,n=document.querySelector(`#signal-config-form-item-${t} .ant-form-item-explain`);n&&n.classList.remove(\"color-red\")},this.showFormExplain=()=>{const{signal:e={}}=this.state,{id:t}=e;setTimeout((()=>{const e=document.querySelector(`#signal-config-form-item-${t} .ant-form-item-explain`);e&&e.classList.add(\"color-red\")}),500)},this.makeCheckBox=()=>{const{signal:e}=this.state,{id:t,value:n,edit:r}=e;let i=[],s=[];try{i=JSON.parse(n).map((e=>{let{label:t,checked:n,disabled:r}=e;return{label:t,value:t,checked:n,disabled:r}})),s=i.filter((e=>!e.disabled))}catch(e){}const l=i.filter((e=>e.checked)).map((e=>e.value)),c=Object.fromEntries([[`${t}`,l]]);return this.props.controlConfig.form.setFieldsValue(c),(0,H.jsx)(a.Z.Item,{name:`${t}`,children:(0,H.jsx)(o.Z.Group,{options:s,disabled:!r||e.disabled,onChange:e=>{const{formTouchConfig:n={},controlConfig:r={}}=this.props,{form:o}=r,{touchForm:a}=n,s=i.map((t=>({...t,checked:e.indexOf(t.value)>=0})));22100===t&&this.checkRefresh(s),(0,Z.mf)(a)&&a({id:t,value:s});const l=Object.fromEntries([[`${t}`,e]]);o.setFieldsValue(l)}})})},this.makeControlledInputNumber=()=>{const{controlConfig:e={},intl:t,deviceMocId:n,groups:r}=this.props,{form:i}=e,{signal:o}=this.state,{value:s,id:l,precision:c=0,valueRange:u,validatePattern:d}=o,p=d?G.util.iUnescape(d):void 0;let f=[],h={};u&&(f=u.ranges?u.ranges:[]),f.length>0&&(h=f[0]);const{maxValue:m,minValue:g}=h;let v={step:c>0?1/Math.pow(10,c):1,disabled:o.disabled};return(0,F.Dq)()&&(v={...v,decimalSeparator:\",\"}),(0,H.jsxs)(a.Z.Item,{noStyle:!0,children:[(0,H.jsx)(a.Z.Item,{name:`${l}`,initialValue:s,validateTrigger:\"onBlur\",rules:[{validator:(e,n)=>{if(\"NA\"===n||null===n||\"\"===n)return this.hideFormExplain(),Promise.resolve();if(void 0===n)return this.hideFormExplain(),Promise.reject(\"\");if(void 0===g&&void 0===m&&!new RegExp(p).test(`${n}`))return this.hideFormExplain(),Promise.reject(\"\");const o=String(n).split(\".\")[1];if(o&&o.length>c)return this.hideFormExplain(),Promise.reject(\"\");const a=parseFloat(n);if(isNaN(a))return this.hideFormExplain(),Promise.reject(\"\");const s=Number(Number(g).toFixed(c)),l=Number(Number(m).toFixed(c));if(void 0!==g&&a<s)return this.hideFormExplain(),Promise.reject(\"\");if(void 0!==m&&a>l)return this.hideFormExplain(),Promise.reject(\"\");const{rulesConfig:u}=this.state;if(u){const e=(0,k.T)(\"number\");if(e){const n=e(i,u,a,r),{pass:o=!0,message:s}=n;if(!o)return this.showFormExplain(),Promise.reject(t.formatMessage({id:s}));const{compareSignalIds:l=[]}=u,c=l.map((e=>({name:`${e}`,value:i.getFieldValue(`${e}`),error:void 0})));i.setFields(c)}}return this.hideFormExplain(),Promise.resolve()}}],children:(0,H.jsx)(T.Z,{...v,onChange:e=>{const{formTouchConfig:t={}}=this.props,{touchForm:n=()=>{}}=t;n({id:o.id,value:String(e)})},onBlur:e=>{var r,a;if(this.isPowerIncreaseThreshold(o)&&20821===n){const{formTouchConfig:n={}}=this.props,{touchForm:r=()=>{}}=n,a=(0,F.xP)(e.target.value),l=Object.fromEntries([[`${o.id}`,s]]);Number(a)!==Number(s)&&Number(a)>.02*m&&Number(a)<=m&&ie(t,t.formatMessage({id:\"neteco.pvms.param.setting.powerIncreaseThreshold.vol\"}),(()=>{r({id:o.id,value:a})}),(()=>{i.setFieldsValue(l),r({id:o.id,value:s})}))}const l=null===(r=this.state)||void 0===r||null===(a=r.rulesConfig)||void 0===a?void 0:a.compareSignalIds;l&&i.validateFields(l.map((e=>`${e}`)))}})}),(()=>{if([\"230470075\",\"230470076\",\"21105\",\"21106\"].includes(String(l)))return(0,H.jsxs)(\"div\",{className:\"pvms-sensitive-operation-tip-div\",children:[(0,H.jsx)(\"img\",{src:\"/pvmswebsite/assets/build/images/groupIcon/ic_importmdpi.png\"}),(0,H.jsx)(\"span\",{className:\"pvms-sensitive-operation-tip\",children:t.formatMessage({id:\"neteco.pvms.SensitiveOperation.Tip\"})})]})})()]})},this.makeControlledSelect=()=>{const{intl:e}=this.props,{signal:t,rulesConfig:n={}}=this.state,{id:r,value:i,enumList:o={},enumListEntry:s}=t,{Option:l}=E.Z;let c,u;c=s instanceof Array&&s.length>0?s.map((e=>{const t=Object.entries(e)[0],n=t[0],r=t[1];return{key:String(n),displayName:G.util.iUnescape(String(r))}})):Object.entries(o).map((e=>({key:String(e[0]),displayName:G.util.iUnescape(String(e[1]))}))),u=c.find((e=>e.key===i))?i:\"\";const{controlConfig:d={}}=this.props,{form:p}=d;return(0,H.jsx)(a.Z.Item,{name:`${r}`,rules:[],initialValue:u,children:(0,H.jsx)(E.Z,{getPopupContainer:e=>e.parentNode||document.body,disabled:t.disabled,virtual:!1,showSearch:!0,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,onChange:i=>{const{formTouchConfig:o={}}=this.props,{touchForm:a=()=>{}}=o,s=230102182===r,l=s?\"0\":p.getFieldValue(`${r}`),c=s?\"\":{id:r,value:String(i)};a(c);const u=Object.fromEntries([[`${r}`,i]]),d=Object.fromEntries([[`${r}`,l]]),{confirmation:f}=n;if(f){if(s){if(\"0\"===i)return;p.setFieldsValue(d)}ie(e,e.formatMessage({id:f}),(()=>{(0,y.Nu)(\"add_chain_value\",{sig:t,value:i,shouldReload:!1}),p.setFieldsValue(u),s&&a({id:r,value:String(i)})}),(()=>{p.setFieldsValue(d),s&&a({id:r,value:\"0\"})}))}else p.setFieldsValue(u)},children:c.map((e=>(0,H.jsx)(l,{children:e.displayName},e.key)))})})},this.makeDisableGeneratorForm=()=>{const{formTouchConfig:e={},intl:t,signal:n,dn:r}=this.props,{value:i,id:o}=n,{touchForm:s}=e,l={value:i,intl:t,id:o,dn:r,disabled:n.disabled,touchForm:(0,Z.mf)(s)&&s};return n&&(0,H.jsx)(a.Z.Item,{children:(0,H.jsx)(_.Z,{...l})})},this.setJpTouValue=(e,t)=>{(0,y.Nu)(\"add_chain_value\",{sig:e,value:t,shouldReload:!1})},this.makeJpSmartLogger=()=>{const{formTouchConfig:e={},intl:t,signal:n,dn:r,signals:i}=this.props,{id:o,value:s}=n,{touchForm:l=()=>{}}=e,c={value:s,intl:t,id:o,dn:r,disabled:n.disabled,touchForm:l,setJpTouValue:e=>this.setJpTouValue(n,e),signals:i};return n&&(0,H.jsx)(a.Z.Item,{children:o===J||o===$||o===ne?(0,H.jsx)(j.Z,{...c}):(0,H.jsx)(N.Z,{...c})})},this.isRenderMultilineTime=e=>(0,B.MU)(e)||(0,B.oD)(e)||(0,B.af)(e)||(0,B.Sl)(e)||(0,B.Qn)(e)||(0,B.L9)(e)||(0,B.Gg)(e)||(0,B.Ku)(e),this.isShowUploadBtn=e=>[re].includes(e.id),this.makeFormItem=()=>{const{dn:e}=this.props,{signal:t,isControlled:n}=this.state;return this.isShowUploadBtn(t)?(0,R.lVp)(R.Lel)?(0,H.jsx)(V.Z,{dn:e}):null:this.isRenderMultilineTime(t)?this.makeJpSmartLogger():(0,B.Fc)(t)?this.makeDisableGeneratorForm():(0,B.mo)(t)?this.makeCheckBox():(0,B.Hr)(t)?n?this.makeControlledTouTable():this.makeTouTable():(0,B.wF)(t)||(0,B.C3)(t)||(0,B.KA)(t)||(0,B._w)(t)?n?this.makeControlledDiSchedulingTable():this.makeDiSchedulingTable():(0,B.wo)(t)?n?this.makeControlledBatteryInOutTable():this.makeBatteryInOutTable():(0,B.HD)(t)||(0,y.Cx)(t.id)?n?this.makeControlledInput():this.makeNormalInput():(0,B.hj)(t)?n?this.makeControlledInputNumber():this.makeNormalInputNumber():(0,B.No)(t)?n?this.makeControlledSelect():this.makeNormalSelect():this.makeNormalInput()},this.peakShavingTip=()=>(0,H.jsxs)(\"span\",{children:[(0,H.jsx)(\"img\",{src:\"/pvmswebsite/assets/build/images/home/tipsIcon.png\",className:\"peak-shaving-tip-icon\"}),this.props.intl.formatMessage({id:\"neteco.pvms.peakShaving.must.full.week\"})]}),this.workModelTip=()=>{const{intl:e}=this.props;return(0,H.jsx)(s.Z,{title:(0,H.jsx)(l.Z,{type:\"link\",href:this.getHelpUrl(),target:\"_blank\",rel:\"noopener noreferrer\",children:e.formatMessage({id:\"neteco.pvms.device.setting.workModelTips\"})}),overlayStyle:{maxWidth:\"none\"},children:(0,H.jsx)(O.Z,{})})},this.getHelpUrl=()=>`https://info.support.huawei.com/DpinfoAppBiz/#/u?i=3sm0eHsA&l=${window.neteco.i18n.getLocale()}`,this.buildDescription=(e,t,n,r)=>(0,z.Zr)(this.props.deviceMocId)&&21023===n&&r?(0,H.jsx)(s.Z,{overlayClassName:\"signal-item-question-circle-tooltip\",title:this.props.intl.formatMessage({id:\"i18n_fi_sun_config_setting_tips\"}),children:(0,H.jsx)(O.Z,{})}):(0,y.Ou)(this.props.deviceMocId)&&230190046===n?(0,H.jsx)(s.Z,{overlayClassName:\"signal-item-question-circle-tooltip\",title:this.props.intl.formatMessage({id:\"neteco.pvms.monitor.failurePowerId.message\"}),children:(0,H.jsx)(O.Z,{})}):r&&!t&&e?(0,H.jsx)(s.Z,{overlayClassName:\"signal-item-question-circle-tooltip\",title:G.util.iUnescape(String(e)),children:(0,H.jsx)(O.Z,{})}):(0,H.jsx)(\"div\",{}),this.handleSignalName=(e,t)=>[re].includes(e.id)?\"\":t?`${G.util.iUnescape(t)}:`:t,this.getSpanValue=()=>{const{signal:e}=this.state;return e.id===Y||e.id===W||e.id===Q||e.id===X||e.id===J||e.id===q||e.id===$||e.id===ne?22:(0,B.Hr)(e)||(0,B.wo)(e)?18:14};const{signal:t={},deviceMocId:n}=e,{value:r}=t,i=(0,B.GM)(t);let c;if((0,B.No)(t)){const e=(0,B.dY)(t).find((e=>e.key===r));c=e?e.key:\"\"}else c=r;const u=(0,M.b)(n,t);this.state={signal:t,isControlled:i,itemValue:c,rulesConfig:u||{},showFormExplain:!1,selfVoltage:\"\",diErrorData:\"\"}}componentDidMount(){this.state.isControlled||(this.refRefreshTouParam=ae.subscribe((()=>{this.setState({isWrongValue:!1})})))}componentWillUnmount(){this.state.isControlled||(this.refRefreshTouParam&&this.refRefreshTouParam.unsubscribe(),this.setState=()=>({}))}componentWillReceiveProps(e,t){const{controlConfig:n={}}=this.props,{signal:r={}}=e,{form:i}=n,{value:o,edit:a}=r,{signal:s,edit:l}=this.state,{value:c}=s,{isControlled:u}=this.state;if(o!==c||a!==l){if(this.setState({signal:r,itemValue:o}),u)return void(i&&c!==o&&i.setFields([{name:`${r.id}`,value:o,error:void 0}]));(0,y.Nu)(\"refresh_stashed_value\",{signal:r,newValue:o})}}makeTouTable(){return(0,H.jsx)(P.Z,{})}makeDiSchedulingTable(){return(0,H.jsx)(D.ZP,{})}makeControlledTouTable(){const{formTouchConfig:e={},intl:t}=this.props,{isFormTouched:n,touchForm:r=()=>{}}=e,{signal:i}=this.state,{id:o,value:s,disabled:l}=i;return(0,H.jsx)(a.Z.Item,{name:`${o}`,rules:[{validator:function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(i)?Promise.reject(t.formatMessage({id:i[0]})):(n||r(),Promise.resolve())}}],initialValue:s||\"[]\",children:(0,H.jsx)(P.Z,{signalValue:s,disabled:l})})}makeControlledDiSchedulingTable(){const{formTouchConfig:e={},controlConfig:t={},intl:n,hiddenDI4:r}=this.props,{isFormTouched:i,touchForm:o=()=>{},setDiState:s}=e,{form:l}=t,{signal:c,diErrorData:u}=this.state,{id:d,value:p}=c,f=`ACTIVE_POWER_${d}`,h=`WATTLESS_POWER_${d}`,m=[{id:f,targetId:h,type:1,value:p,title:n.formatMessage({id:\"neteco.pvms.device.di.scheduling.di.activePowerDispatch\"})},{id:h,targetId:f,type:2,value:p,title:n.formatMessage({id:\"neteco.pvms.device.di.scheduling.di.reactivePowerDispatch\"})}],g=e=>{this.setState({diErrorData:e})};return(0,H.jsx)(\"div\",{children:null==m?void 0:m.map((e=>{let{id:t,targetId:n,type:d,value:p,title:f}=e;return(0,H.jsx)(a.Z.Item,{name:`${t}`,rules:[{validator:function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(n)?(t=n[0],s&&s(d-1,!1)):s&&s(d-1,!0),i||(0,Z.mf)(o)&&o(),Promise.resolve()}}],initialValue:p||\"[]\",children:(0,H.jsx)(D.ZP,{handleChange:e=>{l.setFields([{name:`${c.id}_`,value:e.data,error:void 0}])},type:d,targetId:n,id:t,newValue:l.getFieldValue(`${n}_`),signalValue:p,title:f,diErrorData:u,changeDIError:g,disabled:c.disabled,hiddenDI4:r})})}))})}makeBatteryInOutTable(){return(0,H.jsx)(I.Z,{dn:this.props.dn})}makeControlledBatteryInOutTable(){const{formTouchConfig:e={},intl:t}=this.props,{isFormTouched:n,touchForm:r=()=>{}}=e,{signal:i}=this.state,{id:o,value:s,disabled:l}=i;return(0,H.jsx)(a.Z.Item,{name:`${this.state.signal.id}`,rules:[{validator:function(e){let i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(o)?(i=o[0],Promise.reject(t.formatMessage({id:i}))):(n||r(),Promise.resolve())}}],initialValue:this.state.signal.value||\"[]\",children:(0,H.jsx)(I.Z,{signalValue:s,dn:this.props.dn,disabled:l})})}render(){const{signal:e,isWrongValue:t=!1}=this.state,{controlConfig:n,intl:r,selectedRows:i}=this.props,{valueRange:o,description:a,validatePattern:s,showTips:l}=e,c=(0,y.kJ)(e.id,e.name);let u,d=!1;o&&o.displayRange&&\"[null~null]\"!==o.displayRange&&(u=o.displayRange);const p=(0,B.L6)(e)&&1===i.length,f=(0,B.hj)(e)&&e.validatePattern;(u||p||f)&&(d=!0);const{form:h}=n,m=h.getFieldError(e.id),g=m&&m.length>0||t,v=window.neteco.i18n.getLocale();return(0,H.jsx)(C.Z,{id:`signal-config-form-item-${e.id}`,span:24,children:se.includes(e.id)?(0,H.jsx)(w.Z,{className:\"left-padding-content\",type:\"flex\",children:(0,H.jsx)(C.Z,{span:24,children:\"zh-cn\"===v?(0,H.jsxs)(w.Z,{type:\"flex\",justify:\"center\",children:[(0,H.jsx)(C.Z,{span:19,children:(0,H.jsx)(\"span\",{style:{color:\"red\"},children:r.formatMessage({id:e.message})})}),(0,H.jsx)(C.Z,{span:3})]}):(0,H.jsx)(w.Z,{type:\"flex\",justify:\"center\",children:(0,H.jsx)(C.Z,{span:22,children:(0,H.jsx)(\"span\",{style:{color:\"red\"},children:r.formatMessage({id:e.message})})})})})}):(0,H.jsxs)(w.Z,{className:\"left-padding-content\",type:\"flex\",children:[(0,H.jsx)(C.Z,{span:24,children:(0,H.jsxs)(w.Z,{type:\"flex\",justify:\"center\",children:[(0,H.jsx)(C.Z,{span:14,children:(0,H.jsxs)(\"span\",{children:[this.handleSignalName(e,c),(e.id===J||e.id===$||e.id===ne)&&this.peakShavingTip(),K.includes(e.id)&&this.workModelTip()]})}),(0,H.jsx)(C.Z,{span:8})]})}),(0,H.jsx)(C.Z,{span:24,children:(0,H.jsxs)(w.Z,{type:\"flex\",justify:\"center\",children:[(0,H.jsx)(C.Z,{span:this.getSpanValue(),children:this.makeFormItem()}),(e.id!==Y||e.id===W||e.id!==Q||e.id!==X||e.id!==J||e.id!==q||e.id!==$)&&(0,H.jsxs)(C.Z,{span:(0,B.Hr)(e)||(0,B.wo)(e)?4:8,className:\"signal-item-right-part\",children:[(0,H.jsx)(C.Z,{span:3,className:\"right-part\",style:{fontSize:\"1.1rem\",color:\"#212121\"},children:(0,H.jsx)(\"div\",{className:\"signal-item-right-part-question\",children:this.buildDescription(a,s,e.id,l)})}),d?(0,H.jsx)(C.Z,{span:21,className:\"right-part \"+(g?\"right-part-red\":\"\"),children:(0,H.jsx)(L.Z,{intl:r,dn:this.props.dn,signal:e,device:i[0],isShowInModal:!0})}):(0,H.jsx)(C.Z,{span:21,className:\"right-part\"})]})]})})]})})}}const ce=le,ue=e=>{let{form:t,signals:n,intl:r,formTouchConfig:i,mocId:o,dn:a,groups:s,stationDn:l,selectedRows:c,hiddenDI4:u}=e;const d=(0,y.lW)(n,o);return(0,H.jsx)(\"div\",{className:\"form-items-wrapper\",children:(0,H.jsx)(\"div\",{className:\"config-items-wrapper\",children:(0,H.jsx)(w.Z,{children:d.map((e=>(0,H.jsx)(ce,{signals:d,dn:a,formTouchConfig:i,signal:e,deviceMocId:o,controlConfig:{form:t},intl:r,groups:s,stationDn:l,selectedRows:c,hiddenDI4:u},e.id)))})})})};var de=n(30929),pe=n(94173),fe=n(49100),he=n(69131),me=n(68718),ge=n(31519),ve=n(13388);n(80770);const{deviceMgtView:ye}=ge.e,{pageName:be,paramsSetting:Se}=ye,{paramsSettingId:xe,paramsSettingActionName:we}=Se,{configAndRefresh:Ce,refreshTouParam:Te,reloadPvTableDataSubject:Ae}=m.Z,{operationInfo:Ee,operationFailed:Oe,operationSuccess:Me,operationWarn:Pe,operationConfirm:De}=b.Z,{TabPane:Ie}=u.Z,{neteco:Ne}=window,_e=[20822,20821,20819,20851],je=230700176,ke=230190116;class Le extends d.Component{constructor(e){var t;super(e),t=this,this.getselectedNodes=e=>{this.setState({selectedNodes:e})},this.closePasswordModal=()=>{this.setState({shouldShowPasswordModal:!1})},this.showPasswordModal=()=>{this.setState({shouldShowPasswordModal:!0})},this.setDiState=(e,t)=>{const{isDiState:n}=this.state;let r=[...n];r[e]=t,this.setState({isDiState:r})},this.touchForm=(e,t)=>{if(this.setState({isFormTouched:\"jpTou\"!==t}),!e)return;const{changedList:n}=this.state,{id:r,value:i}=e;return void 0!==r&&void 0!==i&&n.set(r,i),!0},this.updateCurrentSignalConfig=e=>{0===this.initSignalFieldMap.size&&e.forEach((e=>{let{value:t,id:n}=e;\"FLOAT\"===e.dataType&&(t=isNaN(Number(t))||\"\"===String(t).trim()||(0,Z.le)(t)?t:String(Number(t))),this.initSignalFieldMap.set(Number(n),t)})),e.forEach((e=>{let{id:t,value:n}=e;\"FLOAT\"===e.dataType&&(n=isNaN(Number(n))||\"\"===String(n).trim()||(0,Z.le)(n)?n:String(Number(n))),this.dynamicSignalFieldsMap.set(Number(t),n)}))},this.getMoDetail=e=>new Promise((t=>{(0,v.Sg)(\"/rest/pvms/web/device/v1/mo-details\",{dn:e},18e4).then((e=>{let{success:n,data:r}=e;if(n){const{mo:e}=r,{versionId:n,typeId:i}=e;t({typeId:i,versionId:n})}else t({})})).catch((()=>{t({})}))})),this.resetFields=()=>{this.formRef.current&&this.formRef.current.resetFields()},this.showBatchModal=async()=>{const{checkIsDisclaimer:e}=this.props;await e()?this.setState({shouldShowBatchModal:!0}):this.setState({disclaimerVisible:!0,disclaimerNext:\"showBatchModal\"})},this.onSingleSubmit=async()=>{const{selectedRows:e}=this.state,{checkIsDisclaimer:t}=this.props;await t()?this.onSubmit(e.map((e=>({dn:e.dn,name:e.name}))),this.finishConfiguring,this.startConfiguring):this.setState({disclaimerVisible:!0,disclaimerNext:\"onSingleSubmit\"})},this.startConfiguring=()=>{this.setState({isConfiguring:!0})},this.finishConfiguring=()=>{this.setState({isConfiguring:!1})},this.onBatchSubmit=()=>{const{finishBatchConfiguring:e,intl:t,startBatchConfiguring:n}=this.props,{selectedNodes:r,selectedRows:i,isBatchClick:o}=this.state;if(r.length<1)return Pe(t,t.formatMessage({id:\"neteco.pvms.devEms.esnSel\"}));if(i[0].mocId!==r[0].moType)return Pe(t,t.formatMessage({id:\"neteco.pvms.partials.main.dm.mustSameTypeDevice\"}));const a=r[0].moString;if(a.split(\",\").length>50)return Pe(t,t.formatMessage({id:\"neteco.pvms.setting.data.repair.seleted.device.more50\"}));this.closeBatchModal(),o&&(this.setState({isBatchClick:!1}),-1!==a.indexOf(i[0].dn)?this.onSubmit(r.map((e=>({dn:e.moString}))),e,n):this.onSubmit(r.map((e=>({dn:`${e.moString},${i[0].dn}`}))),e,n)),setTimeout((()=>{this.setState({isBatchClick:!0})}),1e3)},this.closeBatchModal=()=>{this.setState({shouldShowBatchModal:!1})},this.getNeedAuthSignals=e=>e&&e.length?e.map((e=>e.signals)).flat().filter((e=>e.needAuth)):[],this.onSubmit=(e,t,n)=>{const{intl:r,configSignalGroups:i,isOpt:o,inverterDn:a,deviceTypesWithConfigSignals:s}=this.props,l=this.formRef.current,{selectedRows:c,freshState:u}=this.state,d=this.getStationDn(),{reactChainValuesMap:p,errorIdList:h,changedList:m}=this.state,g=[...p.entries()],v=Object.fromEntries(g);if(c.findIndex((e=>\"Connected\"!==e.status))>=0)return void Pe(r,r.formatMessage({id:\"neteco.pvms.device.status.down.offlineWarning\"}));if(!u)return this.initSignalFieldMap=new Map,void Me(r,r.formatMessage({id:\"neteco.pvms.partials.main.dm.devParamMenu.refreshBtn.tip\"}));if(h.size>0)return;const{getFieldsValue:y,validateFields:b}=l,S=[t,()=>{const{reactChainValuesMap:e}=this.state;this.refresh(!0,!1,!1),e.clear(),m.clear(),this.setState({isFormTouched:!1}),Me(r,r.formatMessage({id:\"neteco.pvms.device.config.noDataChange\"}))}];n&&n();const x=[],w=y();for(const e in w)Object.prototype.hasOwnProperty.call(w,e)&&l.isFieldTouched(e)&&!(0,B.mo)({id:e})&&x.push(e);b([...new Set([...m.keys(),...x])].filter((e=>void 0!==l.getFieldValue(e)))).then((n=>{const u={...n,...v,...Object.fromEntries([...m.entries()].filter((e=>void 0!==e[1])))},p=this.compareSignalValues(u);if((0,f.isEmptyObject)(p))return void S.forEach((e=>e()));let h=r.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.doItSuc\"});[230222696,230102696,230680514,230390403].find((e=>e in p))&&(h=r.formatMessage({id:\"neteco.pvms.powerSettings.curve.adjustment\"})),i({isOpt:o,inverterDn:a,selectedRows:c},e,p,{okCallbacks:[t,()=>{(0,me.WW)(xe,{pageName:be,actionName:we,processResult:Se.processResult.success}),this.initSignalFields(p);const{reactChainValuesMap:e}=this.state;this.refresh(!0,!1,!1),e.clear(),m.clear(),this.setState({isFormTouched:!1}),Me(r,h)}],batchCallbacks:[this.closeBatchModal,t,()=>{this.initSignalFields(p);const{reactChainValuesMap:e}=this.state;this.refresh(!0,!1,!1),e.clear(),m.clear(),this.setState({isFormTouched:!1})},e=>{e&&\"NETECO_IMODBUS_SYS_CONCURRENT\"===e[0].description?((0,me.WW)(xe,{pageName:be,actionName:we,processResult:Se.processResult.fail}),De(r,r.formatMessage({id:\"neteco.pvms.system.busy.try.again\"}))):e&&\"NETECO_IMODBUS_EXCEEDED_DEVICE_NUM\"===e[0].description?((0,me.WW)(xe,{actionName:we,pageName:be,processResult:Se.processResult.failOfOutSystem}),De(r,r.formatMessage({id:\"neteco.pvms.params.batch.config.device.limit.1\"}))):e?this.dealResultDlgInfo(r,e):Oe(r)}],failCallbacks:[t,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e&&\"NETECO_IMODBUS_SYS_CONCURRENT\"===e[0].description)(0,me.WW)(xe,{pageName:be,actionName:we,processResult:Se.processResult.fail}),De(r,r.formatMessage({id:\"neteco.pvms.system.busy.try.again\"}));else if(e&&\"NETECO_IMODBUS_EXCEEDED_DEVICE_NUM\"===e[0].description)(0,me.WW)(xe,{pageName:be,actionName:we,processResult:Se.processResult.failOfOutSystem}),De(r,r.formatMessage({id:\"neteco.pvms.params.batch.config.device.limit.1\"}));else if((0,me.WW)(xe,{pageName:be,actionName:we,processResult:Se.processResult.fail}),e){var n;const i=Object.entries((null===(n=e[0].data)||void 0===n?void 0:n.data)||{});if(i.length>0){const e=t.length,n=i.map((e=>`${e[1]}`)).find((e=>e)),o=r.formatMessage({id:n}),a=e>1?r.formatMessage({id:\"nco.pvms.device.configSignals.partial.failure\"},{0:o}):o;Oe(r,a)}else Oe(r)}else Oe(r)}]},l,{intl:r,callback:t,needAuthSignals:this.getNeedAuthSignals(s[0].groups)},this.initSignalFieldMap,d)})).catch((()=>{t&&t()})),setTimeout((()=>{t()}),18e4)},this.initSignalFields=e=>{Object.keys(e).forEach((t=>{this.dynamicSignalFieldsMap.set(Number(t),e[t])})),this.initSignalFieldMap=this.dynamicSignalFieldsMap},this.compareSignalValues=e=>{const{hiddenDI4:t}=this.state,n={};let r=null;if(Object.keys(e).forEach((t=>{const r=e[t],i=isNaN(Number(t))?Number(t.replace(/[^\\d]/g,\"\")):Number(t),o=this.initSignalFieldMap.get(i);this.dynamicSignalFieldsMap.has(i)&&o!==r&&(n[i]=r)})),(this.dynamicSignalFieldsMap.has(je)||n[230700176])&&(r=je),(this.dynamicSignalFieldsMap.has(ke)||n[230190116])&&(r=ke),\"1\"===n[22109]&&!n[r]){const e=this.dynamicSignalFieldsMap.get(r);r&&e&&(n[r]=e)}if(t&&n[r]){const e=JSON.parse(n[r]).map((e=>({...e,di4:0})));n[r]=JSON.stringify(e)}return n},this.setCurrentTypeTab=e=>{const{deviceTypesWithConfigSignals:t}=this.props;this.setState({currentTypeTabKey:e},(()=>{this.refreshForm(t)}))},this.switchTabPane=e=>{const{intl:t}=this.props,n=this.formRef.current,{validateFields:r,getFieldsValue:i}=n,{errorIdList:o,changedList:a}=this.state,s=[],l=\"neteco.pvms.device.set.params.hasError.tip\";if(o.size>0)return void Pe(t,t.formatMessage({id:l}));const c=i();for(const e in c)Object.prototype.hasOwnProperty.call(c,e)&&n.isFieldTouched(e)&&s.push(e);r([...new Set([...a.keys(),...s])].filter((e=>void 0!==n.getFieldValue(e)))).then((()=>{this.setCurrentTypeTab(e)})).catch((()=>{Pe(t,t.formatMessage({id:l}))}))},this.dealResultDlgInfo=(e,t)=>{const{hide:n,batchConfiguringSucceed:r,batchConfiguringFailed:i}=this.props;if(null!=t&&t.some((e=>0!==(null==e?void 0:e.code))))return(0,me.WW)(xe,{pageName:be,actionName:we,processResult:Se.processResult.fail}),i(),c.Z.info({title:e.formatMessage({id:\"neteco.pvms.partials.main.io.dm.heads.dealResult\"}),content:this.deadResultContent(t,e),onOk:h.mz,centered:!0});n&&n(),(0,me.WW)(xe,{pageName:be,actionName:we,processResult:Se.processResult.success}),r()},this.deadResultContent=(e,t)=>{var n;return(0,H.jsx)(\"div\",{children:[(0,H.jsx)(\"p\",{children:t.formatMessage({id:\"neteco.pvms.tracking.partModifiedFail\"})})].concat(null==e||null===(n=e.filter((e=>0!==(null==e?void 0:e.code))))||void 0===n?void 0:n.map((e=>{var n;const r=Object.entries((null==e||null===(n=e.data)||void 0===n?void 0:n.data)||{}),i=r.length>0?`:${t.formatMessage({id:r[0][1]})}  `:\"\";return(0,H.jsx)(\"p\",{style:{color:\"red\"},children:Ne.util.iUnescape(e.data.name)+i+t.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.doItFail\"})})})))})},this.getStationDn=()=>{var e;let t=(null===(e=this.props)||void 0===e?void 0:e.selectedTreeNode)||{};for(;t;){const{mocId:e,elementDn:n}=t;if((0,y.jE)(e))return n;t=t.parentNode}},this.createLeftTabs=e=>{const{intl:t}=this.props,n=this.formRef.current,{selectedRows:r,currentTypeTabKey:i,hiddenDI4:o}=this.state,[a]=r,{mocId:s}=a,[l={}]=r,{dn:c}=l;this.setState({groups:e});const d={isFormTouched:this.state.isFormTouched,touchForm:this.touchForm,setDiState:this.setDiState},p=i||e[0].name,f=this.getStationDn();return e.length>0?(0,H.jsx)(u.Z,{tabPosition:\"left\",activeKey:p,onTabClick:this.switchTabPane,className:\"params-set-modal-tabs\",children:e.filter((e=>{if(r.length>1){var t;const{signals:n=[]}=e;if(22100===(null===(t=n[0])||void 0===t?void 0:t.id))return!1}return!0})).map(((i,a)=>{const l=(0,H.jsx)(\"div\",{dangerouslySetInnerHTML:{__html:i.name}});return(0,H.jsx)(Ie,{tab:l,style:{height:\"35.4rem\",overflowX:\"auto\"},title:i.name,children:ue({signals:i.signals,intl:t,form:n,formTouchConfig:d,mocId:s,dn:c,groups:e,stationDn:f,selectedRows:r,hiddenDI4:o})},i.name)}))}):null},this.startRefresh=()=>{this.setState({isRefreshing:!0})},this.stopRefresh=()=>{this.setState({isRefreshing:!1})},this.refresh=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{loadNcoDevicePropConfigModal:i,intl:o,isOpt:a,inverterDn:s}=t.props,{selectedRows:l,isFirstRefresh:c}=t.state;if(l.findIndex((e=>\"Connected\"!==e.status))>=0)return!c&&Pe(o,o.formatMessage({id:\"neteco.pvms.device.status.down.offlineWarning\"})),void t.setState({isFirstRefresh:!1});const[u={}]=l,{dnId:d,dn:p}=u,f=d+`${(new Date).getTime()}`;e&&t.startRefresh();const h=()=>{const{reactChainValuesMap:r,isFirstRefresh:o,changedList:c,errorIdList:u}=t.state;e&&i(l,{},{isOpt:a,inverterDn:s},{okCallbacks:[()=>{t.stopRefresh(),e&&(n&&Te.next(),r.clear(),c.clear(),t.setState({isFormTouched:!1}),u.clear())},()=>{o&&t.setState({isFirstRefresh:!1})}],failCallbacks:[()=>{t.stopRefresh(),t.setState({isFirstRefresh:!1})}]})};e&&t.props.refreshConfigSignal(p,f,r,(e=>{if(e){const{code:n}=e;0===n?(t.initSignalFieldMap=new Map,(0,y.Nu)(\"fresh_state\",{serialNumber:f,refreshCallback:h}),t.freshStateTimer=setTimeout((()=>{Z.B7&&Z.B7.clearInterval(),t.setState({freshState:!0,isFirstRefresh:!1})}),6e4)):(t.setState({isFirstRefresh:!1}),t.stopRefresh(),Oe(o,o.formatMessage({id:\"neteco.pvms.partials.main.dm.devParamMenu.refreshFail\"})))}else t.setState({isFirstRefresh:!1}),Oe(o,o.formatMessage({id:\"NETECO_IMODBUS_FILE_TRANSING\"}))}))},this.getFreshStatus=async(e,t)=>{const n=await(0,de.ty)(e);n&&(t(),Z.B7.clearInterval(),clearTimeout(this.freshStateTimer)),this.setState({freshState:n})},this.handleCancel=()=>{this.setState({disclaimerVisible:!1})},this.handleOk=async()=>{const{updateDisclaimer:e}=this.props,{success:t,data:n}=await e();if(t&&n){this.setState({disclaimerVisible:!1});const{disclaimerNext:e}=this.state;\"showBatchModal\"===e?this.showBatchModal():this.loadingSubmit()}},this.getDisclaimer=e=>{const t=h.H0.includes((0,g.rC)())?\"neteco.pvms.device.set.params.disclaimer\":\"neteco.pvms.device.set.params.disclaimer.park\";return e.formatMessage({id:t}).split(\"#\").map(((e,t)=>(0,H.jsx)(\"p\",{children:e},t)))},this.agreePrecautions=e=>{this.setState({confirmBtnDisabled:!e.target.checked})},this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.loadingSubmit=()=>{const{loading:e}=this.props;return e?this.loadConfigTimeOut&&this.loadingSubmitNumber>=40?(this.loadingSubmitNumber=0,void(this.loadConfigTimeOut=null)):(this.loadConfigTimeOut=setTimeout((()=>{this.loadingSubmit()}),200),void this.loadingSubmitNumber++):(this.onSingleSubmit(),this.loadingSubmitNumber=0,void(this.loadConfigTimeOut=null))},this.formRef=(0,d.createRef)();const{selectedRows:n=[]}=this.props,r=[...n];this.state={currentTypeTabKey:\"\",groups:[],errorIdList:new Set([]),shouldShowPasswordModal:!1,reactChainValuesMap:new Map,changedList:new Map([]),selectedRows:r.length>0?r:[{}],isFirstRefresh:!0,shouldShowBatchModal:!1,typeId:void 0,versionId:void 0,selectedNodes:[],isBatchClick:!0,isDiState:[!0,!0],confirmBtnDisabled:!0,disclaimerNext:\"\",isConfiguring:!1,freshState:!0,disclaimerVisible:!1,hiddenDI4:!1},this.loadingSubmitNumber=0,this.loadConfigTimeOut=null}refreshForm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.dynamicSignalFieldsMap=new Map;const t=[],{changedList:n,selectedRows:r}=this.state,[i]=r,{mocId:o}=i;e.forEach((e=>{e.groups.map((e=>(0,y.lW)(e.signals,o))).forEach((e=>t.push(...e)))})),this.updateCurrentSignalConfig(t);const a=new Map([...n].filter((e=>{let[t,n]=e;return this.dynamicSignalFieldsMap.has(Number(t))})));this.setState({hiddenDI4:\"1\"===this.dynamicSignalFieldsMap.get(22109),changedList:a,formContent:e.map((e=>(0,H.jsx)(\"div\",{children:this.createLeftTabs(e.groups)},e.type)))},(()=>{var e;null===(e=this.formRef.current)||void 0===e||e.validateFields()}))}componentDidMount(){const{loadNcoDevicePropConfigModal:e,hide:t,intl:n,isOpt:r,inverterDn:i}=this.props,{selectedRows:o}=this.state;var a;this.initSignalFieldMap=new Map,e(o,{},{isOpt:r,inverterDn:i},{okCallbacks:[()=>{this.refresh(!0,!1,!0)}],failCallbacks:[()=>{t&&t(),Oe(n,n.formatMessage({id:\"neteco.pvms.device.management.not_exists\"}),(()=>{Ae.next()}))}]}),o.length>0&&this.getMoDetail(null===(a=o[0])||void 0===a?void 0:a.dn).then((e=>{const{typeId:t,versionId:n}=e;this.setState({typeId:t,versionId:n})})),this.reloadNcoDevicePropCallback=e=>{let{detail:t}=e;this.refreshForm(t.deviceTypesWithConfigSignals)},this.changeDevicePasswdCallback=()=>{De(n,n.formatMessage({id:\"neteco.pvms.deviceChangePwd.confirm\"}),(()=>{this.showPasswordModal()}))},this.addChainValueCallback=t=>{let{detail:n}=t;const{value:a,sig:s={},shouldReload:l=!1}=n,{id:c}=s,{reactChainValuesMap:u}=this.state;if(u.set(c,a),l){const t=new Map;[...u.entries()].forEach((e=>{t.set(String(e[0]),{value:e[1],id:e[0]})}));const{changedList:n=new Map([])}=this.state;[...n.keys()].forEach((e=>{n.get(e)&&\"null\"!==n.get(e)&&t.set(String(e),{id:e,value:n.get(e)})})),t.set(c,{id:c,value:a});const s=JSON.stringify([...t.values()]);e(o,{changeParam:s},{isOpt:r,inverterDn:i})}},this.refreshStashedValueCallback=e=>{let{detail:t}=e;const{signal:n={},newValue:r}=t,{id:i}=n,{reactChainValuesMap:o}=this.state;o.has(i)&&o.set(i,r)},this.freshStateStatusCallback=e=>{let{detail:t}=e;const{serialNumber:n,refreshCallback:r}=t;Z.B7.setInterval((()=>this.getFreshStatus(n,r)),he.v.devicePropConfigModal_freshStatus)},this.changeFormUncontrolledError=e=>{let{detail:t}=e;const{signalId:n,remove:r=!1}=t;void 0!==n&&(r?this.state.errorIdList.delete(n):this.state.errorIdList.add(n))},window.addEventListener(\"change_form_uncontrolled_error\",this.changeFormUncontrolledError),window.addEventListener(\"change_device_password\",this.changeDevicePasswdCallback),window.addEventListener(\"reload_nco_device_prop\",this.reloadNcoDevicePropCallback),window.addEventListener(\"add_chain_value\",this.addChainValueCallback),window.addEventListener(\"refresh_stashed_value\",this.refreshStashedValueCallback),window.addEventListener(\"fresh_state\",this.freshStateStatusCallback),this.configAndRefreshSub=Ce.subscribe((async t=>{let{id:n,value:a}=t;this.resetFields();const s=JSON.stringify([{id:n,value:a}]);e(o,{changeParam:s},{isOpt:r,inverterDn:i})}))}componentWillUnmount(){c.Z.destroyAll(),this.configAndRefreshSub&&this.configAndRefreshSub.unsubscribe(),this.addChainValueCallback&&window.removeEventListener(\"add_chain_value\",this.addChainValueCallback),this.refreshStashedValueCallback&&window.removeEventListener(\"refresh_stashed_value\",this.refreshStashedValueCallback),this.changeFormUncontrolledError&&window.removeEventListener(\"change_form_uncontrolled_error\",this.changeFormUncontrolledError),this.reloadNcoDevicePropCallback&&window.removeEventListener(\"reload_nco_device_prop\",this.reloadNcoDevicePropCallback),this.changeDevicePasswdCallback&&window.removeEventListener(\"change_device_password\",this.changeDevicePasswdCallback),this.freshStateStatusCallback&&window.removeEventListener(\"fresh_state\",this.freshStateStatusCallback),clearTimeout(this.loadConfigTimeOut),clearTimeout(this.freshStateTimer),Z.B7.clearInterval(),this.freshStateTimer=null,this.state.errorIdList.clear(),this.loadConfigTimeOut=null,this.loadingSubmitNumber=0}componentWillReceiveProps(e){e.deviceTypesWithConfigSignals!==this.props.deviceTypesWithConfigSignals&&this.refreshForm(e.deviceTypesWithConfigSignals)}render(){var e,t;const{visible:n,close:r,ok:i,intl:u,deviceTypesWithConfigSignals:d,refreshLoading:f,loading:h}=this.props,{selectedRows:m,isDiState:g,isConfiguring:v,freshState:y}=this.state,[b]=m,{devTypeId:w,mocTypeName:C,mocId:T}=b,A=g[0]&&g[1],E=f||h,O=d.length>0?`${this.intlMessage(\"neteco.pvms.partials.main.dm.devParamSetting\")}\\n          ${this.intlMessage(\"neteco.pvms.unit.brackets.1\")}\\n          ${w||C}\\n          ${this.intlMessage(\"neteco.pvms.unit.brackets.2\")}`:this.intlMessage(\"neteco.pvms.partials.main.dm.devParamSetting\"),M={successCallbacks:[this.closePasswordModal],failCallbacks:[],intl:u,selected:m},{isFirstRefresh:P,disclaimerVisible:D,confirmBtnDisabled:I}=this.state,N=[(0,H.jsx)(l.Z,{onClick:this.handleCancel,children:(0,H.jsx)(p.Z,{id:\"common.button.cancel\"})},\"cancel\"),(0,H.jsx)(l.Z,{onClick:this.handleOk,type:\"primary\",disabled:I,children:(0,H.jsx)(p.Z,{id:\"neteco.pvms.confirm\"})},\"confirm\")],_=!y&&!P,j={intl:u,unprocessedData:null===(e=d[0])||void 0===e?void 0:e.groups,disabled:E||!y,deviceDnId:Number(b.dnId)};return(0,H.jsxs)(\"div\",{className:\"nco-device-prop-config-modal-wrapper\",children:[(0,H.jsx)(c.Z,{destroyOnClose:!0,className:\"nco-device-prop-config-modal\",visible:n,title:O,onOk:i,onCancel:()=>{r();const{reactChainValuesMap:e}=this.state;e.clear()},maskClosable:!1,width:\"85rem\",footer:(0,H.jsxs)(\"div\",{children:[_e.includes(T)&&(0,R.lVp)(R.Z0j)&&(0,H.jsx)(ve.Z,{...j}),(0,H.jsx)(S.Z,{}),(0,H.jsx)(fe.Z,{className:\"device-set-config-button\",operationId:R.qS6,targetId:[null===(t=m[0])||void 0===t?void 0:t.dn],onClick:this.loadingSubmit,type:\"primary\",loading:v,targetType:\"device\",disabled:!this.state.isFormTouched||0===this.state.groups.length||f&&!P||!A,children:u.formatMessage({id:\"neteco.pvms.systemSetting.save\"})}),(0,H.jsx)(s.Z,{placement:\"top\",title:u.formatMessage({id:\"neteco.pvms.partials.main.dm.devParamMenu.refreshBtn.tip\"}),visible:_,defaultVisible:_,overlayClassName:\"fresh-state-button-tooltip\",children:(0,H.jsx)(l.Z,{className:\"fresh-state-button\",disabled:E||!y,onClick:()=>{this.refresh(!0,!0,!0)},children:u.formatMessage({id:\"neteco.pvms.partials.main.dm.devParamMenu.refreshBtn\"})})}),(0,H.jsx)(l.Z,{className:\"config-modal-close-button\",onClick:()=>{r&&r()},children:u.formatMessage({id:\"neteco.pvms.systemSetting.tclean\"})})]}),children:(0,H.jsxs)(\"div\",{className:\"nco-device-prop-config-modal-inner\",style:{position:\"relative\"},children:[(0,H.jsx)(\"div\",{className:\"loading-mask\",style:{display:E||P?\"block\":\"none\"},children:(0,H.jsx)(\"span\",{children:u.formatMessage({id:\"neteco.pvms.partials.main.dm.devParamMenu.inRefreshing\"})})}),(0,H.jsx)(a.Z,{ref:this.formRef,children:this.state.formContent})]})}),(0,H.jsx)(pe.Z,{shouldShowPasswordModal:this.state.shouldShowPasswordModal,...M}),(0,H.jsx)(x.Z,{type:\"prompt\",title:u.formatMessage({id:\"neteco.pvms.device.set.params.disclaimer.title\"}),footer:N,cancelCallback:this.handleCancel,contentCenter:\"top\",visible:D,alignItems:\"flexStart\",content:(0,H.jsxs)(\"div\",{className:\"neteco-pvms-device-set-params-disclaimer\",children:[this.getDisclaimer(u),(0,H.jsx)(o.Z,{onChange:this.agreePrecautions,children:`${u.formatMessage({id:\"neteco.pvms.device.set.params.disclaimer.checkbox\"})} ${u.formatMessage({id:\"neteco.pvms.device.set.params.disclaimer.checkLabel\"})}`})]})})]})}}const Re=(0,i.ZP)(Le),Ze=(0,r.$j)((e=>({loading:e.ncoDevicePropConfigModal.loading,refreshLoading:e.ncoDevicePropConfigModal.refreshLoading,deviceTypesWithConfigSignals:e.ncoDevicePropConfigModal.deviceTypesWithConfigSignals})),(e=>({loadNcoDevicePropConfigModal:function(t,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,de.eZ)(e,r,t,n,i)},configSignalGroups:de.al,checkIsDisclaimer:de.Pn,updateDisclaimer:de._1,refreshConfigSignal:(t,n,r,i)=>{(0,de.rJ)(e,t,n,r,i)}})))((0,i.ZP)(Re))},58975:(e,t,n)=>{\"use strict\";n.d(t,{MO:()=>o,Mb:()=>r,T_:()=>i,kJ:()=>a});const r=\"NCODEVICEPROPCONFIGMODAL/START_LOADING\",i=\"NCODEVICEPROPCONFIGMODAL/FINISH_LOADING\",o=\"NCOMONITORDEVICEPROPCONFIGMODAL/START_REFRESH_LOAD_SIGNALS\",a=\"NCOMONITORDEVICEPROPCONFIGMODAL/FINISH_REFRESH_LOAD_SIGNALS\"},30929:(e,t,n)=>{\"use strict\";n.d(t,{Pn:()=>M,_1:()=>P,al:()=>w,eZ:()=>O,oH:()=>D,rJ:()=>N,ty:()=>I});var r=n(2955),i=n(58975),o=n(64120),a=n(16910),s=n(64218),l=n(54568),c=n(91650),u=n(53137),d=n(90834),p=n(44184),f=n(49453),h=n(59516);const m=new Set([20819,20821]),g=new Set([230190021,230200009]),v=new Set([22100,22101]),y=new Set([230200061,21021,230320241,230320283,230190100,230190101,230200223,230700059]),b=20011,S=new Set([b,20012]),x=new Set([230320643,230320642,230320645,230320644]),w=async(e,t,n,r,i,c,u,d)=>{let h=\"\";t.forEach((e=>{h+=`${e.dn},`}));let m=[];const g=n[21021];for(const e in n)21021!==Number(e)&&m.push({id:e,value:n[e]});void 0!==g&&m.push({id:21021,value:g});const{isOpt:v,inverterDn:x,selectedRows:w}=e||{};i.isFieldTouched(\"33595393\")||(m=m.filter((e=>\"33595393\"!==e.id))),m=(0,l.qE)(m,u,230320278,230320485);const T=m.map((e=>(0,a.Cx)(e.id)?(e.value=(0,a.uY)(e.value),e):e)),A=async(e,t,n)=>{const[i,o]=await(0,p.AM)((0,f.Md)(\"/rest/pvms/web/device/v1/deviceExt/set-config-signals\",{dn:e,changeValues:JSON.stringify(t),randomVal:null==n?void 0:n.check}));if(i)return void r.failCallbacks.forEach((e=>e(s,m)));const{code:a,data:s}=o;e.split(\",\").filter(Boolean).length>1?r.batchCallbacks.forEach((e=>e(s))):0===a&&0===s[0].code?r.okCallbacks.forEach((e=>e())):r.failCallbacks.forEach((e=>e(s,m)))},E=T.filter((e=>y.has(Number(e.id))));if(E.length){const e=new Map;E.forEach((t=>{e.set(t.id,t.value)}));let t=!1;if([...e.values()].every((n=>\"5\"!==n&&\"7\"!==n&&(1!==e.size||\"[]\"!==n)||(t=!0,!1))),t&&(\"[]\"===e.get(\"230200061\")||\"[]\"===e.get(\"230200223\")||\"[]\"===e.get(\"230320283\")||\"[]\"===e.get(\"230190101\"))||\"[]\"===e.get(\"230700059\"))return void r.failCallbacks.forEach((e=>e([{data:{data:[\"neteco.pvms.TOUSeting.errorTip\"]}}])))}let O=[];if(v&&(O=(0,o.default)(T,(e=>S.has(Number(e.id)))),1===O.length&&20012===Number(O[0].id)&&O.push({id:String(b),value:w&&w[0].address})),!function(e){const t=e.filter((e=>C.has(Number(e.id))));for(let e=0;e<t.length;e++){const{value:n}=t[e];if(\"[]\"===n)return!1}return!0}(T))return void r.failCallbacks.forEach((e=>e([{data:{data:[\"neteco.pvms.BatteryControlSeting.errorTip\"]}}])));const M=T.findIndex((e=>e.id===String(l.YU))),P=T.findIndex((e=>e.id===String(l.ie)));if(M>-1&&P>-1&&M>P){const e=T[M];T.splice(M,1),T.splice(P,0,e)}i.validateFields().then((()=>{const e=T.filter((e=>[\"230470075\",\"230470076\",\"21105\",\"21106\",\"230532071\"].includes(String(e.id)))),{callback:t,needAuthSignals:r}=c,i=Object.keys(n),o=r.filter((e=>i.includes(String(e.id))));if(e.length||o.length){const{callback:e}=c,t={successCallback:t=>{e(),O.length>0?A(x,O,t):A(h,T,t)},errorCallback:e};(0,s.Nu)(\"use-verify-pass\",t)}else O.length>0?A(x,O):A(h,T)})).catch((()=>{const{callback:e}=c;e()}))},C=new Set([230320486,230700179,230200219]),T=(e,t)=>{const n=e.map((e=>{const{enumList:t={}}=e,n=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push([e,t[e]]);const{id:r}=e;return{...e,disabled:!(0,h.lVp)(h.qS6),signalKey:e.id,type:\"ENUM\"===e.dataType?\"select\":\"input\",tips:e.tips,value:(0,a.Cx)(r)?(0,a.IZ)(e.value):window.neteco.util.iUnescape(e.value),validatePattern:window.neteco.util.iUnescape(e.validatePattern),enums:n,help:e.tips,editable:e.edit,limit:e.valueRange&&e.valueRange.displayRange||null,name:(0,a.aH)(e.name)}}));if(20815===t)return n.filter((e=>!x.has(e.signalKey)));if(m.has(t)&&e.some((e=>{let{id:t}=e;return g.has(t)}))){const e={id:\"dongleProtectSignalTip\",message:\"neteco.pvms.partials.main.dm.devParamMenu.dongleV2Param.tips\"};return[...n,e]}if(m.has(t)&&e.some((e=>{let{id:t}=e;return v.has(t)}))){const e={id:\"dongleReportSignalMoTip\",message:\"neteco.pvms.partials.main.dm.devParamMenu.dongleReport.tips.pvms\"};return[...n,e]}return n},A=()=>({type:i.MO}),E=()=>({type:i.kJ}),O=async(e,t,n,o,a)=>{e({type:i.Mb});let s=[];if(!n||0===n.length)return;const{isOpt:l,inverterDn:u}=t||{},[d]=n,{dn:p,mocTypeName:f,name:h,mocId:m,address:g}=d;if(Object.keys(o).length>0){const e=JSON.stringify(JSON.parse(o.changeParam).filter((e=>{let{id:t}=e;return!c.Ne.has(t)})));o.changeParam=e}const v=(0,r.U2)(\"/rest/pvms/web/device/v1/deviceExt/get-config-signals\",{dn:p,...o}).then((e=>Promise.resolve(e))).catch((()=>Promise.resolve({code:-1}))),y=await v,{okCallbacks:x=[],failCallbacks:w=[]}=a;if(0===y.code?(x.forEach((e=>e())),s=[{type:h||f||\"UNKNOWN\",groups:y.data.map((e=>({name:e.groupName,signals:T(e.configSignalDisplayList,m)}))).filter((e=>e.signals.length>0))}]):w.forEach((e=>e())),l){const e={inverterDn:u,address:g,mocId:m,deviceTypesWithConfigSignals:s};s=await(async e=>{let{inverterDn:t,address:n,mocId:i,deviceTypesWithConfigSignals:o}=e;const a=(0,r.U2)(\"/rest/pvms/web/device/v1/deviceExt/get-config-signals\",{dn:t}).then((e=>Promise.resolve(e))).catch((()=>Promise.resolve({code:-1}))),s=await a,{code:l,data:c}=s;if(0===l){let e=[];if(c&&c.length>0){for(let t=0;t<c.length;t++){const{configSignalDisplayList:r,groupName:o}=c[t];if(r&&r.length>0){let t=!1,a=[];for(let e=0;e<r.length;e++){let i=r[e];S.has(Number(i.id))&&(t=!0,b===i.id&&(i.edit=!1,i.value=n),a.push(i))}t&&e.push({name:o,signals:T(a,i)})}}o&&o.length>0&&e.length>0&&(o[0].groups=o[0].groups.concat(e))}}return o})(e)}var C;window.dispatchEvent(new CustomEvent(\"reload_nco_device_prop\",{detail:{deviceTypesWithConfigSignals:s}})),e((C=s,{type:i.T_,payload:C}))},M=async()=>{const{success:e,data:t}=await(0,r.U2)(\"/rest/pvms/web/privacy/v1/privacy/has-agreed\",{disclaimer:\"v1.0\"});return!(!e||!t)},P=()=>(0,f.Md)(\"/rest/pvms/web/privacy/v1/privacy/update-agree-status\",{disclaimer:\"v1.0\",isSelect:1}),D=async(e,t)=>{const[n,i]=await(0,p.AM)((0,r.U2)(\"/rest/pvms/web/device/v1/deviceExt/get-device-signals\",{dn:e,signalIds:t}));let o={chargeMax:0,dischargeMax:0};return n||!i||i.data&&i.data.length&&i.data.forEach((e=>{e.id===d.JX?o.chargeMax=Number(e.value)||0:e.id===d.hS&&(o.dischargeMax=Number(e.value)||0)})),o},I=async e=>{const[t,n]=await(0,p.AM)((0,r.U2)(\"/rest/dp/neteco/monitor/v1/pvms/signal/refresh-state\",{operateSerial:e}));return!(null==n||!n.hasRefreshed)};function N(e,t,n,r,i){r&&e(A()),(0,u.rJ)(t,n).then((t=>{i(t),e(E())}))}},57566:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(58975);const i={loading:!1,refreshLoading:!1,deviceTypesWithConfigSignals:[]},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,deviceTypesWithConfigSignals:t.payload};case r.MO:return{...n,refreshLoading:!0};case r.kJ:return{...n,refreshLoading:!1};default:return n}}},64436:(e,t,n)=>{\"use strict\";n.d(t,{C:()=>l,T:()=>s});const r=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=e.split(\" \"),o=i[0];let a=i[1];if(a.indexOf(\"$\")>=0){var s;const e=function(e,t){let n={};return t.find((t=>{if(t.signals){const r=t.signals.find((t=>`${t.id}`===e));if(r)return n=r,!0}return!1})),n.value}(a.substring(1),r);if(a=null!==(s=n.getFieldsValue()[a.substring(1)])&&void 0!==s?s:e,null==a)return!0;if(isNaN(Number(a)))return!0}switch(o){case\"ge\":return Number(t)-Number(a)>=0;case\"le\":return Number(t)-Number(a)<=0;case\"gt\":return Number(t)-Number(a)>0;case\"lt\":return Number(t)-Number(a)<0;case\"eq\":return Number(t)-Number(a)==0;default:return!0}},i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=e.split(\" \");if(r[1]!==t)return!0;const i=parseInt(r[2].substring(1)),o=n.find((e=>e.id===i))||{};return r[4]!==o.value},o=(e,t,n)=>{if(!t)return{pass:!0};const{rules:r=[]}=t;for(let t=0;t<r.length;t++){const{expression:o,message:a}=r[t];if(!i(o,n,e))return{pass:!1,message:a}}return{pass:!0}},a=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!t)return{pass:!0};const{rules:o=[]}=t;for(let t=0;t<o.length;t++){const{expression:a,message:s}=o[t];if(!r(a,n,e,i))return{pass:!1,message:s}}return{pass:!0}},s=e=>\"number\"===e?a:\"select\"===e?o:void 0,l=(e,t,n)=>{const{dependSignalIds:r,config:i}=t,o={pass:!0};if(!r.length||n!==i)return o;for(let t=0;t<r.length;t++){const{id:n,isHidden:i,validataValue:o,message:a}=r[t],s=e.find((e=>e.id===n));if(i&&!s||o&&s.value===o)return{pass:!1,message:a}}return o}},8508:(e,t,n)=>{\"use strict\";function r(e){let{expression:t,signals:n,message:r}=e;return n.map((e=>({expression:`${t} $${e}`,message:r})))}n.d(t,{b:()=>C});const i=230102225,o=230222228,a=230700227,s={21031:{confirmation:\"neteco.device.signal.management.gridCodeConfirm\",compareSignalIds:[],rules:[]},[i]:{confirmation:\"neteco.pvms.device.paramsSetting.energy.measurement.mode.tip\",compareSignalIds:[],rules:[]},[o]:{confirmation:\"neteco.pvms.device.paramsSetting.energy.measurement.mode.tip\",compareSignalIds:[],rules:[]},21029:{confirmation:\"neteco.pvms.device.outputway.modify.information\",compareSignalIds:[],rules:[{expression:\"$self 0 $21031 ne 141\",message:\"neteco.pvms.device.outputway.unsupported.information\"},{expression:\"$self 0 $21031 ne 275\",message:\"neteco.pvms.device.outputway.unsupported.information\"}]},230102768:{confirmation:void 0,compareSignalIds:[230103844,230102766,230102767],rules:[{expression:\"ge $230103844\",message:\"   \"},...r({expression:\"gt\",signals:[\"230102766\",\"230102767\"],message:\"   \"})]},230103844:{confirmation:void 0,compareSignalIds:[230102768,230102766,230102767],rules:[{expression:\"le $230102768\",message:\"   \"},...r({expression:\"gt\",signals:[\"230102766\",\"230102767\"],message:\"   \"})]},230102766:{confirmation:void 0,compareSignalIds:[230102768,230103844,230102767],rules:[...r({expression:\"lt\",signals:[\"230102768\",\"230103844\"],message:\"   \"}),{expression:\"ge $230102767\",message:\"   \"}]},230102767:{confirmation:void 0,compareSignalIds:[230102768,230103844,230102766],rules:[...r({expression:\"lt\",signals:[\"230102768\",\"230103844\"],message:\"   \"}),{expression:\"le $230102766\",message:\"   \"}]},21102:{confirmation:void 0,compareSignalIds:[21103,21104],rules:[{expression:\"gt $21103\",message:\"neteco.pvms.device.data.setting.overfrequency.derating\"},{expression:\"gt $21104\",message:\"neteco.pvms.device.data.setting.overfrequency.derating\"}]},21104:{confirmation:void 0,compareSignalIds:[21102,21103],rules:[{expression:\"lt $21102\",message:\"neteco.pvms.device.data.setting.overfrequency.derating\"},{expression:\"le $21103\",message:\"neteco.pvms.device.data.setting.overfrequency.derating\"}]},21103:{confirmation:void 0,compareSignalIds:[21104,21102],rules:[{expression:\"lt $21102\",message:\"neteco.pvms.device.data.setting.overfrequency.derating\"},{expression:\"ge $21104\",message:\"neteco.pvms.device.data.setting.overfrequency.derating\"}]},230102182:{confirmation:\"neteco.pvms.param.setting.self.vol\",compareSignalIds:[],rules:[]},230225111:{confirmation:\"neteco.pvms.param.setting.upgraded.noRollback\",compareSignalIds:[],rules:[]},230107108:{confirmation:\"neteco.pvms.param.setting.upgraded.noRollback\",compareSignalIds:[],rules:[]},22109:{compareSignalIds:[],rules:[],config:\"1\",dependSignalIds:[{id:230102786,isHidden:!0,message:\"neteco.pvms.deviceConfig.DI4AndDI.conflict.checkedByApp.msg\"},{id:230102786,validataValue:\"1\",message:\"neteco.pvms.deviceConfig.DI4AndDI.conflict.msg\"}]}},l=230320485,c=230320278,u={[c]:{compareSignalIds:[l],rules:[{expression:\"lt $230320485\",message:\"neteco.pvms.peakShaving.dischargeEndTips\"}]},[l]:{compareSignalIds:[c],rules:[{expression:\"gt $230320278\",message:\"neteco.pvms.peakShaving.peakClippTips\"}]}},d=230250025,p=230250053,f={[d]:{confirmation:void 0,compareSignalIds:[p],rules:[{expression:\"lt $230250053\",message:\"neteco.pvms.device.props.config.pidSystemToGroundImpedance.compare\"}]},[p]:{confirmation:void 0,compareSignalIds:[d],rules:[{expression:\"gt $230250025\",message:\"neteco.pvms.device.props.config.pidSystemToGroundImpedance.compare\"}]}},h={230700202:{confirmation:\"neteco.pvms.param.setting.upgraded.noRollback\",compareSignalIds:[],rules:[]},230700195:{confirmation:\"neteco.pvms.device.backupBox.seamlessSwitch.tips\",compareSignalIds:[],rules:[],config:\"1\"},[a]:{confirmation:\"neteco.pvms.device.paramsSetting.energy.measurement.mode.tip\",compareSignalIds:[],rules:[]},22109:{compareSignalIds:[],rules:[],config:\"1\",dependSignalIds:[{id:230700175,isHidden:!0,message:\"neteco.pvms.deviceConfig.DI4AndDI.conflict.checkedByApp.msg\"},{id:230700175,validataValue:\"1\",message:\"neteco.pvms.deviceConfig.DI4AndDI.conflict.msg\"}]}},m={\"soc-230200578\":{confirmation:void 0,compareSignalIds:[\"soc-230200579\",\"soc-230200580\",\"soc-230200582\"],rules:[...r({expression:\"gt\",signals:[\"soc-230200579\"],message:\"neteco.EMS.soc.rule.tip1\"}),...r({expression:\"lt\",signals:[\"soc-230200580\",\"soc-230200582\"],message:\"neteco.EMS.soc.rule.tip2\"})]},\"microgrid-230200578\":{confirmation:void 0,compareSignalIds:[\"microgrid-230200579\",\"microgrid-230200580\",\"microgrid-230200582\"],rules:[...r({expression:\"gt\",signals:[\"microgrid-230200579\"],message:\"neteco.EMS.soc.rule.tip1\"}),...r({expression:\"lt\",signals:[\"microgrid-230200580\",\"microgrid-230200582\"],message:\"neteco.EMS.soc.rule.tip2\"})]},\"soc-230200579\":{confirmation:void 0,compareSignalIds:[\"soc-230200581\",\"soc-230200583\"],rules:[...r({expression:\"lt\",signals:[\"soc-230200578\"],message:\"neteco.EMS.soc.rule.tip1\"}),...r({expression:\"lt\",signals:[\"soc-230200581\",\"soc-230200583\"],message:\"neteco.EMS.soc.rule.tip3\"})]},\"microgrid-230200579\":{confirmation:void 0,compareSignalIds:[\"microgrid-230200581\",\"microgrid-230200583\"],rules:[...r({expression:\"lt\",signals:[\"microgrid-230200578\"],message:\"neteco.EMS.soc.rule.tip1\"}),...r({expression:\"lt\",signals:[\"microgrid-230200581\",\"microgrid-230200583\"],message:\"neteco.EMS.soc.rule.tip3\"})]},\"soc-230200580\":{confirmation:void 0,compareSignalIds:[\"soc-230200578\",\"soc-230200582\"],rules:[...r({expression:\"gt\",signals:[\"soc-230200581\"],message:\"neteco.EMS.soc.rule.tip1\"}),{expression:\"gt $soc-230200578\",message:\"neteco.EMS.soc.rule.tip2\"},...r({expression:\"lt\",signals:[\"soc-230200582\"],message:\"neteco.EMS.soc.rule.tip2\"})]},\"microgrid-230200580\":{confirmation:void 0,compareSignalIds:[\"microgrid-230200578\",\"microgrid-230200582\"],rules:[...r({expression:\"gt\",signals:[\"microgrid-230200581\"],message:\"neteco.EMS.soc.rule.tip1\"}),{expression:\"gt $2microgrid-30200578\",message:\"neteco.EMS.soc.rule.tip2\"},...r({expression:\"lt\",signals:[\"microgrid-230200582\"],message:\"neteco.EMS.soc.rule.tip2\"})]},\"soc-230200581\":{confirmation:void 0,compareSignalIds:[\"soc-230200579\",\"soc-230200583\"],rules:[...r({expression:\"lt\",signals:[\"soc-230200580\"],message:\"neteco.EMS.soc.rule.tip1\"}),{expression:\"gt $soc-230200579\",message:\"neteco.EMS.soc.rule.tip3\"},...r({expression:\"lt\",signals:[\"soc-230200583\"],message:\"neteco.EMS.soc.rule.tip3\"})]},\"microgrid-230200581\":{confirmation:void 0,compareSignalIds:[\"microgrid-230200579\",\"microgrid-230200583\"],rules:[...r({expression:\"lt\",signals:[\"microgrid-230200580\"],message:\"neteco.EMS.soc.rule.tip1\"}),{expression:\"gt $microgrid-230200579\",message:\"neteco.EMS.soc.rule.tip3\"},...r({expression:\"lt\",signals:[\"microgrid-230200583\"],message:\"neteco.EMS.soc.rule.tip3\"})]},\"soc-230200582\":{confirmation:void 0,compareSignalIds:[\"soc-230200578\",\"soc-230200580\"],rules:[...r({expression:\"gt\",signals:[\"soc-230200583\"],message:\"neteco.EMS.soc.rule.tip1\"}),...r({expression:\"gt\",signals:[\"soc-230200578\",\"soc-230200580\"],message:\"neteco.EMS.soc.rule.tip2\"})]},\"microgrid-230200582\":{confirmation:void 0,compareSignalIds:[\"microgrid-230200578\",\"microgrid-230200580\"],rules:[...r({expression:\"gt\",signals:[\"microgrid-230200583\"],message:\"neteco.EMS.soc.rule.tip1\"}),...r({expression:\"gt\",signals:[\"microgrid-230200578\",\"microgrid-230200580\"],message:\"neteco.EMS.soc.rule.tip2\"})]},\"soc-230200583\":{confirmation:void 0,compareSignalIds:[\"soc-230200579\",\"soc-230200581\"],rules:[...r({expression:\"lt\",signals:[\"soc-230200582\"],message:\"neteco.EMS.soc.rule.tip1\"}),...r({expression:\"gt\",signals:[\"soc-230200579\",\"soc-230200581\"],message:\"neteco.EMS.soc.rule.tip3\"})]},\"microgrid-230200583\":{confirmation:void 0,compareSignalIds:[\"microgrid-230200579\",\"microgrid-230200581\"],rules:[...r({expression:\"lt\",signals:[\"microgrid-230200582\"],message:\"neteco.EMS.soc.rule.tip1\"}),...r({expression:\"gt\",signals:[\"microgrid-230200579\",\"microgrid-230200581\"],message:\"neteco.EMS.soc.rule.tip3\"})]}},g=230200239,v=230200240,y={[g]:{compareSignalIds:[v],rules:[{expression:\"lt $230200240\",message:\"neteco.pvms.peakShaving.currentPowerRangeStartTips\"}]},[v]:{compareSignalIds:[g],rules:[{expression:\"gt $230200239\",message:\"neteco.pvms.peakShaving.currentPowerRangeEndTips\"}]},230200298:{confirmation:\"neteco.pvms.param.setting.upgraded.noRollback\",compareSignalIds:[],rules:[]},230200567:{confirmation:\"neteco.pvms.deviceMonitor.setting.back\",compareSignalIds:[],rules:[]},...m};var b=n(83621),S=n(64218);const x={INVERTER:s,PCS:{230390238:{confirmation:void 0,compareSignalIds:[230390234],rules:[{expression:\"ge $230390234\",message:\"neteco.pvms.device.props.config.Q-UPowerPercent.compare\"}]},230390234:{confirmation:void 0,compareSignalIds:[230390238],rules:[{expression:\"le $230390238\",message:\"neteco.pvms.device.props.config.Q-UPowerPercent.compare\"}]},21102:{confirmation:void 0,compareSignalIds:[21103,21104],rules:[{expression:\"gt $21103\",message:\"neteco.pvms.device.props.config.OverfrequencyDerating.compare\"},{expression:\"gt $21104\",message:\"neteco.pvms.device.props.config.OverfrequencyDerating.compare\"}]},21103:{confirmation:void 0,compareSignalIds:[21102,21104],rules:[{expression:\"lt $21102\",message:\"neteco.pvms.device.props.config.OverfrequencyDerating.compare\"},{expression:\"gt $21104\",message:\"neteco.pvms.device.props.config.OverfrequencyDerating.compare\"}]},21104:{confirmation:void 0,compareSignalIds:[21102,21103],rules:[{expression:\"lt $21102\",message:\"neteco.pvms.device.props.config.OverfrequencyDerating.compare\"},{expression:\"lt $21103\",message:\"neteco.pvms.device.props.config.OverfrequencyDerating.compare\"}]},230390193:{confirmation:void 0,compareSignalIds:[230390195,230390196],rules:[{expression:\"lt $230390195\",message:\"neteco.pvms.device.props.config.UnderfrequencyRaising.compare\"},{expression:\"lt $230390196\",message:\"neteco.pvms.device.props.config.UnderfrequencyRaising.compare\"}]},230390195:{confirmation:void 0,compareSignalIds:[230390193,230390196],rules:[{expression:\"gt $230390193\",message:\"neteco.pvms.device.props.config.UnderfrequencyRaising.compare\"},{expression:\"lt $230390196\",message:\"neteco.pvms.device.props.config.UnderfrequencyRaising.compare\"}]},230390196:{confirmation:void 0,compareSignalIds:[230390193,230390195],rules:[{expression:\"gt $230390193\",message:\"neteco.pvms.device.props.config.UnderfrequencyRaising.compare\"},{expression:\"gt $230390195\",message:\"neteco.pvms.device.props.config.UnderfrequencyRaising.compare\"}]},230390576:{confirmation:\"neteco.pvms.param.setting.upgraded.noRollback\",compareSignalIds:[],rules:[]}},ESU:{230450038:{confirmation:\"nco.esu.soc.correction.confirmation\",compareSignalIds:[],rules:[]},230470073:{confirmation:\"nco.esr.enum.correction.confirmation\",compareSignalIds:[],rules:[]},230450040:{confirmation:\"nco.esu.soc.correction.confirmation2\",compareSignalIds:[],rules:[]}},BATTERY:u,PID:f,POWERRANGE:y,HEMS:h,DONGLE:{230190168:{confirmation:\"neteco.pvms.param.setting.upgraded.noRollback\",compareSignalIds:[],rules:[]},22109:{compareSignalIds:[],rules:[],config:\"1\",dependSignalIds:[{id:230190115,isHidden:!0,message:\"neteco.pvms.deviceConfig.DI4AndDI.conflict.checkedByApp.msg\"},{id:230190115,validataValue:\"1\",message:\"neteco.pvms.deviceConfig.DI4AndDI.conflict.msg\"}]}},ESS:{230107108:{confirmation:\"neteco.pvms.param.setting.upgraded.noRollback\",compareSignalIds:[],rules:[]},230770619:{confirmation:\"neteco.pvms.param.setting.upgraded.noRollback\",compareSignalIds:[],rules:[]},230800269:{confirmation:\"neteco.pvms.deviceMonitor.setting.perfermance\",compareSignalIds:[],rules:[]},230800270:{confirmation:\"neteco.pvms.deviceMonitor.setting.batteryTemperature\",compareSignalIds:[],rules:[]}},STS:{230532071:{confirmation:\"neteco.pvms.deviceMonitor.setting.back\",compareSignalIds:[],rules:[]}},EMS:m},w={[b.o.STRING_INVERTER]:x.INVERTER,[b.o.PCS]:x.PCS,[b.o.ESU]:x.ESU,[b.o.BATTERY_CLUSTER]:x.ESU,[b.o.STORAGE]:x.BATTERY,[b.o.PID]:x.PID,[b.o.SMART_LOGGER]:x.POWERRANGE,[b.o.HEMS]:x.HEMS,[b.o.DONGLE]:x.DONGLE,[b.o.ESS]:x.ESS,[b.o.ESS_V2]:x.ESS,[b.o.STS]:x.STS,[b.o.SITE]:x.EMS},C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\";const{id:r}=t;if(e&&r)return(0,S.jE)(e)&&n?w[e][`${n}-${r}`]:w[e]?w[e][r]:[230102174,230200011,230210010,230190023,230222174].includes(r)?{confirmation:\"neteco.pvmsparam.setting.ssl.disabling.power\",compareSignalIds:[],rules:[],config:\"0\"}:void 0}},96519:(e,t,n)=>{\"use strict\";n.d(t,{g:()=>_,Wg:()=>R,XS:()=>L,$K:()=>k,KE:()=>N,tj:()=>j,ZP:()=>B});var r=n(88391),i=n(93706),o=n(41541),a=n(15694),s=n(90701),l=n(7029),c=n(36843),u=n(65311),d=n(10976),p=n(64120),f=n(70250),h=n.n(f);const m=new(n(40401).x);var g=n(13528),v=n(44184),y=n(23712);const b=[\"di1\",\"di2\",\"di3\",\"dispatchType\",\"di4\",\"value\"],S=14,x=\"neteco.pvms.device.timePeriodConfigTable.emptyValueInput\",w=\"neteco.pvms.device.di.scheduling.di.repeats.error\",C=\"invalidInputValue\",T=void 0,A=3,E={di1:0,di2:0,di3:0,di4:0,value:0,diError:T,inputError:T};let O=0;const M=e=>{let{di1:t,di2:n,di3:r,di4:i,dispatchType:o,value:a,tableKey:s,counter:l}=e;const c={...E};return c.rowId=`${s}-${l}`,c.di1=t,c.di2=n,c.di3=r,c.di4=i,c.dispatchType=o,c.value=a,c},P=(0,i.ZP)((e=>{let{intl:t,tableKey:n,numberColumnTitle:i=\"\",precision:f=A,limit:P=S,type:D=1,onChange:I,initialData:Z=[],tooltips:B,targetId:F,id:z,title:V,diErrorData:H,changeDIError:U,disabled:G,hiddenDI4:Y}=e;const[W,K]=(0,r.useState)([]),[q,Q]=(0,r.useState)([]),[X,J]=(0,r.useState)(!1),[$,ee]=(0,r.useState)({}),[te,ne]=(0,r.useState)(!1),re=(0,r.useRef)({});(0,r.useEffect)((()=>{Array.isArray(Z)&&K((()=>{const e=h()(Z),t=[];e.forEach((e=>{e.dispatchType===D&&t.push(e)})),(0,p.default)(e,(e=>e.dispatchType===D));const n=se(t),{diError:r,errorType:i,diErrorState:o,inputError:a}=ie(n,e);return ee({diError:r,diErrorState:o,errorType:i}),ne(!1),Q(e),J(Z.length>=P),le(n,r,a,!1,!1),n}))}),[Z]),(0,r.useEffect)((()=>{if(te){const{diError:e,errorType:t,diErrorState:n,inputError:r}=ie(W,q);ee({diError:e,diErrorState:n,errorType:t}),J(W.length+q.length>=P),le(W,e,r,!0,!1)}}),[q]),(0,r.useEffect)((()=>(re.current=m.subscribe((e=>{let{_type:t,values:n}=e;z===t&&(ne(!0),Q((()=>n)))})),()=>{re.current&&re.current.unsubscribe&&re.current.unsubscribe(),U(\"\")})),[]),(0,r.useEffect)((()=>{if((0,v.xb)(W))return;const{diError:e,errorType:t,diErrorState:n}=ie(W,q);ee({diError:e,diErrorState:n,errorType:t})}),[Y]);const ie=(e,t)=>{let n=T;for(let t=0;t<e.length&&(n=e[t].inputError,!n);t++);const{error:r,errorType:i,errorDataState:o}=ae(e,t);return{inputError:n,diError:r,errorType:i,diErrorState:o}},oe=e=>{const t=String(e.di1)+String(e.di2)+String(e.di3);return Y?t:t+String(e.di4)},ae=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n],i=oe(r);for(let t=0;t<e.length;t++){if(n===t)continue;const r=e[t];if(i===oe(r))return U(i),{error:w,errorType:1,errorDataState:i}}for(let e=0;e<t.length;e++){const n=t[e];if(i===oe(n))return U(i),{error:w,errorType:2,errorDataState:i}}}return{error:T}},se=e=>e.map((e=>{const t={tableKey:n,counter:++O,...e};return M(t)})),le=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(I){const o=t||n?t||n:T,a=((e,t)=>{const n=[];return e.forEach((e=>{const r={};t.forEach((t=>{r[t]=e[t]})),n.push(r)})),n})(1===D?[...e,...q]:[...q,...e],b),s={data:a,count:a.length,error:o};r&&I(s,i),i&&m.next({_type:F,values:e})}},ce=(e,t,n)=>{U(\"\"),K((r=>{const i=[...r];i[t][n]=1===e?0:1;const{diError:o,errorType:a,diErrorState:s,inputError:l}=ie(i,q);return ee({diError:o,diErrorState:s,errorType:a}),le(i,o,l),i}))},ue=(e,t,n,r)=>1===e?(0,y.jsx)(c.Z,{onClick:()=>{!G&&ce(e,n,r)},className:\"di-scheduling-state-select \"+(G?\"disabled\":\"\")}):(0,y.jsx)(\"div\",{className:\"di-scheduling-state \"+(G?\"disabled\":\"\"),onClick:()=>{!G&&ce(e,n,r)}}),de=(e,t)=>1===e?(0,y.jsx)(c.Z,{className:\"di-scheduling-state-select right\"},t):(0,y.jsx)(\"div\",{className:\"di-scheduling-state right\"},t);let pe={disabled:G};(0,g.Dq)()&&(pe.decimalSeparator=\",\");const fe=[{title:t.formatMessage({id:\"neteco.pvms.device.di.scheduling.no\"}),key:\"index\",dataIndex:\"index\",align:\"center\",width:\"10%\",render:(e,t,n)=>n+1},{title:\"DI1\",key:\"di1\",dataIndex:\"di1\",align:\"center\",width:\"10%\",render:(e,t,n)=>ue(e,0,n,\"di1\")},{title:\"DI2\",key:\"di2\",dataIndex:\"di2\",align:\"center\",width:\"10%\",render:(e,t,n)=>ue(e,0,n,\"di2\")},{title:\"DI3\",key:\"di3\",dataIndex:\"di3\",align:\"center\",width:\"10%\",render:(e,t,n)=>ue(e,0,n,\"di3\")},{title:\"DI4\",key:\"di4\",dataIndex:\"di4\",align:\"center\",width:\"10%\",render:(e,t,n)=>ue(e,0,n,\"di4\")},{title:(e=>{const t=e.split(\"#\"),n=t[0];let r=t[1];return(0,g.Dq)()&&(r=r.replace(/\\./g,\",\")),(0,y.jsxs)(\"div\",{className:\"title-value\",children:[(0,y.jsx)(\"div\",{className:\"title-value-top\",children:n}),(0,y.jsx)(\"div\",{className:\"title-value-bottom \"+(2===D?\"left-0\":\"\"),children:r})]})})(i),key:\"value\",dataIndex:\"value\",width:\"30%\",render:(e,t,n)=>(0,y.jsx)(s.Z,{placement:\"top\",title:t.inputError?B:\"\",overlayStyle:{width:\"200px\",wordBreak:\"break-all\"},children:(0,y.jsxs)(\"div\",{className:\"input-value\",children:[(0,y.jsx)(l.Z,{...pe,className:t.inputError?\"has-error\":\"\",defaultValue:e?Number(e):void 0,value:e?Number(e):void 0,precision:f,onChange:e=>{((e,t)=>{K((n=>{n[t].inputError=T,null==e&&(n[t].inputError=x),1===D&&(e<Number(N)||e>Number(_))&&(n[t].inputError=C),2===D&&(e>Number(R)||e<=Number(j)||e<0&&e>Number(k)||e>=0&&e<Number(L))&&(n[t].inputError=C),n[t].value=e;const r=[...n],{diError:i,errorType:o,diErrorState:a,inputError:s}=ie(r,q);return ee({diError:i,diErrorState:a,errorType:o}),le(r,i,s),r}))})(e,n)}}),1===D&&(0,y.jsx)(\"span\",{className:\"unit\",children:\"%\"})]})})},{title:t.formatMessage({id:\"neteco.pvms.partials.main.io.dm.heads.option\"}),key:\"action\",align:\"center\",render:(e,t,n)=>(0,y.jsx)(\"div\",{onClick:()=>!G&&((e,t)=>{U(\"\"),K((e=>{const n=e.filter(((e,n)=>n!==t)),{diError:r,errorType:i,diErrorState:o,inputError:a}=ie(n,q);return ee({diError:r,diErrorState:o,errorType:i}),le(n,r,a),J(e.length+q.length>P),n}))})(0,n),children:(0,y.jsx)(u.Z,{className:\"delete-icon \"+(G?\"disabled\":\"\")})})}],he=Y?fe.filter((e=>\"di4\"!==e.key)):fe,{diError:me,diErrorState:ge,errorType:ve}=$,ye=me&&ge===H||2===ve;let be=[];if(H&&H.length>0){let e=0;for(let t of H)e++,be.push(de(Number(t),e))}return(0,y.jsxs)(\"div\",{className:\"nco-device-control-mode di-scheduling\",children:[(0,y.jsx)(\"div\",{children:V+\":\"}),(0,y.jsxs)(\"div\",{children:[(0,y.jsx)(a.Z,{rowKey:\"rowId\",bordered:!0,showSorterTooltip:!1,title:()=>(0,y.jsx)(\"div\",{className:\"table-info\",children:t.formatMessage({id:\"neteco.pvms.device.di.scheduling.closed1\"},{0:(0,y.jsx)(c.Z,{className:\"di-scheduling-state-select right\"}),1:(0,y.jsx)(\"div\",{className:\"di-scheduling-state right\"})})}),pagination:!1,dataSource:W,columns:he,rowClassName:e=>oe(e)===H?\"ant-table-row-error\":null}),(0,y.jsx)(\"div\",{className:\"add-time-period-wrapper\",children:(0,y.jsx)(o.Z,{type:\"link\",className:\"add-button\",onClick:()=>{K((e=>{const t=[...e];if(e.length+q.length<P){const e={tableKey:n,di1:E.di1,di2:E.di2,di3:E.di3,di4:E.di4,dispatchType:D,value:void 0,counter:++O},r=M(e);r.inputError=x,t.push(r);const{diError:i,errorType:o,diErrorState:a,inputError:s}=ie(t,q);ee({diError:i,diErrorState:a,errorType:o}),J(t.length+q.length>=P),le(t,i,s)}return t}))},disabled:X||G,children:(0,y.jsx)(d.Z,{})})})]}),ye&&(0,y.jsxs)(\"div\",{className:\"error-area\",children:[(0,y.jsx)(\"div\",{children:t.formatMessage({id:w})}),(0,y.jsx)(\"div\",{className:\"state\",children:be})]})]})}));var D=n(54568);const{neteco:I}=window,N=\"0.0\",_=\"100.0\",j=\"-1.000\",k=\"-0.800\",L=\"0.800\",R=\"1.000\";class Z extends r.Component{constructor(e){super(e);const{onChange:t,value:n,signalValue:r}=e,i=n||r;let o;try{o=JSON.parse(I.util.iUnescape(String(i)))}catch(e){o=[]}this.state={onChange:t,value:o}}componentWillReceiveProps(e,t){const n=e.signalValue;if(\"string\"==typeof n){let e;try{e=JSON.parse(n)}catch(t){e=[]}const t=this.state.value;(0,D.Ql)(e,t)||this.setState({value:e})}}render(){const{intl:e,handleChange:t,type:n,newValue:r,targetId:i,id:o,title:a,diErrorData:s,changeDIError:l,disabled:c}=this.props,{value:u,onChange:d}=this.state,p=1===n?e.formatMessage({id:\"neteco.pvms.device.di.scheduling.percentage\"}):e.formatMessage({id:\"neteco.pvms.basicUnifSignal.invCenter.power_factor\"}),f=1===n?`[${(0,g.af)(N)}~${(0,g.af)(_)}]`:`(${(0,g.af)(j)}~${(0,g.af)(k)}]U\\n          [${(0,g.af)(L)}~${(0,g.af)(R)}]`,h=1===n?1:3,m={intl:e,limit:16,type:n,targetId:i,id:o,title:a,diErrorData:s,changeDIError:l,initialData:r||u,numberColumnTitle:`${p}#${f}`,precision:h,disabled:c,hiddenDI4:this.props.hiddenDI4,tooltips:e.formatMessage({id:\"neteco.pvms.device.di.scheduling.inputVal.tooltip\"},{1:h,2:f}),onChange:e=>{const{data:n,error:r}=e;r?d&&d([r]):d&&d(JSON.stringify(n)),t&&t(e)}};return(0,y.jsx)(P,{...m})}}const B=(0,i.ZP)(Z)},57644:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>d});var r=n(88391),i=n(93706),o=n(35370),a=n(54568),s=n(49453),l=n(23712);const{neteco:c}=window;class u extends r.Component{constructor(e){super(e);const{onChange:t=()=>{},value:n,signalValue:r}=e,i=n||r;this.state={onChange:t,value:i?JSON.parse(c.util.iUnescape(String(i))):\"[]\"}}componentDidMount(){const{dn:e}=this.props;(0,s.Sg)(`/rest/pvms/web/device/v1/deviceExt/get-device-signals?dn=${e}&signalIds=230154317,230154318`,{},3e4).then((e=>{const{success:t,data:n=[]}=e;if(t){const e=n.map((e=>[`${e.id}`,Math.round(parseInt(e.value))])),t=new Map(e);this.setState({min:t.get(\"230154318\")&&!isNaN(t.get(\"230154318\"))?-1*t.get(\"230154318\"):0,max:t.get(\"230154317\")&&!isNaN(t.get(\"230154317\"))?t.get(\"230154317\"):0})}else this.setState({min:0,max:0})})).catch((()=>{this.setState({min:0,max:0})}))}componentWillUnmount(){this.setState=()=>{}}componentWillReceiveProps(e,t){const n=e.signalValue;if(\"string\"==typeof n){const e=JSON.parse(n),t=this.state.value;(0,a.Ql)(e,t)||this.setState({value:e})}}render(){const{intl:e,handleChange:t,disabled:n}=this.props,{value:r,onChange:i}=this.state,a=e.formatMessage({id:\"neteco.pvms.basicUnifSignal.eStore.ch_discharge_power\"}),s={intl:e,limit:10,initialData:r,numberColumnTitle:`${a} (W)`,disabled:n,tooltips:e.formatMessage({id:\"nco.pvms.device.storage.inout.tooltip\"},{0:this.state.min,1:this.state.max}),numberConfig:{min:this.state.min,max:this.state.max,precision:0},onChange:e=>{const{data:n,error:r}=e;r?(i&&i([r]),t&&t([r])):(i&&i(JSON.stringify(n)),t&&t(JSON.stringify(n)))}};return(0,l.jsx)(o.Z,{...s})}}const d=(0,i.ZP)(u)},77531:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>I});var r=n(41541),i=n(48287),o=n(85055),a=n(53309),s=n(70535),l=n(17489),c=n(90701),u=n(29266),d=n(7029),p=n(92252),f=n(88391),h=n(78939),m=n(15075),g=n(37920),v=n.n(g),y=n(10749),b=n(90834),S=n(30929),x=n(54568),w=n(4342),C=n(13528),T=n(23712);const{refreshTouParam:A}=y.Z,{Option:E}=p.Z,O=\"HH:mm\",{neteco:M}=window,P=[[3,4],[3,4],[4,5],[12,9],[2,2]],D=[[2,3],[2,3],[2,3],[11,7],[1,2]],I=e=>{let{value:t,intl:n,id:g,dn:y,touchForm:I,setJpTouValue:N,disabled:_}=e;const j=!(0,w.jA)(),[k,L]=(0,f.useState)([]),[R,Z]=(0,f.useState)(!0),[B,F]=(0,f.useState)(0),[z,V]=(0,f.useState)(0),[H,U]=(0,f.useState)(!1),{iUnescape:G}=M.util,Y=(0,f.useRef)(),W=(0,f.useRef)(null),K=(0,f.useRef)(null);(0,f.useEffect)((()=>{const e=(t&&(e=>{if(\"string\"==typeof e)try{if(JSON.parse(e)&&Array.isArray(JSON.parse(e)))return!0}catch(e){return!1}return!1})(G(t))&&JSON.parse(G(t))||[]).map((e=>{let{startTime:t,endTime:n,repeatPeriod:r,...i}=e;return{startTime:t?v()(t,O):\"\",endTime:n?v()(n,O):\"\",repeatPeriod:r.map((e=>7===e&&j?0:e)),...i}}));return g===b.zJ&&(0,S.oH)(y,`${b.JX},${b.hS}`).then((e=>{F(e.chargeMax),V(e.dischargeMax)})),L((()=>(Z(!1),e))),W.current=A.subscribe((()=>{Y&&Y.current&&Y.current.resetFields()})),N(t),()=>{W.current&&W.current.unsubscribe(),clearTimeout(K.current)}}),[t]);const q={value:j?0:7,title:(0,T.jsx)(h.Z,{id:\"neteco.pvms.weather.day.sunday\"})},Q=[{value:1,title:(0,T.jsx)(h.Z,{id:\"neteco.pvms.weather.day.monday\"})},{value:2,title:(0,T.jsx)(h.Z,{id:\"neteco.pvms.weather.day.tuesday\"})},{value:3,title:(0,T.jsx)(h.Z,{id:\"neteco.pvms.weather.day.wednesday\"})},{value:4,title:(0,T.jsx)(h.Z,{id:\"neteco.pvms.weather.day.thursday\"})},{value:5,title:(0,T.jsx)(h.Z,{id:\"neteco.pvms.weather.day.friday\"})},{value:6,title:(0,T.jsx)(h.Z,{id:\"neteco.pvms.weather.day.saturday\"})}],X=j?[q,...Q]:[...Q,q],J=e=>n.formatMessage({id:e}),$={rules:[{required:!0,message:\"\"}]},ee=()=>{const e=Y.current.getFieldsValue().jpSmartLoggerVal,t=(0,x.bY)(e,O);return U(t),t},te=e=>{var t;const r=1===(null==Y||null===(t=Y.current)||void 0===t?void 0:t.getFieldValue([\"jpSmartLoggerVal\",e.name,\"onOff\"]))?z:B;let i={};return(0,C.Dq)()&&(i.decimalSeparator=\",\"),(0,T.jsx)(l.Z,{span:ne?6:4,children:(0,T.jsx)(c.Z,{placement:\"top\",title:n.formatMessage({id:\"neteco.pvms.device.jstou.inputValidPercentage\"},{maxNumber:r}),children:(0,T.jsx)(u.Z.Item,{...e,name:[e.name,\"fixedCDPower\"],fieldKey:[e.fieldKey,\"fixedCDPower\"],validateFirst:!0,rules:[{validator:(e,t)=>((e,t)=>{const r=parseFloat(e);return Number.isNaN(r)?Promise.reject(J(\"neteco.pvms.device.timePeriodConfigTable.emptyValueInput\")):r<0||r>t?Promise.reject(n.formatMessage({id:\"neteco.pvms.device.jstou.inputValidPercentage\"},{maxNumber:t})):Promise.resolve()})(t,r)}],children:(0,T.jsx)(d.Z,{precision:3,disabled:_,...i})})})})},ne=window.screen.width<1680&&window.screen.width>1440,re=g===b.zJ,ie=re?D:P,oe=Number(ne),ae=[{label:\"ncoPatrolSearchBar.label.startTime\",percentage:ie[0][oe],className:re?\"nco-jp-smart-logger-head-text-fixed\":\"nco-jp-smart-logger-head-text\"},{label:\"neteco.pvms.devUpgrade.endDate\",percentage:ie[1][oe],className:re?\"nco-jp-smart-logger-head-text-fixed\":\"nco-jp-smart-logger-head-text\"},{label:\"neteco.pvms.device.jstou.charging.or.discharge\",percentage:ie[2][oe],className:re?\"nco-jp-smart-logger-head-text-fixed-power-status\":\"nco-jp-smart-logger-head-text\"},{label:\"neteco.pvms.device.jstou.repeat\",percentage:ie[3][oe],className:\"nco-jp-smart-logger-head-text\"},{label:\"neteco.pvms.upgrade.devOperate\",percentage:ie[4][oe],className:\"nco-jp-smart-logger-head-text\"}];return g===b.zJ&&ae.splice(3,0,{label:\"neteco.pvms.device.jstou.cOdinverterPower\",percentage:ne?6:4,className:\"nco-jp-smart-logger-head-text\"}),(0,T.jsxs)(\"div\",{children:[(0,T.jsx)(s.Z,{className:\"nco-jp-smart-logger-head\",gutter:16,children:ae.map((e=>{let{label:t,percentage:n,className:r}=e;return(0,T.jsx)(l.Z,{className:r,span:n,title:J(t),children:J(t)})}))}),!R&&(0,T.jsx)(u.Z,{name:\"jpSmartLogger\",initialValues:{jpSmartLoggerVal:[...k]||[]},onValuesChange:(e,t)=>{K.current=setTimeout((()=>{Y.current.validateFields().then((e=>{let{jpSmartLoggerVal:t}=e;const n=(e=>{const t=e.filter((e=>e)).map(((e,t)=>{let{startTime:n,endTime:r,repeatPeriod:i,...o}=e;const a=i?i.sort():[];return{startTime:v()(n).format(O),repeatPeriod:a.map((e=>0===e&&j?e=7:e)),endTime:v()(r).format(O),...o}}));return t&&t})(t),r=JSON.stringify(n);N(r),I({id:g,value:r})})).catch((()=>{I(null,\"jpTou\")}))}),100)},ref:Y,children:(0,T.jsx)(u.Z.List,{name:\"jpSmartLoggerVal\",children:(e,t)=>{let{add:n,remove:c}=t;return(0,T.jsxs)(\"div\",{className:e.length>=8?\"nco-jp-smart-items-wrap\":\"\",children:[!(null!=e&&e.length)&&(0,T.jsx)(a.Z,{image:a.Z.PRESENTED_IMAGE_SIMPLE}),e.map((e=>(0,T.jsxs)(s.Z,{gutter:16,className:\"nco-jp-smart-logger-total-item\",children:[(0,T.jsx)(l.Z,{span:ie[0][oe],className:re?\"nco-jp-smart-logger-total-item-fix-start-time\":\"\",children:(0,T.jsx)(u.Z.Item,{...e,name:[e.name,\"startTime\"],fieldKey:[e.fieldKey,\"startTime\"],validateFirst:!0,rules:[()=>({validator:(e,t)=>t?ee()?Promise.reject():Promise.resolve():Promise.reject()})],children:(0,T.jsx)(o.Z,{format:O,placeholder:\"\",disabled:_})})}),(0,T.jsx)(l.Z,{span:ie[1][oe],className:re?\"nco-jp-smart-logger-total-item-fix-end-time\":\"\",children:(0,T.jsx)(u.Z.Item,{...e,name:[e.name,\"endTime\"],fieldKey:[e.fieldKey,\"endTime\"],validateFirst:!0,rules:[t=>{let{getFieldValue:n}=t;return{validator:(t,r)=>r?v()(n(\"jpSmartLoggerVal\")[e.name].startTime,O).isSame(v()(r,O),\"minute\")?Promise.reject(J(\"neteco.pvms.device.timePeriodConfigTable.inputDifferentTime\")):ee()?Promise.reject():Promise.resolve():Promise.reject()}}],children:(0,T.jsx)(o.Z,{format:O,placeholder:\"\",disabled:_})})}),(0,T.jsx)(l.Z,{span:ie[2][oe],className:re?\"nco-jp-smart-logger-total-item-status\":\"\",children:(0,T.jsx)(u.Z.Item,{...e,name:[e.name,\"onOff\"],fieldKey:[e.fieldKey,\"onOff\"],validateFirst:!0,...$,children:(0,T.jsxs)(p.Z,{virtual:!1,getPopupContainer:e=>e.parentElement||document.body,disabled:_,children:[(0,T.jsx)(E,{value:0,title:J(\"neteco.pvms.device.jstou.charging\"),children:J(\"neteco.pvms.device.jstou.charging\")}),(0,T.jsx)(E,{value:1,title:J(\"neteco.pvms.device.jstou.discharge\"),children:J(\"neteco.pvms.device.jstou.discharge\")})]})})}),g===b.zJ&&te(e),(0,T.jsx)(l.Z,{span:ie[3][oe],children:(0,T.jsx)(u.Z.Item,{...e,name:[e.name,\"repeatPeriod\"],fieldKey:[e.fieldKey,\"repeatPeriod\"],rules:[{required:!0,message:\"\"},{validator:(e,t)=>ee()?Promise.reject():Promise.resolve()}],children:(0,T.jsx)(i.Z,{treeData:X,treeCheckable:!0,disabled:_})})}),(0,T.jsx)(l.Z,{span:ie[4][oe],children:(0,T.jsx)(m.Z,{title:J(\"neteco.pvms.configuration.delete\"),onClick:()=>{!_&&c(e.name)},className:\"delete-icon \"+(_?\"disabled\":\"\")})})]},e.key))),(0,T.jsx)(u.Z.Item,{className:\"nco-jp-smart-logger-add-item\",children:(0,T.jsx)(r.Z,{disabled:(null==e?void 0:e.length)>13||_,title:J(\"common.button.create\"),onClick:async()=>{await n(),Y.current.validateFields()},type:\"primary\",children:(0,T.jsx)(h.Z,{id:\"common.button.create\"})})}),(0,T.jsx)(\"div\",{className:\"change-password-tip\",children:H?J(\"neteco.pvms.stationInfo.addStation.priceSettingList._24hoursCross\"):\"\"})]})}})})]})}},28107:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>M});var r=n(41541),i=n(48287),o=n(90701),a=n(7029),s=n(29266),l=n(85055),c=n(53309),u=n(70535),d=n(17489),p=n(88391),f=n(78939),h=n(15075),m=n(37920),g=n.n(m),v=n(10749),y=n(54568),b=n(90834),S=n(4342),x=n(13528),w=n(23712);const{refreshTouParam:C}=v.Z,T=\"HH:mm\",{neteco:A}=window;let E=\"0.000\",O=\"1000.000\";const M=e=>{let{value:t,intl:n,touchForm:m,setJpTouValue:v,id:M,disabled:P,signals:D=[]}=e;const I=!(0,S.jA)(),[N,_]=(0,p.useState)([]),[j,k]=(0,p.useState)(!0),[L,R]=(0,p.useState)(!1),[Z,B]=(0,p.useState)(!1),{iUnescape:F}=A.util,z=(0,p.useRef)(),V=(0,p.useRef)(null),H=(0,p.useRef)(null);(0,p.useEffect)((()=>{const e=(t&&(e=>{if(\"string\"==typeof e)try{if(JSON.parse(e)&&Array.isArray(JSON.parse(e)))return!0}catch(e){return!1}return!1})(F(t))&&JSON.parse(F(t))||[]).map((e=>{let{startTime:t,endTime:n,repeatPeriod:r,maxPeakPower:i,...o}=e;return{startTime:t?g()(t,T):\"\",endTime:n?g()(n,T):\"\",maxPeakPower:i,repeatPeriod:r.map((e=>7===e&&I?e=0:e)),...o}}));return _((()=>(k(!1),e))),V.current=C.subscribe((()=>{z&&z.current&&z.current.resetFields(),R(!1)})),v(t),()=>{V.current&&V.current.unsubscribe(),clearTimeout(H.current)}}),[t]);const U={value:I?0:7,title:(0,w.jsx)(f.Z,{id:\"neteco.pvms.weather.day.sunday\"})},G=[{value:1,title:(0,w.jsx)(f.Z,{id:\"neteco.pvms.weather.day.monday\"})},{value:2,title:(0,w.jsx)(f.Z,{id:\"neteco.pvms.weather.day.tuesday\"})},{value:3,title:(0,w.jsx)(f.Z,{id:\"neteco.pvms.weather.day.wednesday\"})},{value:4,title:(0,w.jsx)(f.Z,{id:\"neteco.pvms.weather.day.thursday\"})},{value:5,title:(0,w.jsx)(f.Z,{id:\"neteco.pvms.weather.day.friday\"})},{value:6,title:(0,w.jsx)(f.Z,{id:\"neteco.pvms.weather.day.saturday\"})}],Y=I?[U,...G]:[...G,U],W=e=>n.formatMessage({id:e}),K=()=>{const e=z.current.getFieldsValue().jpSmartLoggerVal,t=(0,y.bY)(e,T);return B(t),t},q=()=>{const e=(()=>{const e=z.current.getFieldsValue().jpSmartLoggerVal;if((0,y.oE)(e))return!1;let t=b.rd,n=0,r=0;for(let s=0;s<e.length;s+=1){var i,o,a;if(null===(i=e[s])||void 0===i||!i.startTime||null===(o=e[s])||void 0===o||!o.endTime||null===(a=e[s])||void 0===a||!a.repeatPeriod)return!0;const l=g().duration(e[s].startTime.format(T)).asMinutes(),c=g().duration(e[s].endTime.format(T)).asMinutes();if(l<c)r=c-l,n=e[s].repeatPeriod.length,r*=n,c===b.I&&(r+=e[s].repeatPeriod.length),t-=r;else{let i=c-0,o=b.Md-l;n=e[s].repeatPeriod.length,r=(i+o)*n,l===b.I&&(r-=e[s].repeatPeriod.length),t-=r}}return t>0})();return R(e),e},Q=window.screen.width<1680&&window.screen.width>1440,X=[{label:\"ncoPatrolSearchBar.label.startTime\",percentage:Q?4:3},{label:\"neteco.pvms.devUpgrade.endDate\",percentage:Q?4:3},{label:\"2\"===(D.find((e=>230200170===e.id))||{}).value?\"neteco.pvms.device.max.peakShaving.kVA\":\"neteco.pvms.device.max.peakShaving\",percentage:Q?5:4},{label:\"neteco.pvms.device.jstou.repeat\",percentage:Q?9:12},{label:\"neteco.pvms.upgrade.devOperate\",percentage:2}];230200219===M?(O=\"50000.000\",E=\"1.000\"):230700179===M?(O=\"1000.000\",E=\"0.500\"):(O=\"1000.000\",E=\"0.000\");const J=n.formatMessage({id:\"neteco.pvms.peakShaving.parameterRange\"},{0:E,1:O});let $={};return(0,x.Dq)()&&($.decimalSeparator=\",\"),(0,w.jsxs)(\"div\",{children:[(0,w.jsx)(u.Z,{className:\"nco-jp-smart-logger-head\",gutter:16,children:X.map((e=>{let{label:t,percentage:n}=e;return(0,w.jsx)(d.Z,{className:\"nco-jp-smart-logger-head-text\",span:n,title:W(t),children:W(t)})}))}),!j&&(0,w.jsx)(s.Z,{name:\"jpSmartLogger\",initialValues:{jpSmartLoggerVal:[...N]||[]},onValuesChange:(e,t)=>{H.current=setTimeout((()=>{z.current.validateFields().then((e=>{let{jpSmartLoggerVal:t}=e;const n=(e=>{const t=e.filter((e=>e)).map(((e,t)=>{let{startTime:n,endTime:r,repeatPeriod:i,...o}=e;const a=i?i.sort():[];return{startTime:g()(n).format(T),repeatPeriod:a.map((e=>0===e&&I?e=7:e)),endTime:g()(r).format(T),...o}}));return t&&t})(t),r=JSON.stringify(n);v(r),m({id:M,value:r})})).catch((()=>{m(null,\"jpTou\")}))}),100)},ref:z,children:(0,w.jsx)(s.Z.List,{name:\"jpSmartLoggerVal\",children:(e,t)=>{let{add:n,remove:p}=t;return(0,w.jsxs)(\"div\",{children:[!(null!=e&&e.length)&&(0,w.jsx)(c.Z,{image:c.Z.PRESENTED_IMAGE_SIMPLE}),e.map((e=>(0,w.jsxs)(u.Z,{gutter:16,className:\"nco-jp-smart-logger-total-item\",children:[(0,w.jsx)(d.Z,{span:Q?4:3,children:(0,w.jsx)(s.Z.Item,{...e,name:[e.name,\"startTime\"],fieldKey:[e.fieldKey,\"startTime\"],validateFirst:!0,rules:[()=>({validator:(e,t)=>t?q()||K()?Promise.reject():Promise.resolve():Promise.reject()})],children:(0,w.jsx)(l.Z,{format:T,disabled:P})})}),(0,w.jsx)(d.Z,{span:Q?4:3,children:(0,w.jsx)(s.Z.Item,{...e,name:[e.name,\"endTime\"],fieldKey:[e.fieldKey,\"endTime\"],validateFirst:!0,rules:[t=>{let{getFieldValue:n}=t;return{validator:(t,r)=>r?g()(n(\"jpSmartLoggerVal\")[e.name].startTime,T).isSame(g()(r,T),\"minute\")?Promise.reject(W(\"neteco.pvms.device.timePeriodConfigTable.inputDifferentTime\")):q()||K()?Promise.reject():Promise.resolve():Promise.reject()}}],children:(0,w.jsx)(l.Z,{format:T,disabled:P})})}),(0,w.jsx)(d.Z,{span:Q?5:4,children:(0,w.jsx)(o.Z,{placement:\"top\",title:J,overlayStyle:{width:\"12.5rem\"},children:(0,w.jsx)(s.Z.Item,{...e,name:[e.name,\"maxPeakPower\"],fieldKey:[e.fieldKey,\"maxPeakPower\"],validateFirst:!0,rules:[{required:!0,message:W(\"neteco.pvms.device.timePeriodConfigTable.emptyValueInput\")}],children:(0,w.jsx)(a.Z,{step:.001,precision:3,min:Number(E),max:Number(O),disabled:P,...$})})})}),(0,w.jsx)(d.Z,{span:Q?9:12,children:(0,w.jsx)(s.Z.Item,{...e,name:[e.name,\"repeatPeriod\"],fieldKey:[e.fieldKey,\"repeatPeriod\"],rules:[{required:!0,message:\"\"},{validator:(e,t)=>q()||K()?Promise.reject():Promise.resolve()}],children:(0,w.jsx)(i.Z,{treeData:Y,treeCheckable:!0,disabled:P})})}),(0,w.jsx)(d.Z,{span:2,children:(0,w.jsx)(h.Z,{title:W(\"neteco.pvms.configuration.delete\"),onClick:()=>{!P&&p(e.name)},className:\"delete-icon \"+(P?\"disabled\":\"\")})})]},e.key))),(0,w.jsx)(s.Z.Item,{className:\"nco-jp-smart-logger-add-item\",children:(0,w.jsx)(r.Z,{disabled:(null==e?void 0:e.length)>13||P,title:W(\"neteco.pvms.partials.main.dm.devLocation.grouping\"),onClick:async()=>{await n(),z.current.validateFields()},type:\"primary\",children:(0,w.jsx)(f.Z,{id:\"common.button.create\"})})}),(0,w.jsx)(\"div\",{className:\"change-password-tip\",children:L?W(\"neteco.pvms.peak.shaving.not.full.week\"):Z?W(\"neteco.pvms.stationInfo.addStation.priceSettingList._24hoursCross\"):null})]})}})})]})}},35370:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>O});var r=n(41541),i=n(15694),o=n(90701),a=n(7029),s=n(85055),l=n(88391),c=n(93706),u=n(37920),d=n.n(u),p=n(56155),f=n(10976),h=n(13528),m=n(23712);const g=\"HH:mm\",v=[\"startTime\",\"endTime\",\"value\"],y=14,b=\"neteco.pvms.stationInfo.addStation.priceSettingList._24hoursCross\",S=void 0,x={min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,prevision:3},w={startTime:\"00:00\",endTime:\"00:00\",value:0,timeError:S,inputError:S};let C=0;const T=e=>{let{startTime:t,endTime:n,value:r,tableKey:i,counter:o}=e;const a={...w};return a.rowId=`${i}-${o}`,a.startTime=t,a.endTime=n,a.value=r,a},A=e=>{let t=S;for(let n=0;n<e.length&&(t=e[n].inputError,!t);n++);let n=S;e.forEach((e=>{const t=(e=>{if(void 0===e.startTime||void 0===e.endTime)return\" \";const t=d()(e.startTime,g),n=d()(e.endTime,g);return t.isBefore(n)?S:\"neteco.pvms.device.timePeriodConfigTable.inputLargerEndTime\"})(e);e.timeError=t,n||(n=t)}));const{error:r,data:i}=E(e);return((e,t)=>{for(let n=0;n<e.length;n++){const r=e[n];t.includes(n)&&(r.timeError=!0)}})(e,i),{inputError:t,timeError:r||n}},E=e=>{for(let t=0;t<e.length;t++){const n=e[t],r=d()(n.startTime,g),i=d()(n.endTime,g);for(let n=0;n<e.length;n++){if(t===n)continue;const o=e[n],a=d()(o.startTime,g),s=d()(o.endTime,g);if(r.isAfter(a)&&r.isBefore(s))return{error:b,data:[t,n]};if(i.isAfter(a)&&i.isBefore(s))return{error:b,data:[t,n]}}}return{error:S,data:[]}},O=(0,c.ZP)((e=>{let{intl:t,tableKey:n,numberColumnTitle:c=\"\",numberConfig:u=x,limit:b=y,onChange:w,initialData:E=[],tooltips:O,disabled:M}=e;const[P,D]=(0,l.useState)([]),[I,N]=(0,l.useState)(!1),[_,j]=(0,l.useState)(S);(0,l.useEffect)((()=>{Array.isArray(E)&&D((()=>{const e=k(E),{timeError:t,inputError:n}=A(e);return j((()=>t||n)),L(e,t,n,!1),e}))}),[E]);const k=e=>e.map((e=>{const t={tableKey:n,startTime:e.startTime,endTime:e.endTime,value:Number(e.value),counter:++C};return T(t)})),L=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(w){const i=((e,t)=>{const n=[];return e.forEach((e=>{const r={};t.forEach((t=>{r[t]=e[t]})),n.push(r)})),n})(e,v),o=t||n?t||n:S,a={data:i,count:e.length,error:o};r&&w(a)}},R=(e,t,n)=>{D((r=>{const i=[...r];i[t][n]=d()(e).format(g);const{inputError:o,timeError:a}=A(i);return j((()=>o||a)),L(i,a,o),i}))},Z=(e,t)=>{D((n=>{n[t].value=e,n[t].inputError=S;const r=[...n],{inputError:i,timeError:o}=A(r);return j((()=>i||o)),L(r,o,i),r}))},B=[{title:t.formatMessage({id:\"neteco.pvms.stationInfo.addStation.priceSettingList.plsSelectStartTime\"}),key:\"startTime\",dataIndex:\"startTime\",width:\"28%\",render:(e,t,n)=>(0,m.jsx)(\"div\",{className:\"no-padding-time-picker-wrapper\",children:(0,m.jsx)(s.Z,{className:t.timeError?\"has-error\":\"no-error\",disabled:M,getPopupContainer:e=>e.parentNode,defaultValue:e?d()(e,g):void 0,format:g,onChange:e=>{R(e,n,\"startTime\")}})})},{title:t.formatMessage({id:\"neteco.pvms.partials.main.dm.devParamMenu.energyStorage.endTime\"}),key:\"endTime\",dataIndex:\"endTime\",width:\"28%\",render:(e,t,n)=>(0,m.jsx)(\"div\",{className:\"no-padding-time-picker-wrapper\",children:(0,m.jsx)(s.Z,{className:t.timeError?\"has-error\":\"no-error\",disabled:M,getPopupContainer:e=>e.parentNode,defaultValue:e?d()(e,g):void 0,format:g,onChange:e=>{R(e,n,\"endTime\")}})})},{title:c,key:\"value\",dataIndex:\"value\",width:\"28%\",render:(e,t,n)=>{let r={};return(0,h.Dq)()&&(r.decimalSeparator=\",\"),O?(0,m.jsx)(o.Z,{placement:\"top\",title:O,overlayStyle:{width:\"200px\"},children:(0,m.jsx)(a.Z,{...r,className:t.inputError?\"has-error\":\"no-error\",disabled:M,defaultValue:void 0!==e?Number(e):void 0,value:void 0!==e?Number(e):void 0,min:u.min,max:u.max,precision:u.precision,onChange:e=>{Z(e,n)}})}):(0,m.jsx)(a.Z,{...r,className:t.inputError?\"has-error\":\"no-error\",disabled:M,defaultValue:void 0!==e?Number(e):void 0,min:u.min,max:u.max,precision:u.precision,onChange:e=>{Z(e,n)}})}},{title:t.formatMessage({id:\"neteco.pvms.partials.main.io.dm.heads.option\"}),key:\"action\",render:(e,t,n)=>(0,m.jsx)(\"div\",{onClick:()=>!M&&((e,t)=>{D((e=>{const n=e.filter(((e,n)=>n!==t)),{inputError:r,timeError:i}=A(n);return j((()=>r||i)),L(n,i,r),N(e.length>b),n}))})(0,n),children:(0,m.jsx)(p.Z,{className:\"delete-icon \"+(M?\"disabled\":\"\")})})}];return(0,m.jsx)(\"div\",{className:\"nco-device-control-mode\",children:(0,m.jsxs)(\"div\",{children:[(0,m.jsx)(i.Z,{rowKey:\"rowId\",bordered:!0,showSorterTooltip:!1,pagination:!1,dataSource:P,columns:B}),(0,m.jsx)(\"div\",{className:\"add-time-period-wrapper\",children:(0,m.jsx)(r.Z,{type:\"link\",className:\"add-button\",onClick:()=>{D((e=>{const t=[...e];if(e.length<b){const e={tableKey:n,startTime:void 0,endTime:void 0,value:void 0,counter:++C},r=T(e);r.inputError=\" \",t.push(r);const{inputError:i,timeError:o}=A(t);N(t.length>=b),L(t,o,i)}return t}))},disabled:I||M,children:(0,m.jsx)(f.Z,{className:\"delete-icon\"})})})]})})}))},15319:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>u});var r=n(88391),i=n(93706),o=n(35370),a=n(54568),s=n(23712);const{neteco:l}=window;class c extends r.Component{constructor(e){super(e);const{onChange:t=()=>{},value:n,signalValue:r}=e,i=n||r;this.state={onChange:t,value:JSON.parse(l.util.iUnescape(String(i)))}}componentWillReceiveProps(e,t){const n=e.signalValue;if(\"string\"==typeof n){const e=JSON.parse(n),t=this.state.value;(0,a.Ql)(e,t)||this.setState({value:e})}}render(){const{intl:e,handleChange:t,disabled:n}=this.props,{value:r,onChange:i}=this.state,a=e.formatMessage({id:\"neteco.pvms.basicUnifSignal.eStore.chDischargeModelItem.3\"}),l={intl:e,limit:10,initialData:r,numberColumnTitle:`${a} (CNY/kWh)`,disabled:n,tooltips:e.formatMessage({id:\"nco.pvms.device.storage.tou.tooltip\"},{0:0,1:9999}),numberConfig:{min:0,max:9999,precision:3},onChange:e=>{const{data:n,error:r}=e;r?(i&&i([r]),t&&t([r])):(i&&i(JSON.stringify(n)),t&&t(JSON.stringify(n)))}};return(0,s.jsx)(o.Z,{...l})}}const u=(0,i.ZP)(c)},14077:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>p}),n(88391);var r=n(49100),i=n(54568),o=n(13528),a=n(59516),s=n(64218),l=n(80770),c=n(49453),u=n(23712);const{neteco:d}=window;function p(e){let{intl:t,dn:n,signal:p,device:f,isShowInModal:h}=e;const{valueRange:m,tips:g,id:v}=p;if(33595393===v)return;let y=\"\";if(m&&m.displayRange&&(y=m.displayRange),(0,i.L6)(p)){const e=\"Connected\"===f.status,i=e?\"neteco.pvms.systemSetting.resetUser\":\"neteco.pvms.systemSetting.updatePassword\",o=r=>{if(r&&r.preventDefault&&r.preventDefault(),e){const e={successCallback:e=>{const{check:r}=e;(0,c.v_)(`/rest/dp/pvms/web/imodbus/v1/ne-service/reset-pwd?randomVal=${r}`,{dn:n,sigId:\"50016\"}).then((e=>{const{code:n,description:r}=e;if(0===n)(0,l.Sb)(t.formatMessage({id:\"neteco.pvms.deviceResetPwd.success.msg\"}));else if(-1===n){const e=r?t.formatMessage({id:r}):\"\",n=t.formatMessage({id:\"neteco.pvms.deviceResetPwd.fail.msg\"},{0:e});(0,l.jT)(n)}else(0,l.jT)(t.formatMessage({id:\"neteco.pvms.deviceResetPwd.fail.msg\"},{0:\"\"}))})).catch((()=>{(0,l.jT)(t.formatMessage({id:\"neteco.pvms.deviceResetPwd.fail.msg\"},{0:\"\"}))}))}};(0,l.ST)(t.formatMessage({id:\"neteco.pvms.deviceResetPwd.confirm\"}),(()=>(0,s.Nu)(\"use-verify-pass\",e)))}else(0,s.Nu)(\"change_device_password\",{})};return(0,u.jsx)(\"div\",{className:\"range-part\",children:(0,u.jsx)(\"span\",{children:(0,u.jsx)(r.Z,{operationId:a.qS6,targetId:[n],targetType:\"device\",intl:t,type:\"link\",onClick:o,children:t.formatMessage({id:i})})})})}let b=\"\";(0,i.HD)(p)?b=t.formatMessage({id:\"neteco.pvms.device.config.string.length\"}):h&&(b=t.formatMessage({id:\"neteco.pvms.partials.main.dm.devParamMenu.rangeInfo\"}));const S=b+(y||g||\"\");let x=d.util.iUnescape(S);return(0,o.Dq)()&&(x=x.replace(/\\./g,\",\")),(0,u.jsx)(\"div\",{className:\"range-part\",children:(0,u.jsx)(\"span\",{title:x,children:x})})}},94173:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>p});var r=n(45258),i=n(29266),o=n(88391),a=n(93706),s=n(49453),l=n(80770),c=n(64218),u=n(23712);class d extends o.Component{constructor(e){var t;super(e),t=this,this.newPasswordLabel=this.props.intl.formatMessage({id:\"neteco.pvms.devEms.newPws\"}),this.confirmPasswordLabel=this.props.intl.formatMessage({id:\"neteco.pvms.superviseSetting.serviceManage.confirmPsw\"}),this.passwordTipsHelpMessage=this.props.intl.formatMessage({id:\"neteco.device.password.length.tips\"}),this.passwordRepeatHelpMessage=this.props.intl.formatMessage({id:\"neteco.pvms.systemSetting.updatePswTips.checkPswRepeatErrorMsg\"}),this.passwordComplexHelpMessage=this.props.intl.formatMessage({id:\"neteco.pvms.device.password.complex.message2\"}),this.initFormStatus={passwordDirty:!1,passwordInput:\"\",passwordValidateStatus:\"success\",passwordHelpMessage:\"\",okButtonDisabled:!0,confirmDirty:!1,confirmInput:\"\",confirmValidateStatus:\"success\",confirmHelpMessage:\"\",loading:!1},this.setOkButtonStatus=()=>{if(!this.state.passwordDirty||!this.state.confirmDirty)return void this.setState({okButtonDisabled:!0});const e=this.state.passwordInput===this.state.confirmInput,t=\"success\"===this.state.passwordValidateStatus&&\"success\"===this.state.confirmValidateStatus;this.setState({okButtonDisabled:!(e&&t)})},this.getMatchLength=e=>{let t=0;const n=d.reverseString(e),r=n.match(/[0-9]/);r&&r[0]&&(t+=1);const i=n.match(/[A-Z]/);i&&i[0]&&(t+=1);const o=n.match(/[a-z]/);o&&o[0]&&(t+=1);const a=n.match(new RegExp(\"[-`=\\\\[\\\\];\\\\',\\\\./~!@#\\\\$%\\\\^&\\\\*\\\\(\\\\)_\\\\+\\\\|\\\\{\\\\}:\\\"<>\\\\?]\"));return a&&a[0]&&(t+=1),t},this.newPasswordValidator=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";if(!e||16!==e.length)return{passed:!1,message:t.passwordTipsHelpMessage};const n=t.getMatchLength(e);return!d.regex.test(e)||n<3?{passed:!1,message:t.passwordComplexHelpMessage}:{passed:!0}},this.confirmPasswordValidator=e=>{if(!e||16!==e.length)return{passed:!1,message:this.passwordTipsHelpMessage};const t=this.getMatchLength(e);return!d.regex.test(e)||t<3?{passed:!1,message:this.passwordComplexHelpMessage}:e!==this.state.passwordInput?{passed:!1,message:this.passwordRepeatHelpMessage}:{passed:!0}},this.handlePasswordInput=e=>{e.preventDefault();const t=e.target.value,n=this.newPasswordValidator(t),{passed:r,message:i}=n,o=r?\"success\":\"error\";this.setState({passwordInput:t,passwordDirty:\"\"!==t,passwordValidateStatus:o,passwordHelpMessage:i},(()=>{this.setOkButtonStatus()}))},this.handleConfirmInput=e=>{e.preventDefault();const t=e.target.value,n=this.confirmPasswordValidator(t),{passed:r,message:i}=n,o=r?\"success\":\"error\";this.setState({confirmInput:t,confirmDirty:\"\"!==t,confirmValidateStatus:o,confirmHelpMessage:i},(()=>{this.setOkButtonStatus()}))},this.handleExceptionRsp=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"\";t.resetFields(),(0,l.jT)(e.formatMessage({id:\"neteco.pvms.deviceChangePwd.fail.msg\"},{0:r})),n.forEach((e=>e()))},this.formRef=(0,o.createRef)(),this.state=this.initFormStatus}render(){const{shouldShowPasswordModal:e,selected:t,successCallbacks:n,failCallbacks:o,intl:a}=this.props,d={},p=this.formRef.current,f={successCallback:e=>{this.setState({loading:!0});const{check:r}=e,[i]=t,{dn:c}=i,u=this.state.passwordInput;(0,s.v_)(`/rest/neteco/web/imodbus/v1/ne-service/change-pwd?randomVal=${r}`,{dn:c,newPwd:u,syncToNe:!1,sigId:\"50016\"}).then((e=>{const{code:t,description:r}=e;if(0===t)p.resetFields(),(0,l.Sb)(a.formatMessage({id:\"neteco.pvms.deviceChangePwd.success.msg\"})),n.forEach((e=>e())),this.setState({...this.initFormStatus});else if(-1===t){const e=a.formatMessage({id:r});this.handleExceptionRsp(a,p,o,e)}else this.handleExceptionRsp(a,p,o)})).catch((()=>{this.handleExceptionRsp(a,p,o)}))}};return(0,u.jsxs)(r.Z,{title:a.formatMessage({id:\"neteco.pvms.systemSetting.updatePassword\"}),centered:!0,destroyOnClose:!0,visible:e,onOk:()=>(0,c.Nu)(\"use-verify-pass\",f),onCancel:()=>{p&&p.resetFields(),n.forEach((e=>e()))},okButtonProps:{disabled:this.state.okButtonDisabled,loading:this.state.loading},children:[(0,u.jsx)(\"div\",{children:(0,u.jsxs)(i.Z,{ref:this.formRef,layout:\"vertical\",children:[(0,u.jsx)(i.Z.Item,{required:!0,...d,label:this.newPasswordLabel,validateStatus:this.state.passwordValidateStatus,help:this.state.passwordHelpMessage,children:(0,u.jsx)(\"input\",{type:\"password\",className:\"ant-input\",onChange:this.handlePasswordInput,onCopy:e=>{e.preventDefault()},onCut:e=>{e.preventDefault()}})}),(0,u.jsx)(i.Z.Item,{required:!0,...d,label:this.confirmPasswordLabel,validateStatus:this.state.confirmValidateStatus,help:this.state.confirmHelpMessage,children:(0,u.jsx)(\"input\",{type:\"password\",className:\"ant-input\",onChange:this.handleConfirmInput,onCopy:e=>{e.preventDefault()},onCut:e=>{e.preventDefault()}})})]})}),(0,u.jsx)(\"div\",{className:\"change-password-tip\",children:a.formatMessage({id:\"neteco.pvms.deviceChangePwd.confirm\"})})]})}}d.regex=new RegExp(\"^(?:([0-9])|([A-Z])|([a-z])|([-`=\\\\[\\\\];\\\\',\\\\./~!@#\\\\$%\\\\^&\\\\*\\\\(\\\\)_\\\\+\\\\|\\\\{\\\\}:\\\"<>\\\\?])){16}$\"),d.reverseString=e=>{let t=e.length,n=\"\";for(;t>=0;)n+=e.charAt(t),t--;return n};const p=(0,a.ZP)(d)},90834:(e,t,n)=>{\"use strict\";n.d(t,{I:()=>o,JX:()=>s,Md:()=>r,hS:()=>l,rd:()=>i,zJ:()=>a});const r=1440,i=10080,o=1439,a=230200223,s=10092,l=10093},54568:(e,t,n)=>{\"use strict\";n.d(t,{C3:()=>v,Fc:()=>C,GM:()=>k,Gg:()=>I,HD:()=>p,Hr:()=>f,KA:()=>y,Ku:()=>T,L6:()=>O,L9:()=>S,MU:()=>b,Mz:()=>L,No:()=>M,Ql:()=>s,Qn:()=>P,Sl:()=>A,YU:()=>H,_w:()=>m,af:()=>w,bY:()=>F,dY:()=>j,du:()=>R,hj:()=>E,ie:()=>V,mE:()=>N,mo:()=>D,oD:()=>h,oE:()=>Z,qE:()=>z,wF:()=>g,wo:()=>x});var r=n(37920),i=n.n(r),o=n(13528),a=n(90834);const s=(e,t)=>{if(e.length!==t.length)return!1;const{length:n}=e;for(let r=0;r<n;r++){const n=e[r],i=t[r],o=Object.keys(e[r]);for(const e of o)if(n[e]!==i[e])return!1}return!0},l=[230190116,230190136],c=[230102787,230102792],u=[230223895,230223903],d=new Set([\"INT\",\"BYTE\",\"FLOAT\",\"DOUBLE\",\"UINT\",\"UBYTE\",\"USHORT\",\"SHORT\",\"LONG\"]),p=e=>\"STRING\"===e.dataType,f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 230154823===t},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 230200223===t},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 230700176===t},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return l.includes(t)},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return c.includes(t)},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return u.includes(t)},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 230200061===t},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 230700059===t},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 230154824===t},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 230320283===t},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 20014===t},T=function(){return 230200219===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id},A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 230190101===t},E=e=>d.has(e.dataType),O=e=>\"PASSWORD\"===e.dataType,M=e=>\"ENUM\"===e.dataType,P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 230320486===t},D=e=>[22100].find((t=>t===Number(e.id))),I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;return 230700179===t},N=(e,t)=>{const n=(0,o.xP)(t),{precision:r=0,valueRange:i}=e;let a=[],s={};i&&(a=i.ranges?i.ranges:[]),a.length>0&&(s=a[0]);const{maxValue:l,minValue:c}=s;if(void 0===n)return!1;const u=n.split(\".\")[1];if(u&&u.length>r)return!1;const d=parseFloat(n);if(isNaN(d))return!1;const p=Number(Number(c).toFixed(r)),f=Number(Number(l).toFixed(r));return!(void 0!==c&&d<p||void 0!==l&&d>f)},{neteco:_}=window,j=e=>{const{enumList:t={},enumListEntry:n}=e;let r=[];return r=n instanceof Array&&n.length>0?n.map((e=>{const t=Object.entries(e)[0],n=t[0],r=t[1];return{key:String(n),displayName:_.util.iUnescape(String(r))}})):Object.entries(t).map((e=>({key:String(e[0]),displayName:_.util.iUnescape(String(e[1]))}))),r},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{edit:t,signalRefresh:n,id:r}=e;let i=!0;return i=i&&t,i=i&&\"HW_MODBUS_DEVICE_REFRESH\"!==n,i=i&&!O(e),i=i&&!M(e),230102182===r||i},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{value:t}=e;let n;if(M(e)){const r=j(e).find((e=>e.key===t));n=r?r.key:\"\"}else n=t;return n},R=(e,t)=>{const{startTime:n,endTime:r,repeatPeriod:i}=e[t.name];for(let o=0;o<e.length;o++){if(o===t.name)continue;const{startTime:a,endTime:s,repeatPeriod:l}=e[o]||{};if(0!==i.filter((e=>null==l?void 0:l.includes(e))).length&&n.isSame(a,\"minute\")&&r.isSame(s,\"minute\"))return!0}return!1},Z=e=>{for(let t=0;t<e.length;t++){const n=e[t];if(null==n||!n.repeatPeriod||null==n||!n.startTime||null==n||!n.endTime)return!0}return!1};function B(e,t){let n=[Math.min(...e),Math.min(...t)],r=[Math.max(...e),Math.max(...t)];return Math.max(...n)<Math.min(...r)}const F=(e,t)=>{if(Z(e))return!1;for(let l=0;l<e.length;l++){const{startTime:c,endTime:u,repeatPeriod:d}=e[l];for(let p=l+1;p<e.length;p++){const{startTime:l,endTime:f,repeatPeriod:h}=e[p]||{};if(0!==d.filter((e=>null==h?void 0:h.includes(e))).length){if(c.isSame(l,\"minute\")&&u.isSame(f,\"minute\"))return!0;if(n=i().duration(c.format(t)).asMinutes(),r=i().duration(u.format(t)).asMinutes(),o=i().duration(l.format(t)).asMinutes(),s=i().duration(f.format(t)).asMinutes(),n<r&&o<s&&B([n,r],[o,s])||n<r&&o>s&&(B([n,r],[0,s])||B([n,r],[o,a.I]))||n>r&&o<s&&(B([0,r],[o,s])||B([n,a.I],[o,s]))||function(e,t,n,r){return!!(e>t&&n>r&&(B([0,t],[0,r])||B([0,t],[n,a.I])||B([t,a.I],[0,r])||B([t,a.I],[n,a.I])))}(n,r,o,s))return!0}}}var n,r,o,s;return!1};function z(e,t,n,r){let i={},o=-1,a={},s=-1;e.forEach(((e,t)=>{Number(e.id)===r&&(i=e,o=t),Number(e.id)===n&&(a=e,s=t)}));const l=[...e];return s>=0&&o>=0&&(Number(i.value)<=Number(t.get(n))&&o<s||Number(t.get(r))<=Number(a.value)&&o>s)&&(l[o]=a,l[s]=i),l}const V=230320245,H=230320281},98919:(e,t,n)=>{\"use strict\";n.d(t,{k:()=>i,r:()=>o});const r={1:\"neteco.pvms.device.meters.type.00\",2:\"neteco.pvms.device.meters.type.01\",3:\"neteco.pvms.device.meters.type.02\",4:\"neteco.pvms.device.meters.type.03\",5:\"neteco.pvms.device.meters.type.04\",6:\"neteco.pvms.echart.meters.type.generatorSet\"};function i(e,t){return t.formatMessage({id:r[e]||\"neteco.pvms.stationInfo.addStation.pleaseSelect\"})}function o(e){return Object.keys(r).includes(e)}},43551:(e,t,n)=>{\"use strict\";n.d(t,{XP:()=>i,sE:()=>o,sT:()=>r});const r=\"NCOEXTHOMEGIS/START_LOADING\",i=\"NCOEXTHOMEGIS/FINISH_LOADING\",o=\"NCOEXTHOMEGIS/FINISH_LOADING_SITES\"},88821:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(43551);const i={loading:!1,commonConfig:null,mapConfigs:null,hasConfigRight:!1,selectedMap:null,site:{chilren:[],parentList:[]}},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.sT:return{...n,loading:!0};case r.XP:return{...n,loading:!1,...t.payload};case r.sE:return{...n,site:t.payload};default:return n}}},34274:(e,t,n)=>{\"use strict\";n.d(t,{T:()=>r,_:()=>i});const r=\"NCOEXTREALTIMEALARMCARD/START_LOADING\",i=\"NCOEXTREALTIMEALARMCARD/FINISH_LOADING\"},48392:(e,t,n)=>{\"use strict\";n.d(t,{$:()=>i,t:()=>r});const r=\"NCOEXTSITESTATUSCARD/START_LOADING\",i=\"NCOEXTSITESTATUSCARD/FINISH_LOADING\"},4926:(e,t,n)=>{\"use strict\";n.d(t,{Mb:()=>r,T_:()=>i,tr:()=>o});const r=\"NCOBIGSCREEN/START_LOADING\",i=\"NCOBIGSCREEN/FINISH_LOADING\",o=\"NCOBIGSCREEN/FINISH_LOADING_SETTNG\"},30878:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>s});var r=n(4926);const i={loading:!0,headerData:{},configModules:{}},o=(e,t,n)=>e.map((e=>e.split(\"#\"))).filter((e=>e[0]===t)).map((e=>({id:e[1],name:e[2],image:e[3],status:n}))),a=e=>{const{companyModules:t,stationModules:n}=e;return{domainModules:{domainArrLeft:o(t,\"L\",\"leftChart\"),domainArrRight:o(t,\"R\",\"rightChart\")},stationModules:{stationArrLeft:o(n,\"L\",\"leftChart\"),stationArrRight:o(n,\"R\",\"rightChart\")}}},s=(e,t)=>{const n=null!=e?e:i,o=JSON.parse(JSON.stringify(n));switch(t.type){case r.Mb:return{...o,loading:!0};case r.T_:return{...o,loading:!1,headerData:t.payload};case r.tr:return{...o,configModules:a(t.payload)};default:return n}}},55349:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOBIGSCREENSETTING/START_LOADING\",i=\"NCOBIGSCREENSETTING/FINISH_LOADING\"},40894:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(55349);const i={loading:!1,amount:0},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,amount:t.payload};default:return n}}},35265:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCODAILYSTATIONRANK/START_LOADING\",i=\"NCODAILYSTATIONRANK/FINISH_LOADING\"},27458:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>s});var r=n(35265),i=n(13528);const o={loading:!1,stationRanks:[]},a=e=>{const t={normal:{position:\"right\"}},n=[];let r=[],o=20;if(e&&e.length){const a=(e=>{let t=0;if(e){for(let n=0;n<e.length;n+=1)e.charCodeAt(n)>255?t+=2:t+=1;return t}return 0})((0,i.af)(e[0].eqPowerHours));r=e.reverse().map((e=>{const{name:r,eqPowerHours:i,dn:o}=e;return n.push(r),{title:r,value:Number(i).toFixed(2),label:t,dn:o}})),o=20+7*(a+9)}return{yAxiasData:n,seriesData:r,rankMaxWidth:o}},s=(e,t)=>{const n=null!=e?e:o;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,stationRanks:a(t.payload)};default:return n}}},97198:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOHOMECONTAINER/START_LOADING\",i=\"NCOHOMECONTAINER/FINISH_LOADING\"},41476:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(97198);const i={loading:!1,amount:0},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,amount:t.payload};default:return n}}},99263:(e,t,n)=>{\"use strict\";n.d(t,{Mb:()=>r,T_:()=>i,US:()=>l,YS:()=>u,c_:()=>o,p5:()=>c,qt:()=>a,sE:()=>s,yO:()=>d});const r=\"NCOHOMEGIS/START_LOADING\",i=\"NCOHOMEGIS/FINISH_LOADING\",o=\"NCOHOMEGIS/SEARCH_FETCHING\",a=\"NCOHOMEGIS/START_LOADING_SITES\",s=\"NCOHOMEGIS/FINISH_LOADING_SITES\",l=\"NCOHOMEGIS/ FINISH_LOADING_COMPANY_SITE-INFO\",c=\"NCOHOMEGIS/ FINISH_LOAD_SCRREN_STATION-LIST\",u=\"NCOHOMEGIS/ FINISH_LOAD_MAP_SITE_LIST\",d=\"NCOHOMEGIS/ FINISH_FILTER_MAP_SITE_LIST\"},13722:(e,t,n)=>{\"use strict\";n.d(t,{HP:()=>o,Mb:()=>r,T_:()=>i});const r=\"NCOHOMEKPI/START_LOADING\",i=\"NCOHOMEKPI/FINISH_LOADING\",o=\"NCOHOMEKPI/CLEAR_POVERTY\"},81286:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOHOMELIST/START_LOADING\",i=\"NCOHOMELIST/FINISH_LOADING\"},20266:(e,t,n)=>{\"use strict\";n.d(t,{Dp:()=>s,Mb:()=>r,T_:()=>i,nF:()=>a,xS:()=>o});const r=\"NCOHOMESITELIST/START_LOADING\",i=\"NCOHOMESITELIST/FINISH_LOADING\",o=\"NCOHOMESITELIST/LOAD_TIMEZONE_LIST\",a=\"NCOHOMESITELIST/START_LOAD_TIMEZONE_LIST\",s=\"NCOHOMESITELIST/STATION_STATUS_NUM\"},54166:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>c});var r=n(4342),i=n(70250),o=n.n(i),a=n(20266);const s={loading:!1,tableData:{list:[],total:0,page:1,pageSize:(0,r.ux)()?20:10},sortCondition:{},searchCondition:{},pageCondition:{},timeZoneList:[],createLoading:!1},l=e=>{const{list:t}=e;return t.forEach(((e,n)=>{t[n].plantScene=e.plantScene?`/rest/pvms/web/station/v1/station/download-logo?stationDn=${e.dn}&t=${Date.now()}`:\"/pvmswebsite/assets/build/images/home/home_plant_scene.png\"})),{list:t,...e}},c=(e,t)=>{const n=null!=e?e:s;switch(t.type){case a.T_:return{...n,loading:!1,tableData:l(o()(t.payload.tableData)),searchCondition:t.payload.searchCondition,pageCondition:t.payload.pageCondition,sortCondition:t.payload.sortCondition};case a.Mb:return{...n,loading:!0};case a.nF:return{...n,createLoading:!0};case a.xS:return{...n,timeZoneList:t.payload.timezones,supportMap:t.payload.supportMap,createLoading:!1};case a.Dp:return{...n,stationStatus:t.payload};default:return n}}},75556:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOOPERATIONSTATISTICS/START_LOADING\",i=\"NCOOPERATIONSTATISTICS/FINISH_LOADING\"},72619:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(75556);const i={loading:!1,opsData:[]},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,opsData:t.payload};default:return n}}},11150:(e,t,n)=>{\"use strict\";n.d(t,{FS:()=>o,Mb:()=>r,T_:()=>i});const r=\"NCOPLANTDETAIL/START_LOADING\",i=\"NCOPLANTDETAIL/FINISH_LOADING\",o=\"NCOPLANTDETAIL/FINISH_LOADING_DETAIL\"},36685:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>l});var r=n(11150),i=n(13528);const o={loading:!0,isWeather:!1,weather:[],detail:{},errCode:\"\"},a=e=>{const t=e&&e.length||!1;let n={},r=[];return t&&([n,...r]=e),{isWeather:t,currentWeather:n,otherDayWeather:r}},s=e=>{for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&((!e[t]&&0!==e[t]||\"null\"===e[t])&&(e[t]=\"\"),\"installedCapacity\"===t)){const{value:n,unit:r}=e[t]?{value:(0,i.af)(e[t]),unit:e.installedCapacityUnit}:{value:\"--\",unit:\"kWp\"};e[t]=`${n} ${r}`}return e},l=(e,t)=>{const n=null!=e?e:o;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,isWeather:a(t.payload.weather).isWeather,currentWeather:a(t.payload.weather).currentWeather,otherDayWeather:a(t.payload.weather).otherDayWeather,errCode:t.payload.errCode};case r.FS:return{...n,loading:!1,detail:s(t.payload)};default:return n}}},89550:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOPLANTRANK/START_LOADING\",i=\"NCOPLANTRANK/FINISH_LOADING\"},78516:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>s});var r=n(70250),i=n.n(r),o=n(89550);const a={loading:!1,plantRank:[]},s=(e,t)=>{const n=null!=e?e:a;switch(t.type){case o.M:return{...n,loading:!0};case o.T:return{...n,loading:!1,plantRank:i()(t.payload)};default:return n}}},20982:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOPOVERTYCOMPLETION/START_LOADING\",i=\"NCOPOVERTYCOMPLETION/FINISH_LOADING\"},39143:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(20982);const i={loading:!1,completedUser:0,uncompletedUser:0,comeplteRate:0},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,completedUser:t.payload.comepleteCount,uncompletedUser:t.payload.uncomepleteCount,comeplteRate:t.payload.comeplteRate,household:t.payload.count,town:t.payload.town,village:t.payload.village};default:return n}}},57639:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOPOVERTYCOMPLETIONSTATUS/START_LOADING\",i=\"NCOPOVERTYCOMPLETIONSTATUS/FINISH_LOADING\"},24930:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(57639);const i={loading:!1,povertyData:{uncomepleteCount:0,comeplteRate:0,comepleteCount:0,count:0}},o=(e,t)=>{const n=null!=e?e:i,o=JSON.parse(JSON.stringify(n));switch(t.type){case r.M:return{...o,loading:!0};case r.T:return{...o,loading:!1,povertyData:t.payload};default:return o}}},73028:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOREALTIMEPOWER/START_LOADING\",i=\"NCOREALTIMEPOWER/FINISH_LOADING\"},19271:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(73028);const i={loading:!1,realtimePowerData:{xAxis:[],activePower:[],currentPower:\"--\"}},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,realtimePowerData:{...n.realtimePowerData,...t.payload}};default:return n}}},98150:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOREALTIMEALARMCARD/START_LOADING\",i=\"NCOREALTIMEALARMCARD/FINISH_LOADING\"},48011:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(98150);const i={loading:!1,majorAlarms:0,minorAlarms:0,warningAlarms:0,criticalAlarms:0,majorAlarmThreshold:0,minorAlarmThreshold:0,warningAlarmThreshold:0,criticalAlarmThreshold:0,totalAlarms:0},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,majorAlarms:t.payload.majorAlarms,minorAlarms:t.payload.minorAlarms,warningAlarms:t.payload.warningAlarms,criticalAlarms:t.payload.criticalAlarms,majorAlarmThreshold:t.payload.majorAlarmThreshold,minorAlarmThreshold:t.payload.minorAlarmThreshold,warningAlarmThreshold:t.payload.warningAlarmThreshold,criticalAlarmThreshold:t.payload.criticalAlarmThreshold,totalAlarms:t.payload.totalAlarms};default:return n}}},88715:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSCREENALARM/START_LOADING\",i=\"NCOSCREENALARM/FINISH_LOADING\"},22254:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(88715);const i={loading:!1,alarmData:{CRITICAL:0,MAJOR:0,MINOR:0,WARNING:0,ALL:0}},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,alarmData:t.payload};default:return n}}},98870:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSCREENBOTTOM/START_LOADING\",i=\"NCOSCREENBOTTOM/FINISH_LOADING\"},93037:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o}),n(70250);var r=n(98870);const i={loading:!1,bottomData:[]},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,bottomData:t.payload};default:return n}}},85417:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSCREENIRRADIATION/START_LOADING\",i=\"NCOSCREENIRRADIATION/FINISH_LOADING\"},55909:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(99073),i=n(85417);const o={loading:!1,powerIrradiationData:{xAxis:[],power:[],irradiation:[],currentPower:r.Nw}},a=(e,t)=>{const n=null!=e?e:o;switch(t.type){case i.M:return{...n,loading:!0};case i.T:return{...n,loading:!1,powerIrradiationData:t.payload};default:return n}}},80439:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSCREENMONTHINCOME/START_LOADING\",i=\"NCOSCREENMONTHINCOME/FINISH_LOADING\"},74049:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(80439);const i={loading:!1,monthIncomeChartData:{xAxis:[],yAxis:[],y2Axis:[]},dailyIncome:\"-\"},o=e=>{if(Object.keys(e).length){const{xAxis:t,y2Axis:n}=e,r=(new Date).getDate(),i=r<10?`0${r}`:`${r}`;return n[t.indexOf(i)]}return\"-\"},a=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,monthIncomeChartData:t.payload.data,dailyIncome:o(t.payload.data)};default:return n}}},92510:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSCREENMONTHPOWER/START_LOADING\",i=\"NCOSCREENMONTHPOWER/FINISH_LOADING\"},71731:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(92510);const i={loading:!1,monthPowerChartData:{xAxis:[],yAxis:[]},dailyEnergy:0},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,monthPowerChartData:t.payload.data,dailyEnergy:t.payload.dailyEnergy};default:return n}}},3724:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSCREENPLANTPLANING/START_LOADING\",i=\"NCOSCREENPLANTPLANING/FINISH_LOADING\"},32361:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(3724);const i={loading:!1,screenPlantPlan:{planningPlant:0,buildingPlant:0,gridConnectionPlant:0,totalPlant:0,planningPlantCapacity:0,buildingPlantCapacity:0,gridConnectionPlantCapacity:0,totalPlantCapacity:0}},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.T:return{...n,loading:!1,screenPlantPlan:t.payload};case r.M:return{...n,loading:!0};default:return n}}},87591:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSCREENPOVERTYOVERVIEW/START_LOADING\",i=\"NCOSCREENPOVERTYOVERVIEW/FINISH_LOADING\"},5450:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(87591);const i={loading:!1,povertyOverviewData:{town:0,count:0,village:0}},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,povertyOverviewData:t.payload};default:return n}}},68431:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSCREENPROFITANDPRODUCT/START_LOADING\",i=\"NCOSCREENPROFITANDPRODUCT/FINISH_LOADING\"},69050:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>s});var r=n(68431),i=n(4905);const o={loading:!1,data:{xAxis:[],yAxis:[]},dailyPower:{value:\"-\",unit:\"kWh\",titlePower:\"- KWh\"}},a=e=>{const t=\"zh-cn\"===window.neteco.i18n.getLocale()?\"度\":\"kWh\";if(Object.keys(e).length){const{yAxis:n,xAxis:r}=e,o=(new Date).getDate(),a=o<10?`0${o}`:`${o}`,s=r.indexOf(a),l=n[0][s],c=`${Number(l).toFixed(2)} ${t}`;return l&&\"-\"!==l?{value:(0,i.s1)(l).value,unit:(0,i.s1)(l).unit,titlePower:c}:{value:\"-\",unit:t,titlePower:`- ${t}`}}return{value:\"-\",unit:t,titlePower:`-- ${t}`}},s=(e,t)=>{const n=null!=e?e:o;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,data:t.payload.data,dailyPower:a(t.payload.data)};default:return n}}},75019:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSCREENSYSEFFICIENCY/START_LOADING\",i=\"NCOSCREENSYSEFFICIENCY/FINISH_LOADING\"},60108:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(99073),i=n(75019);const o={loading:!1,sysEfficiencyChart:{xAxis:[],efficiencyList:[],currentEfficiency:r.Nw}},a=(e,t)=>{const n=null!=e?e:o;switch(t.type){case i.M:return{...n,loading:!0};case i.T:return{...n,loading:!1,sysEfficiencyChart:t.payload};default:return n}}},33308:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSITEKPICARD/START_LOADING\",i=\"NCOSITEKPICARD/FINISH_LOADING\"},2576:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>f});var r=n(33308),i=n(64218),o=n(99073),a=n(13528),s=n(4905);const l=e=>{const{cumulativeEnergy:t,dailyEnergy:n,dailyIncome:r,currentPower:i,batteryCapacity:o,inverterPower:a,dailyChargeCapacity:l,dailyDisChargeCapacity:p,cumulativeChargeCapacity:f,cumulativeDisChargeCapacity:h,unit:m}=e,g=(0,s.JI)(r,m);return{currentCapacity:d(i),dailyPowerGeneration:u(n),dailyIncome:c(g,r,m),totalPowerGeneration:u(t),totalInverterPower:d(a),totalBatteryCapacity:u(o),dailyBatteryCharge:u(l),dailyBatteryDischarge:u(p),totalBatteryCharge:u(f),totalBatteryDischarge:u(h)}};function c(e,t,n){const r=`${t?(0,a.af)(Number(t).toFixed(2)):\"--\"} ${n}`;return{value:e.value,unit:e.unit,titlePower:r}}function u(e){const t=function(){switch(window.neteco.i18n.getLocale()){case\"zh-cn\":return\"度\";case\"uk-ua\":return\"кВт⋅г\";default:return\"kWh\"}}(),n=`${(0,a.af)(Number(e).toFixed(2))} ${t}`;return e||0===e?{value:(0,s.s1)(e).value,unit:(0,s.s1)(e).unit,titlePower:n}:{value:\"--\",unit:(0,i._v)(o.Gw),titlePower:`-- ${t}`}}function d(e){const t=`${(0,a.af)(Number(e).toFixed(2))} ${\"uk-ua\"===window.neteco.i18n.getLocale()?\"кВт\":\"kW\"}`;return e||0===e?{value:(0,s.js)(e).value,unit:(0,s.js)(e).unit,titlePower:t}:{value:\"--\",unit:\"kW\",titlePower:\"-- \"+(\"uk-ua\"===window.neteco.i18n.getLocale()?\"кВт\":\"kW\")}}const p={loading:!1,kpiData:{currentCapacity:0,dailyPowerGeneration:0,dailyIncome:0,totalPowerGeneration:0,totalInverterPower:0,totalBatteryCapacity:0,dailyBatteryCharge:0,dailyBatteryDischarge:0,totalBatteryCharge:0,totalBatteryDischarge:0}},f=(e,t)=>{const n=null!=e?e:p;switch(t.type){case r.T:return{...n,loading:!1,kpiData:l(t.payload.data)};case r.M:return{...n,loading:!0};default:return n}}},71155:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSITESTATUSCARD/START_LOADING\",i=\"NCOSITESTATUSCARD/FINISH_LOADING\"},28221:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(71155);const i={loading:!1,totalSites:0,normalSites:0,abnormalSites:0,disconnectedSites:0},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,totalSites:t.payload.totalSites,normalSites:t.payload.normalSites,abnormalSites:t.payload.abnormalSites,disconnectedSites:t.payload.disconnectedSites};default:return n}}},63934:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOSOCIALCONTRIBUTION/START_LOADING\",i=\"NCOSOCIALCONTRIBUTION/FINISH_LOADING\"},97764:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>s});var r=n(63934),i=n(4905);const o={loading:!1,socialData:{co2ReductionByYear:0,equivalentTreePlantingByYear:0,standardCoalSavings:0,equivalentTreePlanting:0,co2Reduction:0,standardCoalSavingsByYear:0,co2ReductionUnit:\"kg\",coalSavingsUnit:\"kg\"}},a=(e,t)=>{const{co2ReductionByYear:n,standardCoalSavingsByYear:r,equivalentTreePlantingByYear:o,standardCoalSavings:a,equivalentTreePlanting:s,co2Reduction:l}=e,c=(0,i._5)(Math.max(n,l),t),u=(0,i._5)(Math.max(r,a),t),{multiple:d,unit:p}=c,{multiple:f,unit:h}=u;return{co2ReductionByYear:(0,i.A5)(n,1),standardCoalSavingsByYear:(0,i.A5)(r,1),equivalentTreePlantingByYear:(0,i.A5)(o,0),standardCoalSavings:(0,i.A5)(a,1),co2Reduction:(0,i.A5)(l,1),co2ReductionUnit:p,coalSavingsUnit:h,equivalentTreePlanting:(0,i.A5)(s,0)}},s=(e,t)=>{const n=null!=e?e:o;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,socialData:t.payload&&a(t.payload,t.intl)};default:return n}}},56289:(e,t,n)=>{\"use strict\";n.d(t,{$M:()=>o,$p:()=>a,Ey:()=>r,Gh:()=>c,Ql:()=>s,Sv:()=>i,t$:()=>l});const r=\"site\",i=\"device_inverter\",o=\"device_energy\",a=23010,s=8,l=\"1\",c=\"38\"},15657:(e,t,n)=>{\"use strict\";n.d(t,{W:()=>o,Y:()=>a});var r=n(37216),i=n(8281);async function o(){let e;return e=await(0,i.T)(),e}async function a(e,t,n,i,o){await o.makeV