h:\"/view/device/:deviceDn/submatrix/device-manage\",component:He},deviceSubmatrixAlarm:{path:\"/view/device/:deviceDn/submatrix/alarm\",component:Za.Z},deviceSubmatrixConfig:{path:\"/view/device/:deviceDn/submatrix/config\",component:Nl.Z},deviceHemsHistory:{path:\"/view/device/:deviceDn/submatrix/history\",component:Il.Z},devStorageSubsystem:{path:\"/view/device/:deviceDn/storageSubsystem\",component:Gd},devStorageSubOverview:{path:\"/view/device/:deviceDn/storageSubsystem/overview\"},devStorageSubDetails:{path:\"/view/device/:deviceDn/storageSubsystem/details\",component:Yd},devStorageSubAlarm:{path:\"/view/device/:deviceDn/storageSubsystem/alarm\",component:Za.Z},devStorageSubConfig:{path:\"/view/device/:deviceDn/storageSubsystem/config\",component:Nl.Z},deviceOptimizer:{path:\"/view/device/:deviceDn/optimizer\",component:Ud},deviceOptimizerDetails:{path:\"/view/device/:deviceDn/optimizer/details\",component:Pc},deviceOptimizerAlarm:{path:\"/view/device/:deviceDn/optimizer/alarm\",component:Za.Z},deviceOptimizerHistory:{path:\"/view/device/:deviceDn/optimizer/history\",component:Il.Z},devAirConditioner:{path:\"/view/device/:deviceDn/airConditioner\",component:qd},devAirConditionerDetails:{path:\"/view/device/:deviceDn/airConditioner/details\",component:Dc},devAirConditionerAlarm:{path:\"/view/device/:deviceDn/airConditioner/alarm\",component:Za.Z},devAirConditionerConfig:{path:\"/view/device/:deviceDn/airConditioner/config\",component:Nl.Z},devESC:{path:\"/view/device/:deviceDn/dcdc\",component:Qd},devESCDetails:{path:\"/view/device/:deviceDn/dcdc/details\",component:Ic},devESCAlarm:{path:\"/view/device/:deviceDn/dcdc/alarm\",component:Za.Z},devESCHistory:{path:\"/view/device/:deviceDn/dcdc/history\",component:Il.Z},devESCConfig:{path:\"/view/device/:deviceDn/dcdc/config\",component:Nl.Z},devBattery:{path:\"/view/device/:deviceDn/battery\",component:Xd},devBatteryDetails:{path:\"/view/device/:deviceDn/battery/details\",component:mc.Z},devBatteryAlarm:{path:\"/view/device/:deviceDn/battery/alarm\",component:Za.Z},devBatteryHistory:{path:\"/view/device/:deviceDn/battery/history\",component:Il.Z},devBatteryConfig:{path:\"/view/device/:deviceDn/battery/config\",component:Nl.Z},devMeter:{path:\"/view/device/:deviceDn/meter\",component:Jd},devMeterDetails:{path:\"/view/device/:deviceDn/meter/details\",component:Nc},devMeterAlarm:{path:\"/view/device/:deviceDn/meter/alarm\",component:Za.Z},devMeterHistory:{path:\"/view/device/:deviceDn/meter/history\",component:Il.Z},deviceBatteryCluster:{path:\"/view/device/:deviceDn/batteryCluster\",component:Wd},deviceBatteryClusterOverview:{path:\"/view/device/:deviceDn/batteryCluster/overview\"},deviceBatteryClusterConfig:{path:\"/view/device/:deviceDn/batteryCluster/config\",component:Nl.Z},deviceBatteryClusterDetails:{path:\"/view/device/:deviceDn/batteryCluster/details\",component:Kd},deviceBatteryClusterAlarm:{path:\"/view/device/:deviceDn/batteryCluster/alarm\",component:Za.Z},deviceBatteryClusterHistory:{path:\"/view/device/:deviceDn/batteryCluster/history\",component:Il.Z},deviceDongle:{path:\"/view/device/:deviceDn/dongle\",component:$d},deviceDongleDetails:{path:\"/view/device/:deviceDn/dongle/details\",component:mc.Z},deviceDongleDevManage:{path:\"/view/device/:deviceDn/dongle/device-manage\",component:He},deviceDongleAlarm:{path:\"/view/device/:deviceDn/dongle/alarm\",component:Za.Z},deviceDongleHistory:{path:\"/view/device/:deviceDn/dongle/history\",component:Il.Z},deviceDongleConfig:{path:\"/view/device/:deviceDn/dongle/config\",component:Nl.Z},deviceNCU:{path:\"/view/device/:deviceDn/ncu\",component:ep},deviceNCUDetail:{path:\"/view/device/:deviceDn/ncu/details\",component:e=>{let{props:t}=e;const{intl:n,selectedTreeNode:r}=t,[i,o]=(0,l.useState)({});(0,ic.G)([Lc,Rc],{pageName:kc,deviceType:String(null==t?void 0:t.selectedTreeNode.mocId)}),(0,l.useEffect)((()=>{var e;(e={dn:r.elementDn},(0,O.U2)(\"/rest/pvms/web/ncu/v1/ncuinfo\",e)).then((e=>{o(e.data)}))}),[]);const a=new Map([[10029,{0:\"lost\",1:\"online\"}],[10031,{0:\"lost\",1:\"online\"}],[10030,{0:\"lost\",1:\"online\"}],[10033,{0:\"online\",1:\"lost\"}],[10032,{0:\"lost\",1:\"online\"}],[10035,{0:\"online\",1:\"lost\"}],[10034,{0:\"online\",1:\"lost\"}],[10026,{0:\"lost\",1:\"online\"}],[10025,{0:\"lost\",1:\"online\"}],[10036,{0:\"lost\",1:\"online\"}],[10028,{0:\"lost\",1:\"online\"}],[10027,{0:\"lost\",1:\"online\"}]]),s=new Map([[10040,{0:\"online\",1:\"lost\"}],[10051,{0:\"online\",1:\"lost\"}],[10050,{0:\"online\",1:\"lost\"}],[10042,{0:\"online\",1:\"lost\"}],[10053,{0:\"online\",1:\"lost\"}],[10041,{0:\"online\",1:\"lost\"}],[10052,{0:\"online\",1:\"lost\"}],[10044,{0:\"online\",1:\"lost\"}],[10055,{0:\"online\",1:\"lost\"}],[10043,{0:\"online\",1:\"lost\"}],[10054,{0:\"online\",1:\"lost\"}],[10046,{0:\"online\",1:\"lost\"}],[10045,{0:\"online\",1:\"lost\"}],[10056,{0:\"online\",1:\"lost\"}],[10037,{0:\"online\",1:\"lost\"}],[10048,{0:\"online\",1:\"lost\"}],[10047,{0:\"online\",1:\"lost\"}],[10039,{0:\"online\",1:\"lost\"}],[10038,{0:\"online\",1:\"lost\"}],[10049,{0:\"online\",1:\"lost\"}]]),c=(e,t,n)=>{let r=\"online\";return r=\"connState\"===n?a.get(t)[e]:s.get(t)[e],r};return(0,D.jsx)(\"div\",{className:\"nco-monitor-ncu-overview tab-content\",children:(0,D.jsx)(\"div\",{className:\"left-content\",children:(0,D.jsxs)(\"div\",{className:\"realtime-info-wrapper\",children:[(0,D.jsx)(\"div\",{className:\"realtime-header\",children:(0,D.jsxs)(\"div\",{className:\"icon-example\",children:[(0,D.jsx)(jc,{status:\"online\",text:n.formatMessage({id:\"common.message.status.normal\"}),className:\"m_r_20\"}),(0,D.jsx)(jc,{status:\"lost\",text:n.formatMessage({id:\"neteco.pvms.inspect.inspectReport.reportResult.2\"}),className:\"m_r_20\"})]})}),(0,D.jsxs)(\"div\",{className:\"realtime-body\",children:[(0,D.jsxs)(\"div\",{className:\"status-box noborder\",children:[(0,D.jsx)(\"h2\",{className:\"title m_t_20\",children:n.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.pvStatus\"})}),(0,D.jsx)(\"div\",{className:\"clearFloat\",style:{width:\"100%\"},children:i.connStateSignalList&&i.connStateSignalList.map(((e,t)=>(0,D.jsx)(\"div\",{className:\"statusInfoItem\",children:(0,D.jsx)(jc,{status:c(e.value,e.stdId,\"connState\"),text:e.signalName,className:\"m_t_20 w_100\"})},t)))})]}),(0,D.jsxs)(\"div\",{className:\"status-box m_t_40\",children:[(0,D.jsx)(\"h2\",{className:\"title m_t_20\",children:n.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.alarmInfo.name\"})}),(0,D.jsx)(\"div\",{className:\"clearFloat\",style:{width:\"100%\"},children:i.alarmSignalList&&i.alarmSignalList.map(((e,t)=>(0,D.jsx)(\"div\",{className:\"statusInfoItem\",children:(0,D.jsx)(jc,{status:c(e.value,e.stdId,\"alarm\"),text:e.signalName,className:\"m_t_20 w_100\"})},t)))})]}),(0,D.jsxs)(\"div\",{className:\"status-box m_t_40\",children:[(0,D.jsx)(\"h2\",{className:\"title m_t_20\",children:n.formatMessage({id:\"neteco.pvms.devEport.basicInfo\"})}),(0,D.jsx)(\"div\",{className:\"nco-realtime-content-part-wrapper\",children:(0,D.jsx)(de.Z,{children:(()=>{if(!i.basicSignalList)return;let e=[];const t=3-i.basicSignalList.length%3;return t>0&&t<3&&(e=new Array(t).fill(0).map((()=>({useEmpty:!0,span:8})))),[...(r=i.basicSignalList,r.map((e=>({value:e.desc?e.desc:e.value,title:e.signalName,span:8})))),...e].map(((e,t)=>(0,rc.kG)(e,t,{useDefaultStyle:!0,isBasicInfo:!0,intl:n})));var r})()})})]})]})]})})})}},deviceTcuDetail:{path:\"/view/device/:deviceDn/ncu/tcuDetails\",component:Uc},deviceSTS:{path:\"/view/device/:deviceDn/sts\",component:tp},deviceSTSOverview:{path:\"/view/device/:deviceDn/sts/overview\",component:bu},deviceSTSDetail:{path:\"/view/device/:deviceDn/sts/details\",component:Vu},deviceSTSAlarm:{path:\"/view/device/:deviceDn/sts/alarm\",component:Za.Z},deviceSTSConfig:{path:\"/view/device/:deviceDn/sts/config\",component:Nl.Z},deviceSTSHistory:{path:\"/view/device/:deviceDn/sts/history\",component:Il.Z},deviceTCUE:{path:\"/view/device/:deviceDn/tcue\",component:np},deviceTCUEDetail:{path:\"/view/device/:deviceDn/tcue/details\",component:Xu},deviceTCUEAlarm:{path:\"/view/device/:deviceDn/tcue/alarm\",component:Za.Z},deviceTCUEConfig:{path:\"/view/device/:deviceDn/tcue/config\",component:Nl.Z},deviceTCUEHistory:{path:\"/view/device/:deviceDn/sts/history\",component:Il.Z},deviceMPPT:{path:\"/view/device/:deviceDn/mppt\",component:rp},deviceMPPTDetail:{path:\"/view/device/:deviceDn/mppt/details\",component:ud},deviceMPPTAlarm:{path:\"/view/device/:deviceDn/mppt/alarm\",component:Za.Z},deviceMPPTConfig:{path:\"/view/device/:deviceDn/mppt/config\",component:Nl.Z},deviceMPPTHistory:{path:\"/view/device/:deviceDn/mppt/history\",component:Il.Z},deviceSts3rd:{path:\"/view/device/:deviceDn/sts3rd\",component:ip},deviceSts3rdDetail:{path:\"/view/device/:deviceDn/sts3rd/details\",component:mc.Z},deviceSts3rdAlarm:{path:\"/view/device/:deviceDn/sts3rd/alarm\",component:Za.Z},deviceSts3rdConfig:{path:\"/view/device/:deviceDn/sts3rd/config\",component:Nl.Z},deviceCharge:{path:\"/view/device/:deviceDn/charge\",component:op},deviceChargeDetail:{path:\"/view/device/:deviceDn/charge/details\",component:dd.Z},deviceChargeAlarm:{path:\"/view/device/:deviceDn/charge/alarm\",component:Za.Z},deviceChargeHistory:{path:\"/view/device/:deviceDn/charge/history\",component:Il.Z},deviceAcAndDcCharge:{path:\"/view/device/:deviceDn/AcAndDcCharge\",component:up},deviceAcAndDcChargeDetail:{path:\"/view/device/:deviceDn/AcAndDcCharge/detail\",component:Id},deviceAcAndDcChargeHistory:{path:\"/view/device/:deviceDn/AcAndDcCharge/history\",component:Il.Z},devicePowerCube:{path:\"/view/device/:deviceDn\",component:ap},deviceBackupBoxContainer:{path:\"/view/device/:deviceDn/backupBox\",component:sp},deviceBackupBoxAlarm:{path:\"/view/device/:deviceDn/backupBox/alarm\",component:Za.Z},deviceBackupBoxDetail:{path:\"/view/device/:deviceDn/backupBox/details\",component:pd},deviceBackupBoxHistory:{path:\"/view/device/:deviceDn/backupBox/history\",component:Il.Z},deviceGenerator:{path:\"/view/device/:deviceDn/generator\",component:lp},deviceGeneratorAlarm:{path:\"/view/device/:deviceDn/generator/alarm\",component:Za.Z},deviceGeneratorDetail:{path:\"/view/device/:deviceDn/generator/details\",component:mc.Z},deviceGeneratorHistory:{path:\"/view/device/:deviceDn/generator/history\",component:Il.Z},deviceGeneratorConfig:{path:\"/view/device/:deviceDn/generator/config\",component:Nl.Z},deviceGeneratorSet:{path:\"/view/device/:deviceDn/GeneratorSet\",component:cp},deviceGeneratorSetDetail:{path:\"/view/device/:deviceDn/generatorSet/details\",component:mc.Z},deviceGeneratorSetHistory:{path:\"/view/device/:deviceDn/generatorSet/history\",component:Il.Z}};function pp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!e)return\"\";let i=0;return e.replace(/:(\\w|\\?)+/g,(()=>{let e=n[i];return e&&(e=e.replace(/\\//,(e=>encodeURIComponent(e)))),i+=1,e||\"\"}))}},96299:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>r});const r=new class{constructor(e){this.intl=null,this.intl=e,this.translate=this.translate.bind(this)}updateIntlInstance(e){if(!e)throw new Error(\"i18n should be initialized with valid i18n instance.\");this.intl=e}translate(e,t){return this.intl.formatMessage({id:e},t)}}},10444:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOCONFIGURATIONABOUTINFORMATION/START_LOADING\",i=\"NCOCONFIGURATIONABOUTINFORMATION/FINISH_LOADING\"},73468:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(10444);const i={loading:!1,sortCondition:{},searchCondition:{},pageCondition:{},tableData:{languages:[],list:[],total:0,page:1,pageSize:10,maxSort:0}},o=e=>{let{bodyList:t=[],headList:n=[],...r}=e;return{...r,languages:n,list:t}},a=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,...t.payload,tableData:o(t.payload.tableData)};default:return n}}},72997:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOCONFIGURATIONBUYONLINEVIEW/START_LOADING\",i=\"NCOCONFIGURATIONBUYONLINEVIEW/FINISH_LOADING\"},72035:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(72997);const i={loading:!1,settingData:new Map},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,settingData:t.payload};default:return n}}},55309:(e,t,n)=>{\"use strict\";n.d(t,{B7:()=>o,Mb:()=>r,Md:()=>l,T_:()=>i,df:()=>s,pV:()=>a});const r=\"NCOAPPVERSIONMANAGEMENT/START_LOADING\",i=\"NCOAPPVERSIONMANAGEMENT/FINISH_LOADING\",o=\"NCOAPPVERSIONMANAGEMENT/UPADATE_CONDITION\",a=\"NCOAPPVERSIONMANAGEMENT/RESET_SELECTED_ROWS\",s=\"NCOAPPVERSIONMANAGEMENT/UPLOADING_STATUS\",l=\"NCOAPPVERSIONMANAGEMENT/SET_UPLOAD_PERCENT\"},36741:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(55309);const i={loading:!1,sortCondition:{},searchCondition:{},tableData:{list:[],total:0,page:1,pageSize:10},resetSelectedRows:1,uploadingStatus:!1,uploadingPercent:0},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,tableData:t.payload};case r.B7:return{...n,searchCondition:t.payload};case r.pV:return{...n,resetSelectedRows:t.payload};case r.df:return{...n,uploadingStatus:t.payload};case r.Md:return{...n,uploadingPercent:t.payload};default:return n}}},4772:(e,t,n)=>{\"use strict\";n.d(t,{Mb:()=>r,Pc:()=>a,T_:()=>i,ne:()=>o,pV:()=>s});const r=\"NCOCOMMUNICATPOINT/START_LOADING\",i=\"NCOCOMMUNICATPOINT/FINISH_LOADING\",o=\"NCOCOMMUNICATPOINT/QUERY_CONDITION_SET\",a=\"NCOCOMMUNICATPOINT/SELECTED_ROWS_SET\",s=\"NCOCOMMUNICATPOINT/RESET_SELECTED_ROWS\"},34196:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(4772);const i={loading:!1,queryCondition:{},tableData:{list:[],total:0,page:1,pageSize:10},selectedRows:[],resetSelectedRows:1},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,tableData:t.payload};case r.ne:return{...n,queryCondition:t.payload};case r.Pc:return{...n,selectedRows:t.payload};case r.pV:return{...n,resetSelectedRows:t.payload};default:return n}}},43569:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCODEMOACCOUNTSETTING/START_LOADING\",i=\"NCODEMOACCOUNTSETTING/FINISH_LOADING\"},91697:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(43569);const i={loading:!1,accountData:{enable:!1,onlineLimit:\"1\",userId:null}},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,accountData:t.payload};default:return n}}},36488:(e,t,n)=>{\"use strict\";n.d(t,{Mb:()=>r,Pc:()=>o,T_:()=>i,g2:()=>a});const r=\"NCOLICENSEAPPLY/START_LOADING\",i=\"NCOLICENSEAPPLY/FINISH_LOADING\",o=\"NCOLICENSEAPPLY/SELECTED_ROWS_SET\",a=\"NCOLICENSEAPPLY/SAVE_TIME_ZONE\"},19709:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(36488);const i={loading:!1,sortCondition:{},tableData:{list:[],total:0,page:1,pageSize:10},selectedRows:[],timeZone:8},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,tableData:t.payload};case r.g2:return{...n,timeZone:t.payload};case r.Pc:return{...n,selectedRows:t.payload};default:return n}}},55612:(e,t,n)=>{\"use strict\";n.d(t,{Mb:()=>r,Pc:()=>a,Qm:()=>o,T_:()=>i,g2:()=>s});const r=\"NCOLICENSEINFO/START_LOADING\",i=\"NCOLICENSEINFO/FINISH_LOADING\",o=\"NCOLICENSEINFO/SET_INIT_COLUMNS\",a=\"NCOLICENSEINFO/SELECTED_ROWS_SET\",s=\"NCOLICENSEINFO/SAVE_TIME_ZONE\"},66181:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(55612),i=n(70079);const o={loading:!1,sortCondition:{},tableData:{list:[],total:0,page:1,pageSize:10},initColumns:[],selectedRows:[],timeZone:8},a=(e,t)=>{const n=null!=e?e:o;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,tableData:(0,i.Z)(t.payload)};case r.Qm:return{...n,initColumns:t.payload};case r.Pc:return{...n,selectedRows:t.payload};case r.g2:return{...n,timeZone:t.payload};default:return n}}},10760:(e,t,n)=>{\"use strict\";n.d(t,{Mb:()=>r,Pc:()=>o,T_:()=>i,fz:()=>a});const r=\"NCOLICENSELOAD/START_LOADING\",i=\"NCOLICENSELOAD/FINISH_LOADING\",o=\"NCOLICENSELOAD/SELECTED_ROWS_SET\",a=\"NCOLICENSELOAD/SAVE_SEARCH_CONDITION\"},39347:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(10760),i=n(70079);const o={loading:!1,sortCondition:{},searchCondition:{},tableData:{list:[],total:0,page:1,pageSize:10,loadStstusList:{loading:0,loadingFailed:0,loadingSucceeded:0,toBeLoaded:0,noFileToLoad:0}},selectedRows:[]},a=(e,t)=>{const n=null!=e?e:o;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,tableData:(0,i.Z)(t.payload)};case r.Pc:return{...n,selectedRows:t.payload};case r.fz:return{...n,searchCondition:t.payload};default:return n}}},32320:(e,t,n)=>{\"use strict\";n.d(t,{Mb:()=>r,Pc:()=>o,Qm:()=>a,T_:()=>i,c2:()=>c,fz:()=>l,g2:()=>s});const r=\"NCOLICENSELOGOUT/START_LOADING\",i=\"NCOLICENSELOGOUT/FINISH_LOADING\",o=\"NCOLICENSELOGOUT/SELECTED_ROWS_SET\",a=\"NCOLICENSELOGOUT/SET_INIT_COLUMNS\",s=\"NCOLICENSELOGOUT/SAVE_TIME_ZONE\",l=\"NCOLICENSELOGOUT/SAVE_SEARCH_CONDITION\",c=\"NCOLICENSELOGOUT/SAVE_PASSWORD_ERROR_TIME\"},72046:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(32320),i=n(70079);const o={loading:!1,sortCondition:{},searchCondition:{},tableData:{list:[],total:0,page:1,pageSize:10},selectedRows:[],timeZone:8,passwordErrorTime:0},a=(e,t)=>{const n=null!=e?e:o;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,tableData:(0,i.Z)(t.payload)};case r.Pc:return{...n,selectedRows:t.payload};case r.Qm:return{...n,initColumns:t.payload};case r.g2:return{...n,timeZone:t.payload};case r.fz:return{...n,searchCondition:t.payload};case r.c2:return{...n,passwordErrorTime:t.payload};default:return n}}},70079:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>s});var r=n(99073),i=n(37920),o=n.n(i);const a=e=>e?o()(e).format(\"YYYY-MM-DD HH:mm:ss\"):r.lH,s=e=>{let{list:t,...n}=e;return{...n,list:t.map((e=>{let{deadlineTime:t,loadTime:n,logoutTime:r,uploadTime:i,...o}=e;return{...o,loadTime:a(1e3*n),uploadTime:a(i),logoutTime:a(1e3*r),deadlineTime:a(1e3*t)}}))}}},35617:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCODOCUMENTMANAGEMENT/START_LOADING\",i=\"NCODOCUMENTMANAGEMENT/FINISH_LOADING\"},37800:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(35617);const i={loading:!1,amount:0},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,amount:t.payload};default:return n}}},94731:(e,t,n)=>{\"use strict\";n.d(t,{BY:()=>o,Cs:()=>l,Mb:()=>r,RO:()=>c,T_:()=>i,a5:()=>u,dp:()=>s,e0:()=>a});const r=\"NCOENTERPRISEINFO/START_LOADING\",i=\"NCOENTERPRISEINFO/FINISH_LOADING\",o=\"NCOENTERPRISEINFO/START_NORTH_RIGHT\",a=\"NCOENTERPRISEINFO/FINISH_NORTH_RIGHT\",s=\"NCOENTERPRISEINFO/FINISH_BIG_SCREEN_SERVICE_STATUS\",l=\"NCOENTERPRISEINFO/UPDATE_BIG_SCREEN_SERVICE_STATUS\",c=\"NCOENTERPRISEINFO/START_ENTIRE_COUNTY_CLOUD\",u=\"NCOENTERPRISEINFO/FINISH_ENTIRE_COUNTY_CLOUD\"},48719:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>h});var r=n(19988),i=n(88391),o=n(88927),a=n(67356),s=n(95059),l=n(23712);const{neteco:c}=window,{operationSuccess:u,operationInfo:d,operationError:p}=s.Z;class f extends i.Component{constructor(e){super(e),this.clearImage=()=>{this.setState({fileId:void 0})},this.stopLoading=()=>{this.setState({loading:!1})},this.startLoading=()=>{this.setState({loading:!0})},this.validateImage=e=>{this.startLoading();const{intl:t}=this.props;return function(e){return\"image/jpeg\"===e.type||\"image/png\"===e.type||\"image/bmp\"===e.type||\"image/jpg\"===e.type}(e)?!!function(e){return e.size/1024<200}(e)||(d(t,t.formatMessage({id:\"common.message.file.sizeLimitation\"},{fileSize:\"200kb\"})),this.stopLoading(),!1):(d(t,t.formatMessage({id:\"common.message.file.typeMismatch\"})),this.stopLoading(),!1)},this.handleUploadError=e=>{const{intl:t}=this.props;d(t,t.formatMessage({id:e})),this.stopLoading()},this.handleUpdateSuccess=(e,t)=>{const{intl:n}=this.props;u(n,n.formatMessage({id:\"neteco.pvms.fileUpload.fileUploadSuccessAndSave\"})),function(e,t){const n=new FileReader;n.addEventListener(\"load\",(()=>t(n.result))),n.readAsDataURL(e)}(e.originFileObj,(e=>{this.setState({fileId:t,loading:!1,imageUrl:e})})),this.stopLoading()},this.handleChange=e=>{const t=e.file;if(\"uploading\"===t.status)return this.startLoading();if(\"error\"===t.status)return this.handleUploadError(\"neteco.pvms.systemSetting.enterprise.uploadFail\");if(\"done\"===t.status){const{success:e,data:n}=t.response;return!e&&n?this.handleUploadError(n):e?e?this.handleUpdateSuccess(t,n):this.handleUploadError(\"neteco.pvms.fileUpload.fileUploadFail\"):this.handleUploadError()}},this.state={loading:!1,imageUrl:\"\",fileId:\"\",defaultFileId:\"\"}}static getDerivedStateFromProps(e,t){return e.fileId!==t.defaultFileId?{fileId:e.fileId,defaultFileId:e.fileId}:null}componentDidMount(){window.addEventListener(\"clear_company_avatar\",this.clearImage)}componentWillUnmount(){window.removeEventListener(\"clear_company_avatar\",this.clearImage)}shouldComponentUpdate(e,t,n){const{dn:r}=this.props,{dn:i,fileId:o}=e,{fileId:a,imageUrl:s}=this.state,{imageUrl:l}=t;return r!==i||!a||a!==o||!s||s!==l}render(){const{loading:e}=this.state,t=(0,l.jsx)(\"div\",{children:e?(0,l.jsx)(o.Z,{}):(0,l.jsx)(a.Z,{})}),{logoType:n,action:i,advice:s,uploadParams:u={},imgAlt:d,dn:p,imgStyle:f}=this.props,{logoTypeId:h}=u,{fileId:m}=this.state,g=m?`/rest/neteco/web/organization/v2/company/download-logo?companyDn=${p}&logoTypeId=${h}&t=${(new Date).getTime()}`:\"\";return(0,l.jsxs)(\"div\",{children:[g&&(0,l.jsx)(r.Z,{name:\"logo\",action:i,data:u,className:n,listType:\"picture-card\",showUploadList:!1,onChange:this.handleChange,beforeUpload:this.validateImage,headers:{roarand:c.request.getRand()},disabled:this.props.disabled,children:(0,l.jsx)(\"img\",{src:g,alt:d,style:f||{width:\"100%\"}})}),!g&&(0,l.jsx)(r.Z,{name:\"logo\",action:i,data:u,className:n,listType:\"picture-card\",showUploadList:!1,onChange:this.handleChange,beforeUpload:this.validateImage,headers:{roarand:c.request.getRand()},disabled:this.props.disabled,children:t}),(0,l.jsx)(\"span\",{style:{lineBreak:!1},children:s})]})}}f.logoTypeMap=new Map([[\"nco-logo-login-uploader\",1],[\"nco-logo-main-uploader\",2],[\"nco-logo-plants-uploader\",3]]);const h=f},32504:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(94731);const i={loading:!1,mapSettings:null,mapConfigs:[],enterpriseInfo:{},isEmptyMap:!0,loadingNorthRight:!0,northInfo:{},bigScreenServiceStatus:!1,iocStatus:0,isEntireCountyCloud:!1},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,enterpriseInfo:{...t.payload,companyAddress:{address:t.payload.companyAddress,center:{lat:t.payload.latitude,lng:t.payload.longitude}}}};case r.BY:return{...n,loadingNorthRight:!0};case r.e0:return{...n,loadingNorthRight:!1,northInfo:t.payload};case r.dp:case r.Cs:return{...n,iocStatus:!1};case r.RO:return{...n,isEntireCountyCloud:!1};case r.a5:return{...n,isEntireCountyCloud:t.payload.isEntireCountyCloud};default:return n}}},534:(e,t,n)=>{\"use strict\";n.d(t,{IL:()=>i,ST:()=>s,lB:()=>l,mV:()=>o,oG:()=>a});var r=n(44184);const i=e=>({titleLogin:e.formatMessage({id:\"ncoEnterpriseInfo.label.titleLogin\"}),logoLogin:e.formatMessage({id:\"ncoEnterpriseInfo.label.logoLogin\"}),titleMain:(0,r.jz)({labelContent:e.formatMessage({id:\"ncoEnterpriseInfo.label.titleMain\"}),tooltipContent:e.formatMessage({id:\"ncoEnterpriseInfo.label.titleMain.tip\"})}),logoMain:(0,r.jz)({labelContent:e.formatMessage({id:\"ncoEnterpriseInfo.label.logoMain\"}),tooltipContent:e.formatMessage({id:\"ncoEnterpriseInfo.label.logoMain.tip\"})}),titlePlants:e.formatMessage({id:\"ncoEnterpriseInfo.label.titlePlants\"}),logoPlants:e.formatMessage({id:\"ncoEnterpriseInfo.label.logoPlants\"}),logoLoginAdviceMessage:e.formatMessage({id:\"ncoEnterpriseInfo.upload.LogoAdviceMessage\"},{width:50,height:50}),logoMainAdviceMessage:e.formatMessage({id:\"ncoEnterpriseInfo.upload.LogoAdviceMessage\"},{width:50,height:50}),logoPlantsAdviceMessage:e.formatMessage({id:\"ncoEnterpriseInfo.upload.LogoAdviceMessage\"},{width:50,height:50}),companyEmailSetting:e.formatMessage({id:\"pvms.company.mail.info.config\"})}),o=e=>({name:e.formatMessage({id:\"neteco.pvms.systemSetting.domainName\"}),countryCode:e.formatMessage({id:\"neteco.pvms.register.area\"}),dn:e.formatMessage({id:\"neteco.pvms.systemSetting.companyCode\"}),managerTel:e.formatMessage({id:\"neteco.pvms.systemSetting.managerTel\"}),managerEmail:e.formatMessage({id:\"neteco.pvms.systemSetting.managerEmail\"}),description:e.formatMessage({id:\"neteco.pvms.systemSetting.companyDes\"}),startRunningDate:e.formatMessage({id:\"neteco.pvms.systemSetting.domainSafeTime\"}),lonlat:e.formatMessage({id:\"neteco.pvms.deviceDialog.latidu\"}),radius:e.formatMessage({id:\"neteco.pvms.systemSetting.domainRadius\"}),currency:e.formatMessage({id:\"neteco.pvms.systemSetting.currency\"}),supportPoor:e.formatMessage({id:\"neteco.pvms.systemSetting.supportPoor\"}),companyTel:e.formatMessage({id:\"ncoEnterpriseInfo.label.companyTel\"}),companyAddress:e.formatMessage({id:\"ncoEnterpriseInfo.label.companyAddress\"}),companyWebsite:e.formatMessage({id:\"ncoEnterpriseInfo.label.companyWebsite\"}),filingNo:e.formatMessage({id:\"ncoEnterpriseInfo.label.filingNo\"}),partnerCode:e.formatMessage({id:\"neteco.pvms.CIS.number\"})}),a=(e,t,n)=>({formId:\"logo\",companyDn:t,logoTypeId:parseInt(e)}),s=function(e){return{labelCol:{sm:{span:arguments.length>1&&void 0!==arguments[1]?arguments[1]:8}},wrapperCol:{sm:{span:12}},...e?{label:e}:{}}},l=(e,t,n,r,i,o,a)=>({intl:e,logoType:t,action:n,advice:r,uploadParams:i,fileId:o,imgAlt:a})},66229:(e,t,n)=>{\"use strict\";n.d(t,{B:()=>r});const r=\"NCODEVICEUPGRADESEARCH/UPADATE_CONDITION\"},14730:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(66229);const i={loading:!1,searchCondition:{faultLevel:void 0,faultDesc:void 0,faultStatus:void 0,faultId:void 0}},o=(e,t)=>{const n=null!=e?e:i;return t.type===r.B?{...n,searchCondition:t.payload}:n}},33254:(e,t,n)=>{\"use strict\";n.d(t,{Gm:()=>o,Mb:()=>r,T_:()=>i,ZV:()=>a});const r=\"NCOFAULTDEVICEMESSAGEMANAGEMENT/START_LOAD\",i=\"NCOFAULTDEVICEMESSAGEMANAGEMENT/FINISH_LOAD\",o=\"NCOFAULTDEVICEMESSAGEMANAGEMENT/SELECT_ROWS\",a=\"NCOFAULTDEVICEMESSAGEMANAGEMENT/UPDATE_PAGECONDITION\"},43735:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(33254);const i={loading:!1,tableData:[],total:0,pageCondition:{pageNo:1,pageSize:10}},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,total:t.payload.total,tableData:[...t.payload.tableData]};case r.Gm:return{...n,selectedRows:t.payload.selectedRows};case r.ZV:return{...n,pageCondition:t.payload};default:return n}}},53390:(e,t,n)=>{\"use strict\";n.d(t,{Mb:()=>r,T_:()=>i,pV:()=>o});const r=\"NCOHYPERLINKWHITELISTMANAGE/START_LOADING\",i=\"NCOHYPERLINKWHITELISTMANAGE/FINISH_LOADING\",o=\"NCOHYPERLINKWHITELISTMANAGE/RESET_SELECTED_ROWS\"},49724:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o}),n(37920);var r=n(53390);const i={loading:!1,sortCondition:{},tableData:{list:[],total:0,page:1,pageSize:10},resetSelectedRows:1},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,tableData:t.payload};case r.pV:return{...n,resetSelectedRows:t.payload};default:return n}}},76633:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOMODELMANAGEMENT/START_LOADING\",i=\"NCOMODELMANAGEMENT/FINISH_LOADING\"},9960:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(76633);const i={loading:!1,tableData:{list:[],total:0,page:1,pageSize:10}},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.M:return{...n,loading:!0};case r.T:return{...n,loading:!1,tableData:t.payload};default:return n}}},69477:(e,t,n)=>{\"use strict\";n.d(t,{Mb:()=>r,Mh:()=>u,Q2:()=>a,SS:()=>l,T_:()=>o,Ye:()=>i,td:()=>c,xS:()=>d,xj:()=>s});const r=\"NCONEWDEVICEMANAGEMENT/START_LOADING\",i=\"NCONEWDEVICEMANAGEMENT/LOAD_DEVICE_TYPES\",o=\"NCONEWDEVICEMANAGEMENT/FINISH_LOADING\",a=\"NCONEWDEVICEMANAGEMENT/START_LOADSTATIONS\",s=\"NCONEWDEVICEMANAGEMENT/SELECT_SITE\",l=\"NCONEWDEVICEMANAGEMENT/LOAD_STATION\",c=\"NCONEWDEVICEMANAGEMENT/RESET\",u=\"NCONEWDEVICEMANAGEMENT/LOAD_BOUND_DEVICES\",d=\"NCONEWDEVICEMANAGEMENT/LOAD_TIMEZONE_LIST\"},84894:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(69477);const i={loading:!1,loadingStations:!1,sortCondition:{},tableData:{\"light-storage\":{list:[],total:0,page:1,pageSize:10},charge:{list:[],total:0,page:1,pageSize:10},\"power-cube\":{list:[],total:0,page:1,pageSize:10}},deviceTypes:[{type:\"-1\",name:\"全部\"}],isSaving:!1,siteBoundDevices:[],chargeBoundDevices:[],selectedSites:[],timeZoneList:[],mapSettings:null,mapConfigs:[]},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Ye:return{...n,deviceTypes:t.payload};case r.Q2:return{...n,loadingStations:!0};case r.Mb:return{...n,loading:!0};case r.T_:{const e={...n.tableData,...t.payload};return{...n,loading:!1,tableData:e}}case r.SS:return{...n,selectedSites:t.payload};case r.td:return{...n,isSaving:!1,siteBoundDevices:[],selectedSites:[]};case r.Mh:return{...n,siteBoundDevices:t.payload};case r.xj:return{...n,selectedSite:t.payload};case r.xS:return{...n,timeZoneList:t.payload};default:return n}}},80232:(e,t,n)=>{\"use strict\";n.d(t,{EZ:()=>o,Mb:()=>r,Sm:()=>a,T_:()=>i,en:()=>s});const r=\"NCONORTHTABLE/START_LOADING\",i=\"NCONORTHTABLE/FINISH_LOADING\",o=\"NCONORTHTABLE/FINISH_LOAD_LIST\",a=\"NCONORTHTABLE/LOAD_INTERFACE_DETAIL\",s=\"NCONORTHTABLE/CLEAR_ALL_INTERFACE_DETAILS\"},55508:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(80232);const i={loading:!1,versionInfosResource:{total:0},defaultResourceData:{},interfaceList:[],defaultCheckedData:{}},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,versionInfosResource:t.payload.data,interfaceList:t.payload.list};case r.EZ:return{...n,interfaceList:t.payload};case r.Sm:{const{targetSrcId:e,data:r,defaultData:i}=t.payload,{defaultCheckedData:o,defaultResourceData:a}=n,s={...a};s[e]=i;const l={...o};return l[e]=r,{...n,defaultResourceData:s,defaultCheckedData:l}}case r.en:return{...n,...i};default:return n}}},94009:(e,t,n)=>{\"use strict\";n.d(t,{$K:()=>o,Mb:()=>r,TK:()=>a,T_:()=>i});const r=\"NCOPLANNINGMANAGEMENT/START_LOADING\",i=\"NCOPLANNINGMANAGEMENT/FINISH_LOADING\",o=\"NCOPLANNINGMANAGEMENT/FINISH_LOAD_PLANNING_TYPE\",a=\"NCOPLANNINGMANAGEMENT/FINISH_LOADING_WHEN_ERROR\"},34667:(e,t,n)=>{\"use strict\";n.d(t,{$V:()=>C,Rv:()=>g,SR:()=>x,VT:()=>A,bQ:()=>w,eB:()=>S,nG:()=>v,u1:()=>T});var r=n(26887),i=n(45258),o=(n(88391),n(37920)),a=n.n(o),s=n(94009),l=n(49453),c=n(20928),u=n(7812),d=n(23712);const{neteco:p}=window,f=()=>({type:s.Mb}),h=e=>({type:s.T_,payload:e}),m=()=>({type:s.TK}),g=async(e,t,n,r)=>{let{page:i,pageSize:o}=n,{sortBy:a,sortOrder:s}=r;e(f());const c={moList:t.stationCodes||[],ptIds:t.ptIds,pmYearDate:t.pmYearDate.year(),page:void 0===i?1:i,pageSize:void 0===o?10:o,sortBy:void 0===a?\"stationName\":a,sortOrder:void 0===s?\"ascend\":s};try{const{success:t,data:n}=await(0,l.v_)(\"/rest/pvms/web/plan/v1/plan-info-list\",c);e(t?h(n||[]):m())}catch(t){e(m())}},v=async(e,t,n,o)=>{const a=`stationCode=${e.stationCodes}&ptId=1&pmYearDate=${e.pmYearDate.year()}`;try{const{success:n,data:s}=await(0,l.U2)(`/rest/pvms/web/plan/v1/plan-info?${a}`);n?null!==s?i.Z.confirm({title:t.formatMessage({id:\"neteco.pvms.paramsSetting.unifiedSetting.devControl.noteTip\"}),content:t.formatMessage({id:\"neteco.pvms.systemSetting.planManage.planDataCoverage\"}),onOk(){const n={...E(e),pmId:s.pmId};b(n,t,o)},onCancel(){}}):y(e,t,o):(r.ZP.destroy(),r.ZP.error(t.formatMessage({id:\"neteco.pvms.paramsSetting.unifiedSetting.telemeteringConf.saveFiled\"})),o())}catch(e){}},y=async(e,t,n)=>{const i=E(e);try{const{success:e}=await(0,l.v_)(\"/rest/pvms/web/plan/v1/plan-info\",i);e?(r.ZP.destroy(),r.ZP.success(t.formatMessage({id:\"neteco.pvms.inspect.addSucess\"})),n()):(r.ZP.destroy(),r.ZP.error(t.formatMessage({id:\"neteco.pvms.paramsSetting.unifiedSetting.telemeteringConf.saveFiled\"})),n())}catch(e){r.ZP.destroy(),r.ZP.error(t.formatMessage({id:\"neteco.pvms.paramsSetting.unifiedSetting.telemeteringConf.saveFiled\"})),n()}},b=async(e,t,n)=>{try{const{success:i}=await(0,l.gz)(\"/rest/pvms/web/plan/v1/plan-info\",e);i?(r.ZP.destroy(),r.ZP.success(t.formatMessage({id:\"neteco.pvms.inspect.updateSucess\"})),n()):(r.ZP.destroy(),r.ZP.error(t.formatMessage({id:\"neteco.pvms.inspect.updateFailed\"})),n())}catch(e){r.ZP.destroy(),r.ZP.success(t.formatMessage({id:\"neteco.pvms.inspect.updateSucess\"})),n()}},S=async(e,t,n,r)=>{const i={...E(e),pmId:t.pmId,stationCode:t.stationCode,stationName:t.stationName,ptId:t.ptId,pmYearDate:t.pmYearDate.year()};b(i,n,r)},x=async(e,t,n)=>{const i=[];e.forEach((e=>{let{pmId:t}=e;i.push(t)}));try{const{success:e}=await(0,l.IV)(`/rest/pvms/web/plan/v1/plan-info?pmIdsParam=${i.toString()}`);e?(r.ZP.destroy(),r.ZP.success(t.formatMessage({id:\"neteco.pvms.superviseSetting.IPManagerList.deleteSuccess\"}))):(r.ZP.destroy(),r.ZP.error(t.formatMessage({id:\"neteco.pvms.superviseSetting.IPManagerList.deleteFailed\"})))}catch(e){r.ZP.destroy(),r.ZP.error(t.formatMessage({id:\"neteco.pvms.superviseSetting.IPManagerList.deleteFailed\"}))}n()},w=async(e,t,n,o)=>{e(f());let a=new FormData;a.set(\"file\",t),(0,l.cd)(\"/rest/pvms/web/plan/v1/plan-import\",a).then((e=>{let{success:t,data:a}=e;t&&a.failedCount>0?i.Z.confirm({title:n.formatMessage({id:\"neteco.pvms.paramsSetting.unifiedSetting.devControl.noteTip\"}),content:(0,d.jsxs)(\"div\",{children:[(0,d.jsx)(\"p\",{children:`${n.formatMessage({id:\"neteco.pvms.inspect.viewImport.successCount\"})} ${a.successCount}`}),(0,d.jsx)(\"p\",{children:`${n.formatMessage({id:\"neteco.pvms.inspect.viewImport.failedCount\"})} ${a.failedCount}`}),(0,d.jsx)(\"p\",{style:{color:\"red\"},children:n.formatMessage({id:\"neteco.pvms.systemSetting.planManage.downErrFileTip\"})})]}),onOk(){C({fileId:a.errFileName}),o()},onCancel(){o()}}):t?(r.ZP.destroy(),r.ZP.success(n.formatMessage({id:\"neteco.pvms.partials.main.hp.upload.importSuccess\"})),o()):void 0!==a.retErrMes?i.Z.confirm({title:n.formatMessage({id:\"neteco.pvms.paramsSetting.unifiedSetting.devControl.noteTip\"}),content:(0,d.jsx)(\"div\",{children:(0,d.jsx)(\"p\",{children:n.formatMessage({id:a.retErrMes})})}),onOk(){o()},onCancel(){o()}}):(r.ZP.destroy(),r.ZP.error(n.formatMessage({id:\"neteco.pvms.inspect.viewImport.importFailed\"})),o())})).catch((()=>{(0,u.CT)(n),o()}))};function C(e,t){(0,c.Z)(\"/rest/pvms/web/document/v1/file-manager/download-temp-file\",{fileId:e.fileId},{method:\"GET\"})}const T=async(e,t,n,r,i)=>{document.cookie=\"exportTimeStamp=\"+escape(\"\")+\";expires=-1\";const{exportAfter:o,exportBefore:s}=i;s&&s();const l=(new Date).getTime(),u=setInterval((()=>{clearInterval(u)}),500);let d=t.stationCodes||[];n.length>0&&(d=n.map((e=>({moString:e.stationCode,moType:20801})))),(0,c.Z)(\"/rest/pvms/web/plan/v1/plan-export\",null,{moList:d,pmYearDate:void 0===t.pmYearDate?a()().year():t.pmYearDate.year(),downloadKey:\"PGPlansInfoExport\",ptId:\"1\",exportTimeStamp:l}).then((()=>{o&&o()}))},A=async e=>{e(f());try{const{success:t,data:n}=await(0,l.U2)(\"/rest/pvms/web/plan/v1/plan-type\",{});e(t?{type:s.$K,payload:n}:h([]))}catch(t){e(h([]))}};function E(e){let t={pmJan:0,pmFeb:0,pmMar:0,pmApr:0,pmMay:0,pmJun:0,pmJul:0,pmAug:0,pmSep:0,pmOct:0,pmNov:0,pmDec:0};return void 0!==e.planningDetails&&(t=e.planningDetails.details),{stationCode:e.stationCodes,ptId:1,pmYearDate:e.pmYearDate.year(),remark:e.remark,...t}}},99529:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>l});var r=n(37920),i=n.n(r),o=n(94009);const a={loading:!1,tableData:{list:[],total:0,page:1,pageSize:10},planningTypes:[],queryParams:{}},s=e=>{let{list:t=[],...n}=e;return{list:t.map((e=>{let{pmYearDate:t,...n}=e;return{pmYearDate:i()().set(\"year\",t),planningDetails:{pmJan:n.pmJan,pmFeb:n.pmFeb,pmMar:n.pmMar,pmApr:n.pmApr,pmMay:n.pmMay,pmJun:n.pmJun,pmJul:n.pmJul,pmAug:n.pmAug,pmSep:n.pmSep,pmOct:n.pmOct,pmNov:n.pmNov,pmDec:n.pmDec},...n}})),...n}},l=(e,t)=>{const n=null!=e?e:a;switch(t.type){case o.Mb:return{...n,loading:!0};case o.T_:return{...n,loading:!1,tableData:s(t.payload)};case o.$K:return{...n,planningTypes:t.payload};case o.TK:return{...n,loading:!1,tableData:{list:[],pageCount:0,pageNo:1,pageSize:10,total:0}};default:return n}}},25398:(e,t,n)=>{\"use strict\";n.d(t,{Mb:()=>r,T_:()=>i,Xs:()=>o});const r=\"NCOSETTINGSCONTAINER/START_LOADING\",i=\"NCOSETTINGSCONTAINER/FINISH_LOADING\",o=\"NCOSETTINGSCONTAINER/SET_MENU_STATUS\"},92468:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(25398);const i={loading:!1,menus:[{key:\"power-price\",title:\"neteco.pvms.systemSetting.feedinTariffs\"},{key:\"station-management\",title:\"neteco.pvms.systemSetting.stationInfo\"},{key:\"fix-data\",title:\"neteco.pvms.smsrc.data_amendment\"},{key:\"param-setting\",title:\"neteco.pvms.partials.main.configuration.conf\"},{key:\"adapter-management\",title:\"neteco.pvms.smsrc.adapter.management\"},{key:\"document\",title:\"neteco.pvms.documentManage.fileManage\"},{key:\"server\",title:\"neteco.pvms.communicatPoint.communicatPointManage\"},{key:\"collector-management\",title:\"neteco.pvms.smsrc.collectorManage\"},{key:\"deviceLog\",title:\"neteco.pvms.dcLogExport.deviceLogExport\"},{key:\"dev-license\",title:\"neteco.pvms.systemSetting.devLicense.name\"},{key:\"white-list\",title:\"neteco.pvms.superviseSetting.DomainnameManagerList.IPManagerList\"},{key:\"demo-setting\",title:\"neteco.pvms.demoConf.demoConf\"},{key:\"activate-statistic\",title:\"neteco.menu.device.activateStatistic\"}]},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,menus:t.payload};case r.Xs:return{...n,shouldHideMenu:t.payload};default:return n}}},90228:(e,t,n)=>{\"use strict\";n.d(t,{Cd:()=>a,Gm:()=>o,Jk:()=>c,Mb:()=>r,T_:()=>i,Ye:()=>d,g$:()=>p,td:()=>s,xS:()=>u,zr:()=>l});const r=\"NCOSTATIONINFORMATION/START_LOADING\",i=\"NCOSTATIONINFORMATION/FINISH_LOADING\",o=\"NCOSTATIONINFORMATION/SELECT_ROWS\",a=\"NCOSTATIONINFORMATION/LOAD_RECORD\",s=\"NCOSTATIONINFORMATION/RESET\",l=\"NCOSTATIONINFORMATION/LOAD_SITEBOUND_DEVICES\",c=\"NCOSTATIONINFORMATION/HOVER_SAVING_MODE\",u=\"NCOSTATIONINFORMATION/LOAD_TIMEZONE_LIST\",d=\"NCOSTATIONINFORMATION/LOAD_DEVICE_TYPES\",p=\"NCOSTATIONINFORMATION/LOAD_AREA_LIST\"},11970:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(90228);const i={isSaving:!1,siteBoundDevices:[],selectedSiteList:[],deviceTypes:[]},o={loading:!1,sortCondition:{},tableData:{list:[],total:0,page:1,pageSize:10},timeZoneList:[],areaList:[],...i},a=(e,t)=>{const n=null!=e?e:o;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,tableData:t.payload};case r.Cd:return{...n,selectedSiteList:t.payload};case r.Gm:return{...n,selectedSiteList:t.payload||[]};case r.td:return{...n,...i};case r.Jk:return{...n,isSaving:t.payload};case r.zr:return{...n,siteBoundDevices:t.payload};case r.Ye:return{...n,deviceTypes:t.payload};case r.xS:return{...n,timeZoneList:t.payload.timezones,supportMap:t.payload.supportMap};case r.g$:return{...n,areaList:t.payload};default:return n}}},52904:(e,t,n)=>{\"use strict\";n.d(t,{Gm:()=>o,Ip:()=>s,Mb:()=>r,PC:()=>a,T_:()=>i,Y$:()=>l});const r=\"NCOSTATIONLICENSEMANAGEMENT/START_LOADING\",i=\"NCOSTATIONLICENSEMANAGEMENT/FINISH_LOADING\",o=\"NCOSTATIONLICENSEMANAGEMENT/SELECT_ROWS\",a=\"NCOSTATIONLICENSEMANAGEMENT/EXPAND_ROWS\",s=\"NCOSTATIONLICENSEMANAGEMENT/START_UPDATE\",l=\"NCOSTATIONLICENSEMANAGEMENT/FINISH_UPDATE\"},30505:(e,t,n)=>{\"use strict\";n.d(t,{I9:()=>h,LD:()=>p,bI:()=>f,gW:()=>d,hd:()=>u,tL:()=>m});var r=n(52904),i=n(49453),o=n(34898),a=n(5807),s=n(28976),l=n(44184);const c=e=>({type:r.T_,payload:e}),u=(e,t)=>{e({type:r.Gm,payload:t})},d=(e,t,n,i)=>{let o;o=t?[...i,n]:i.filter((e=>e!==n)),e({type:r.PC,payload:o})},p=e=>{e({type:r.PC,payload:[]})},f={list:[],total:0,page:1,pageSize:10},h=async(e,t,n,o)=>{var u,d,p,h;e({type:r.Mb});const m=(null!==(u=t.searchName)&&void 0!==u?u:\"\").trim(),g=null!==(d=t.licenseStatus)&&void 0!==d?d:\"ALL\",v={domainMocId:s.mg,page:null!==(p=n.page)&&void 0!==p?p:1,pageSize:null!==(h=n.pageSize)&&void 0!==h?h:10,searchName:m,licenseStatus:\"ALL\"===g?\"\":g};try{const t=await a.Z.getCurrentCompany();if((0,l.xb)(t))return e(c(f)),!1;v.parentDn=(null==t?void 0:t.moDn)||\"\";const{code:n,data:r,total:o}=await(0,i.v_)(\"/rest/pvms/license/v1/queryLicenseList\",v);e(c(0===n?{list:null!=r?r:[],total:null!=o?o:0,page:v.page,pageSize:v.pageSize}:f))}catch{e(c(f))}},m=async(e,t,n)=>{const{okCallback:i,failCallback:a}=n;var s;e((s=t.loadingTip,{type:r.Ip,payload:s}));try{const{success:e}=await(0,o.Z$)({domainDns:t.domainDns});e?i():a()}catch(e){a()}finally{e({type:r.Y$})}}},77121:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(30505),i=n(52904);const o={loading:!1,loadingTip:\"\",tableData:r.bI,selectedSiteList:[],expandedSiteRowKeys:[]},a=(e,t)=>{const n=null!=e?e:o;switch(t.type){case i.Mb:return{...n,loading:!0,loadingTip:\"\"};case i.T_:return{...n,loading:!1,loadingTip:\"\",tableData:t.payload};case i.Gm:return{...n,selectedSiteList:t.payload||[]};case i.PC:return{...n,expandedSiteRowKeys:t.payload||[]};case i.Ip:return{...n,loading:!0,loadingTip:t.payload};case i.Y$:return{...n,loading:!1,loadingTip:\"\"};default:return n}}},70292:(e,t,n)=>{\"use strict\";n.d(t,{MG:()=>o,Mb:()=>r,T_:()=>i});const r=\"NCOSUBDOCUMENTMANAGEMENT/START_LOADING\",i=\"NCOSUBDOCUMENTMANAGEMENT/FINISH_LOADING\",o=\"NCOFIXSHIFTING/FINISH_LOAD_MODEL_LIST\"},93122:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(70292);const i={loading:!1,tableData:{list:[],total:0,page:1,pageSize:10},modelList:[]},o=e=>{let{list:t,...n}=e;return{...n,list:t.map((e=>{let{...t}=e;return{...t}}))}},a=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1,tableData:o(t.payload)};case r.MG:return{...n,loading:!1,modelList:t.payload};default:return n}}},74621:(e,t,n)=>{\"use strict\";n.d(t,{L:()=>i});var r=n(4342);const i={administrators:{roleKey:r.xZ.administrator,descKey:\"neteco.pvms.userManagement.roles.description.system\",msgKey:\"neteco.pvms.userManagement.roles.system\"},securityadmin:{roleKey:r.xZ.securityAdmin,descKey:\"neteco.pvms.userManagement.roles.security.description\",msgKey:\"neteco.pvms.userManagement.roles.security\"},maintain:{roleKey:r.xZ.maintain,descKey:\"neteco.pvms.userManagement.roles.description.installer\",msgKey:\"neteco.pvms.userManagement.roles.operation\"},installer:{roleKey:r.xZ.installer,descKey:\"neteco.pvms.userManagement.roles.description.installer\",msgKey:\"neteco.pvms.userManagement.roles.installer\"},owner:{roleKey:r.xZ.owner,descKey:\"neteco.pvms.userManagement.roles.description.owner\",msgKey:\"neteco.pvms.userManagement.roles.owner\"},guest:{roleKey:r.xZ.guest,descKey:\"neteco.pvms.userManagement.roles.description.newGuest\",msgKey:\"neteco.pvms.userManagement.roles.newGuest\"},companyManager:{roleKey:r.xZ.installerAdmin,descKey:\"neteco.pvms.userManagement.roles.description.companyManager\",msgKey:\"neteco.pvms.componentManage.companyManager\"},companyAdmin:{roleKey:r.xZ.companyAdmin,descKey:\"neteco.pvms.userManagement.roles.description.installer\",msgKey:\"neteco.pvms.componentManage.companyManager\"},SMManagers:{roleKey:\"SMManagers\",descKey:\"neteco.pvms.userManagement.roles.description.security\",msgKey:\"neteco.pvms.userManagement.roles.security\"},devMaintain:{roleKey:r.xZ.devmaintain,descKey:\"neteco.pvms.userManagement.roles.description.devmaintain\",msgKey:\"neteco.pvms.userManagement.roles.devmaintain.new\"},devOperation:{roleKey:r.xZ.devoperation,descKey:\"neteco.pvms.userManagement.roles.description.devoperation\",msgKey:\"neteco.pvms.userManagement.roles.devoperation.new\"},devMonitor:{roleKey:r.xZ.devmonitor,descKey:\"neteco.pvms.userManagement.roles.description.devmonitor\",msgKey:\"neteco.pvms.userManagement.roles.devmonitor.new\"},devMaintainExpert:{roleKey:r.xZ.devmaintainexpert,descKey:\"neteco.pvms.userManagement.roles.description.devmaintainexpert\",msgKey:\"neteco.pvms.userManagement.roles.devmaintainexpert\"},sysMaintain:{roleKey:r.xZ.sysmaintain,descKey:\"neteco.pvms.userManagement.roles.description.sysMaintainer.new\",msgKey:\"neteco.pvms.userManagement.roles.sysMaintain\"},sysOperator:{roleKey:r.xZ.sysoperator,descKey:\"neteco.pvms.userManagement.roles.description.sysOperator.new\",msgKey:\"neteco.pvms.userManagement.roles.sysOperator\"},sharer:{roleKey:r.xZ.sharer,descKey:\"\",msgKey:\"neteco.pvms.userManagement.roles.sharer\"}}},29009:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(98455),i=n(96299),o=n(23712);const a=()=>{const e=(0,o.jsxs)(\"div\",{className:\"subject-add-mail-tip\",children:[(0,o.jsx)(\"p\",{children:i.Z.intl.formatMessage({id:\"neteco.add.email.subject.tip1\"})}),(0,o.jsx)(\"p\",{children:i.Z.intl.formatMessage({id:\"neteco.add.email.subject.tip2\"})}),(0,o.jsx)(\"p\",{children:i.Z.intl.formatMessage({id:\"neteco.add.email.subject.tip3\"})})]});return(0,o.jsx)(r.Z,{closable:!0,message:e,type:\"info\",showIcon:!0,style:{marginBottom:\"24px\"}})}},49100:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>Oe});var r=n(90701),i=n(5776),o=n(41541),a=n(45258),s=n(88391),l=n(13450),c=n(24301),u=n(49453),d=n(44184);const p=new class{getRestrictedOperationList(){return n.e(9407).then(n.bind(n,69407)).then((e=>e.default))}async isRestrictedOperation(e,t){const n=await this.getRestrictedOperationList();return t.every((t=>n.get(t.name)&&e.some((e=>n.get(t.name).includes(e)))))}isAuthorized(e){return(0,u.v_)(\"/rest/dp/uidm/privilege/authorize/v1/task/detail\",e)}isAuthorizedBySwitch(){return(0,u.U2)(\"/rest/dp/pvms/organization-website/v1/apply2authorization/switch-enable\")}async InstallerIsAuthorized(e,t){const n={resources:e,options:t},[r,i]=await(0,d.AM)((0,u.v_)(\"/rest/dp/pvms/dporganizationwebsite/v1/msp/options-auth\",n));return!r&&1===(null==i?void 0:i.code)}async getStationDn(e){const[t,n]=await(0,d.AM)((0,u.U2)(\"/rest/dp/pvms/device/belong-station/station-info\",{dn:e}));if(!t&&n)return n}};var f=n(97117),h=n(59516),m=n(62073),g=n(29266),v=n(41006),y=n(27829);function b(e){return b=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},b(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function x(e){var t=function(e){if(\"object\"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,\"string\");if(\"object\"!=b(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==b(t)?t:t+\"\"}const w=new(function(){return function(e,t){return t&&S(e.prototype,t),Object.defineProperty(e,\"prototype\",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),function(e,t){(t=x(t))in e?Object.defineProperty(e,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):e[t]=null}(this,\"intl\"),this.intl=t}),[{key:\"updateIntlInstance\",value:function(e){if(!e)throw new Error(\"i18n should be initialized with valid i18n instance.\");this.intl=e}},{key:\"translate\",value:function(e,t){return this.intl.formatMessage({id:e},t)}}])}());var C=function(){},T=new RegExp(\"^[a-zA-Z0-9!#$%&'*+\\\\/=?^_`{|}~.-]+@[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?(\\\\.[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?)+$\"),A=function(e,t){return 0===e.trim().length||e.length>64?t.formatMessage({id:\"ncoCompanyManagement.userBasicInfo.message.inputValidEmail\"}):T.test(e)?void 0:t.formatMessage({id:\"ncoCompanyManagement.userBasicInfo.message.inputValidEmail\"})};function E(e){return e.then((function(e){return[null,e]})).catch((function(e){return[e,void 0]}))}function O(e){return O=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},O(e)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return(t=function(e){var t=function(e){if(\"object\"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,\"string\");if(\"object\"!=O(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==O(t)?t:t+\"\"}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t,n,r){w.intl||w.updateIntlInstance(n);var i=_(\"success\");y.SZ.success({title:i.title,content:null!=e?e:i.content,okText:i.okText,centered:i.centered,maskClosable:i.maskClosable,onOk:t||C,onCancel:r||C})}function N(e,t,n){w.intl||w.updateIntlInstance(n);var r=_(\"fail\");y.SZ.error({title:r.title,content:null!=e?e:r.content,okText:r.okText,centered:r.centered,maskClosable:r.maskClosable,onOk:t||C})}function _(e){var t={centered:!0,maskClosable:!1,okText:w.intl.formatMessage({id:\"common.button.ok\"})};switch(e){case\"error\":return P(P({},t),{},{title:w.intl.formatMessage({id:\"neteco.pvms.error\"}),content:w.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"})});case\"success\":return P(P({},t),{},{title:w.intl.formatMessage({id:\"neteco.pvms.info\"}),content:w.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.doItSuc\"})});case\"fail\":return P(P({},t),{},{title:w.intl.formatMessage({id:\"neteco.pvms.info\"}),content:w.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.doItFail\"})});default:return t}}function j(e){return j=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},j(e)}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}function R(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function Z(e,t,n){return(t=B(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e){var t=function(e){if(\"object\"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,\"string\");if(\"object\"!=j(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==j(t)?t:t+\"\"}var F=window.neteco,z=function(e,t,n){return new Promise((function(r,i){var o=n?{url:e,dataType:\"json\",data:t}:{url:e,dataType:\"json\",data:JSON.stringify(t),contentType:\"application/json\"};F.request.post(o).done((function(e){r(e)})).fail((function(e){i(e)})).catch((function(e){H.catch(e),i(e)}))}))},V=function(e,t,n){return new Promise((function(r,i){F.request.get({url:e,dataType:n||\"json\",data:t}).done((function(e){r(e)})).fail((function(e){i(e)})).catch((function(e){H.catch(e),i(e)}))}))},H=new(R((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),Z(this,\"pvmsExceptionList\",[]),Z(this,\"register\",(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(e=n.pvmsExceptionList).unshift.apply(e,function(e){if(Array.isArray(e))return k(e)}(t=r)||function(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}(t)||function(e,t){if(e){if(\"string\"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}())})),Z(this,\"catch\",(function(e){var t=n.pvmsExceptionList.find((function(t){return e.status===t.statusCode&&(!t.exceptionId||e.responseJSON.exceptionId===t.exceptionId)}));return null==t?void 0:t.operation(e)})),this.register(t)})))([{statusCode:406,exceptionId:\"UA.00010001\",operation:function(){return function(e){w.intl||w.updateIntlInstance(void 0);var t=_(\"error\");y.SZ.error({title:t.title,content:null!=e?e:t.content,okText:t.okText,centered:t.centered,maskClosable:t.maskClosable})}(w.intl.formatMessage({id:\"neteco.pvms.station.unauthorized.tip\"}))}}]);function U(e){return U=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},U(e)}function G(){G=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o=\"function\"==typeof Symbol?Symbol:{},a=o.iterator||\"@@iterator\",s=o.asyncIterator||\"@@asyncIterator\",l=o.toStringTag||\"@@toStringTag\";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},\"\")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new D(r||[]);return i(a,\"_invoke\",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:\"normal\",arg:e.call(t,n)}}catch(e){return{type:\"throw\",arg:e}}}t.wrap=u;var p=\"suspendedStart\",f=\"suspendedYield\",h=\"executing\",m=\"completed\",g={};function v(){}function y(){}function b(){}var S={};c(S,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,a)&&(S=w);var C=b.prototype=v.prototype=Object.create(S);function T(e){[\"next\",\"throw\",\"return\"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if(\"throw\"!==l.type){var c=l.arg,u=c.value;return u&&\"object\"==U(u)&&r.call(u,\"__await\")?t.resolve(u.__await).then((function(e){n(\"next\",e,a,s)}),(function(e){n(\"throw\",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n(\"throw\",e,a,s)}))}s(l.arg)}var o;i(this,\"_invoke\",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function E(t,n,r){var i=p;return function(o,a){if(i===h)throw Error(\"Generator is already running\");if(i===m){if(\"throw\"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=O(s,r);if(l){if(l===g)continue;return l}}if(\"next\"===r.method)r.sent=r._sent=r.arg;else if(\"throw\"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else\"return\"===r.method&&r.abrupt(\"return\",r.arg);i=h;var c=d(t,n,r);if(\"normal\"===c.type){if(i=r.done?m:f,c.arg===g)continue;return{value:c.arg,done:r.done}}\"throw\"===c.type&&(i=m,r.method=\"throw\",r.arg=c.arg)}}}function O(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,\"throw\"===r&&t.iterator.return&&(n.method=\"return\",n.arg=e,O(t,n),\"throw\"===n.method)||\"return\"!==r&&(n.method=\"throw\",n.arg=new TypeError(\"The iterator does not provide a '\"+r+\"' method\")),g;var o=d(i,t.iterator,n.arg);if(\"throw\"===o.type)return n.method=\"throw\",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,\"return\"!==n.method&&(n.method=\"next\",n.arg=e),n.delegate=null,g):a:(n.method=\"throw\",n.arg=new TypeError(\"iterator result is not an object\"),n.delegate=null,g)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(M,this),this.reset(!0)}function I(t){if(t||\"\"===t){var n=t[a];if(n)return n.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(U(t)+\" is not iterable\")}return y.prototype=b,i(C,\"constructor\",{value:b,configurable:!0}),i(b,\"constructor\",{value:y,configurable:!0}),y.displayName=c(b,l,\"GeneratorFunction\"),t.isGeneratorFunction=function(e){var t=\"function\"==typeof e&&e.constructor;return!!t&&(t===y||\"GeneratorFunction\"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,\"GeneratorFunction\")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,\"Generator\"),c(C,a,(function(){return this})),c(C,\"toString\",(function(){return\"[object Generator]\"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)\"t\"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type=\"throw\",s.arg=t,n.next=r,i&&(n.method=\"next\",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if(\"root\"===a.tryLoc)return i(\"end\");if(a.tryLoc<=this.prev){var l=r.call(a,\"catchLoc\"),c=r.call(a,\"finallyLoc\");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error(\"try statement without catch or finally\");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,\"finallyLoc\")&&this.prev<i.finallyLoc){var o=i;break}}o&&(\"break\"===e||\"continue\"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method=\"next\",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(\"throw\"===r.type){var i=r.arg;P(n)}return i}}throw Error(\"illegal catch attempt\")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},\"next\"===this.method&&(this.arg=e),g}},t}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return W(e,t);var n={}.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){K(o,r,i,a,s,\"next\",e)}function s(e){K(o,r,i,a,s,\"throw\",e)}a(void 0)}))}}var Q,X=function(){var e=q(G().mark((function e(t,n){var r,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(z(\"/rest/dp/uidm/privilege/authorize/v1/apply2authorization?instanceId=\".concat(t),n));case 2:if(r=e.sent,(i=Y(r,2))[0],!i[1]){e.next=8;break}return e.abrupt(\"return\",!0);case 8:return e.abrupt(\"return\",!1);case 9:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=q(G().mark((function e(t){var n,r,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(z(\"/rest/dp/uidm/privilege/authorize/v1/approver/validation\",t));case 2:if(n=e.sent,r=Y(n,1),!(i=r[0])||200!==i.status){e.next=7;break}return e.abrupt(\"return\",!0);case 7:return e.abrupt(\"return\",!1);case 8:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=q(G().mark((function e(){var t,n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(V(\"/rest/dp/uidm/users/v1/area\"));case 2:if(t=e.sent,(n=Y(t,2))[0],!(r=n[1])){e.next=8;break}return e.abrupt(\"return\",null==r?void 0:r.payload);case 8:return e.abrupt(\"return\",\"CN\");case 9:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=24,te=\"neteco.pvms.station.authorization.applay.one.day\",ne=336,re=\"neteco.pvms.station.authorization.applay.two.week\",ie=168,oe=\"neteco.pvms.station.authorization.applay.one.week\",ae=720,se=\"neteco.pvms.station.authorization.applay.one.month\";function le(e){return le=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},le(e)}function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ce.apply(null,arguments)}function ue(){ue=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o=\"function\"==typeof Symbol?Symbol:{},a=o.iterator||\"@@iterator\",s=o.asyncIterator||\"@@asyncIterator\",l=o.toStringTag||\"@@toStringTag\";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},\"\")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new D(r||[]);return i(a,\"_invoke\",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:\"normal\",arg:e.call(t,n)}}catch(e){return{type:\"throw\",arg:e}}}t.wrap=u;var p=\"suspendedStart\",f=\"suspendedYield\",h=\"executing\",m=\"completed\",g={};function v(){}function y(){}function b(){}var S={};c(S,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,a)&&(S=w);var C=b.prototype=v.prototype=Object.create(S);function T(e){[\"next\",\"throw\",\"return\"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=d(e[i],e,o);if(\"throw\"!==l.type){var c=l.arg,u=c.value;return u&&\"object\"==le(u)&&r.call(u,\"__await\")?t.resolve(u.__await).then((function(e){n(\"next\",e,a,s)}),(function(e){n(\"throw\",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n(\"throw\",e,a,s)}))}s(l.arg)}var o;i(this,\"_invoke\",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function E(t,n,r){var i=p;return function(o,a){if(i===h)throw Error(\"Generator is already running\");if(i===m){if(\"throw\"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=O(s,r);if(l){if(l===g)continue;return l}}if(\"next\"===r.method)r.sent=r._sent=r.arg;else if(\"throw\"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else\"return\"===r.method&&r.abrupt(\"return\",r.arg);i=h;var c=d(t,n,r);if(\"normal\"===c.type){if(i=r.done?m:f,c.arg===g)continue;return{value:c.arg,done:r.done}}\"throw\"===c.type&&(i=m,r.method=\"throw\",r.arg=c.arg)}}}function O(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,\"throw\"===r&&t.iterator.return&&(n.method=\"return\",n.arg=e,O(t,n),\"throw\"===n.method)||\"return\"!==r&&(n.method=\"throw\",n.arg=new TypeError(\"The iterator does not provide a '\"+r+\"' method\")),g;var o=d(i,t.iterator,n.arg);if(\"throw\"===o.type)return n.method=\"throw\",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,\"return\"!==n.method&&(n.method=\"next\",n.arg=e),n.delegate=null,g):a:(n.method=\"throw\",n.arg=new TypeError(\"iterator result is not an object\"),n.delegate=null,g)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(M,this),this.reset(!0)}function I(t){if(t||\"\"===t){var n=t[a];if(n)return n.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(le(t)+\" is not iterable\")}return y.prototype=b,i(C,\"constructor\",{value:b,configurable:!0}),i(b,\"constructor\",{value:y,configurable:!0}),y.displayName=c(b,l,\"GeneratorFunction\"),t.isGeneratorFunction=function(e){var t=\"function\"==typeof e&&e.constructor;return!!t&&(t===y||\"GeneratorFunction\"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,\"GeneratorFunction\")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),c(C,l,\"Generator\"),c(C,a,(function(){return this})),c(C,\"toString\",(function(){return\"[object Generator]\"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)\"t\"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type=\"throw\",s.arg=t,n.next=r,i&&(n.method=\"next\",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if(\"root\"===a.tryLoc)return i(\"end\");if(a.tryLoc<=this.prev){var l=r.call(a,\"catchLoc\"),c=r.call(a,\"finallyLoc\");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error(\"try statement without catch or finally\");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,\"finallyLoc\")&&this.prev<i.finallyLoc){var o=i;break}}o&&(\"break\"===e||\"continue\"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method=\"next\",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(\"throw\"===r.type){var i=r.arg;P(n)}return i}}throw Error(\"illegal catch attempt\")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},\"next\"===this.method&&(this.arg=e),g}},t}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e,t,n){return(t=function(e){var t=function(e){if(\"object\"!=le(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,\"string\");if(\"object\"!=le(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(e)}(e);return\"symbol\"==le(t)?t:t+\"\"}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){he(o,r,i,a,s,\"next\",e)}function s(e){he(o,r,i,a,s,\"throw\",e)}a(void 0)}))}}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||ve(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function ve(e,t){if(e){if(\"string\"==typeof e)return ye(e,t);var n={}.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ye(e,t):void 0}}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var be=m.Z.TextArea,Se=window.neteco,xe={labelCol:{sm:{span:[\"uk-ua\",\"es-es\"].includes(null==Se||null===(Q=Se.i18n)||void 0===Q?void 0:Q.getLocale())?8:7}},wrapperCol:{sm:{span:18}}};const we=function(e){var t=e.intl,n=e.hideModal,i=e.showModal,o=e.targetId,l=e.instanceId,c=ge((0,s.useState)(ne),2),u=c[0],d=c[1],p=ge((0,s.useState)(t.formatMessage({id:\"neteco.pvms.station.authorization.people.phone.input\"})),2),f=p[0],h=p[1],y=ge((0,s.useState)(\"ownerUserPhone\"),2),b=y[0],S=y[1],x=ge((0,s.useState)(!0),2),w=x[0],C=x[1],T=(0,s.useRef)();(0,s.useEffect)((function(){i&&$().then((function(e){\"CN\"!==e&&(h(t.formatMessage({id:\"neteco.pvms.station.authorization.people.email.input\"})),S(\"ownerUserEmail\"),C(!1))}))}),[i]);var E,O,M,P=function(){var e=me(ue().mark((function e(){return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,T.current.validateFields)().then(function(){var e=me(ue().mark((function e(r){return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(l,pe({resId:o},r));case 2:e.sent?(n(),I(t.formatMessage({id:\"common.message.success\"}),null,t)):N(t.formatMessage({id:\"neteco.pvms.returned.partes.interface.err\"}),null,t);case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}));case 3:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.createElement(a.Z,{className:\"apply-station-authorization-modal\",title:t.formatMessage({id:\"neteco.pvms.station.authorization.action.apply\"}),destroyOnClose:!0,visible:i,onOk:P,onCancel:function(){return n(!1)},centered:!0,width:\"608px\"},s.createElement(g.Z,{ref:T},s.createElement(g.Z.Item,ce({label:t.formatMessage({id:\"neteco.pvms.station.authorization.people.phone\"}),validateFirst:!0,required:!0,name:b,validateTrigger:\"onBlur\",className:\"connect-form-item\"},xe,{labelAlign:\"left\",rules:(M=w?[{required:!0},{validator:(O=me(ue().mark((function e(n,r){return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^1[3456789]\\d{9}$/.test(r)){e.next=3;break}return e.abrupt(\"return\",Promise.reject(t.formatMessage({id:\"neteco.pvms.stationInfo.addStation.userPhone.invalid\"})));case 3:return e.next=5,J({resId:o,phone:r});case 5:if(!e.sent){e.next=8;break}return e.abrupt(\"return\",Promise.resolve());case 8:return e.abrupt(\"return\",Promise.reject(t.formatMessage({id:\"neteco.pvms.station.authorization.applay.warning\"})));case 9:case\"end\":return e.stop()}}),e)}))),function(e,t){return O.apply(this,arguments)})}]:[{required:!0},{validator:(E=me(ue().mark((function e(n,r){var i;return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=A(r,t))){e.next=3;break}return e.abrupt(\"return\",Promise.reject(i));case 3:return e.next=5,J({resId:o,email:r});case 5:if(!e.sent){e.next=8;break}return e.abrupt(\"return\",Promise.resolve());case 8:return e.abrupt(\"return\",Promise.reject(t.formatMessage({id:\"neteco.pvms.station.authorization.applay.warning\"})));case 9:case\"end\":return e.stop()}}),e)}))),function(e,t){return E.apply(this,arguments)})}],function(e){if(Array.isArray(e))return ye(e)}(M)||function(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}(M)||ve(M)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}())}),s.createElement(\"div\",{className:\"connect-form-item-dom\"},s.createElement(m.Z,{placeholder:f,className:\"apply-connect-input\"}),s.createElement(r.Z,{title:t.formatMessage({id:\"neteco.pvms.station.authorization.people.phone.tip\"})},s.createElement(\"i\",{className:\"icon-questionmark-circle-lined\"})))),s.createElement(g.Z.Item,ce({label:t.formatMessage({id:\"neteco.pvms.station.authorization.time\"}),required:!0,name:\"applyDuration\",initialValue:u},xe,{labelAlign:\"left\"}),s.createElement(v.ZP.Group,{onChange:function(e){d(e.target.value)}},s.createElement(v.ZP.Button,{value:ee},t.formatMessage({id:te})),s.createElement(v.ZP.Button,{value:ie},t.formatMessage({id:oe})),s.createElement(v.ZP.Button,{value:ne},t.formatMessage({id:re})),s.createElement(v.ZP.Button,{value:ae},t.formatMessage({id:se})))),s.createElement(g.Z.Item,ce({className:\"note-form-item\",label:t.formatMessage({id:\"ncoFixKpi.columns.remark\"}),name:\"note\"},xe,{labelAlign:\"left\"}),s.createElement(be,{showCount:!0,maxLength:200,placeholder:t.formatMessage({id:\"com.huawei.neteco.swm.ui.edit.description.conmtent\"})}))),s.createElement(\"div\",null,t.formatMessage({id:\"neteco.pvms.station.authorization.foot.tip\"})))};var Ce=n(80770),Te=n(93706),Ae=n(4342),Ee=n(23712);const Oe=(0,Te.ZP)((function(e){const[t,n]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!0),[g,v]=(0,s.useState)(!1),[y,b]=(0,s.useState)(),S=(0,s.useContext)(f.X),{operationId:x,targetId:w,targetType:C,children:T,onClick:A,type:E,buttonType:O,useDp:M,title:P,sceneId:D,onNoAuth:I,...N}=e,_=(0,d.kJ)(x)?x:[x];(0,s.useEffect)((()=>{j().then((e=>{n(!!I||e)})),p.isRestrictedOperation(_,(null==S?void 0:S.roles)||[]).then(m)}),[]);const j=async()=>(0,h.agq)(_)||(0,d.xb)(e.operationId),k=async t=>{const{targetType:n,targetId:r,intl:i,onClick:o,onNoAuth:s}=e;if(u&&n&&r){var l;if((0,Ae.EV)())return void(await p.InstallerIsAuthorized(r,_)?o(t):(s&&s(),!s&&(0,Ce.CD)((0,Ee.jsxs)(\"div\",{children:[i.formatMessage({id:\"neteco.pvms.station.unauthorized.tenantToinstaller.tip\"}),(0,Ee.jsxs)(\"div\",{className:\"detail-paths\",children:[(0,Ee.jsx)(\"p\",{children:i.formatMessage({id:\"neteco.pvms.station.unauthorized.tenantToinstaller.web.tip\"})}),(0,Ee.jsx)(\"p\",{children:i.formatMessage({id:\"neteco.pvms.station.unauthorized.tenantToinstaller.app.tip\"})})]})]}))));const n=await p.isAuthorizedBySwitch();if(null==n||null===(l=n.data)||void 0===l||!l.result)return void e.onClick(t);if(r.length>1)return void(0,Ce.CD)(e.intl.formatMessage({id:\"neteco.pvms.crossStation.onlyOneSelected\"}));const c=await p.getStationDn(e.targetId[0]),u={resIds:[null==c?void 0:c.dn],statusIds:[0,1]};b(null==c?void 0:c.dn);const[f,h]=await(0,d.AM)(p.isAuthorized(u));if(\"alarm\"===D&&f&&null!=f&&f.responseJSON){const{exceptionId:e}=f.responseJSON;return void(\"UA.00111101\"===e&&(0,Ce.jT)(i.formatMessage({id:\"neteco.pvms.alarm.table.stationName.noPermission\"}),i,i.formatMessage({id:\"common.message.failure\"})))}if(!h||!h.length)return void v(!0);switch(h[0].statusId){case 1:return void e.onClick(t);case 0:return void(0,Ce.ST)(e.intl.formatMessage({id:\"neteco.pvms.station.authorization.modal.plant.check\"}),(()=>{neteco.microApp.jump({url:\"/pvmswebsite/assets/build/cloud.html#/settings/station-management/authorizationManagement\",props:{urlFrom:\"drawer\"}}),a.Z.destroyAll()}));default:return void v(!0)}}e.onClick(t)};if(!t)return null;const L=M?c.Z:r.Z;return(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(L,{title:e.title,placement:e.placement||\"top\",children:\"switch\"===E?(0,Ee.jsx)(i.Z,{onClick:k,...N,children:e.children}):\"icon\"===E?(0,Ee.jsx)(\"span\",{className:\"auth-button-icon\",onClick:k,...N,children:e.children}):M?(0,Ee.jsx)(l.Z,{onClick:k,...N,type:E,children:e.children}):(0,Ee.jsx)(o.Z,{onClick:k,...N,type:E,children:e.children})}),(0,Ee.jsx)(we,{showModal:g,hideModal:v,targetId:y,isChinaRegion:(0,Ae.jA)(),intl:e.intl,instanceId:\"smartpvms\"})]})}))},61141:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>s});var r=n(24301),i=n(56687),o=n(93706),a=n(23712);const s=(0,o.ZP)((e=>(0,a.jsx)(r.Z,{overlayStyle:{minWidth:400},placement:e.placement,title:(0,a.jsxs)(\"div\",{className:\"neteco-income-tip\",children:[(0,a.jsx)(\"p\",{children:e.intl.formatMessage({id:\"neteco.income.tip1\"})}),(0,a.jsx)(\"p\",{children:e.intl.formatMessage({id:\"neteco.income.tip2\"})}),(0,a.jsx)(\"p\",{children:e.intl.formatMessage({id:\"neteco.income.tip3\"})}),(0,a.jsx)(\"p\",{children:e.intl.formatMessage({id:\"neteco.income.tip4\"})})]}),children:(0,a.jsx)(i.Z,{className:\"icon-dp-alert-hints-lined\"})})))},60503:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>s});var r=n(88391),i=n(93706),o=n(23712);class a extends r.Component{render(){const{intl:e}=this.props;return(0,o.jsxs)(\"div\",{className:\"access-denied-page\",style:{minWidth:\"100%\",width:\"100%\"},children:[(0,o.jsx)(\"img\",{src:\"data:image/png;base64,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\"}),(0,o.jsx)(\"h1\",{children:e.formatMessage({id:\"neteco.pvms.ajax.noFound.1\"})})]})}}const s=(0,i.ZP)(a)},55778:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>s});var r=n(88391),i=n(23712);let o=null;class a extends r.Component{constructor(){super(...arguments),this.unMountMicroApp=()=>{o&&(o.unmount(),o=null)}}componentDidMount(){const{name:e,entry:t,container:n,otherProps:r={}}=this.props;this.unMountMicroApp(),o=window.loadMicroApp({name:e,entry:t,container:n,props:{...r}})}render(){const{container:e}=this.props,t=e.replace(\"#\",\"\");return(0,i.jsx)(\"div\",{className:\"pvms-qiankun-container\",id:t})}}const s=a},43986:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>He});var r=n(21499),i=n(33670),o=n(52883),a=n(59516),s=n(37920),l=n.n(s),c=n(88391),u=n(93706),d=n(55534),p=n.n(d),f=n(80770),h=n(31483),m=n(4905),g=n(44184),v=n(20178),y=n(20928),b=n(90338),S=n(49453);const{neteco:x}=window,w=(e,t)=>{if(!(0,g.xb)(t))return t},C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise(((i,o)=>{const a={url:e,dataType:\"json\",data:JSON.stringify(t,r?w:void 0),contentType:\"application/json\",timeout:n};x.request.post(a).done((e=>{i(e)})).fail((e=>{o(e)})).catch((e=>{S.F.catch(e)}))}))};var T=n(80067),A=n(37825),E=n(64218);const O=(e,t)=>!e&&!t||(0,E.B5)(e)&&\"/\"===t[0],M=(e,t)=>(0,E.jE)(e)||\"nativeMeDn\"===t,P=(e,t,n,r,i)=>{var o,a,s,l;const c=M(e)&&t&&t[0]||\"\",u=((e,t)=>!O(e,t)&&!M(e))(e,t)&&t||[],d=!(0,g.xb)(i.occurTime)&&i.occurTime.begin&&i.occurTime.end,p=!(0,g.xb)(i.sort)&&i.sort.field&&i.sort.order;let f={meName:null===(o=i.stationName)||void 0===o?void 0:o.trim(),alarmId:null===(a=i.alarmId)||void 0===a?void 0:a.trim(),alarmName:null===(s=i.alarmName)||void 0===s?void 0:s.trim(),esn:null===(l=i.esn)||void 0===l?void 0:l.trim(),sort:p?i.sort:void 0,occurUTC:d?i.occurTime:void 0,devMocID:i.devMocID!==A.Y?i.devMocID:void 0,originSystemName:r===T.MP.system?\"OSS\":void 0};return(0,g.xb)(n)?f={...f,nativeMeDn:c,nativeMoDn:u}:f[n]=\"nativeMeDn\"===n?t[0]:t,f},D=()=>{const e=window.location.hash.split(\"?\");var t;return 2===e.length?null===(t=e[1].split(\"&\").filter((e=>e.includes(\"alarmLevel\")||e.includes(\"alarm-level\")))[0])||void 0===t?void 0:t.split(\"=\")[1]:null},I=()=>{D()&&(window.location.hash=window.location.hash.replace(/\\?alarmLevel=.*/,\"\").replace(/\\?alarm-level=.*/,\"\"))};class N{constructor(e){this.baseUrl=\"/rest/pvms\",this.domainType=e}query(e,t){const{deviceDn:n,mocId:r,dnType:i,dataType:o,alarmType:a,companyDn:s}=t,l={dataType:o,companyDn:s,domainType:this.domainType,pageNo:e.pageNo,pageSize:e.pageSize,severity:(0,g.xb)(e.severity)?void 0:e.severity,...P(r,n,i,a,e)};return C(`${this.baseUrl}/fm/v1/query`,l,6e4)}getAlarmTotal(e,t){const{deviceDn:n,mocId:r,dnType:i,dataType:o,alarmType:a,companyDn:s}=t,l={dataType:o,companyDn:s,domainType:this.domainType,pageNo:e.pageNo,pageSize:e.pageSize,severity:(0,g.xb)(e.severity)?void 0:e.severity,...P(r,n,i,a,e)};return C(\"/rest/pvms/fm/v1/query/alarm-total\",l)}clear(e,t){const n={domainType:this.domainType,csns:e,alarmOperation:{operationType:\"CLEAR_WEB\"},originSystemName:t===T.MP.system?\"OSS\":void 0};return C(`${this.baseUrl}/fm/v1/operation-job`,n)}updateMaintExperience(e,t,n,r){const i={domainType:this.domainType,dataType:n,csns:[e],originSystemName:r===T.MP.system?\"OSS\":void 0,alarmOperation:{operationType:\"COMMENT\",commentContent:t}};return C(`${this.baseUrl}/fm/v1/operation-job`,i,3e4,!1)}export(e,t,n){const r=l()().startOf(\"day\").valueOf(),i={csns:e,dataType:t,domainType:this.domainType,originSystemName:n===T.MP.system?\"OSS\":void 0,clientTimeZone:(0,b.Z)(r)};return C(`${this.baseUrl}/fm/v1/export`,i)}exportAll(e,t){const{deviceDn:n,mocId:r,dnType:i,dataType:o,alarmType:a,companyDn:s}=t,c=l()().startOf(\"day\").valueOf(),u={dataType:o,companyDn:s,domainType:this.domainType,severity:(0,g.xb)(e.severity)?void 0:e.severity,clientTimeZone:(0,b.Z)(c),...P(r,n,i,a,e)};return C(`${this.baseUrl}/fm/v1/exportall`,u)}downloadExcelFile(e,t,n){const r={fileId:e,dataType:t,domainType:this.domainType},i=n===T.MP.system?\"OSS\":void 0;i&&(r.originSystemName=i),(0,y.Z)(`${this.baseUrl}/fm/v1/export/download`,r)}deleteFile(e,t,n){let r=`${this.baseUrl}/fm/v1/export/delete?taskID=${e}\\n      &domainType=${this.domainType}&dataType=${t}`;const i=n===T.MP.system?\"OSS\":void 0;return i&&(r+=`${r}&originSystemName=${i}`),(0,S.IV)(r)}async loadDownloadLists(e,t){let n=`${this.baseUrl}/fm/v1/export/tasks?domainType=${this.domainType}&dataType=${e}`;const r=t===T.MP.system?\"OSS\":void 0;r&&(n+=`${n}&originSystemName=${r}`);const[i,o]=await(0,g.AM)((0,S.U2)(n));return i||null==o||!o.success?[]:(o.data||[]).map((e=>({taskId:e.taskID,fileId:e.fileID,createTime:l()(e.createTime),taskStatus:e.progress,taskName:e.taskName}))).sort(((e,t)=>t.createTime-e.createTime))}getDevType(){return(0,S.Sg)(`${this.baseUrl}/fm/v1/devtypes?domainType=${this.domainType}`)}async getAlarmDetailExt(e,t,n){const r={csns:[e],domainType:this.domainType,dataType:t,originSystemName:n===T.MP.system?\"OSS\":void 0},[i,o]=await(0,g.AM)(C(`${this.baseUrl}/fm/v1/query/csns`,r));return i||!o.success||(0,g.xb)(o.data)?{}:o.data[0]}async getAlarmDefectInfo(e){const[t,n]=await(0,g.AM)((0,S.U2)(`${this.baseUrl}/web/alarm/v1/currentalarm?csns=${e}`));return t||!n.success||(0,g.xb)(n.data)?n.success||\"isShareStation\"!==n.data?{}:{isShareStation:!0}:n.data}saveDefect(e){delete e.mainHead;const{submit:t,recipient:n,csn:r,operationDesc:i,...o}=e,a={defectInfo:{...o,csn:r},process:{recipient:n,operation:t,operationDesc:i,isPass:\"true\"}};return C(`${this.baseUrl}/web/defect/v1`,a)}importFile(e){const t=new FormData,{file:n}=e;return n.forEach((n=>{t.append(\"file\",n),t.append(\"serviceId\",e.serviceId),t.append(\"fiId\",e.fiId)})),(0,S.cd)(`${this.baseUrl}/web/defect/v1/uploadFile`,t)}processAuthority(e){return C(`${this.baseUrl}/web/defect/v1/processauthority`,{...e})}async loadNcoDefectSelectUser(e){const[t,n]=await(0,g.AM)(C(`${this.baseUrl}/web/defect/v1/getTaskUser`,{...e}));if(t||!n.success||(0,g.xb)(n.data))return{list:[],total:0,page:1,pageSize:10};const{list:r,total:i}=n.data.data;r.forEach((e=>{e.itemId=e.userid}));const{page:o,pageSize:a}=e;return{list:r,total:i,page:o,pageSize:a}}}var _=n(45258),j=n(32449),k=n(70535),L=n(17489),R=n(41541),Z=n(62073),B=n(33734),F=n(49100),z=n(23712);const{TextArea:V}=Z.Z;class H extends c.Component{constructor(e){super(e),this.getValue=e=>e||\"--\",this.dealShowData=e=>e.trim().replace(/\\r/g,\"\").split(\"\\n\").map((e=>e.replace(/^[0-9]+\\.\\s*/,\"\"))).filter((e=>e)),this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.showError=e=>{o.Z.error({top:80,description:e||this.intlMessage(\"common.message.failure\")})},this.setLoadingStatus=(e,t)=>{this.setState((n=>{const{btnLoading:r}=n;return r[e]=t,{btnLoading:r}}))},this.onClickDefect=()=>{this.setLoadingStatus(\"defect\",!0);const{alarmInfo:e,openAlarmDefect:t}=this.props;t(e,(()=>this.setLoadingStatus(\"defect\",!1)))},this.canShowDefect=()=>{const{domainType:e,alarmType:t,alarmInfo:n}=this.props;return!T.MH.includes(n.mocId)&&e===T.Yn.ocSolar&&t===T.MP.device&&(0,a.lVp)(a.IPK)},this.getFooter=()=>{const{dataType:e,closeModal:t,alarmInfo:n,alarmType:r}=this.props,{btnLoading:i}=this.state,o=r===T.MP.system?a.J8H:a.B2d,s=(0,a.lVp)(o)&&e===T.ye.current;return(0,z.jsxs)(\"div\",{className:\"detail-footer\",children:[s&&(0,z.jsx)(F.Z,{operationId:o,targetId:[n.nativeMeDn],targetType:\"plant\",intl:this.props.intl,onClick:()=>this.props.clearAlarm(n.csn),sceneId:\"alarm\",children:this.intlMessage(\"neteco.pvms.alarmMgt.clearAlarm.btn\")}),this.canShowDefect()&&e===T.ye.current&&(0,z.jsx)(R.Z,{loading:i.defect,onClick:this.onClickDefect,children:this.intlMessage(\"neteco.pvms.alarmMgt.toDefect.mes\")}),(0,z.jsx)(R.Z,{onClick:t,type:\"primary\",children:this.intlMessage(\"neteco.pvms.close\")})]})},this.getClearType=e=>e||0===e?this.intlMessage(`neteco.pvms.alarmMgt.clearType.${e}.fie`):\"--\",this.getReasonId=e=>e&&-1!==e?e:\"--\",this.getAllBasicElement=()=>{const{alarmInfo:e,alarmType:t,dataType:n,domainType:r,searchConfigs:i,detailConfigs:o}=this.props,{searchName:a={}}=i;let s={alarmName:{title:this.intlMessage(\"neteco.pvms.intelAlarm.alarmName.name\"),getValue:()=>this.getValue(e.alarmName),auth:!0},stationName:{title:a.title||this.intlMessage(\"neteco.pvms.alarmMgt.detail.stationName.fie\"),getValue:()=>this.getValue(e.meName),auth:!0},deviceName:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.deviceName.fie\"),getValue:()=>this.getValue(e.devNameStr),auth:t===T.MP.device},deviceType:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.deviceType.fie\"),getValue:()=>this.getValue(e.devTypeStr),auth:t===T.MP.device},clearTime:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.clearTime.fie\"),getValue:()=>this.getValue(e.clearTimeStr),auth:n===T.ye.history},clearType:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.clearType.fie\"),getValue:()=>this.getClearType(e.clearType),auth:n===T.ye.history},reasonId:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.reasonID.fie\"),getValue:()=>this.getReasonId(e.reasonId),auth:!0},alarmId:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.alarmID.fie\"),getValue:()=>this.getValue(e.alarmId),auth:!0},alarmType:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.alarmType.fie\"),getValue:()=>this.getValue(this.state.eventType),auth:!0},alarmLevel:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.level.fie\"),getValue:()=>e.severity?this.intlMessage(`neteco.pvms.intelAlarm.alarmLev.${T.Tx[e.severity]}`):\"--\",auth:!0},occurTime:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.occurTime.fie\"),getValue:()=>this.getValue(e.occurTimeStr),auth:!0},occurrenceTimes:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.occurrenceTimes.fie\"),getValue:()=>{var t;return this.getValue(null!==(t=e.count)&&void 0!==t?t:1)},auth:this.props.domainType===T.Yn.ocSolar},moi:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.moi.fie\"),getValue:()=>this.getValue(e.moi),auth:r!==T.Yn.charge},toDefectStatus:{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.toDefectStatus.fie\"),getValue:()=>this.getValue(this.state.defectStatus),auth:this.canShowDefect()}};return(0,g.xb)(o)||(s={...s,...o.customFileds}),s},this.defaultDisplayCols=[\"alarmName\",\"stationName\",\"deviceName\",\"deviceType\",\"clearTime\",\"clearType\",\"reasonId\",\"alarmId\",\"alarmType\",\"alarmLevel\",\"occurTime\",\"occurrenceTimes\",\"moi\",\"toDefectStatus\"],this.getAlarmDetail=()=>{const{fileds:e=[],span:t=[]}=this.props.detailConfigs,n=this.getAllBasicElement(),r=((0,g.xb)(e)?this.defaultDisplayCols:e).map((e=>n[e])).filter((e=>e.auth));let i=[];for(let e=0;e<r.length;e+=2)i.push(r.slice(e,e+2));return(0,z.jsxs)(\"div\",{className:\"alarm-detail-base-info\",children:[(0,z.jsx)(k.Z,{className:\"basic\",children:(0,z.jsx)(L.Z,{span:12,children:this.intlMessage(\"neteco.pvms.alarmMgt.detail.basic.fie\")})}),i.map(((e,n)=>(0,z.jsx)(k.Z,{children:e.map(((e,r)=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(L.Z,{span:t[0]||4,children:e.title},`col-title-${n}-${r}`),(0,z.jsx)(L.Z,{span:t[1]||8,children:e.getValue(this.props.alarmInfo)},`col-value-${n}-${r}`)]})))},`detail-basic-row${n}`)))]})},this.getColums=()=>[{title:this.intlMessage(\"neteco.pvms.device.di.scheduling.no\"),key:\"id\",dataIndex:\"id\",width:\"4rem\"},{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.reason.fie\"),key:\"reason\",dataIndex:\"reason\",ellipsis:!1},{title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.suggestion.fie\"),key:\"repair\",dataIndex:\"repair\",ellipsis:!1}],this.getTableData=()=>{var e;const{suggestion:t,newSuggestion:n}=this.state;let r=[],i=[];return(0,g.xb)(n)?(r=[t.reason],i=[t.repair]):(r=n.newReason||[],i=n.newRepair||[]),null===(e=r)||void 0===e?void 0:e.map(((e,t)=>({id:t+1,reason:e,repair:i[t]})))},this.getSuggestion=()=>{const e=this.getColums(),t=this.getTableData();return(0,z.jsx)(\"div\",{className:\"suggestion\",children:(0,z.jsx)(B.Z,{columns:e,dataSource:t,pagination:!1,className:\"suggestion_table\"})})},this.getSystemAlarmLink=e=>{const{neteco:t}=window,n=\"zh-cn\"!==t.i18n.getLocale()?\"en-us\":\"zh-cn\";return`/hedex/hedex.do?lib=DP_${n.split(\"-\")[0]}&id=alarm_detail_100000_${e}&locale=${n}`},this.onEditExperience=()=>{this.setState({isEditExperiment:!0}),this.tempSuggestion=this.state.maintExperience},this.onExperienceCancel=()=>{this.setState({isEditExperiment:!1,maintExperience:this.tempSuggestion})},this.onExperienceSave=()=>{const{alarmInfo:e,alarmMgtService:t,dataType:n,alarmType:r}=this.props;t.updateMaintExperience(e.csn,this.state.maintExperience,n,r).then((()=>{this.setState({isEditExperiment:!1}),this.tempSuggestion=\"\"})).catch((()=>{this.showError()}))},this.getExperience=()=>{const e=this.props.alarmType===T.MP.system?a.IVT:a.Iff;return(0,z.jsxs)(\"div\",{className:\"experience\",children:[this.state.isEditExperiment?(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(\"div\",{className:\"btn\",children:[(0,z.jsx)(R.Z,{size:\"middle\",onClick:this.onExperienceCancel,children:this.intlMessage(\"common.button.cancel\")}),(0,z.jsx)(R.Z,{size:\"middle\",onClick:this.onExperienceSave.bind(this),children:this.intlMessage(\"neteco.pvms.save\")})]})}):(0,z.jsx)(\"div\",{className:\"btn\",children:(0,a.lVp)(e)&&(0,z.jsx)(\"span\",{className:\"icon icon-feedback-lined\",onClick:this.onEditExperience})}),(0,z.jsx)(V,{placeholder:this.intlMessage(\"neteco.pvms.alarmMgt.detail.experience.holder.mes\"),autoSize:{minRows:10,maxRows:10},disabled:!this.state.isEditExperiment,value:this.state.maintExperience,onChange:this.onChangeExperience.bind(this),showCount:!0,maxLength:500})]})},this.state={isEditExperiment:!1,maintExperience:\"\",suggestion:{reason:\"\",repair:\"\"},defectStatus:\"\",eventType:\"\",btnLoading:{defect:!1}},this.tempSuggestion=\"\"}componentDidMount(){this.props.setRefreshState(!1);const{alarmInfo:e,alarmMgtService:t}=this.props,{csn:n}=e;t.getAlarmDetailExt(n,this.props.dataType,this.props.alarmType).then((e=>{this.setState({suggestion:{reason:null==e?void 0:e.causes,repair:null==e?void 0:e.repairAction},newSuggestion:{newReason:null==e?void 0:e.newCauses,newRepair:null==e?void 0:e.newRepairAction},eventType:null==e?void 0:e.eventTypeStr,maintExperience:null==e?void 0:e.comment,defectStatus:null==e?void 0:e.defect})}))}componentWillUnmount(){this.props.setRefreshState(!0),this.props.closeModal(),this.setState=()=>{}}render(){const{TabPane:e}=j.Z;return(0,z.jsx)(_.Z,{className:\"nco-alarm-detail-modal\",id:\"alarm-detail-modal-id\",visible:!0,onCancel:this.props.closeModal,footer:this.getFooter(),centered:!0,maskClosable:!1,destroyOnClose:!0,width:\"60rem\",title:this.intlMessage(\"neteco.pvms.alarmMgt.detail.tit\"),getContainer:!1,children:(0,z.jsxs)(j.Z,{defaultActiveKey:\"1\",onChange:this.onChangeTabs,children:[(0,z.jsx)(e,{tab:this.intlMessage(\"neteco.pvms.alarmMgt.alarmDetail.men\"),children:this.getAlarmDetail()},\"basic\"),(0,z.jsx)(e,{tab:this.intlMessage(\"neteco.pvms.alarmMgt.suggestion.men\"),children:this.getSuggestion()},\"suggestion\"),(0,z.jsx)(e,{tab:this.intlMessage(\"neteco.pvms.alarmMgt.experience.men\"),children:this.getExperience()},\"experience\")]})})}onChangeExperience(e){this.setState({maintExperience:e.target.value})}}H.defaultProps={closeModal:A.mz,clearAlarm:A.mz,openAlarmDefect:A.mz,setRefreshState:A.mz};const U=(0,u.ZP)(H,{forwardRef:!0});var G=n(57350),Y=n(90701),W=n(2326),K=n(51523),q=n.n(K),Q=n(55751),X=n(31251),J=n(13528);const{iUnescape:$}=window.neteco.util;class ee extends c.Component{constructor(e){super(e),this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.setTableHeight=q()((()=>{const{offsetHeight:e}=this.props.tableConfigs;let t=0;const n=document.querySelector(`#${this.props.domId}`)?`#${this.props.domId} #alarm-manage-container-id`:\"#alarm-manage-container-id\";t=(0,Q.h)(n,e||270),this.setState({tableHeight:t})}),300),this.getTableRowSelection=()=>({type:\"checkBox\",selectedRowKeys:this.props.selectedRowKeys,onChange:(e,t)=>{this.props.setSelectedRowKey(e,t)}}),this.clearSelectedRows=()=>{this.props.setSelectedRowKey([],[])},this.onPageChange=(e,t)=>{this.clearSelectedRows(),this.props.setSearchConditions({pageNo:e,pageSize:t})},this.toStation=e=>{(0,g.cW)(`/pvmswebsite/assets/build/index.html#/view/redirect/${e}`)},this.operationElement=(e,t)=>{const{domainType:n,alarmType:r}=this.props,i=(0,a.lVp)(a.IPK)&&n===T.Yn.ocSolar&&r===T.MP.device,o=r===T.MP.system?a.J8H:a.B2d;return this.setState({showOperation:(0,a.lVp)(o)||i}),(0,z.jsxs)(\"div\",{className:\"operation-ceil\",children:[(0,z.jsx)(F.Z,{type:\"icon\",onClick:()=>{this.props.clearAlarm(t.csn)},operationId:o,targetId:[t.nativeMeDn],targetType:\"plant\",intl:this.props.intl,sceneId:\"alarm\",title:this.intlMessage(\"neteco.pvms.alarmMgt.clearAlarm.btn\"),children:(0,z.jsx)(\"i\",{className:\"icon-btn icon-alarm-clear-lined\"})}),i&&(0,z.jsx)(Y.Z,{title:this.intlMessage(\"neteco.pvms.alarmMgt.toDefect.mes\"),children:(0,z.jsx)(\"i\",{className:\"icon-btn icon-alarm-todefect-lined\",onClick:()=>{this.props.openAlarmDefect(t)}})})]})},this.alarmDetail=e=>{this.props.openAlarmDetail(e)},this.allColumns=()=>{const{scroll:e,alarmType:t,dataType:n}=this.props,{searchName:r={}}=this.props.searchConfigs,i=!(t===T.MP.system&&n===T.ye.history);let o={severity:{title:this.intlMessage(\"neteco.pvms.alarmMgt.column.alarmLevel.tab\"),dataIndex:\"severity\",key:\"severity\",sorter:i,showSorterTooltip:!1,render:e=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(\"i\",{className:`icon icon-alarm-${T.Tx[e]}-filled`}),this.intlMessage(`neteco.pvms.intelAlarm.alarmLev.${T.Tx[e]}`)]})},stationName:{title:r.title||this.intlMessage(\"neteco.pvms.alarmMgt.search.stationName.fie\"),dataIndex:r.dataIndex||\"meName\",key:r.dataIndex||\"meName\",ellipsis:!0,render:(e,t)=>this.state.isSolar&&t.rightFlag?(0,z.jsx)(\"a\",{onClick:()=>this.toStation(t.nativeMeDn),children:$(e)}):$(e)},devType:{title:this.intlMessage(\"neteco.pvms.alarmMgt.search.devMocID.fie\"),dataIndex:\"devTypeStr\",key:\"devType\",ellipsis:!0},devName:{title:this.intlMessage(\"neteco.pvms.alarmMgt.column.deviceName.tab\"),dataIndex:\"devNameStr\",key:\"devName\",ellipsis:!0,width:200,render:e=>$(e)},devEsn:{title:this.intlMessage(\"ncoPvTable.column.sn\"),dataIndex:\"esn\",key:\"esn\",ellipsis:!0},alarmID:{title:this.intlMessage(\"neteco.pvms.alarmMgt.column.alarmID.tab\"),dataIndex:\"alarmId\",key:\"alarmId\",ellipsis:!0},alarmName:{title:this.intlMessage(\"neteco.pvms.alarmMgt.column.alarmName.tab\"),dataIndex:\"alarmName\",key:\"alarmName\",ellipsis:!0,render:(e,t)=>(0,z.jsx)(\"a\",{onClick:()=>this.alarmDetail(t),children:$(e)})},occurTime:{title:this.intlMessage(\"neteco.pvms.alarmMgt.column.occurTime.tab\"),dataIndex:\"occurTimeStr\",key:\"occurTimeStr\",sorter:!0,showSorterTooltip:!1,ellipsis:!0,render:e=>null!=e?e:\"--\"},clearTime:{title:this.intlMessage(\"neteco.pvms.alarmMgt.column.clearTime.tab\"),dataIndex:\"clearTimeStr\",key:\"clearTimeStr\",sorter:!0,showSorterTooltip:!1,ellipsis:!0,render:e=>null!=e?e:\"--\"},clearType:{title:this.intlMessage(\"neteco.pvms.alarmMgt.column.clearType.tab\"),dataIndex:\"clearType\",key:\"clearType\",ellipsis:!0,render:e=>this.intlMessage(`neteco.pvms.alarmMgt.clearType.${e}.fie`)},operation:{title:this.intlMessage(\"common.label.action\"),key:\"operation\",width:136,render:this.operationElement,fixed:!!e&&\"right\"}};return(0,g.xb)(this.props.tableConfigs)||(o={...o,...this.props.tableConfigs.customColumns}),o},this.handleChange=(e,t,n)=>{var r;let{field:i,order:o}=n;this.props.setSearchConditions({sort:{field:null!==(r={occurTimeStr:\"occurTime\",clearTimeStr:\"clearTime\"}[i])&&void 0!==r?r:i,order:{ascend:\"ASC\",descend:\"DESC\"}[o]}})},this.buildColumns=()=>{const{alarmType:e,dataType:t,tableConfigs:{columns:n}}=this.props;let r=[];const i=this.allColumns();return n&&Array.isArray(n)?n.map((e=>i[e])):(r=e===T.MP.system&&t===T.ye.current?[i.severity,i.alarmID,i.alarmName,i.occurTime,this.state.showOperation&&i.operation].filter((e=>e)):e===T.MP.system&&t===T.ye.history?[i.severity,i.alarmID,i.alarmName,i.occurTime]:e===T.MP.device&&t===T.ye.current?[i.severity,i.stationName,i.devType,i.devName,i.devEsn,i.alarmID,i.alarmName,i.occurTime,this.state.showOperation&&i.operation].filter((e=>e)):e===T.MP.device&&t===T.ye.history?[i.severity,i.stationName,i.devType,i.devName,i.devEsn,i.alarmID,i.alarmName,i.clearType,i.clearTime,i.occurTime]:[],r)},this.showTotal=e=>{const{dataType:t,realTotalCount:n}=this.props,r=t===T.ye.history?\"5000\":this.intlMessage(\"neteco.pvms.num.20000.mes\"),i=t===T.ye.history&&n>5e3;return(0,z.jsxs)(\"div\",{children:[(0,z.jsx)(\"span\",{children:this.intlMessage(\"neteco.pvms.station.subarray.pagination.total\",{total:e})}),i&&(0,z.jsxs)(\"span\",{className:\"limit-mes\",children:[(0,z.jsx)(\"i\",{className:\"icon-about-lined\"}),(0,z.jsx)(\"span\",{children:this.intlMessage(\"neteco.pvms.alarmMgt.tableDataLimit.mes.new\",{0:(0,J.af)(r),1:(0,J.af)(n)})})]})]})},this.state={tableHeight:0,isSolar:!0,showOperation:!0}}componentDidMount(){this.setTableHeight(),window.addEventListener(\"resize\",this.setTableHeight),A.H0.includes((0,X.rC)())?this.setState({isSolar:!0}):this.setState({isSolar:!1})}componentWillUnmount(){window.removeEventListener(\"resize\",this.setTableHeight)}render(){const{pageCondition:e,tableData:t,scroll:n}=this.props;return(0,z.jsxs)(\"div\",{className:\"alarm-table\",id:\"alarm-table\",children:[(0,z.jsx)(B.Z,{loading:this.props.loading,scroll:{y:n?n.y:this.state.tableHeight,x:n&&n.x},size:\"middle\",rowKey:\"csn\",rowSelection:this.getTableRowSelection(),columns:this.buildColumns(),dataSource:t.list||[],onChange:this.handleChange,pagination:!1,zebra:!0}),(0,z.jsx)(G.Z,{size:\"small\",total:t.total||0,showSizeChanger:!0,showTotal:this.showTotal,current:(null==e?void 0:e.pageNo)||1,pageSize:(null==e?void 0:e.pageSize)||10,pageSizeOptions:[\"10\",\"20\",\"30\",\"50\",\"100\",\"200\"],onChange:this.onPageChange})]})}}ee.defaultProps={loading:!1,openAlarmDefect:A.mz,clearAlarm:A.mz,setSelectedRowKey:A.mz,setSearchConditions:A.mz};const te=(0,u.ZP)((0,W.EN)(ee));var ne=n(83862),re=n(92252),ie=n(56687);class oe extends c.Component{render(){return(0,z.jsxs)(\"div\",{className:\"search-item\",children:[this.props.label&&(0,z.jsx)(\"div\",{className:\"label\",children:this.props.label}),this.props.tooltipMessage&&(0,z.jsx)(Y.Z,{title:this.props.tooltipMessage,children:(0,z.jsx)(ie.Z,{className:\"icon-dp-alert-hint\"})}),(0,z.jsx)(\"div\",{className:\"item\",children:this.props.children})]})}}const{Option:ae}=re.Z;class se extends c.Component{constructor(e){super(e),this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.setSearchCondition=e=>{this.setState((t=>({searchCondition:{...t.searchCondition,...e}})))},this.onChangeDate=e=>{let t=null,n=null;var r,i;e&&(t=1e3*(null===(r=e[0])||void 0===r?void 0:r.unix()),n=1e3*(null===(i=e[1])||void 0===i?void 0:i.unix())),this.setSearchCondition({occurTime:{begin:t,end:n}})},this.getDeviceTypes=()=>{this.alarmMgtService.getDevType().then((e=>{e.success&&this.setState({devTypeList:e.data})}))},this.onSearch=()=>{this.props.setSearchConditions({...this.state.searchCondition,pageNo:1},!0)},this.onCalendarChange=(e,t,n)=>{const{range:r}=n;e?\"start\"===r?this.setState({clickedDate:e[0]}):this.setState({clickedDate:e[1]}):this.setState({clickedDate:null})},this.disabledOccurTime=e=>{const{clickedDate:t}=this.state;return!(this.props.dataType!==T.ye.history||!t||!e)&&Math.abs(l()(e).diff(t,\"months\"))>0},this.occurTimeRangePicker=()=>{let e=[];this.props.dataType===T.ye.history&&(e=[l()().subtract(1,\"day\").startOf(\"day\"),l()().endOf(\"day\")]);const t=[this.intlMessage(\"ncoPatrolSearchBar.label.startTime\"),this.intlMessage(\"ncoPatrolSearchBar.label.endTime\")];return(0,g.xb)(e)?(0,z.jsx)(ne.Z.RangePicker,{disabledDate:this.disabledOccurTime,suffixIcon:(0,z.jsx)(\"span\",{className:\"range-date icon-calendar-lined\"}),onChange:e=>this.onChangeDate(e),onCalendarChange:this.onCalendarChange,getPopupContainer:e=>e.parentElement||document.body,placeholder:t,showTime:!0},\"current-alarm-occur-time\"):(0,z.jsx)(ne.Z.RangePicker,{defaultValue:e,disabledDate:this.disabledOccurTime,suffixIcon:(0,z.jsx)(\"span\",{className:\"range-date icon-calendar-lined\"}),onChange:e=>this.onChangeDate(e),onCalendarChange:this.onCalendarChange,getPopupContainer:e=>e.parentElement||document.body,placeholder:t,showTime:!0},\"history-alarm-occur-time\")},this.searchElements=()=>{const{searchName:e={}}=this.props.searchConfigs;return{stationName:{key:\"stationName\",label:e.title||this.intlMessage(\"neteco.pvms.maintenance.alarmManagement.table.title1\"),element:(0,z.jsx)(Z.Z,{allowClear:!0,placeholder:e.title||this.intlMessage(\"neteco.pvms.alarmMgt.search.stationName.fie\"),onChange:q()((e=>this.setSearchCondition({stationName:e.target.value}))),autoComplete:\"off\"})},devMocID:{key:\"devMocID\",label:this.intlMessage(\"neteco.pvms.maintenance.alarmManagement.table.title2\"),element:(0,z.jsxs)(re.Z,{onChange:e=>this.setSearchCondition({devMocID:e}),defaultValue:A.Y,children:[(0,z.jsx)(ae,{value:A.Y,children:this.intlMessage(\"common.deviceTypes.0\")},A.Y),this.state.devTypeList.map((e=>(0,z.jsx)(ae,{value:e.mocId,children:e.desc},e.mocId)))]})},alarmId:{key:\"alarmId\",label:this.intlMessage(\"neteco.pvms.alarmMgt.search.aramId.fie\"),element:(0,z.jsx)(Z.Z,{allowClear:!0,placeholder:this.intlMessage(\"neteco.pvms.alarmMgt.search.aramId.fie\"),onChange:q()((e=>this.setSearchCondition({alarmId:e.target.value}))),autoComplete:\"off\"}),tooltipMessage:this.intlMessage(\"neteco.pvms.alarm.toolbar.alarmID.tooltip\")},devEsn:{key:\"esn\",label:this.intlMessage(\"ncoPvTable.column.sn\"),element:(0,z.jsx)(Z.Z,{allowClear:!0,placeholder:this.intlMessage(\"ncoPvTable.column.sn\"),onChange:q()((e=>this.setSearchCondition({esn:e.target.value.trim()}))),autoComplete:\"off\",className:\"esn\"}),tooltipMessage:this.intlMessage(\"neteco.pvms.alarm.toolbar.sn.tooltip\")},alarmName:{key:\"alarmName\",label:this.intlMessage(\"neteco.pvms.maintenance.alarmManagement.table.title3\"),element:(0,z.jsx)(Z.Z,{allowClear:!0,placeholder:this.intlMessage(\"neteco.pvms.alarmMgt.column.alarmName.tab\"),onChange:q()((e=>this.setSearchCondition({alarmName:e.target.value})),500),autoComplete:\"off\"})},occurTime:{key:\"occurTime\",label:this.intlMessage(\"neteco.pvms.maintenance.alarmManagement.table.title4\"),element:this.occurTimeRangePicker()},searchBtn:{key:\"searchBtn\",label:\"\",element:(0,z.jsx)(R.Z,{type:\"primary\",onClick:this.onSearch,children:this.intlMessage(\"common.button.search\")})}}},this.getSearchItems=()=>{const{mocId:e,deviceDn:t,dnType:n}=this.props,r=this.searchElements(),i=[r.alarmName,r.alarmId,r.occurTime,r.searchBtn];return[{condition:this.props.alarmType===T.MP.device&&X.MJ,column:r.devEsn},{condition:this.props.alarmType===T.MP.device&&(O(e,t)||M(e,n)),column:r.devMocID},{condition:this.props.alarmType===T.MP.device&&O(e,t),column:r.stationName}].forEach((e=>{null!=e&&e.condition&&i.unshift(e.column)})),i},this.state={devTypeList:[],searchCondition:{}},this.alarmMgtService=e.alarmMgtService}componentDidMount(){this.getDeviceTypes()}componentWillUnmount(){this.setState=A.mz}render(){return(0,z.jsx)(\"div\",{className:\"alarm-search-bar\",children:this.getSearchItems().map((e=>(0,z.jsx)(oe,{label:e.label,tooltipMessage:e.tooltipMessage,children:e.element},e.key)))})}}se.defaultProps={domainType:T.Yn.ocSolar,alarmType:T.MP.device};const le=(0,u.ZP)(se);var ce=n(41779),ue=n(36329),de=n(19988),pe=n(29266),fe=n(72286),he=n(78939),me=n(15694),ge=n(70250),ve=n.n(ge),ye=n(18206),be=n(5807),Se=n(53268);class xe extends c.Component{constructor(e){super(e),this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.onChangeSelectUser=e=>{let t=Array.isArray(e)?e[0]:e;const{getUserInfo:n}=this.props,{selectedRowKeys:r}=this.state;[r]===t.userid?(this.setState({selectedRowKeys:[]}),t={userName:\"\",userid:\"\"}):this.setState({selectedRowKeys:[t.userid]}),n(t)},this.changeTableCondition=e=>{let{dn:t=\"/\",userName:n=\"\",page:r=1,pageSize:i=10}=e;const{tableCondition:o}=this.state,a={...o,dn:t,userName:n,page:r,pageSize:i};this.setState({tableCondition:a}),this.loadDefectSelectUser(ve()(a))},this.selectTreeItem=e=>{const{tableCondition:t}=this.state;e&&this.changeTableCondition({...t,dn:e})},this.onChangePage=(e,t)=>{const{tableCondition:n}=this.state;this.changeTableCondition({...n,page:e,pageSize:t})},this.onChangeUserName=e=>{this.setState({filterUserName:e.target.value})},this.onSearchUserName=()=>{const{tableCondition:e,filterUserName:t}=this.state;this.changeTableCondition({...e,userName:t})},this.loadDefectSelectUser=e=>{const{alarmMgtService:t,hiddenInfo:n}=this.props,r={procKey:\"defect\",taskKey:\"defectWrite\",isCurrent:!1,isPass:\"true\",stationDn:n.stationDn};this.setState({isLoading:!0}),t.loadNcoDefectSelectUser({...e,...r}).then((e=>{this.setState({modalTableData:e,isLoading:!1})}))},this.getRowSelection=()=>({selectedRowKeys:this.state.selectedRowKeys,onChange:(e,t)=>{this.onChangeSelectUser(t)},type:\"radio\"}),this.getTreeProps=()=>{const{userCompany:e={}}=this.state,{moDn:t}=e;return{domain:\"organization-tree\",commonConfig:{loadingText:this.intlMessage(\"neteco.pvms.loading\"),slidingWindowSize:4,incrementalLoadOptions:{incrStep:50,initialSize:100,clickToSeeMoreText:this.intlMessage(\"neteco.pvms.inspect.history.viewMore\")},customizedFilterCondition:{EXCLUDE_SHARE_STATION:!0}},selectConfig:{selectCallbacks:[e=>{let{node:t}=e;const{elementDn:n}=t;this.selectTreeItem(n)}]},queryConfig:{level:\"COMPANY\",showSearch:!0,rootElementDn:t,useExternalRootElementDn:!0}}},this.getColumns=()=>[{title:this.intlMessage(\"neteco.pvms.gridParam.userName\"),dataIndex:\"userName\",key:\"userName\",align:\"center\",width:\"15rem\",sorter:!1},{title:this.intlMessage(\"neteco.pvms.userDialog.type\"),dataIndex:\"type\",key:\"userType\",align:\"center\",sorter:!1,width:\"15rem\",render:e=>0===e?this.intlMessage(\"neteco.pvms.gridParam.normalCount\"):this.intlMessage(\"neteco.pvms.gridParam.systemCount\")},{title:this.intlMessage(\"neteco.pvms.userDialog.status\"),dataIndex:\"adminLocked\",key:\"adminLocked\",align:\"center\",width:\"15rem\",sorter:!1,render:e=>(0,z.jsx)(\"span\",{style:{color:\"#1B8ADB\"},children:e?this.intlMessage(\"neteco.pvms.communicatPoint.forbiddenState\"):this.intlMessage(\"neteco.pvms.communicatPoint.enableState\")})}],this.state={isLoading:!1,userCompany:{},tableCondition:{dn:null,page:1,pageSize:10,sortOrder:\"ascend\",userName:\"\"},modalTableData:{list:[],total:0,page:1,pageSize:10},selectedRowKeys:[],filterUserName:\"\"},this.dispatchEvent=E.Nu}componentDidMount(){const{selectedValue:e}=this.props;be.Z.getCurrentCompany().then((e=>{if(!(0,g.xb)(e)){const{moDn:t}=e;this.setState({userCompany:e}),t&&this.dispatchEvent(\"reload_organization-tree_left_tree\",{targetDn:t,pageId:1})}}));const{userId:t,selectedUser:n}=e;n&&this.setState({selectedRowKeys:[t]})}componentWillUpdate(e,t){const{userCompany:n}=t;if(n){const{moDn:e}=n;this.dispatchEvent(\"organization-tree-reload-tree\",{rootElementDn:e})}}componentDidUpdate(e,t){const{selectedRowKeys:n,modalTableData:r}=this.state,{getUserInfo:i}=this.props;if(!(p()(r,t.modalTableData)||n&&n.length)){const{list:e}=r;this.setState({selectedRowKeys:[e[0].userid]}),i(e[0])}}componentWillUnmount(){this.setState=()=>{}}render(){const{userCompany:e={},isLoading:t,modalTableData:n}=this.state,{list:r,total:i,page:o,pageSize:a}=n,{moDn:s}=e,l=this.getTreeProps();return(0,z.jsxs)(\"div\",{className:\"nco-defect-select-user\",children:[(0,z.jsx)(L.Z,{span:6,children:s&&(0,z.jsxs)(\"div\",{className:\"nco-defect-select-user-tree\",children:[(0,z.jsx)(\"p\",{children:this.intlMessage(\"neteco.pvms.userDialog.domainChoice\")}),(0,z.jsx)(Se.Z,{...l})]})}),s&&(0,z.jsx)(L.Z,{span:18,children:(0,z.jsxs)(\"div\",{className:\"nco-defect-select-user-tabele\",children:[(0,z.jsxs)(\"div\",{className:\"nco-defect-select-user-tabele-filter\",children:[this.intlMessage(\"neteco.pvms.systemSetting.tuserName\"),(0,z.jsx)(Z.Z,{className:\"nco-defect-select-user-tabele-filter-input\",onPressEnter:this.onSearchUserName,onChange:this.onChangeUserName}),(0,z.jsx)(R.Z,{type:\"primary\",style:{marginLeft:\"1.5rem\"},onClick:this.onSearchUserName,children:this.intlMessage(\"common.button.search\")})]}),(0,z.jsx)(me.Z,{loading:t,showSorterTooltip:!1,rowKey:\"userid\",dataSource:r,columns:this.getColumns(),scroll:{y:380},size:\"small\",pagination:!1,onRow:e=>({onClick:()=>this.onChangeSelectUser(e)}),rowSelection:this.getRowSelection()}),(0,z.jsx)(G.Z,{style:{marginTop:\"1rem\"},size:\"small\",total:i,showSizeChanger:!0,showTotal:(0,ye.Z)(this.props.intl),current:o,pageSize:a,pageSizeOptions:[\"10\",\"20\",\"30\",\"50\",\"100\"],onChange:this.onChangePage})]})})]})}}const we=(0,u.ZP)(xe);var Ce=n(4342);const Te=pe.Z.Item,{TextArea:Ae}=Z.Z,{neteco:Ee}=window;class Oe extends c.Component{constructor(e){super(e),this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.showError=e=>{o.Z.error({top:80,description:e||this.intlMessage(\"common.message.failure\")})},this.chooseMainHead=()=>{this.setState({selectUserVisible:!0}),this.inputRef.current.blur()},this.setUserInfo=e=>{const{userid:t,userName:n}={...e};this.setState({chiefOwner:{userName:n,userId:t}})},this.getConfirmSelected=e=>{this.formRef.current.setFieldsValue({mainHead:e.userName}),this.selectUserCancel(),this.setState({selectedValue:{...e,selectedUser:!0}})},this.selectUserConfirm=()=>{const{hiddenInfo:e,chiefOwner:t}=this.state;t&&t.userId?this.alarmMgtService.processAuthority({processUserID:t.userId,userId:(0,Ce.n5)(),dnlist:e.stationDn}).then((e=>{e.success?this.getConfirmSelected(t):o.Z.warning(this.intlMessage(\"neteco.pvms.documentManage.isNotStationManager\"))})):this.getConfirmSelected(t)},this.selectUserCancel=()=>{this.setState({selectUserVisible:!1})},this.cancelCreateForm=e=>{e.preventDefault();const{onCancel:t}=this.props;this.formRef.current.resetFields(),t&&t()},this.handleSubmit=e=>{this.setState({loading:!0}),e.preventDefault();const{hiddenInfo:t,data:n,chiefOwner:r}=this.state,{userId:o}=r;this.formRef.current.validateFields().then((async e=>{this.alarmMgtService.saveDefect({...e,...t,userId:o,recipient:o,funType:\"add\"}).then((e=>{!0===e.success?this.setState({loading:!1},(()=>{n?this.alarmMgtService.importFile({...n,fiId:e.data.defectId}).then((e=>{e.success?i.Z.info({content:this.intlMessage(\"neteco.pvms.elimination.task.succeeded\")}):i.Z.error({content:`${this.intlMessage(\"neteco.pvms.elimination.task.succeeded\")}\\n                      ${this.intlMessage(\"neteco.pvms.stationInfo.addStation.updateFileFail\")}`})})):i.Z.info({content:this.intlMessage(\"neteco.pvms.elimination.task.succeeded\")}),this.props.onCancel()})):i.Z.error({content:this.intlMessage(\"neteco.pvms.inspect.addFailed\")})}))})).finally((()=>{this.setState({loading:!1})}))},this.initialValue=(e,t)=>{const n={deviceName:\"devNameStr\",stationName:\"meName\",deviceType:\"devTypeStr\"};return Object.keys(n).includes(t.key)?e&&e[n[t.key]]||\"\":e&&e[t.key]||\"\"},this.defectForm=[{name:this.intlMessage(\"neteco.pvms.partials.main.io.dm.heads.deviceName\"),key:\"deviceName\",value:\"\",required:!0,disabled:!1},{name:this.intlMessage(\"neteco.pvms.partials.main.io.intelligentDiagnose.stationName\"),disabled:!0,value:\"\",key:\"stationName\",required:!1},{name:this.intlMessage(\"neteco.pvms.partials.main.io.dm.heads.deviceTypeName\"),disabled:!0,value:\"\",key:\"deviceType\",required:!1},{name:this.intlMessage(\"neteco.pvms.partials.main.io.dm.heads.deviceVersion\"),disabled:!0,value:\"\",key:\"deviceVersion\",required:!1}],this.uploadProp=()=>({name:\"file\",headers:{authorization:\"authorization-text\"},multiple:!1,accept:\".xls',.xlsx,.doc,.docx,.zip,.rar,.jpg,.jpeg,.png,.bmp\",onRemove:()=>{this.setState({fileList:[]})},beforeUpload:e=>(this.setState({fileList:[e],uploading:!0,data:{file:[e],serviceId:\"4\"}}),!1),fileList:this.state.fileList}),this.formItemLayout=\"zh-CN\"===this.props.intl.locale?{labelCol:{span:10},wrapperCol:{span:12}}:{labelCol:{span:12},wrapperCol:{span:12}},this.formTextArea=\"zh-CN\"===this.props.intl.locale?{labelCol:{span:5},wrapperCol:{span:15}}:{labelCol:{span:6},wrapperCol:{span:15}},this.uploadElement=()=>(0,z.jsx)(Te,{className:\"nco-defect-form-upload\",name:\"fileType\",label:this.intlMessage(\"neteco.pvms.documentManage.file\"),...this.formTextArea,children:(0,z.jsx)(de.Z,{...this.uploadProp(),children:(0,z.jsx)(Y.Z,{className:\"span\",title:this.intlMessage(\"neteco.pvms.partials.main.io.dm.op.fileInfo\"),children:(0,z.jsxs)(R.Z,{children:[(0,z.jsx)(fe.Z,{}),(0,z.jsx)(he.Z,{id:\"neteco.pvms.superviseSetting.certManage.pleaseUpload\"})]})})})}),this.formRef=c.createRef(),this.inputRef=c.createRef(),this.alarmMgtService=this.props.alarmMgtService;const{record:t}=e;let n={};t&&(n={deviceName:t.devNameStr,stationDn:t.nativeMeDn,deviceDn:t.nativeMoDn,alarmId:t.alarmId,alarmName:t.alarmName,repairAction:t.repairAction,csn:t.csn}),this.state={loading:!1,hiddenInfo:n,chiefOwner:{userName:\"\",userId:\"\"},selectedValue:\"\"}}render(){const{record:e}=this.props,{selectUserVisible:t,selectedValue:n}=this.state;return(0,z.jsxs)(\"div\",{className:\"nco-defect-form-template\",children:[(0,z.jsxs)(pe.Z,{ref:this.formRef,children:[(0,z.jsx)(ue.ZP,{grid:{column:2},split:!0,dataSource:this.defectForm,renderItem:t=>(0,z.jsx)(ue.ZP.Item,{children:(0,z.jsx)(Te,{label:t.name,...this.formItemLayout,name:t.key,initialValue:this.initialValue(e,t),rules:[{required:t.required,message:this.intlMessage(\"neteco.pvms.register.pswMailCerificationCodeNull\")}],children:(0,z.jsx)(Z.Z,{placeholder:\"\",disabled:!0})})})}),this.uploadElement(),(0,z.jsx)(Te,{className:\"nco-defect-form-defectDesc\",label:this.intlMessage(\"neteco.pvms.partials.main.io.dm.heads.label.defectDesc\"),...this.formTextArea,name:\"defectDesc\",initialValue:e&&(e.defectDesc||e.alarmName)||\"\",rules:[{required:!0,message:this.intlMessage(\"neteco.pvms.register.pswMailCerificationCodeNull\")}],children:(0,z.jsx)(Ae,{rows:4,maxLength:1e3})}),(0,z.jsx)(ce.Z,{style:{marginBottom:\"1rem\"}}),(0,z.jsx)(Te,{className:\"nco-defect-form-mainHead\",label:this.intlMessage(\"neteco.pvms.partials.main.io.wf.task.mainHead\"),...this.formTextArea,name:\"mainHead\",rules:[{required:!0,message:this.intlMessage(\"neteco.pvms.register.pswMailCerificationCodeNull\")}],children:(0,z.jsx)(Z.Z,{placeholder:\"\",onFocus:this.chooseMainHead,ref:this.inputRef})}),(0,z.jsx)(Te,{className:\"nco-defect-form-preTaskOpDesc\",label:this.intlMessage(\"neteco.pvms.partials.main.io.wf.task.disposition\"),...this.formTextArea,name:\"operationDesc\",initialValue:e&&e.repairAction||\"\",rules:[{required:!0,message:this.intlMessage(\"neteco.pvms.register.pswMailCerificationCodeNull\")}],children:(0,z.jsx)(Ae,{rows:4,maxLength:1e3})}),(0,z.jsx)(Te,{children:(0,z.jsxs)(\"div\",{className:\"nco-defect-form-buttons\",children:[(0,z.jsx)(R.Z,{onClick:this.cancelCreateForm,children:(0,z.jsx)(he.Z,{id:\"common.button.cancel\"})}),(0,z.jsx)(R.Z,{type:\"primary\",htmlType:\"submit\",loading:this.state.loading,onClick:this.handleSubmit,children:(0,z.jsx)(he.Z,{id:\"neteco.pvms.submit\"})})]})})]}),(0,z.jsx)(_.Z,{title:this.intlMessage(\"neteco.pvms.userDialog.choose\"),visible:t,maskClosable:!1,width:\"70rem\",mask:!1,bodyStyle:{height:540,paddingTop:0},onOk:this.selectUserConfirm,onCancel:this.selectUserCancel,centered:!0,destroyOnClose:!0,children:(0,z.jsx)(we,{alarmMgtService:this.alarmMgtService,getUserInfo:this.setUserInfo,selectedValue:n,hiddenInfo:this.state.hiddenInfo,tableScrollParams:{y:375}})})]})}}Oe.defaultProps={onCancel:A.mz};const Me=(0,u.ZP)(Oe);class Pe extends c.Component{constructor(){super(...arguments),this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t)}render(){return(0,z.jsx)(\"div\",{className:\"nco-alarm-to-defect\",children:(0,z.jsx)(i.Z,{title:this.intlMessage(\"neteco.pvms.partials.main.io.dm.title.create\"),centered:!0,width:800,wrapClassName:\"nco-alarm-management-create-modal\",visible:!0,onCancel:this.props.closeModal,destroyOnClose:!0,footer:null,maskClosable:!1,children:(0,z.jsx)(Me,{onCancel:this.props.closeModal,record:this.props.alarmInfo,alarmMgtService:this.props.alarmMgtService})})})}}Pe.defaultProps={closeModal:A.mz};const De=(0,u.ZP)(Pe);var Ie=n(5776),Ne=n(69131),_e=n(39986);const{CheckableTag:je}=_e.Z;class ke extends c.Component{constructor(e){super(e),this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.clearSelectedTag=()=>{this.setState({selectedTags:[]})},this.handleChange=(e,t)=>{const{selectedTags:n}=this.state;I();const r=t?[...n,e]:n.filter((t=>t!==e));this.setState({selectedTags:r}),this.props.setSearchConditions({severity:r,pageNo:1})},this.state={selectedTags:[]}}componentDidMount(){this.props.alarmLevel&&this.setState({selectedTags:[this.props.alarmLevel]})}render(){const{alarmStatistic:e,dataType:t}=this.props,n=t===T.ye.current;return(0,z.jsx)(\"div\",{className:\"alarm-statistic\",children:Object.keys(T.Tx).map((t=>(0,z.jsx)(Y.Z,{title:this.intlMessage(`neteco.pvms.alarmMgt.level.${T.Tx[t]}.fie`),children:(0,z.jsxs)(je,{className:\"alarm-tag\",checked:this.state.selectedTags.indexOf(t)>-1,onChange:e=>this.handleChange(t,e),children:[(0,z.jsx)(\"i\",{className:`icon icon-alarm-${T.Tx[t]}-filled`}),(0,z.jsx)(\"span\",{className:\"num\",children:n?e[t]:this.intlMessage(`neteco.pvms.intelAlarm.alarmLev.${T.Tx[t]}`)})]},t)},t)))})}}ke.defaultProps={alarmStatistic:{1:\"--\",2:\"--\",3:\"--\",4:\"--\"},setSearchConditions:A.mz};const Le=(0,u.ZP)(ke,{forwardRef:!0});class Re extends c.Component{constructor(e){super(e),this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.onSwitchChange=e=>{sessionStorage.setItem(\"alarmRefresh\",e),this.setRefreshMenuState(e)},this.setRefreshMenuState=e=>{this.setState({refresh:e}),e?this.startRefresh():this.stopRefresh()},this.pauseRefresh=()=>{this.setState({refresh:!1}),this.stopRefresh()},this.reStartRefresh=()=>{\"true\"===sessionStorage.getItem(\"alarmRefresh\")&&this.props.dataType===T.ye.current&&(this.setState({refresh:!0}),this.startRefresh())},this.startRefresh=()=>{this.props.dataType===T.ye.current&&(this.timer=setInterval(this.props.setSearchConditions,3*Ne.v.alarmToolBar_refresh))},this.stopRefresh=()=>{clearInterval(this.timer)},this.statisticRef=c.createRef(),this.state={refresh:!1}}componentDidMount(){const e=sessionStorage.getItem(\"alarmRefresh\");this.setRefreshMenuState(\"true\"===e&&this.props.dataType===T.ye.current)}componentDidUpdate(e){if(e.dataType&&e.dataType!==this.props.dataType||e.alarmType&&e.alarmType!==this.props.alarmType){const e=sessionStorage.getItem(\"alarmRefresh\");this.setRefreshMenuState(\"true\"===e&&this.props.dataType===T.ye.current)}}componentWillUnmount(){this.stopRefresh()}render(){const e=this.props.alarmType===T.MP.system?a.J8H:a.B2d,t=this.props.alarmType===T.MP.system?a.UG6:a.q7C,n=new Array(...new Set([...this.props.selectedRows].map((e=>e.nativeMeDn))));return(0,z.jsxs)(\"div\",{className:\"alarm-tool-bar\",children:[(0,z.jsxs)(\"div\",{className:\"left-area\",children:[this.props.dataType===T.ye.current&&(0,z.jsxs)(\"div\",{className:\"refresh\",children:[(0,z.jsx)(Ie.Z,{checked:this.state.refresh,onChange:this.onSwitchChange}),(0,z.jsx)(\"span\",{className:\"refresh-text\",children:this.intlMessage(\"neteco.pvms.alarmMgt.refresh.btn\")}),(0,z.jsx)(Y.Z,{title:this.intlMessage(\"neteco.pvms.alarmMgt.refreshTip.mes\",{0:3}),placement:\"right\",children:(0,z.jsx)(\"span\",{className:\"refresh-tip icon-about-lined\"})})]}),(0,z.jsx)(Le,{ref:this.statisticRef,dataType:this.props.dataType,alarmLevel:this.props.alarmLevel,alarmStatistic:this.props.alarmStatistic,setSearchConditions:this.props.setSearchConditions})]}),(0,z.jsxs)(\"div\",{className:\"right-operation-area\",children:[this.props.dataType===T.ye.current&&(0,z.jsx)(F.Z,{operationId:e,targetId:n,targetType:\"plant\",intl:this.props.intl,selectRows:this.props.selectRows,disabled:(0,g.xb)(this.props.selectedRowKeys),onClick:()=>this.props.clearAlarm(),sceneId:\"alarm\",children:this.intlMessage(\"neteco.pvms.alarmMgt.clearAlarm.btn\")}),(0,a.lVp)(t)&&(0,z.jsx)(R.Z,{onClick:this.props.exportAlarm,children:this.intlMessage(\"common.button.export\")})]})]})}}Re.defaultProps={exportAlarm:A.mz,clearAlarm:A.mz,setSearchConditions:A.mz};const Ze=(0,u.ZP)(Re,{forwardRef:!0});class Be extends c.Component{constructor(e){super(e),this.submitSearchForm=e=>{e.preventDefault(),this.formRef.current.validateFields().then(((e,t)=>{t||this.props.setSearchConditions(e)}))},this.formRef=(0,c.createRef)()}render(){return(0,z.jsxs)(pe.Z,{className:\"\",ref:this.formRef,layout:\"inline\",onSubmit:this.submitSearchForm,children:[this.props.formItems.map((e=>{let{key:t,label:n,options:r,component:i,className:o}=e;return(0,z.jsx)(pe.Z.Item,{name:t,label:n,className:o,...r,children:i},t)})),(0,z.jsx)(pe.Z.Item,{children:(0,z.jsx)(R.Z,{type:\"primary\",onClick:this.submitSearchForm,children:this.props.intl.formatMessage({id:\"common.button.search\"})})})]})}}const Fe=(0,u.ZP)(Be);var ze=n(68718);class Ve extends c.Component{constructor(e){var t;super(e),t=this,this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.firstRender=!0,this.showError=e=>{o.Z.error({top:80,description:e||this.intlMessage(\"common.message.failure\")})},this.getAlarmListWithOccurTime=()=>{if(this.props.dataType===T.ye.history){const e=1e3*l()().subtract(1,\"day\").startOf(\"day\").unix(),t=1e3*l()().endOf(\"day\").unix();this.setSearchConditions({occurTime:{begin:e,end:t}},!0)}else this.getAlarmList(!0)},this.setExportModalVis=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({showExportModal:e})},this.clearAlarm=e=>{var t;if(!e&&new Set(this.state.selectedRows.map((e=>e.meDn))).size>1&&(0,a.yav)(a.B2d))return void(0,f.CD)(this.props.intl.formatMessage({id:\"neteco.pvms.crossStation.onlyOneSelected\"}));const n=e?[e]:this.state.selectedRowKeys,r=(null===(t=this.state.tableData)||void 0===t?void 0:t.list)||[];let o=(0,h.G)(n.length)?\"neteco.pvms.alarmMgt.clearTip.mes.plural\":\"neteco.pvms.alarmMgt.clearTip.mes\";const s=r.some((e=>n.includes(null==e?void 0:e.csn)&&[\"2002\",\"2003\"].includes(null==e?void 0:e.alarmId)));let l=1===n.length?this.intlMessage(\"neteco.pvms.alarm.message.1\"):this.intlMessage(\"neteco.pvms.alarmMgt.clearTip.afci\");i.Z.confirm({content:s&&!(0,Ce.jq)()?l:this.intlMessage(o),onOk:()=>{this.alarmMgtService.clear(n,this.props.alarmType).then((e=>{var t;e.success?0!==(null===(t=e.data)||void 0===t?void 0:t.failedNum)?i.Z.error({content:this.intlMessage(\"neteco.pvms.alarmMgt.clear.partialSuccess.mes\"),afterClose:()=>this.clearAfterClose()}):i.Z.info({content:this.intlMessage(\"common.message.success\"),afterClose:()=>this.clearAfterClose()}):i.Z.error({content:this.intlMessage(\"common.message.failure\")})})).catch((e=>{403===e.status?this.showNoPermissonModal():this.showError(this.intlMessage(\"neteco.pvms.returned.partes.interface.err\"))}))}})},this.showNoPermissonModal=()=>{const{intl:e}=this.props;i.Z.error({title:e.formatMessage({id:\"common.message.failure\"}),content:e.formatMessage({id:\"neteco.pvms.alarm.table.stationName.noPermission\"}),centered:!0})},this.clearAfterClose=()=>{this.getAlarmList(),this.setState({showDetail:!1,selectedRowKeys:[],selectedRows:[]})},this.setSeverity=(e,t)=>{this.setState((n=>{const{alarmStatistic:r,searchCondition:{severity:i}}=n;return(t||(0,g.xb)(i)?Object.keys(T.Tx):i).forEach((t=>{var n;r[t]=(0,m.uf)((null===(n=e.find((e=>String(e.severity)===String(t))))||void 0===n?void 0:n.value)||0)})),this.props.getAlarmStatistic&&this.props.getAlarmStatistic(r),{alarmStatistic:r}}))},this.getAlarmList=e=>{const{deviceDn:t,mocId:n,dnType:r,dataType:i,alarmType:o,companyDn:a}=this.props,s={deviceDn:t,mocId:n,dnType:r,dataType:i,alarmType:o,companyDn:a},{searchCondition:l}=this.state;e&&(l.severity=[]),this.setState({tableLoading:!0});const c=this.alarmMgtService.query(l,s).then().catch((()=>{this.showError()})),u=this.alarmMgtService.getAlarmTotal(l,s);Promise.allSettled([c,u]).then((t=>{let[n,r]=t;const i=\"fulfilled\";var o;n.status!==i||(0,g.xb)(n.value)||this.updatePage(n.value,e),r.status!==i||(0,g.xb)(r.value)||this.setState({realTotalCount:(null===(o=r.value)||void 0===o?void 0:o.realTotalCount)||0})})).finally((()=>{this.setState({tableLoading:!1})}))},this.exportAlarm=()=>{if(0===this.state.selectedRowKeys.length){const{realTotalCount:e,tableData:t}=this.state,n=this.props.dataType===T.ye.history?2e4:5e4;this.props.dataType===T.ye.history&&e>n||this.props.dataType===T.ye.current&&(null==t?void 0:t.total)>n?i.Z.warning({content:this.intlMessage(\"neteco.pvms.alarm.exportAll.maxLimit\",{0:(0,J.af)(n)}),okText:this.intlMessage(\"common.button.ok\")}):i.Z.confirm({title:this.intlMessage(\"neteco.pvms.confirm\"),content:this.intlMessage(\"neteco.pvms.alarmMgt.exportAll.mes\"),onOk:this.exportAll,okText:this.intlMessage(\"common.button.ok\"),cancelText:this.intlMessage(\"common.button.cancel\")})}else(0,ze.pT)(this.props.dataType===T.ye.history),this.alarmMgtService.export(this.state.selectedRowKeys,this.props.dataType,this.props.alarmType).then((e=>{e.success?this.setState({showExportModal:!0}):this.showError()})).catch((()=>{this.showError()}))},this.exportAll=()=>{(0,ze.pT)(this.props.dataType===T.ye.history);const{deviceDn:e,mocId:t,dnType:n,dataType:r,alarmType:i,companyDn:o}=this.props,a={deviceDn:e,mocId:t,dnType:n,dataType:r,alarmType:i,companyDn:o},{searchCondition:s}=this.state;this.alarmMgtService.exportAll(s,a).then((e=>{e.success?this.setState({showExportModal:!0}):this.showError()})).catch((()=>{this.showError()}))},this.setSelectedRowKey=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.setState({selectedRowKeys:e,selectedRows:n})},this.setSearchConditions=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.setState((t=>({searchCondition:{...t.searchCondition,...e}})),(()=>{t.getAlarmList(n)}))},this.loadDownloadTasks=async()=>await this.alarmMgtService.loadDownloadLists(this.props.dataType,this.props.alarmType),this.setRefreshState=e=>{var t,n;e?null===(t=this.toolBarRef.current)||void 0===t||t.reStartRefresh():null===(n=this.toolBarRef.current)||void 0===n||n.pauseRefresh()},this.openAlarmDetail=e=>{this.alarmInfo=e,this.setState({showDetail:!0})},this.openAlarmDefect=(e,t)=>{t||this.setState({loading:!0}),(0,ze.DH)(),Promise.all([this.alarmMgtService.getAlarmDefectInfo(e.csn),this.alarmMgtService.getAlarmDetailExt(e.csn,this.props.dataType,this.props.alarmType)]).then((t=>{let[n,r]=t;(0,g.xb)(n)||(0,g.xb)(r)?this.showError(this.intlMessage(\"neteco.pvms.returned.partes.interface.err\")):n.isShareStation?i.Z.info({content:this.intlMessage(\"neteco.pvms.alarmMgt.shareStation.forbidden.toDefect\")}):\"1\"===n.cleared||n.defect?i.Z.info({content:this.intlMessage(\"neteco.pvms.alarm.forbidden.toDefect\")}):(this.alarmInfo={...e,deviceVersion:n.deviceType,repairAction:r.repairAction},this.setState({showDefect:!0}))})).finally((()=>{t?t():this.setState({loading:!1})}))},this.closeAlarmDefect=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({showDefect:e,showDetail:!1})},this.closeAlarmDetail=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({showDetail:e})},this.alarmMgtService=new N(e.domainType),this.toolBarRef=c.createRef(),this.state={loading:!1,tableLoading:!1,showExportModal:!1,showDetail:!1,showDefect:!1,selectedRowKeys:[],selectedRows:[],alarmStatistic:{1:\"0\",2:\"0\",3:\"0\",4:\"0\"},tableData:{list:[],total:0},realTotalCount:0,searchCondition:{pageNo:1,pageSize:e.pageSize||10}},this.alarmLevel=this.props.alarmLevel||D()}componentDidMount(){this.getAlarmListWithOccurTime()}componentDidUpdate(e){const t=e.dataType&&this.props.dataType!==e.dataType||e.alarmType&&this.props.alarmType!==e.alarmType,n=!p()(this.props.deviceDn,e.deviceDn);(t||n)&&this.setState({selectedRowKeys:[],selectedRows:[],searchCondition:{pageNo:1,pageSize:this.props.pageSize||10}},this.getAlarmListWithOccurTime)}componentWillUnmount(){this.setState=()=>{}}updatePage(e,t){const{success:n,data:r}=e;if(n)if(this.firstRender&&this.alarmLevel)this.firstRender=!1,this.setSeverity(r.severityStatistics||[],!0),this.setSearchConditions({severity:[this.alarmLevel]});else{t&&this.toolBarRef.current&&(this.toolBarRef.current.statisticRef.current.clearSelectedTag(),I());const e={list:null==r?void 0:r.hits,total:r.totalCount};this.setState({tableData:e,selectedRowKeys:[],selectedRows:[]}),this.setSeverity(r.severityStatistics||[],t)}}render(){const e={deviceDn:this.props.deviceDn,mocId:this.props.mocId,alarmType:this.props.alarmType,domainType:this.props.domainType,dataType:this.props.dataType},{searchCondition:t,loading:n}=this.state,i=[],o=this.props.alarmType===T.MP.system?a.UG6:a.q7C;return(0,z.jsxs)(\"div\",{className:\"alarm-manage-container\",id:\"alarm-manage-container-id\",children:[n&&(0,z.jsx)(\"div\",{className:\"loading\",children:(0,z.jsx)(r.Z,{size:\"large\"})}),(0,g.xb)(i)?(0,z.jsx)(le,{...e,setSearchConditions:this.setSearchConditions,alarmMgtService:this.alarmMgtService,searchConfigs:this.props.searchConfigs,dnType:this.props.dnType},`searchBar-${this.props.alarmType}-${this.props.dataType}`):(0,z.jsx)(Fe,{...e,formItems:i,setSearchConditions:this.setSearchConditions,alarmMgtService:this.alarmMgtService}),(0,z.jsx)(Ze,{...e,ref:this.toolBarRef,alarmLevel:this.alarmLevel,selectedRowKeys:this.state.selectedRowKeys,alarmStatistic:this.state.alarmStatistic,setSearchConditions:this.setSearchConditions,clearAlarm:this.clearAlarm,exportAlarm:this.exportAlarm,getAlarmList:this.getAlarmList,selectedRows:this.state.selectedRows}),(0,z.jsx)(te,{...e,scroll:this.props.scroll,isShowTab:this.props.isShowTab,openAlarmDetail:this.openAlarmDetail,loading:this.state.tableLoading,tableData:this.state.tableData,pageCondition:{pageNo:null==t?void 0:t.pageNo,pageSize:null==t?void 0:t.pageSize},setSearchConditions:this.setSearchConditions,setSelectedRowKey:this.setSelectedRowKey,selectedRowKeys:this.state.selectedRowKeys,clearAlarm:this.clearAlarm,openAlarmDefect:this.openAlarmDefect,searchConfigs:this.props.searchConfigs,tableConfigs:this.props.tableConfigs,domId:this.props.domId,realTotalCount:this.state.realTotalCount},`table-${this.props.alarmType}-${this.props.dataType}`),this.state.showDefect&&(0,z.jsx)(De,{alarmInfo:this.alarmInfo,closeModal:()=>this.closeAlarmDefect(!1),alarmMgtService:this.alarmMgtService}),this.state.showDetail&&(0,z.jsx)(U,{...e,alarmMgtService:this.alarmMgtService,alarmInfo:this.alarmInfo,closeModal:()=>this.closeAlarmDetail(!1),clearAlarm:this.clearAlarm,openAlarmDefect:this.openAlarmDefect,setRefreshState:this.setRefreshState,searchConfigs:this.props.searchConfigs,detailConfigs:this.props.detailConfigs}),!this.props.hideDownload&&(0,a.lVp)(o)&&(0,z.jsx)(\"div\",{onClick:()=>this.setExportModalVis(!0),className:\"download-task-list-btn\",draggable:!0,title:this.intlMessage(\"neteco.pvms.inspect.taskList\"),children:(0,z.jsx)(\"img\",{src:\"/pvmswebsite/assets/build/images/device/download.png\",width:\"100%\"})}),this.state.showExportModal&&(0,z.jsx)(v.Z,{tip:this.intlMessage(\"neteco.pvms.alarmMgt.exportLimit.mes.new\",{0:(0,J.af)(this.props.dataType===T.ye.history?2e4:5e4)}),loadExportTasks:this.loadDownloadTasks,closeModal:this.setExportModalVis,deleteTask:e=>this.alarmMgtService.deleteFile(e,this.props.dataType,this.props.alarmType),downloadFile:e=>this.alarmMgtService.downloadExcelFile(e,this.props.dataType,this.props.alarmType)})]})}}Ve.defaultProps={dataType:T.ye.current,alarmType:T.MP.device,domainType:T.Yn.ocSolar,isShowTab:!1,searchConfigs:{},tableConfigs:{},detailConfigs:{}};const He=(0,u.ZP)(Ve)},80067:(e,t,n)=>{\"use strict\";n.d(t,{MH:()=>s,MP:()=>i,Tx:()=>o,Yn:()=>a,ye:()=>r});const r={current:\"CURRENT\",history:\"HISTORY\"},i={device:\"deviceAlarm\",system:\"systemAlarm\"},o={1:\"critical\",2:\"major\",3:\"minor\",4:\"prompt\"},a={solar:\"SOLAR\",charge:\"CHARGE\",ocSolar:\"OC_SOLAR\"},s=[60070,60080,60081]},77989:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>p});var r=n(88391),i=n(93706),o=n(43077),a=n(35066),s=n(79122),l=n(59516),c=n(37920),u=n.n(c),d=n(23712);const p=(0,i.ZP)((function(e){let{intl:t,sn:n,onChange:i,showInfo:c,installEnv:p,isViewMode:f}=e;const h=(e,n)=>t.formatMessage({id:e},n),[m,g]=(0,r.useState)([]),[v,y]=(0,r.useState)([]),[b,S]=(0,r.useState)(!1),[x,w]=(0,r.useState)(null),[C,T]=(0,r.useState)(null);(0,r.useEffect)((()=>{y((e=>[{label:`1.${e(\"ncoStation.archive.snLabel\")}`,name:\"archive_sn\",imgClassification:\"0\"},{label:`2.${e(\"ncoStation.archive.preventLabel\")}`,name:\"archive_prevent\",imgClassification:\"4\"},{label:`3.${e(\"ncoStation.archive.frontLabel\")}`,name:\"archive_front\",imgClassification:\"1\"},{label:`4.${e(\"ncoStation.archive.leftLabel\")}`,name:\"archive_left\",imgClassification:\"2\"},{label:`5.${e(\"ncoStation.archive.rightLabel\")}`,name:\"archive_right\",imgClassification:\"3\"}])(h))}),[]),(0,r.useEffect)((()=>{n&&A(n)}),[n]);const A=async e=>{let t=[e],n=await(0,s.CZ)(t);if(n&&n.success){const e=n.data?n.data[0].imageList:[],t=new Array(5).fill({});let r=\"0\";for(let n=0;n<e.length;n++){const i=e[n];E(t,i),i.installEnv&&(r=i.installEnv)}g(t),T(r),i&&i(t)}},E=(e,t)=>{switch(t.imgClassification){case\"0\":e[0]=t;break;case\"1\":e[2]=t;break;case\"2\":e[3]=t;break;case\"3\":e[4]=t;break;case\"4\":e[1]=t}};return(0,d.jsxs)(\"div\",{className:\"nco-archive-sn-img-list\",children:[v.map(((e,t)=>{const r=m[t]||{};let a,v,y;return r.thumFileId?(a=\"/rest/pvms/web/station/v1/archives/replace-image\",v={objectId:n,imgClassification:e.imgClassification,oldThumFileId:r.thumFileId,oldOriginalFileId:r.originalFileId},y=!(0,l.lVp)(l.kUp)||f):(a=\"/rest/pvms/web/station/v1/archives/upload-image\",v={objectId:n,imgClassification:e.imgClassification,installEnv:p||C},y=!(0,l.lVp)(l.S_2)||f),(0,d.jsxs)(\"div\",{className:\"img-item\",children:[(0,d.jsx)(o.Z,{action:a,data:v,fileId:r.thumFileId,showDel:(0,l.lVp)(l.teu)&&!f,showReplace:(0,l.lVp)(l.Bm2)&&!f,onDel:()=>((e,t)=>{let r={objectId:n,thumFiledId:t.thumFileId,originalFileId:t.originalFileId,imgClassification:t.imgClassification};(0,s.jC)(r).then((t=>{t.data&&(e=>{const t=m.slice();t[e]={},g(t),i&&i(t)})(e)}))})(t,r),onPreview:()=>(e=>{const t=m.filter((e=>e.originalFileId)).findIndex((t=>t.originalFileId===e));t>-1&&w(t),S(!0)})(r.originalFileId),onImgChange:e=>((e,t)=>{const n=m.slice();n[t]={...e,imgClassification:t},g(n),i&&i(n)})(e,t),disabled:y}),(0,d.jsx)(\"div\",{className:\"img-item-label\",children:e.label}),c&&r.userName&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(\"div\",{className:\"img-item-uper\",children:`${h(\"neteco.pvms.devUpgrade.uploadMan\")}：${r.userName}`}),(0,d.jsx)(\"div\",{className:\"img-item-datatime\",children:r.imageUpdateTime?u()(r.imageUpdateTime).format(\"yyyy.MM.DD HH:mm\"):\"\"})]})]},e.name)})),(0,d.jsx)(a.Z,{visible:b,imgList:m.filter((e=>e.originalFileId)),index:x,onClose:()=>{w(null),S(!1)}})]})}))},87848:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>u});var r=n(88391),i=n(93706),o=n(43077),a=n(35066),s=n(79122),l=n(59516),c=n(23712);const u=(0,i.ZP)((function(e){let{intl:t,dn:n,showInfo:i,onChange:u,isViewMode:d}=e;const[p,f]=(0,r.useState)([]),[h,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)(0);(0,r.useEffect)((()=>{n&&y(n)}),[n]);const y=async e=>{let t={stationDn:e},n=await(0,s.gl)(t);if(n&&n.data){const e=n.data.imageList||[];f(e),u&&u(e)}};return(0,c.jsxs)(\"div\",{className:\"nco-archive-station-img-list\",children:[p.map(((e,r)=>(0,c.jsxs)(\"div\",{className:\"img-item\",children:[(0,c.jsx)(o.Z,{fileId:e.thumFileId,onDel:()=>((e,t)=>{let r={objectId:n,thumFileId:t.thumFileId,originalFileId:t.originalFileId,imgClassification:\"5\"};(0,s.jC)(r).then((()=>{let t=p.slice();t.splice(e,1),f(t),u&&u(t)}))})(r,e),onPreview:()=>(e=>{v(e),m(!0)})(r),disabled:d||!(0,l.lVp)(l.gy1),showDel:!d&&(0,l.lVp)(l.pM_)}),i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(\"div\",{className:\"img-item-uper\",children:`${t.formatMessage({id:\"neteco.pvms.devUpgrade.uploadMan\"},undefined)}：${e.userName}`}),(0,c.jsx)(\"div\",{className:\"img-item-datatime\",children:e.imageUpdateTime})]})]},e.thumFileId))),p.length<6&&(0,c.jsx)(o.Z,{action:\"/rest/pvms/web/station/v1/archives/upload-image\",data:{objectId:n,imgClassification:\"5\"},onImgChange:e=>(e=>{const t=()=>{let t=[...p,e];f(t),u&&u(t)};if(n){let r={stationDn:n,thumAndOriginalFileIds:[e]};(0,s.pt)(r).then((e=>{t()}))}else t()})(e),disabled:d||!(0,l.lVp)(l.a1_),showDel:!d&&(0,l.lVp)(l.pM_)}),(0,c.jsx)(a.Z,{visible:h,imgList:p,index:g,onClose:()=>{v(null),m(!1)}})]})}))},43077:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>g});var r=n(19988),i=n(88391),o=n(93706),a=n(80770),s=n(88927),l=n(67356),c=n(97931),u=n(95059),d=n(23712);const{operationFailed:p}=u.Z,{neteco:f}=window,h=e=>new RegExp(e,\"i\").test(e);class m extends i.Component{constructor(e){super(e),this.stopLoading=()=>{this.setState({loading:!1})},this.handleChange=async e=>{const{onImgChange:t,intl:n}=this.props;if(\"uploading\"!==e.file.status){if(\"error\"===e.file.status)return this.setState({loading:!1}),void p(n,n.formatMessage({id:\"neteco.pvms.fileUpload.fileContentIsWrong\"}));if(\"done\"===e.file.status){const r=e.file.response;if(r.success){const e=r.data;this.setState({loading:!1}),t&&t(e)}else{const e=n.formatMessage({id:\"neteco.pvms.stationInfo.addStation.updateFileFail\"});p(n,e),this.stopLoading()}}}else this.setState({loading:!0})},this.handlePreview=e=>{const{onPreview:t}=this.props;e.stopPropagation(),t&&t()},this.handleDel=()=>{const{onDel:e}=this.props;e&&e()},this.uploadButton=()=>{const{intl:e}=this.props;return(0,d.jsxs)(\"div\",{children:[this.state.loading?(0,d.jsx)(s.Z,{}):(0,d.jsx)(l.Z,{}),(0,d.jsx)(\"div\",{style:{marginTop:8},children:e.formatMessage({id:\"ncoStation.archive.uploadFile\"})})]})},this.shouldPrevent=e=>{\"icon-replace-lined\"!==e.target.className&&e.stopPropagation()},this.imgContent=()=>{const{showDel:e=!0,fileId:t,intl:n,showReplace:r,disabled:i}=this.props,o=`/rest/pvms/web/station/v1/archives/archives-image-preview?fileId=${t}`;return(0,d.jsxs)(\"div\",{className:\"img-content\",children:[!i&&(0,d.jsxs)(\"div\",{className:\"img-content-mask\",onClick:this.shouldPrevent,children:[(0,d.jsx)(c.Z,{onClick:this.handlePreview,title:this.props.intl.formatMessage({id:\"common.icon.tip.preview\"})}),e&&(0,d.jsx)(\"span\",{className:\"icon-trash-lined\",title:this.props.intl.formatMessage({id:\"common.button.delete\"}),onClick:e=>{e.stopPropagation(),(0,a.ST)(n.formatMessage({id:\"neteco.pvms.partials.main.hp.poverty.confimeToDel\"}),this.handleDel)}}),r&&(0,d.jsx)(\"span\",{className:\"icon-replace-lined\",title:this.props.intl.formatMessage({id:\"ncoPvSwapDevice.label.button.swap\"})})]}),(0,d.jsx)(\"img\",{src:o})]})},this.state={loading:!1}}render(){const{fileKey:e=\"file\",fileId:t,action:n,data:i,disabled:o}=this.props;return(0,d.jsx)(\"div\",{className:\"nco-pic-up-view\",children:(0,d.jsx)(r.Z,{action:n,showUploadList:!1,listType:\"picture-card\",data:i,name:e,accept:\"image/png, image/jpeg, image/jpg, image/bmp\",beforeUpload:e=>((e,t,n)=>{const r=function(e){return\"image/jpeg\"===e.type&&h(\"jpeg\")||\"image/png\"===e.type&&h(\"png\")||\"image/bmp\"===e.type&&h(\"bmp\")||\"image/jpg\"===e.type&&h(\"jpg\")}(e),i=function(e){return e.size<20971520}(e);r&&0!==e.size||(n(),p(t,t.formatMessage({id:\"neteco.pvms.systemSetting.imgTypeError\"})));const o=e.name.substring(0,e.name.lastIndexOf(\".\"));return(null==o?void 0:o.length)>124?(n(),p(t,t.formatMessage({id:\"neteco.pvms.stationInfo.addStation.imageLimitations_2\"},{maxNum:124})),!1):(i||(n(),p(t,t.formatMessage({id:\"neteco.pvms.stationInfo.addStation.imgSizeError20\"}))),r&&i)})(e,this.props.intl,this.stopLoading),onChange:this.handleChange,headers:{roarand:f.request.getRand()},disabled:o,children:t?this.imgContent():this.uploadButton()})})}}const g=(0,o.ZP)(m)},79122:(e,t,n)=>{\"use strict\";n.d(t,{CZ:()=>i,gl:()=>a,jC:()=>o,pt:()=>s});var r=n(49453);const i=e=>(0,r.v_)(\"/rest/pvms/web/station/v1/archives/query-storage-image-bySn\",e),o=e=>(0,r.IV)(\"/rest/pvms/web/station/v1/archives/delete-image\",e),a=e=>(0,r.U2)(\"/rest/pvms/web/station/v1/archives/query-station-image\",e),s=e=>(0,r.v_)(\"/rest/pvms/web/station/v1/archives/save-station-images\",e)},32999:(e,t,n)=>{\"use strict\";n.d(t,{$D:()=>h,AW:()=>o,EG:()=>s,Ez:()=>u,L$:()=>l,Mb:()=>r,T_:()=>i,Y0:()=>a,nF:()=>p,sm:()=>g,vQ:()=>d,vj:()=>f,xS:()=>c,zo:()=>m});const r=\"NCOCREATESTATION/START_LOADING\",i=\"NCOCREATESTATION/FINISH_LOADING\",o=\"NCOCREATESTATION/START_SAVING\",a=\"NCOCREATESTATION/FINISH_SAVING\",s=\"NCOCREATESTATION/FINISH_MODIFY\",l=\"NCOCREATESTATION/SEARCH_ADDRESS\",c=\"NCOCREATESTATION/LOAD_TIMEZONE_LIST\",u=\"NCOCREATESTATION/LOAD_COMPANY_POVERTY_ATTR\",d=\"RESET_POVERTY_SUPPORT_STATE\",p=\"NCOCREATESTATION/CHECK_HAS_POVERTY_LISCENSE\",f=\"NCOCREATESTATION/ARCHIVE_ALBUM\",h=\"NCOCREATESTATION/INSTALL_ENV\",m=\"NCOCREATESTATION/ALL_DEVICE_SN\",g=\"NCOSELECTPLAN\"},89433:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(32999);const i={loading:!1,saving:!1,timeZoneList:[],mapSettings:null,mapConfigs:[],hasPovertyLicense:!1,companySupportPoverty:!1,archiveAlbum:[],installEnv:null,allDeviceSn:[]},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.T_:return{...n,loading:!1};case r.AW:return{...n,saving:!0};case r.Y0:return{...n,saving:!1};case r.L$:return{...n};case r.xS:return{...n,timeZoneList:t.payload};case r.nF:return{...n,hasPovertyLicense:t.payload};case r.Ez:return{...n,companySupportPoverty:t.payload};case r.vQ:return{...n,companySupportPoverty:!1};case r.vj:return{...n,archiveAlbum:t.payload};case r.$D:return{...n,installEnv:t.payload};case r.zo:return{...n,allDeviceSn:t.payload};case r.sm:return{...n,getSelectedPlan:t.payload};default:return n}}},39699:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>g});var r=n(23774),i=n(93706),o=n(41541),a=n(26887),s=n(88391),l=n(78939),c=n(64218),u=n(4342),d=n(68011),p=n(59516),f=n(23712);class h extends s.Component{constructor(e){super(e),this.finishSaveLoading=()=>{this.setState({loading:!1})},this.saveSuccessCallback=()=>{const{intl:e}=this.props;this.finishSaveLoading(),a.ZP.success(e.formatMessage({id:\"neteco.pvms.paramsSetting.unifiedSetting.telemeteringConf.saveSuccess\"}))},this.savefailCallback=()=>{const{intl:e}=this.props;this.finishSaveLoading(),a.ZP.error(e.formatMessage({id:\"neteco.pvms.paramsSetting.unifiedSetting.telemeteringConf.saveFiled\"}))},this.savePriceToServer=()=>{this.childObj.savePrice(this.saveSuccessCallback,this.savefailCallback),this.setState({loading:!0})},this.getChildObj=e=>{this.childObj=e},this.setShowSaveStatus=e=>{this.setState({showSaveBtn:e})},this.state={showSaveBtn:!0,loading:!1}}render(){const{showSaveBtn:e,loading:t}=this.state,{dn:n}=this.props,r=(0,u.wW)()&&(0,c.sb)(n),i=(0,p.agq)([p.WL9,p.myN,p.EFg,p.mCK,p.Ye1,p.NYc]);return(0,f.jsxs)(\"div\",{className:\"nco-default-power-price\",children:[(0,f.jsx)(d.Q,{getChildObj:this.getChildObj,setChangedStatus:this.setShowSaveStatus,finishSaveLoading:this.finishSaveLoading,currentCompanyDn:n,isPrivilegeAndRoot:r,disabled:!i&&!r}),(0,f.jsx)(\"div\",{className:\"nco-default-power-price-btn\",children:(r||i)&&(0,f.jsx)(o.Z,{disabled:!e,type:\"primary\",loading:t,onClick:this.savePriceToServer,children:(0,f.jsx)(l.Z,{id:\"neteco.pvms.paramsSetting.unifiedSetting.telemeteringConf.saveBtn\"})})})]})}}const m=h,g=(0,r.$j)((e=>({})),(e=>({loadNcoDefaultPowerPrice:()=>{(async e=>{e({type:\"NCODEFAULTPOWERPRICE/START_LOADING\"}),e({type:\"NCODEFAULTPOWERPRICE/FINISH_LOADING\",payload:100})})(e)}})))((0,i.ZP)(m))},53304:(e,t,n)=>{\"use strict\";n.d(t,{AO:()=>f,Dv:()=>u,G7:()=>g,H_:()=>l,Rf:()=>d,Ri:()=>a,S6:()=>c,Tn:()=>p,_1:()=>m,dN:()=>s,hQ:()=>o});var r=n(49453),i=n(5963);const o=()=>async e=>{e({type:i.D})},a=(e,t,n)=>async()=>{const{dn:i}=e;let o;20810===t&&(o=[20815,20816].join(\",\")),20821===t&&(o=[20822].join(\",\"));const a=await(0,r.U2)(\"/rest/neteco/web/config/device/v1/children-list\",{\"conditionParams.parentDn\":i,\"conditionParams.curPage\":0,\"conditionParams.recordperpage\":100,\"conditionParams.mocTypes\":o});let s=[];0===a.code&&(s=a.data.map((e=>({deviceType:e.mocTypeName||\"--\",productType:e.name||\"--\"})))),e.hasLoadedSubDevs=!0,e.subDevs=s,n()},s=e=>async t=>{t({type:i.Tp,payload:e})},l=(e,t)=>async n=>{let r={};const{isExist:o,sunshineVo:a}=e;o&&(r={devName:a.deviceType.devName,devNationName:a.deviceType.devName,...a});const s={...e,...r};n({type:i.yv,payload:s}),t()},c=(e,t)=>async(n,o)=>{const{esn:a}=e,s=await(0,r.U2)(`/rest/neteco/web/imodbus/v1/sunshine/verify-device?esn=${a}`);let l={};if(s&&s.isExist){const{sunshineVo:e}=s;e&&(l={devName:e.deviceType.devName,devNationName:e.deviceType.devName,...e})}const c={...e,...l};n({type:i.yv,payload:c}),t(c.count)},u=e=>async t=>{t({type:i.zz,payload:e})},d=e=>t=>{t({type:i.EP,payload:e})},p=()=>async e=>{try{const t=(await(0,r.v_)(\"/rest/neteco/web/imodbus/v1/sunshine/esn-list\",{})).data;e({type:i.Ws,payload:t})}catch(t){setTimeout((()=>{e({type:i.Ws,payload:[]})}),500)}},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return async()=>(0,r.v_)(\"/rest/neteco/web/imodbus/v1/ne-service/ne/batch-deletion\",e)},h=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some((t=>(null==t?void 0:t.devTypeId)===e||h(e,(null==t?void 0:t.deviceList)||[])))},m=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some((t=>h(e,(null==t?void 0:t.deviceList)||[])))},g=async e=>(0,r.v_)(\"/rest/neteco/web/imodbus/v1/upgrade-management/upgrading-device-list\",e)},5963:(e,t,n)=>{\"use strict\";n.d(t,{D:()=>l,EP:()=>u,Ny:()=>s,Tp:()=>r,Ws:()=>a,jE:()=>c,yv:()=>i,zz:()=>o});const r=\"NCODEVICECONTAINER/INIT_BOUND_DEVICES\",i=\"NCODEVICECONTAINER/ADD_DEVICE\",o=\"NCODEVICECONTAINER/REMOVE_DEIVEC\",a=\"NCODEVICECONTAINER/LOAD_ESNLIST\",s=\"NCODEVICECONTAINER/LOAD_DEVICE_DETAILS\",l=\"NCODEVICECONTAINER/CLEAR_DEVICES\",c=\"NCODEVICECONTAINER/LAZY_LOAD_SUBDEVS\",u=\"NCODEVICECONTAINER/ADD_SELECTED_DEVICES\"},73916:(e,t,n)=>{\"use strict\";n.d(t,{LW:()=>c,Ms:()=>r,QH:()=>a,XR:()=>i,iw:()=>o,uQ:()=>l,v1:()=>s,zB:()=>u});const r=60026,i=20819,o=20821,a=20822,s=60080,l=20851,c={HOUSEHOLD_SIGNALS:{MANUFACTURER:\"50001\",DEVICE_NATION_NAME:\"50009\",SOFTWARE_VERSION:\"50010\",ESN:\"50012\",PV_CAPACITY:\"21001\",BIND_USERS:\"50017\"}},u={[i]:{ESN:\"50012\",DEVICE_NATION_NAME:\"50009\",SOFTWARE_VERSION:\"50010\"},[o]:{ESN:\"50012\",DEVICE_NATION_NAME:\"50009\",SOFTWARE_VERSION:\"50010\"},[a]:{ESN:\"50012\",DEVICE_NATION_NAME:\"50009\",SOFTWARE_VERSION:\"50010\"},[s]:{ESN:\"50012\",DEVICE_NATION_NAME:\"50009\",SOFTWARE_VERSION:\"50010\"},[r]:{ESN:\"20029\",DEVICE_NATION_NAME:\"10010\",SOFTWARE_VERSION:\"10002\"},[l]:{ESN:\"50012\",DEVICE_NATION_NAME:\"50009\",SOFTWARE_VERSION:\"50010\"}}},20178:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>C,c:()=>w});var r=n(45258),i=n(70535),o=n(17489),a=n(53309),s=n(21499),l=n(69131),c=n(88927),u=n(52709),d=n(15812),p=n(48312),f=n(44851),h=n(15075),m=n(80770),g=n(37920),v=n.n(g),y=n(88391),b=n(93706),S=(n(44184),n(23712));class x extends y.Component{constructor(e){super(e),this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.clearTimer=()=>{clearTimeout(this.timer),this.timer=null},this.loadTaskData=()=>{const e=async()=>{const t=await this.props.loadExportTasks();this.setState({tasks:t,isLoading:!1}),t.some((e=>1!==e.taskStatus))?this.timer=setTimeout((()=>e()),l.v.downloadManagement_loadExportTask):this.clearTimer()};e()},this.refreshTasks=()=>{this.props.loadExportTasks().then((e=>{this.setState({tasks:e})}))},this.renderTaskListWrapper=()=>{const{intl:e,isNewStyle:t}=this.props,n=t?d.Z:s.Z;return this.state.isLoading?(0,S.jsx)(\"div\",{className:\"loading\",children:(0,S.jsx)(n,{})}):0===this.state.tasks.length?t?(0,S.jsx)(p.Z,{className:\"task-list-empty\"}):(0,S.jsx)(a.Z,{className:\"task-list-empty\",image:\"/pvmswebsite/assets/build/images/station/noData.png\",description:e.formatMessage({id:\"neteco.pvms.noData\"})}):this.state.tasks.map((n=>(0,S.jsxs)(i.Z,{className:\"content-vertical-center row-body\",children:[(0,S.jsx)(o.Z,{className:\"report-cell\",title:n.taskName,span:8,children:n.taskName}),(0,S.jsx)(o.Z,{span:8,children:n.startTime||v()(n.createTime).format(\"YYYY-MM-DD HH:mm:ss\")}),(0,S.jsx)(o.Z,{span:8,children:w(n,e,{downloadFile:e=>{this.props.downloadFile(e)},deleteTask:this.deleteTask,isNewStyle:t})})]},n.taskId)))},this.deleteTask=e=>{const{isNewStyle:t,intl:n}=this.props,{tasks:i}=this.state;t?(0,m.ST)(this.intlMessage(\"neteco.pvms.partials.main.hp.poverty.confimeToDel\"),(()=>{this.props.deleteTask(e).then((t=>{if(t.success||t.taskId||0===t.code){const t=i.filter((t=>t.taskId!==e));this.setState({tasks:t})}}))}),null,n,this.intlMessage(\"neteco.pvms.confirm\"),!0):r.Z.confirm({title:this.intlMessage(\"neteco.pvms.confirm\"),content:this.intlMessage(\"neteco.pvms.partials.main.hp.poverty.confimeToDel\"),onOk:()=>{this.props.deleteTask(e).then((t=>{if(t.success||t.taskId||0===t.code){const t=i.filter((t=>t.taskId!==e));this.setState({tasks:t})}}))},intl:n})},this.state={tasks:[],isLoading:!0},this.timer=null}componentDidMount(){this.loadTaskData()}componentWillUnmount(){this.clearTimer()}render(){const{closeModal:e,tip:t,intl:n,isNewStyle:a}=this.props,l=a?f.Z:r.Z;return a?d.Z:s.Z,(0,S.jsx)(\"div\",{children:(0,S.jsxs)(l,{className:\"nco-download-task-list-modal\",visible:!0,onCancel:()=>e(!1),footer:(0,S.jsx)(\"div\",{style:{marginBottom:\"10px\",textAlign:\"left\"},children:t||this.intlMessage(\"pvms.device.image.save.period.title\")}),centered:!0,maskClosable:!1,destroyOnClose:!0,width:\"60rem\",title:this.intlMessage(\"neteco.pvms.inspect.taskList\"),children:[(0,S.jsxs)(i.Z,{className:\"row-header\",children:[(0,S.jsx)(o.Z,{span:8,children:this.intlMessage(\"neteco.pvms.inspect.task.taskName\")}),(0,S.jsx)(o.Z,{span:8,children:this.intlMessage(\"neteco.pvms.superviseSetting.weakCommandList.createTime\")}),(0,S.jsxs)(o.Z,{span:8,children:[this.intlMessage(\"neteco.pvms.systemSetting.amendment.taskStatus\"),\"/\",this.intlMessage(\"neteco.pvms.upgrade.devOperate\")]})]}),(0,S.jsx)(\"div\",{className:\"task-list-wrapper\",children:this.renderTaskListWrapper()})]})})}}const w=function(e,t,n){var r;let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{taskId:o,taskStatus:a,state:l,status:p,fileId:f}=e,{downloadFile:m,deleteTask:g}=n,v=i?d.Z:s.Z,y=(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(v,{indicator:(0,S.jsx)(c.Z,{}),size:\"small\"}),\" \",(0,S.jsx)(\"span\",{children:t.formatMessage({id:\"neteco.pvms.alarm.exporting\"})})]}),b=(0,S.jsx)(\"div\",{className:\"click-gap\",children:(0,S.jsx)(\"a\",{size:\"small\",onClick:()=>g(o),title:t.formatMessage({id:\"neteco.pvms.main.hhsrc.delete\"}),children:(0,S.jsx)(h.Z,{})})}),x=(0,S.jsxs)(\"div\",{className:\"click-gap\",children:[(0,S.jsx)(\"a\",{size:\"small\",onClick:()=>m(null!=f?f:o),title:t.formatMessage({id:\"neteco.pvms.documentManage.download\"}),children:(0,S.jsx)(u.Z,{})}),(0,S.jsx)(\"a\",{size:\"small\",onClick:()=>g(o),title:t.formatMessage({id:\"neteco.pvms.main.hhsrc.delete\"}),children:(0,S.jsx)(h.Z,{})})]});switch(null!==(r=null!=a?a:l)&&void 0!==r?r:p){case 0:case\"creating\":return y;case-1:case\"fail\":return b;default:return x}},C=(0,b.ZP)(x)},28494:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>u});var r=n(45258),i=n(41541),o=n(88391),a=n(78939),s=n(93706),l=n(23712);class c extends o.Component{constructor(e){super(e),this.state={}}render(){const{content:e,title:t,okCallback:n,cancelCallback:o,intl:s,type:c,okButtonProps:u,cancelButtonProps:d,maskClosable:p,visible:f,centered:h,footer:m,alignItems:g}=this.props;let v=\"\",y=\"\";switch(c){case\"error\":v=\"/pvmswebsite/assets/build/images/home/icon-fail.png\",y=s.formatMessage({id:\"neteco.pvms.inspect.viewImport.failedCount\"});break;case\"confirm\":v=\"/pvmswebsite/assets/build/images/home/icon-ok.png\",y=s.formatMessage({id:\"neteco.pvms.intelAlarm.operation.confirm\"});break;case\"warning\":v=\"/pvmswebsite/assets/build/images/home/icon-warning.png\",y=s.formatMessage({id:\"neteco.pvms.partials.main.systemMessage.warn\"});break;default:v=\"/pvmswebsite/assets/build/images/home/icon-notification.png\",y=s.formatMessage({id:\"neteco.pvms.info\"})}return(0,l.jsx)(\"div\",{className:\"nco-message-dialog\",children:(0,l.jsx)(r.Z,{centered:h,onOk:n,onCancel:o,cancelButtonProps:d,okButtonProps:u,className:\"nco-user-define-pop\",title:t||y,visible:f,maskClosable:p||!1,closable:!0,footer:m||(0,l.jsx)(i.Z,{onClick:n,type:\"primary\",children:(0,l.jsx)(a.Z,{id:\"common.button.ok\"})},\"confirm\"),children:(0,l.jsxs)(\"div\",{style:{display:\"flex\",alignItems:g||\"center\"},children:[(0,l.jsx)(\"img\",{src:v,alt:\"\",className:\"nco-pop-Icon\"}),(0,l.jsx)(\"div\",{className:\"nco-pop-content\",children:e})]})})})}}const u=(0,s.ZP)(c)},2611:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>S});var r=n(62073),i=n(92252),o=n(88391),a=n(66915),s=n(79790),l=n(69009),c=n(20884),u=n(44184),d=n(4342),p=n(23712);const{Option:f}=i.Z,h=r.Z.Group,{Option:m}=a.Z,g=s.Z.Group,v=(e,t,n)=>{e.setFields([{name:[\"phone\"],value:t,errors:n?[n]:void 0,touched:!0,validating:!1}])},y=new Map([[c.PY.EXISTS,\"neteco.pvms.register.phone.exsit\"],[c.PY.FORMAT_ERROR,\"neteco.pvms.systemSetting.notPhone\"],[c.PY.ERROR,\"neteco.pvms.systemSetting.notPhone\"]]);class b extends o.Component{constructor(e){super(e),this.phoneValidator=()=>{const e=(0,d.jA)(),{form:t,intl:n,checkPhoneExists:r=async()=>({data:void 0})}=this.props,{getFieldValue:i}=t,o=i(\"phone\"),{number:a}=o;if(e&&(0,u.xb)(a))v(t,o,n.formatMessage({id:\"neteco.pvms.systemSetting.notPhone\"}));else if(e||!e&&a){if(!(e?c.OA:c.LS).test(a))return void v(t,o,n.formatMessage({id:\"neteco.pvms.systemSetting.notPhone\"}));if(e&&this.checkPhoneNumberNeedValid(a))return void r({type:\"phone\",value:a}).then((e=>{const{success:r,failCode:i}=e;if(r)return void v(t,o,void 0);const a=y.has(i)?y.get(i):\"neteco.pvms.systemSetting.notPhone\";v(t,o,n.formatMessage({id:a}))}));v(t,o,void 0)}else v(t,o,void 0)};const{value:t={}}=e,{number:n,nationCode:r}=t;this.state={number:n,nationCode:(0,u.AZ)(r)}}componentWillReceiveProps(e,t){const{nationCode:n,number:r}=e.value||{};(n||r)&&this.setState({nationCode:(0,u.AZ)(n),number:r})}checkPhoneNumberNeedValid(e){const{mode:t=\"create\",snapshot:n}=this.props;return\"create\"===t||\"modify\"===t&&(!n||n.phone!==e)}render(){const{intl:e,disabled:t,useDP:n,placeholder:o}=this.props,c=(0,d.jA)(),{number:u,nationCode:v}=this.state,y=(0,l.Z)(e).sort(((e,t)=>e.label.localeCompare(t.label))).map((e=>[e.value,e.label])),b=Object.fromEntries(y),S=Object.entries(b).map((e=>[e[0],e[1],e[1].substring(e[1].lastIndexOf(\" \")+1)])),x=n?s.Z:r.Z,w=n?a.Z:i.Z,C=n?g:h,T=n?m:f;return(0,p.jsx)(\"div\",{className:n?\"nco-phone\":\"\",children:(0,p.jsxs)(C,{compact:!0,children:[(0,p.jsx)(w,{value:v,virtual:!1,disabled:t||c,style:{width:n?\"20%\":\"15%\"},optionLabelProp:\"label\",showSearch:\"true\",onChange:e=>{this.setState({nationCode:e}),this.props.onChange&&this.props.onChange({...this.state,nationCode:e})},children:S.map((e=>(0,p.jsx)(T,{value:e[0],label:e[2],children:e[1]},e[0])))}),(0,p.jsx)(x,{style:{width:\"85%\"},value:u,disabled:t,placeholder:n?o:\"\",onBlur:()=>this.phoneValidator(),onChange:e=>{this.setState({number:e.target.value}),this.props.onChange&&this.props.onChange({...this.state,number:e.target.value})}})]})})}}const S=b},69009:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>r});const r=e=>{const t=t=>e.formatMessage({id:t});return[{label:t(\"neteco.pvms.phone.contry.code.china\"),value:\"0086\"},{label:t(\"neteco.pvms.phone.contry.code.germany\"),value:\"0049\"},{label:t(\"neteco.pvms.phone.contry.code.brazil\"),value:\"0055\"},{label:t(\"neteco.pvms.phone.contry.code.philippines\"),value:\"0063\"},{label:t(\"neteco.pvms.phone.contry.code.netherlands\"),value:\"0031\"},{label:t(\"neteco.pvms.phone.contry.code.bhutan\"),value:\"00975\"},{label:t(\"neteco.pvms.phone.contry.code.timor-leste\"),value:\"00670\"},{label:t(\"neteco.pvms.phone.contry.code.central_african_republic\"),value:\"00236\"},{label:t(\"neteco.pvms.phone.contry.code.denmark\"),value:\"0045\"},{label:t(\"neteco.pvms.phone.contry.code.ukraine\"),value:\"00380\"},{label:t(\"neteco.pvms.phone.contry.code.uzbekistan\"),value:\"00998\"},{label:t(\"neteco.pvms.phone.contry.code.uganda\"),value:\"00256\"},{label:t(\"neteco.pvms.phone.contry.code.uruguay\"),value:\"00598\"},{label:t(\"neteco.pvms.phone.contry.code.chad\"),value:\"00235\"},{label:t(\"neteco.pvms.phone.contry.code.yemen\"),value:\"00967\"},{label:t(\"neteco.pvms.phone.contry.code.armenia\"),value:\"00374\"},{label:t(\"neteco.pvms.phone.contry.code.israel\"),value:\"00972\"},{label:t(\"neteco.pvms.phone.contry.code.iraq\"),value:\"00964\"},{label:t(\"neteco.pvms.phone.contry.code.iran\"),value:\"0098\"},{label:t(\"neteco.pvms.phone.contry.code.belize\"),value:\"00501\"},{label:t(\"neteco.pvms.phone.contry.code.cape_verde\"),value:\"00238\"},{label:t(\"neteco.pvms.phone.contry.code.russia\"),value:\"007\"},{label:t(\"neteco.pvms.phone.contry.code.bulgaria\"),value:\"00359\"},{label:t(\"neteco.pvms.phone.contry.code.croatia\"),value:\"00385\"},{label:t(\"neteco.pvms.phone.contry.code.guam\"),value:\"001671\"},{label:t(\"neteco.pvms.phone.contry.code.gambia\"),value:\"00220\"},{label:t(\"neteco.pvms.phone.contry.code.iceland\"),value:\"00354\"},{label:t(\"neteco.pvms.phone.contry.code.guinea\"),value:\"00224\"},{label:t(\"neteco.pvms.phone.contry.code.guinea-bissau\"),value:\"00245\"},{label:t(\"neteco.pvms.phone.contry.code.liechtenstein\"),value:\"00423\"},{label:t(\"neteco.pvms.phone.contry.code.congo\"),value:\"00242\"},{label:t(\"neteco.pvms.phone.contry.code.congo,the_democratic_republic_of_the\"),value:\"00243\"},{label:t(\"neteco.pvms.phone.contry.code.libya\"),value:\"00218\"},{label:t(\"neteco.pvms.phone.contry.code.liberia\"),value:\"00231\"},{label:t(\"neteco.pvms.phone.contry.code.canada\"),value:\"001\"},{label:t(\"neteco.pvms.phone.contry.code.ghana\"),value:\"00233\"},{label:t(\"neteco.pvms.phone.contry.code.gabon\"),value:\"00241\"},{label:t(\"neteco.pvms.phone.contry.code.hungary\"),value:\"0036\"},{label:t(\"neteco.pvms.phone.contry.code.south_sudan\"),value:\"00211\"},{label:t(\"neteco.pvms.phone.contry.code.south_africa\"),value:\"0027\"},{label:t(\"neteco.pvms.phone.contry.code.botswana\"),value:\"00267\"},{label:t(\"neteco.pvms.phone.contry.code.qatar\"),value:\"00974\"},{label:t(\"neteco.pvms.phone.contry.code.rwanda\"),value:\"00250\"},{label:t(\"neteco.pvms.phone.contry.code.luxembourg\"),value:\"00352\"},{label:t(\"neteco.pvms.phone.contry.code.india\"),value:\"0091\"},{label:t(\"neteco.pvms.phone.contry.code.indonesia\"),value:\"0062\"},{label:t(\"neteco.pvms.phone.contry.code.guatemala\"),value:\"00502\"},{label:t(\"neteco.pvms.phone.contry.code.ecuador\"),value:\"00593\"},{label:t(\"neteco.pvms.phone.contry.code.eritrea\"),value:\"00291\"},{label:t(\"neteco.pvms.phone.contry.code.syria\"),value:\"00963\"},{label:t(\"neteco.pvms.phone.contry.code.cuba\"),value:\"0053\"},{label:t(\"neteco.pvms.phone.contry.code.taiwan\"),value:\"00886\"},{label:t(\"neteco.pvms.phone.contry.code.kyrgyzstan\"),value:\"00996\"},{label:t(\"neteco.pvms.phone.contry.code.djibouti\"),value:\"00253\"},{label:t(\"neteco.pvms.phone.contry.code.kazakhstan\"),value:\"007\"},{label:t(\"neteco.pvms.phone.contry.code.colombia\"),value:\"0057\"},{label:t(\"neteco.pvms.phone.contry.code.costa_rica\"),value:\"00506\"},{label:t(\"neteco.pvms.phone.contry.code.cameroon\"),value:\"00237\"},{label:t(\"neteco.pvms.phone.contry.code.tuvalu\"),value:\"00688\"},{label:t(\"neteco.pvms.phone.contry.code.turkmenistan\"),value:\"00993\"},{label:t(\"neteco.pvms.phone.contry.code.turkey\"),value:\"0090\"},{label:t(\"neteco.pvms.phone.contry.code.lucia\"),value:\"001758\"},{label:t(\"neteco.pvms.phone.contry.code.saint_kitts_and_nevis\"),value:\"001869\"},{label:t(\"neteco.pvms.phone.contry.code.sao_dome_and_principe\"),value:\"00239\"},{label:t(\"neteco.pvms.phone.contry.code.vincent_and_the_grenadines\"),value:\"001784\"},{label:t(\"neteco.pvms.phone.contry.code.saint_pierre_and_michigan\"),value:\"00508\"},{label:t(\"neteco.pvms.phone.contry.code.san_marino\"),value:\"00378\"},{label:t(\"neteco.pvms.phone.contry.code.guyana\"),value:\"00592\"},{label:t(\"neteco.pvms.phone.contry.code.tanzania\"),value:\"00255\"},{label:t(\"neteco.pvms.phone.contry.code.egypt\"),value:\"0020\"},{label:t(\"neteco.pvms.phone.contry.code.ethiopia\"),value:\"00251\"},{label:t(\"neteco.pvms.phone.contry.code.kiribati\"),value:\"00686\"},{label:t(\"neteco.pvms.phone.contry.code.tajikistan\"),value:\"00992\"},{label:t(\"neteco.pvms.phone.contry.code.senegal\"),value:\"00221\"},{label:t(\"neteco.pvms.phone.contry.code.serbia\"),value:\"00381\"},{label:t(\"neteco.pvms.phone.contry.code.sierra_leone\"),value:\"00232\"},{label:t(\"neteco.pvms.phone.contry.code.cyprus\"),value:\"00357\"},{label:t(\"neteco.pvms.phone.contry.code.seychelles\"),value:\"00248\"},{label:t(\"neteco.pvms.phone.contry.code.mexico\"),value:\"0052\"},{label:t(\"neteco.pvms.phone.contry.code.togo\"),value:\"00228\"},{label:t(\"neteco.pvms.phone.contry.code.dominica\"),value:\"001767\"},{label:t(\"neteco.pvms.phone.contry.code.dominican_republic\"),value:\"001809\"},{label:t(\"neteco.pvms.phone.contry.code.oran_islands\"),value:\"0035818\"},{label:t(\"neteco.pvms.phone.contry.code.austria\"),value:\"0043\"},{label:t(\"neteco.pvms.phone.contry.code.venezuela\"),value:\"0058\"},{label:t(\"neteco.pvms.phone.contry.code.bangladesh\"),value:\"00880\"},{label:t(\"neteco.pvms.phone.contry.code.angola\"),value:\"00244\"},{label:t(\"neteco.pvms.phone.contry.code.antigua_and_barbuda\"),value:\"001268\"},{label:t(\"neteco.pvms.phone.contry.code.andorra\"),value:\"00376\"},{label:t(\"neteco.pvms.phone.contry.code.micronesia\"),value:\"00691\"},{label:t(\"neteco.pvms.phone.contry.code.nicaragua\"),value:\"00505\"},{label:t(\"neteco.pvms.phone.contry.code.nigeria\"),value:\"00234\"},{label:t(\"neteco.pvms.phone.contry.code.niger\"),value:\"00227\"},{label:t(\"neteco.pvms.phone.contry.code.nepal\"),value:\"00977\"},{label:t(\"neteco.pvms.phone.contry.code.palestinian\"),value:\"00970\"},{label:t(\"neteco.pvms.phone.contry.code.bahamas\"),value:\"001242\"},{label:t(\"neteco.pvms.phone.contry.code.pakistan\"),value:\"0092\"},{label:t(\"neteco.pvms.phone.contry.code.barbados\"),value:\"001246\"},{label:t(\"neteco.pvms.phone.contry.code.papua_new_guinea\"),value:\"00675\"},{label:t(\"neteco.pvms.phone.contry.code.paraguay\"),value:\"00595\"},{label:t(\"neteco.pvms.phone.contry.code.panama\"),value:\"00507\"},{label:t(\"neteco.pvms.phone.contry.code.bahrain\"),value:\"00973\"},{label:t(\"neteco.pvms.phone.contry.code.burkina_faso\"),value:\"00226\"},{label:t(\"neteco.pvms.phone.contry.code.burundi\"),value:\"00257\"},{label:t(\"neteco.pvms.phone.contry.code.greece\"),value:\"0030\"},{label:t(\"neteco.pvms.phone.contry.code.palau_islands\"),value:\"00680\"},{label:t(\"neteco.pvms.phone.contry.code.cook_islands\"),value:\"00682\"},{label:t(\"neteco.pvms.phone.contry.code.cayman_islands\"),value:\"001345\"},{label:t(\"neteco.pvms.phone.contry.code.italy\"),value:\"0039\"},{label:t(\"neteco.pvms.phone.contry.code.solomon_islands\"),value:\"00677\"},{label:t(\"neteco.pvms.phone.contry.code.latvia\"),value:\"00371\"},{label:t(\"neteco.pvms.phone.contry.code.norway\"),value:\"0047\"},{label:t(\"neteco.pvms.phone.contry.code.czech_republic\"),value:\"00420\"},{label:t(\"neteco.pvms.phone.contry.code.moldova\"),value:\"00373\"},{label:t(\"neteco.pvms.phone.contry.code.morocco\"),value:\"00212\"},{label:t(\"neteco.pvms.phone.contry.code.monaco\"),value:\"00377\"},{label:t(\"neteco.pvms.phone.contry.code.brunei\"),value:\"00673\"},{label:t(\"neteco.pvms.phone.contry.code.fiji\"),value:\"00679\"},{label:t(\"neteco.pvms.phone.contry.code.swaziland\"),value:\"00268\"},{label:t(\"neteco.pvms.phone.contry.code.slovakia\"),value:\"00421\"},{label:t(\"neteco.pvms.phone.contry.code.slovenia\"),value:\"00386\"},{label:t(\"neteco.pvms.phone.contry.code.sri_lanka\"),value:\"0094\"},{label:t(\"neteco.pvms.phone.contry.code.singapore\"),value:\"0065\"},{label:t(\"neteco.pvms.phone.contry.code.new_caledonia\"),value:\"00687\"},{label:t(\"neteco.pvms.phone.contry.code.new_zealand\"),value:\"0064\"},{label:t(\"neteco.pvms.phone.contry.code.japan\"),value:\"0081\"},{label:t(\"neteco.pvms.phone.contry.code.chile\"),value:\"0056\"},{label:t(\"neteco.pvms.phone.contry.code.north_korea\"),value:\"00850\"},{label:t(\"neteco.pvms.phone.contry.code.cambodia\"),value:\"00855\"},{label:t(\"neteco.pvms.phone.contry.code.grenada\"),value:\"001473\"},{label:t(\"neteco.pvms.phone.contry.code.greenland\"),value:\"00299\"},{label:t(\"neteco.pvms.phone.contry.code.georgia\"),value:\"00995\"},{label:t(\"neteco.pvms.phone.contry.code.belgium\"),value:\"0032\"},{label:t(\"neteco.pvms.phone.contry.code.mauritania\"),value:\"00222\"},{label:t(\"neteco.pvms.phone.contry.code.mauritius\"),value:\"00230\"},{label:t(\"neteco.pvms.phone.contry.code.tonga\"),value:\"00676\"},{label:t(\"neteco.pvms.phone.contry.code.saudi_arabia\"),value:\"00966\"},{label:t(\"neteco.pvms.phone.contry.code.france\"),value:\"0033\"},{label:t(\"neteco.pvms.phone.contry.code.french_guiana\"),value:\"00594\"},{label:t(\"neteco.pvms.phone.contry.code.french_polynesia\"),value:\"00689\"},{label:t(\"neteco.pvms.phone.contry.code.faroe_islands\"),value:\"00298\"},{label:t(\"neteco.pvms.phone.contry.code.poland\"),value:\"0048\"},{label:t(\"neteco.pvms.phone.contry.code.puerto_rico\"),value:\"001787\"},{label:t(\"neteco.pvms.phone.contry.code.bosnia_and_herzegovina\"),value:\"00387\"},{label:t(\"neteco.pvms.phone.contry.code.thailand\"),value:\"0066\"},{label:t(\"neteco.pvms.phone.contry.code.zimbabwe\"),value:\"00263\"},{label:t(\"neteco.pvms.phone.contry.code.honduras\"),value:\"00504\"},{label:t(\"neteco.pvms.phone.contry.code.haiti\"),value:\"00509\"},{label:t(\"neteco.pvms.phone.contry.code.australia\"),value:\"0061\"},{label:t(\"neteco.pvms.phone.contry.code.macao\"),value:\"00853\"},{label:t(\"neteco.pvms.phone.contry.code.ireland\"),value:\"00353\"},{label:t(\"neteco.pvms.phone.contry.code.estonia\"),value:\"00372\"},{label:t(\"neteco.pvms.phone.contry.code.jamaica\"),value:\"001876\"},{label:t(\"neteco.pvms.phone.contry.code.turks_and_caicos_islands\"),value:\"001649\"},{label:t(\"neteco.pvms.phone.contry.code.trinidad_and_tobago\"),value:\"001868\"},{label:t(\"neteco.pvms.phone.contry.code.bolivia\"),value:\"00591\"},{label:t(\"neteco.pvms.phone.contry.code.nauru\"),value:\"00674\"},{label:t(\"neteco.pvms.phone.contry.code.sweden\"),value:\"0046\"},{label:t(\"neteco.pvms.phone.contry.code.switzerland\"),value:\"0041\"},{label:t(\"neteco.pvms.phone.contry.code.guadeloupe\"),value:\"00590\"},{label:t(\"neteco.pvms.phone.contry.code.vanuatu\"),value:\"00678\"},{label:t(\"neteco.pvms.phone.contry.code.ninwang_island\"),value:\"00262\"},{label:t(\"neteco.pvms.phone.contry.code.belarus\"),value:\"00375\"},{label:t(\"neteco.pvms.phone.contry.code.bermuda\"),value:\"001441\"},{label:t(\"neteco.pvms.phone.contry.code.gibraltar\"),value:\"00350\"},{label:t(\"neteco.pvms.phone.contry.code.falkland_islands(malvinas)\"),value:\"00500\"},{label:t(\"neteco.pvms.phone.contry.code.kuwait\"),value:\"00965\"},{label:t(\"neteco.pvms.phone.contry.code.comoro\"),value:\"00269\"},{label:t(\"neteco.pvms.phone.contry.code.cote_d'ivoire\"),value:\"00225\"},{label:t(\"neteco.pvms.phone.contry.code.peru\"),value:\"0051\"},{label:t(\"neteco.pvms.phone.contry.code.tunis\"),value:\"00216\"},{label:t(\"neteco.pvms.phone.contry.code.lithuania\"),value:\"00370\"},{label:t(\"neteco.pvms.phone.contry.code.somalia\"),value:\"00252\"},{label:t(\"neteco.pvms.phone.contry.code.jordan\"),value:\"00962\"},{label:t(\"neteco.pvms.phone.contry.code.namibia\"),value:\"00264\"},{label:t(\"neteco.pvms.phone.contry.code.niue\"),value:\"00683\"},{label:t(\"neteco.pvms.phone.contry.code.myanmar\"),value:\"0095\"},{label:t(\"neteco.pvms.phone.contry.code.romania\"),value:\"0040\"},{label:t(\"neteco.pvms.phone.contry.code.united_states\"),value:\"001\"},{label:t(\"neteco.pvms.phone.contry.code.virgin_islands,u.s.\"),value:\"001340\"},{label:t(\"neteco.pvms.phone.contry.code.american_samoa\"),value:\"001684\"},{label:t(\"neteco.pvms.phone.contry.code.laos\"),value:\"00856\"},{label:t(\"neteco.pvms.phone.contry.code.kenya\"),value:\"00254\"},{label:t(\"neteco.pvms.phone.contry.code.finland\"),value:\"00358\"},{label:t(\"neteco.pvms.phone.contry.code.sudan\"),value:\"00249\"},{label:t(\"neteco.pvms.phone.contry.code.suriname\"),value:\"00597\"},{label:t(\"neteco.pvms.phone.contry.code.united_kingdom\"),value:\"0044\"},{label:t(\"neteco.pvms.phone.contry.code.virgin_islands,british\"),value:\"001284\"},{label:t(\"neteco.pvms.phone.contry.code.netherlands_antilles\"),value:\"00599\"},{label:t(\"neteco.pvms.phone.contry.code.mozambique\"),value:\"00258\"},{label:t(\"neteco.pvms.phone.contry.code.lesotho\"),value:\"00266\"},{label:t(\"neteco.pvms.phone.contry.code.salvador\"),value:\"00503\"},{label:t(\"neteco.pvms.phone.contry.code.samoa\"),value:\"00685\"},{label:t(\"neteco.pvms.phone.contry.code.portugal\"),value:\"00351\"},{label:t(\"neteco.pvms.phone.contry.code.mongolia\"),value:\"00976\"},{label:t(\"neteco.pvms.phone.contry.code.montserrat_island\"),value:\"001664\"},{label:t(\"neteco.pvms.phone.contry.code.spain\"),value:\"0034\"},{label:t(\"neteco.pvms.phone.contry.code.norfolk_island\"),value:\"00672\"},{label:t(\"neteco.pvms.phone.contry.code.benin\"),value:\"00229\"},{label:t(\"neteco.pvms.phone.contry.code.zambia\"),value:\"00260\"},{label:t(\"neteco.pvms.phone.contry.code.equatorial_guinea\"),value:\"00240\"},{label:t(\"neteco.pvms.phone.contry.code.vietnam\"),value:\"0084\"},{label:t(\"neteco.pvms.phone.contry.code.azerbaijan\"),value:\"00994\"},{label:t(\"neteco.pvms.phone.contry.code.afghanistan\"),value:\"0093\"},{label:t(\"neteco.pvms.phone.contry.code.algeria\"),value:\"00213\"},{label:t(\"neteco.pvms.phone.contry.code.albania\"),value:\"00355\"},{label:t(\"neteco.pvms.phone.contry.code.oman\"),value:\"00968\"},{label:t(\"neteco.pvms.phone.contry.code.argentina\"),value:\"0054\"},{label:t(\"neteco.pvms.phone.contry.code.united_arab_emirates\"),value:\"00971\"},{label:t(\"neteco.pvms.phone.contry.code.aruba_island\"),value:\"00297\"},{label:t(\"neteco.pvms.phone.contry.code.south_korea\"),value:\"0082\"},{label:t(\"neteco.pvms.phone.contry.code.hong_kong\"),value:\"00852\"},{label:t(\"neteco.pvms.phone.contry.code.macedonia\"),value:\"00389\"},{label:t(\"neteco.pvms.phone.contry.code.maldives\"),value:\"00960\"},{label:t(\"neteco.pvms.phone.contry.code.malawi\"),value:\"00265\"},{label:t(\"neteco.pvms.phone.contry.code.martinique\"),value:\"00596\"},{label:t(\"neteco.pvms.phone.contry.code.malaysia\"),value:\"0060\"},{label:t(\"neteco.pvms.phone.contry.code.marshall_islands\"),value:\"00692\"},{label:t(\"neteco.pvms.phone.contry.code.malta\"),value:\"00356\"},{label:t(\"neteco.pvms.phone.contry.code.madagascar\"),value:\"00261\"},{label:t(\"neteco.pvms.phone.contry.code.mali\"),value:\"00223\"},{label:t(\"neteco.pvms.phone.contry.code.lebanon\"),value:\"00961\"},{label:t(\"neteco.pvms.phone.contry.code.montenegro\"),value:\"00382\"}]}},35066:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(88391),i=n(23712);const o=\"/rest/pvms/web/station/v1/archives/archives-image-preview\";function a(e){let{visible:t,imgList:n,index:a=null,onClose:s,isStatic:l}=e;const[c,u]=(0,r.useState)(0);return(0,r.useEffect)((()=>{u(a)}),[a]),t&&n.length&&null!==c&&(0,i.jsxs)(\"div\",{className:\"nco-pic-preview\",children:[(0,i.jsx)(\"div\",{className:\"preview-mask\"}),(0,i.jsxs)(\"div\",{className:\"preview-wrapper\",children:[(0,i.jsx)(\"div\",{className:\"big-pic-wrapper\",children:(0,i.jsx)(\"img\",{src:l?n[c]:`${o}?fileId=${n[c].originalFileId}`,className:\"big-pic\"})}),(0,i.jsx)(\"div\",{className:\"close-icon icon-box\",onClick:()=>{s&&s()},children:(0,i.jsx)(\"span\",{className:\"icon-close-lined btn-icon\"})}),(0,i.jsxs)(\"div\",{className:\"preview-control\",children:[(0,i.jsx)(\"div\",{className:\"left-icon icon-box\",onClick:()=>{0!==c&&u(c-1)},children:(0,i.jsx)(\"span\",{className:\"icon-left-arrow-lined btn-icon\"})}),(0,i.jsx)(\"div\",{className:\"right-icon icon-box\",onClick:()=>{c!==n.length-1&&u(c+1)},children:(0,i.jsx)(\"span\",{className:\"icon-right-arrow-lined btn-icon\"})})]})]})]})}},7926:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,T:()=>i});const r=\"NCOPOWERANDPROFIT/START_LOADING\",i=\"NCOPOWERANDPROFIT/FINISH_LOADING\"},35533:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>s});var r=n(37920),i=n.n(r),o=n(7926);const a={loading:!1,timeDimension:\"day\",hasMeter:!1,statisticTime:i()().startOf(\"day\"),data:{xAxis:[],yAxis:[]}},s=(e,t)=>{const n=null!=e?e:a;switch(t.type){case o.T:return{...n,loading:!1,statisticTime:i()().startOf(\"day\"),data:t.payload.data,hasMeter:t.payload.hasMeter};case o.M:return{...n,loading:!0};default:return n}}},26586:(e,t,n)=>{\"use strict\";n.d(t,{AG:()=>v,BX:()=>s,Dj:()=>a,Fl:()=>o,Mb:()=>r,Rc:()=>h,Rt:()=>c,T_:()=>i,Vt:()=>l,Z0:()=>d,_6:()=>u,jo:()=>b,sS:()=>y,t:()=>m,t4:()=>g,tC:()=>f,zY:()=>p});const r=\"NCOPRICESETTINGS/START_LOADING\",i=\"NCOPRICESETTINGS/FINISH_LOADING\",o=\"NCOPRICESETTINGS/ADD_HOUR_RANGE\",a=\"NCOPRICESETTINGS/DELETE_HOUR_RANGE\",s=\"NCOPRICESETTINGS/CHANGE_HOUR_RANGE\",l=\"NCOPRICESETTINGS/ADD_DATE_RANGE\",c=\"NCOPRICESETTINGS/DELETE_DATE_RANGE\",u=\"NCOPRICESETTINGS/CHANGE_DATE_RANGE\",d=\"NCOPRICESETTINGS/RESET_RANGE\",p=\"NCOPRICESETTINGS/UPDATE_STATE_RANGE\",f=\"NCOPRICESETTINGS/LOAD_STATION_PRICES\",h=\"NCOPRICESETTINGS/SAVE_COMPANY_DN\",m=\"NCOPRICESETTINGS/SAVE_CHANGE_STATUS\",g=\"NCOPRICESETTINGS/SAVE_CURRENCY\",v=\"NCOPRICESETTINGS/SAVE_CHANGED_TAB_KEY\",y=\"NCOPRICESETTINGS/SAVE_SECOND_COMPANY\",b=\"NCOPRICESETTINGS/SAVE_USER_CURRENCY\"},68011:(e,t,n)=>{\"use strict\";n.d(t,{Q:()=>ae,I:()=>se.Z});var r=n(23774),i=n(93706),o=n(21499),a=n(41541),s=n(53309),l=n(32449),c=n(88391),u=n(78939),d=n(55534),p=n.n(d),f=n(37825),h=n(31251),m=n(44184);const g=n.p+\"static/media/rocket.4436ba7d7d6de4b366edd1b6672a2c5c.svg\";var v=n(77905),y=n(70535),b=n(62073),S=n(17489),x=n(41779),w=n(83862),C=n(45258),T=n(37920),A=n.n(T),E=n(31588),O=n(56155),M=n(92252),P=n(21292),D=n.n(P),I=n(23712);const N=D()(0,25).map((e=>({key:e,str:e<10?`0${e}:00:00`:`${e}:00:00`}))),{Option:_}=M.Z,j=e=>{let{value:t,onChange:n,disabled:r,readonly:i}=e;const{borderHour:o,type:a}=r;let s=[];return s=\"begin\"===a?N.filter((e=>{let{key:t}=e;return t<o})):N.filter((e=>{let{key:t}=e;return t>o})),24===o&&24===t&&s.push({key:24,str:\"24:00:00\"}),(0,I.jsx)(\"div\",{className:\"nco-hour-selector\",children:(0,I.jsx)(M.Z,{virtual:!1,value:t,onChange:n,disabled:i,children:s.map((e=>{let{key:t,str:n}=e;return(0,I.jsx)(_,{value:t,children:n},t)}))})})};var k=n(59516),L=n(13528);const R=\"MM-DD\",Z=A()().startOf(\"year\"),B=A()().endOf(\"year\").startOf(\"day\"),F=(0,i.ZP)((e=>{let{price:t,priceItem:n,currency:r,intl:i,addHourRangeHandler:o,deleteHourRangeHandler:a,changeHourRangeHandler:s,deleteDateRangeHandler:l,changeDateRangeHandler:c,disabled:d,isPrivilegeAndRoot:p}=e;const{beginDate:f,endDate:h}=t,m=e=>{const t={add:[k.WL9,k.mCK,k.E0$],delete:[k.myN,k.Ye1,k.E0$]};return p||(0,k.agq)(t[e])&&!d};return(0,I.jsxs)(\"div\",{className:\"nco-price-setting\",children:[(0,I.jsxs)(\"div\",{className:\"nco-price-setting-date-range\",children:[(0,I.jsxs)(\"span\",{className:\"nco-price-setting-range-name\",children:[(0,I.jsx)(u.Z,{id:\"neteco.pvms.stationInfo.addStation.priceSettingList.timeRanges\"}),\":\"]}),(0,I.jsxs)(\"span\",{children:[(0,I.jsx)(w.Z,{value:f,format:R,allowClear:!1,disabledDate:e=>e<Z||e>h.endOf(\"day\"),dropdownClassName:\"nco-price-setting-date-picker\",onChange:e=>c(\"beginDate\",e),disabled:d}),\"–\",(0,I.jsx)(w.Z,{value:h,format:R,allowClear:!1,disabledDate:e=>e>B.endOf(\"day\")||e<f.startOf(\"day\"),dropdownClassName:\"nco-price-setting-date-picker\",onChange:e=>c(\"endDate\",e),disabled:d})]}),(0,I.jsxs)(\"div\",{className:\"nco-price-setting-add-remove\",children:[m(\"add\")&&(0,I.jsx)(E.Z,{className:\"nco-price-setting-add-hour\",onClick:()=>{24!==n.length?o():C.Z.info({title:i.formatMessage({id:\"neteco.pvms.systemSetting.amendment.toolTip\"}),content:i.formatMessage({id:\"neteco.pvms.stationInfo.addStation.priceSettingList.most24Records\"}),okText:i.formatMessage({id:\"common.button.ok\"})})}}),m(\"delete\")&&(0,I.jsx)(O.Z,{className:\"nco-price-setting-remove-date\",onClick:l})]})]}),(0,I.jsx)(x.Z,{}),(0,I.jsx)(\"div\",{children:n.map(((e,t)=>{let{beginHour:n,endHour:i,price:o}=e;return(0,I.jsx)(\"div\",{className:\"nco-price-setting-hour-range\",children:(0,I.jsxs)(y.Z,{children:[(0,I.jsxs)(S.Z,{span:7,children:[(0,I.jsxs)(\"span\",{className:\"nco-price-setting-range-name\",children:[(0,I.jsx)(u.Z,{id:\"neteco.pvms.partials.main.dm.devParamMenu.energyStorage.beginTime\"}),\":\"]}),(0,I.jsx)(j,{value:n,disabled:{borderHour:i,type:\"begin\"},onChange:e=>s(t,\"beginHour\",e),readonly:d})]}),(0,I.jsxs)(S.Z,{span:7,children:[(0,I.jsxs)(\"span\",{className:\"nco-price-setting-range-name\",children:[(0,I.jsx)(u.Z,{id:\"neteco.pvms.partials.main.dm.devParamMenu.energyStorage.endTime\"}),\":\"]}),(0,I.jsx)(j,{value:i,disabled:{borderHour:n,type:\"end\"},onChange:e=>s(t,\"endHour\",e),readonly:d})]}),(0,I.jsxs)(S.Z,{span:7,children:[(0,I.jsxs)(\"span\",{className:\"nco-price-setting-range-name\",children:[(0,I.jsx)(u.Z,{id:\"neteco.pvms.stationInfo.addStation.price\"}),\":\"]}),(0,I.jsx)(b.Z,{value:(0,L.eD)(o),onChange:e=>s(t,\"price\",e.target.value),disabled:d}),r,\"/ kWh\"]}),(0,I.jsx)(S.Z,{span:3,children:m(\"delete\")&&(0,I.jsx)(\"span\",{className:\"nco-price-setting-remove-hour\",onClick:()=>a(t),children:(0,I.jsx)(O.Z,{className:\"nco-price-setting-remove-date\"})})})]})},`hour${t}`)}))})]})}));var z=n(37414),V=n(64923),H=n(74794),U=n(31519);const{TabPane:G}=l.Z;class Y extends c.Component{constructor(e){super(e),this.savePrice=(e,t)=>{const{onGridPrice:n,purchasePrice:r,savePriceData:i,companyDn:o}=this.props,{activeKey:a}=this.state;this.validateActivePrice()&&i(o,{onGridPrice:n,purchasePrice:r},a,e,t)},this.changeActiveTab=e=>{this.setState({activeKey:e})},this.addHourRangeHandler=e=>{const{addHourRange:t}=this.props,{activeKey:n}=this.state;t({activeKey:n,dateRangeIndex:e})},this.deleteHourRangeHandler=(e,t)=>{const{deleteHourRange:n}=this.props,{activeKey:r}=this.state;n({activeKey:r,dateRangeIndex:e,hourRangeIndex:t})},this.changeHourRangeHandler=(e,t,n,r)=>{const{changeHourRange:i}=this.props,{activeKey:o}=this.state;i({activeKey:o,dateRangeIndex:e,hourRangeIndex:t,rangeKey:n,value:r})},this.addDateRangeHandler=()=>{const{addDateRange:e}=this.props,{activeKey:t}=this.state;e({activeKey:t})},this.deleteDateRangeHandler=e=>{const{deleteDateRange:t}=this.props,{activeKey:n}=this.state;t({activeKey:n,dateRangeIndex:e})},this.changeDateRangeHandler=(e,t,n)=>{const{changeDateRange:r}=this.props,{activeKey:i}=this.state;r({activeKey:i,dateRangeIndex:e,rangeKey:t,value:n})},this.renderTabContent=(e,t,n,r)=>e.map(((e,i)=>(0,I.jsx)(F,{disabled:this.props.disabled,currency:t||n,parentDn:r,isPrivilegeAndRoot:this.props.isPrivilegeAndRoot,...e,addHourRangeHandler:()=>this.addHourRangeHandler(i),deleteHourRangeHandler:e=>this.deleteHourRangeHandler(i,e),changeHourRangeHandler:(e,t,n)=>this.changeHourRangeHandler(i,e,t,n),deleteDateRangeHandler:()=>this.deleteDateRangeHandler(i),changeDateRangeHandler:(e,t)=>this.changeDateRangeHandler(i,e,t)},`date${i}`))),this.useDefaultPrice=()=>{const{parentDn:e,getPriceData:t,intl:n}=this.props;let r=\"/\";r=e,t({dn:r,type:\"companyDn\"},\"ALL\",!0,n)},this.validateActivePrice=()=>{const{intl:e,onGridPrice:t,purchasePrice:n,finishSaveLoading:r}=this.props,{activeKey:i}=this.state;return(0,V.S)(e,t,n,i,r)},this.translate=(e,t)=>{const{intl:n}=this.props;return n.formatMessage({id:e},t)},this.goNewVersion=()=>{const{stationDn:e}=this.props;(0,m.er)(e,U.e.elecPriceEntry.entryType.BY_PLANT_MANAGEMENT_EDIT,!0)},this.state={activeKey:v.KC,defaultPrice:{}},this.isSolarScene=f.H0.includes((0,h.rC)())}componentDidMount(){const{reset:e,getChildObj:t}=this.props;this.subscription=z.wb.subscribe((()=>{e()})),this.resetDefalutSubscription=z.tb.subscribe((()=>{const{onChange:e}=this.props,{defaultPrice:t}=this.state;if(e){e({...t,form:this.props.form});const{updatePriceData:n}=this.props;n(t)}})),this.updateDefaultPrice=z.WU.subscribe((()=>{const{value:e}=this.props;this.setState({defaultPrice:{...e,changed:!1}})})),t&&t(this),this.onChangeHandler()}onChangeHandler(){const{getPriceData:e,stationDn:t,parentDn:n,loadNcoPriceSettings:r,getCurrency:i,onChange:o,currentCompanyDn:a,disabled:s,shareStationCompanyDetail:l,loadCurrentCompany:c}=this.props,{activeKey:u}=this.state;if(o){if(t&&e({dn:t,type:\"stationDn\"},\"ALL\"),n&&!s)i(n),c();else if(s&&l){const{companyDn:e}=l;i(e),c()}}else i(a),c(),r(u,a)}componentDidUpdate(e,t){const{onGridPrice:n,purchasePrice:r,value:i,companyDn:o,parentDn:a,isChanged:s,setChangedStatus:l,setContentChanged:c,getCurrency:u,changedTabKey:d,currentCompanyDn:f,loadNcoPriceSettings:h,loadCurrentCompany:m,currency:g,reset:v,userCurrency:y}=this.props;if(f!==e.currentCompanyDn&&u(f),!p()(n,e.onGridPrice)||!p()(r,e.purchasePrice)){const{onChange:e}=this.props;e&&e({onGridPrice:n,purchasePrice:r,changedTabKey:d,changed:s,form:this.props.form})}if(a!==e.parentDn&&(u(a),m()),s!==e.isChanged&&(l&&l(s),c&&s&&c()),!p()(i,e.value)){const{updateState:e}=this.props;if(i.onGridPrice.length||i.purchasePrice.length){e(i);const{defaultPrice:t}=this.state;t.onGridPrice||this.setState({defaultPrice:{...i,changed:!1}})}}const{activeKey:b}=this.state;if(p()(f,e.currentCompanyDn)||h(b,f),!p()(b,t.activeKey)){const{getPriceData:e}=this.props;a||e({dn:o,type:\"companyDn\"},b)}b!==t.activeKey||n.length!==e.onGridPrice.length+1&&r.length!==e.purchasePrice.length+1||window.scrollTo(0,window.document.body.scrollHeight),this.subscription=z.wb.subscribe((()=>{v(g||y)}))}componentWillUnmount(){const{reset:e,currency:t,userCurrency:n}=this.props;e(t||n),this.subscription&&this.subscription.unsubscribe(),this.resetDefalutSubscription&&this.resetDefalutSubscription.unsubscribe(),this.updateDefaultPrice&&this.updateDefaultPrice.unsubscribe(),this.validateChangedPrice&&this.validateChangedPrice.unsubscribe(),this.getChangedPriceData&&this.getChangedPriceData.unsubscribe()}renderNewPriceRedirect(){const{intl:e}=this.props;return(0,I.jsx)(\"div\",{style:{textAlign:\"center\",marginTop:220},children:(0,k.lVp)(k.Zph)||(0,k.lVp)(k.oCx)?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(\"img\",{src:g,alt:\"updated\"}),(0,I.jsx)(\"div\",{children:e.formatMessage({id:\"neteco.pvms.station.elecPrice.redirect\"},{link:(0,I.jsxs)(\"a\",{onClick:this.goNewVersion,style:{margin:\"0 4px\"},children:[e.formatMessage({id:\"ncoFixKpi.searchBar.station\"}),\" > \",e.formatMessage({id:\"neteco.pvms.elecPrice.menu.configuration\"}),\" > \",e.formatMessage({id:\"neteco.pvms.smsrc.updateStation_price\"})]})})})]}):(0,I.jsx)(s.Z,{image:\"/pvmswebsite/assets/build/images/station/noData.png\",description:e.formatMessage({id:\"neteco.pvms.noData\"})})})}render(){const{onGridPrice:e,purchasePrice:t,intl:n,loading:r,parentDn:i,isModifyMode:s,currency:c,disabled:d,userCurrency:p}=this.props,f=i||this.props.isPrivilegeAndRoot;return i&&s&&\"true\"!==sessionStorage.allowOldElecPrice?this.renderNewPriceRedirect():(0,I.jsxs)(\"div\",{className:\"nco-price-settings\",id:\"nco_price_settings\",children:[(0,I.jsx)(H.Bo,{children:()=>(0,I.jsxs)(\"div\",{className:\"nco-price-setting-header\",children:[(0,I.jsxs)(\"div\",{className:\"nco-price-settings-add-date-range\",children:[i&&this.isSolarScene&&(0,I.jsx)(a.Z,{onClick:this.useDefaultPrice,disabled:d,children:(0,I.jsx)(u.Z,{id:\"neteco.pvms.stationInfo.addStation.priceSettingList.useCompanyDefaultPrice\"})}),(f||(0,k.lVp)(k.mCK))&&(0,I.jsx)(a.Z,{type:\"primary\",onClick:this.addDateRangeHandler,disabled:d,children:(0,I.jsx)(u.Z,{id:\"neteco.pvms.create\"})})]}),(0,I.jsxs)(l.Z,{defaultActiveKey:v.KC,onChange:this.changeActiveTab,children:[(f||(0,k.lVp)(k.xfD))&&(0,I.jsx)(G,{tab:n.formatMessage({id:\"neteco.pvms.stationInfo.addStation.priceSettingList.gridPrice\"}),children:(0,I.jsx)(\"div\",{className:\"nco-price-setting-wrapper\",children:(0,I.jsx)(o.Z,{spinning:r,children:this.renderTabContent(e,c,p,i)})})},\"onGridPrice\"),(f||(0,k.lVp)(k.Xtm))&&(0,I.jsx)(G,{tab:n.formatMessage({id:\"neteco.pvms.stationInfo.addStation.priceSettingList.purchasePrice\"}),children:(0,I.jsx)(\"div\",{className:\"nco-price-setting-wrapper\",children:(0,I.jsx)(o.Z,{spinning:r,children:this.renderTabContent(t,c,p,i)})})},v.vd),\" \"]})]})}),(0,I.jsxs)(\"div\",{className:\"nco-price-settings-titp\",children:[(0,I.jsx)(\"span\",{children:this.props.intl.formatMessage({id:\"neteco.pvms.register.firstnote\"})}),(0,I.jsx)(\"div\",{className:\"nco-price-tip\",children:this.props.intl.formatMessage({id:\"neteco.pvms.stationInfo.elecPrice.gridPrice.tip0New\"})}),(0,I.jsx)(\"div\",{className:\"nco-price-tip\",children:this.props.intl.formatMessage({id:\"neteco.pvms.stationInfo.elecPrice.gridPrice.tip1New\"})}),(0,I.jsx)(\"div\",{className:\"nco-price-tip\",children:this.props.intl.formatMessage({id:\"neteco.pvms.stationInfo.elecPrice.gridPrice.tip2New\"})})]})]})}}const W=Y;var K=n(5807),q=n(31464),Q=n(68020),X=n(49453),J=n(26586);const $=e=>({type:J.zY,payload:e}),ee=e=>({type:J.Rc,payload:e}),te=e=>({type:J.t4,payload:e}),ne=e=>({type:J.t,payload:e}),re=e=>({type:J.jo,payload:e}),ie=e=>({type:J.AG,payload:e}),oe=async(e,t,n,r,i)=>{var o,a;let{dn:s,type:l}=t;const c=null!=r&&r;e({type:J.Mb});let u={};if(\"companyDn\"===l){const{success:e,data:t}=await(0,X.U2)(Q.VI,{companyDn:s});u=t.stationCode?t:void 0}else{const{success:e,data:t}=await(0,X.v_)(Q.zy,[s]);u=t[0]}let d=[],p=[],f=!1;u||(u=(0,Q._z)(),f=!0),null!==(o=u.ongridPrice)&&void 0!==o&&o.length||(u.ongridPrice=(0,Q.nm)()),null!==(a=u.purchasePrice)&&void 0!==a&&a.length||(u.purchasePrice=(0,Q.nm)()),n===v.KC?(d=(0,Q.gJ)(u.ongridPrice),e(ne(!1)),e(ie([]))):n===v.vd?(p=(0,Q.gJ)(u.purchasePrice),e(ne(!1)),e(ie([]))):(d=(0,Q.gJ)(u.ongridPrice),c&&(e(ne(!0)),e(ie([v.KC]))),p=(0,Q.gJ)(u.purchasePrice),c&&(e(ne(!0)),e(ie([v.vd]))),c&&f?C.Z.info({title:i.formatMessage({id:\"neteco.pvms.info\"}),content:i.formatMessage({id:\"neteco.pvms.stationInfo.addStation.priceSettingList.noCompanyDefaultPrice\"}),okText:i.formatMessage({id:\"common.button.ok\"})}):c||(e(ne(!1)),e(ie([])))),e($({onGridPrice:d,purchasePrice:p})),e({type:J.T_})},ae=(0,r.$j)((e=>({loading:e.ncoPriceSettings.loading,onGridPrice:e.ncoPriceSettings.onGridPrice,purchasePrice:e.ncoPriceSettings.purchasePrice,companyDn:e.ncoPriceSettings.companyDn,currency:e.ncoPriceSettings.currency,userCurrency:e.ncoPriceSettings.userCurrency,isChanged:e.ncoPriceSettings.isChanged,isEdit:e.ncoPriceSettings.isEdit,changedTabKey:e.ncoPriceSettings.changedTabKey,secondCompany:e.ncoPriceSettings.secondCompany})),(e=>({loadNcoPriceSettings:(t,n)=>{(async(e,t,n)=>{if(n)e(ee(n)),oe(e,{dn:n,type:\"companyDn\"},t);else{const n=await K.Z.getCurrentCompany();if(!(0,m.xb)(n)){const r=n.moDn||\"/\";e(ee(r)),oe(e,{dn:r,type:\"companyDn\"},t)}}})(e,t,n)},getPriceData:(t,n,r,i)=>{oe(e,t,n,r,i)},getCurrency:t=>{(async(e,t)=>{if(window.neteco.util.getProductType().type===f.M5.aiboost)return void(async(e,t)=>{const{code:n,data:r}=await(0,X.U2)(\"/rest/neteco/web/config/domain/v1/default-price/query-price\",{dn:t});if(0===n){const t=Object.keys(r).map((e=>[e,r[e].value])),n=Object.fromEntries(t),i=q.qD[n[21007]];e(te(i))}})(e,t);const n=localStorage.getItem(\"initLanguage\"),r=t=>{const{currency:r}=t,i=r?q.qD[r]:q.qD[q.s[n]];e(te(i))};if((0,k.lVp)(k.Ii4)){const{success:i,data:o}=await(0,X.U2)(\"/rest/neteco/web/organization/v2/company\",{companyDn:t});return void(i?r(o):e(te(q.qD[q.s[n]])))}const i=await K.Z.getCurrentCompany();(0,m.xb)(i)?e(te(q.qD[q.s[n]])):r(i)})(e,t)},savePriceData:(t,n,r,i,o)=>{(async(e,t,n,r,i,o)=>{const a=[];if(r===v.KC){const{ongridPrice:e}=(0,Q.uT)(n);a.push((0,Q.h0)(t,Q.Zz,e,n.purchasePrice))}else if(r===v.vd){const{purchasePrice:e}=(0,Q.uT)(n);a.push((0,Q.h0)(t,Q.vp,n.onGridPrice,e))}else{const{ongridPrice:e,purchasePrice:r}=(0,Q.uT)(n);a.push((0,Q.h0)(t,Q.rJ,e,r))}const{success:s}=await(0,X.v_)(Q.p1,a[0]);s?(e(ne(!1)),e(ie([])),r!==v.KC&&r!==v.vd||oe(e,{dn:t,type:\"companyDn\"},r),i&&i()):(e(ne(!0)),o&&o())})(e,t,n,r,i,o)},addHourRange:t=>{let{activeKey:n,dateRangeIndex:r}=t;((e,t)=>{let{activeKey:n,dateRangeIndex:r}=t;e(ie([n])),e({type:J.Fl,payload:{activeKey:n,dateRangeIndex:r}})})(e,{activeKey:n,dateRangeIndex:r})},deleteHourRange:t=>{let{activeKey:n,dateRangeIndex:r,hourRangeIndex:i}=t;((e,t)=>{let{activeKey:n,dateRangeIndex:r,hourRangeIndex:i}=t;e(ie([n])),e({type:J.Dj,payload:{activeKey:n,dateRangeIndex:r,hourRangeIndex:i}})})(e,{activeKey:n,dateRangeIndex:r,hourRangeIndex:i})},changeHourRange:t=>{let{activeKey:n,dateRangeIndex:r,hourRangeIndex:i,rangeKey:o,value:a}=t;((e,t)=>{let{activeKey:n,dateRangeIndex:r,hourRangeIndex:i,rangeKey:o,value:a}=t;e(ie([n])),e({type:J.BX,payload:{activeKey:n,dateRangeIndex:r,hourRangeIndex:i,rangeKey:o,value:a}})})(e,{activeKey:n,dateRangeIndex:r,hourRangeIndex:i,rangeKey:o,value:a})},addDateRange:t=>{let{activeKey:n}=t;((e,t)=>{let{activeKey:n}=t;e(ie([n])),e({type:J.Vt,payload:{activeKey:n}})})(e,{activeKey:n})},deleteDateRange:t=>{let{activeKey:n,dateRangeIndex:r}=t;((e,t)=>{let{activeKey:n,dateRangeIndex:r}=t;e(ie([n])),e({type:J.Rt,payload:{activeKey:n,dateRangeIndex:r}})})(e,{activeKey:n,dateRangeIndex:r})},changeDateRange:t=>{let{activeKey:n,dateRangeIndex:r,rangeKey:i,value:o}=t;((e,t)=>{let{activeKey:n,dateRangeIndex:r,rangeKey:i,value:o}=t;e(ie([n])),e({type:J._6,payload:{activeKey:n,dateRangeIndex:r,rangeKey:i,value:o}})})(e,{activeKey:n,dateRangeIndex:r,rangeKey:i,value:o})},reset:t=>{((e,t)=>{e({type:J.Z0,payload:{currency:t}})})(e,t)},updateState:t=>{$(e)},loadCurrentCompany:()=>{(async e=>{const t=window.neteco.i18n.getLocale(),n=await K.Z.getCurrentCompany();if((0,m.xb)(n))e(re(q.qD[q.s[t]]));else{const{currency:r}=n,i=r?q.qD[r]:q.qD[q.s[t]];e(re(i))}})(e)},updatePriceData:t=>{(async(e,t)=>{e($({onGridPrice:t.onGridPrice,purchasePrice:t.purchasePrice}))})(e,t)}})))((0,i.ZP)(W));var se=n(63209)},63209:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>S});var r=n(37920),i=n.n(r),o=n(26586),a=n(77905);const s=i()().startOf(\"year\"),l=i()().endOf(\"year\").startOf(\"day\"),c={loading:!1,isEdit:!0,isChanged:!0,changedTabKey:[],companyDn:\"/\",currency:\"\",userCurrency:\"CNY\",secondCompany:\"/\",onGridPrice:[{price:{beginDate:s,endDate:l,beginDateString:\"01-01\",endDateString:\"12-31\"},priceItem:[{beginHour:0,endHour:24,price:void 0}]}],purchasePrice:[{price:{beginDate:s,endDate:l,beginDateString:\"01-01\",endDateString:\"12-31\"},priceItem:[{beginHour:0,endHour:24,price:void 0}]}]},u=e=>e===a.KC?\"onGridPrice\":\"purchasePrice\",d=(e,t)=>{let{activeKey:n,dateRangeIndex:r}=t;const i=u(n),o=e[i],a=o[r],[s,l]=(e=>{let{priceItem:t}=e;if(0===t.length)return[0,24];const{endHour:n}=t[t.length-1];return[n,24]})(a),c={beginHour:s,endHour:l,price:\"\"};return{[i]:o.map(((e,t)=>r===t?{...e,priceItem:[...e.priceItem,c]}:e))}},p=(e,t)=>{let{activeKey:n,dateRangeIndex:r,hourRangeIndex:i}=t;const o=u(n),a=e[o];return{[o]:a.map(((e,t)=>r===t?{...e,priceItem:e.priceItem.filter(((e,t)=>t!==i))}:e))}},f=(e,t)=>{let{activeKey:n,dateRangeIndex:r,hourRangeIndex:i,rangeKey:o,value:a}=t;const s=u(n),l=e[s];return{[s]:l.map(((e,t)=>r===t?{...e,priceItem:e.priceItem.map(((e,t)=>t===i?{...e,[o]:a}:e))}:e))}},h=(e,t)=>{let{activeKey:n}=t;const r=u(n),i=e[r],[o,a]=(e=>{if(0===e.length)return[s,l];const{price:t}=e[e.length-1],{endDate:n}=t;return\"12-31\"===n.format(\"MM-DD\")?[s,l]:[n.clone().add(1,\"day\"),l]})(i),c={price:{beginDate:o.startOf(\"day\"),endDate:a.startOf(\"day\"),beginDateString:o.format(\"MM-DD\"),endDateString:a.format(\"MM-DD\")},priceItem:[{beginHour:0,endHour:24,price:\"\"}]};return{[r]:[...i,c]}},m=(e,t)=>{let{activeKey:n,dateRangeIndex:r}=t;const i=u(n),o=e[i];return{[i]:o.filter(((e,t)=>r!==t))}},g=(e,t)=>{let{activeKey:n,dateRangeIndex:r,rangeKey:i,value:o}=t;const a=u(n),c=e[a];let[d,p]=[];return o||(d=\"beginDate\"===i?s:l,p=\"beginDate\"===i?\"01-01\":\"12-31\"),{[a]:c.map(((e,t)=>r===t?{...e,price:{...e.price,[i]:o?o.startOf(\"day\"):d,[`${i}String`]:o?o.format(\"MM-DD\"):p}}:e))}},v=e=>e.map((e=>({...e,price:{...e.price,beginDate:i()(e.price.beginDate),endDate:i()(e.price.endDate)},priceItem:e.priceItem.map((e=>({...e})))}))),y=(e,t)=>{const{onGridPrice:n,purchasePrice:r}=e;return{onGridPrice:n.length>0?v(n):[...t.onGridPrice],purchasePrice:r.length>0?v(r):[...t.purchasePrice]}},b=(e,t)=>{if(1!==e.length)return e;const{changedTabKey:n}=t;return-1===n.indexOf(e[0])?[...e,...n]:[...n]},S=(e,t)=>{const n=null!=e?e:c;switch(t.type){case o.T_:return{...n,loading:!1};case o.Mb:return{...n,loading:!0};case o.Fl:return{...n,...d(n,t.payload),isChanged:!0};case o.Dj:return{...n,...p(n,t.payload),isChanged:!0};case o.BX:return{...n,...f(n,t.payload),isChanged:!0};case o.Vt:return{...n,...h(n,t.payload),isChanged:!0};case o.Rt:return{...n,...m(n,t.payload),isChanged:!0};case o._6:return{...n,...g(n,t.payload),isChanged:!0};case o.Z0:return{...c,...t.payload};case o.zY:return{...n,...y(t.payload,n)};case o.Rc:return{...n,companyDn:t.payload};case o.t4:return{...n,currency:t.payload};case o.jo:return{...n,userCurrency:t.payload};case o.t:return{...n,isChanged:t.payload};case o.sS:return{...n,secondCompany:t.payload};case o.tC:return function(e,t){return{...e,onGridPrice:t.payload.onGridPrice.length>0?t.payload.onGridPrice:e.onGridPrice,purchasePrice:t.payload.purchasePrice.length>0?t.payload.purchasePrice:e.purchasePrice,isEdit:t.payload.onGridPrice.length>0}}(n,t);case o.AG:return{...n,changedTabKey:b(t.payload,n)};default:return n}}},37414:(e,t,n)=>{\"use strict\";n.d(t,{WU:()=>a,tb:()=>o,wb:()=>i});var r=n(40401);const i=new r.x,o=new r.x,a=new r.x},77905:(e,t,n)=>{\"use strict\";n.d(t,{KC:()=>o,vd:()=>a});var r=n(37920),i=n.n(r);const o=\"onGridPrice\",a=\"purchasePrice\";i()().startOf(\"year\"),i()().endOf(\"year\").startOf(\"day\")},64923:(e,t,n)=>{\"use strict\";n.d(t,{S:()=>d});var r=n(45258),i=n(37920),o=n.n(i),a=n(3922),s=n(13528);const l=365+o()().isLeapYear();var c=n(77905);const u=e=>{let{intl:t,intlTitleId:n,intlContentId:i,intlInfo:o,failCallback:a}=e;r.Z.info({title:t.formatMessage({id:n}),content:t.formatMessage({id:i},o),okText:t.formatMessage({id:\"common.button.ok\"}),centered:!0,maskClosable:!1,onOk(){a&&a()}})},d=(e,t,n,r,i)=>{let o=null,d=null;r===c.KC?(o=[...t],d=\"neteco.pvms.stationInfo.addStation.priceSettingList.gridPrice\"):(o=[...n],d=\"neteco.pvms.stationInfo.addStation.priceSettingList.purchasePrice\");const p=o.map((e=>({...e,price:{...e.price,beginDate:e.price.beginDate.startOf(\"day\").valueOf(),endDate:e.price.endDate.startOf(\"day\").valueOf()}}))),{isFullYear:f,isNotCross:h}=(e=>{const t=864e5,n=[];let r=!0,i=!0;return e.forEach((e=>{n.push({beginDate:e.price.beginDate-6e4*new Date(e.price.beginDate).getTimezoneOffset(),endDate:e.price.endDate-6e4*new Date(e.price.endDate).getTimezoneOffset()})})),n.sort(((e,t)=>e.beginDate-t.beginDate)),n.forEach(((e,o)=>{e.endDate<e.beginDate&&(r=!1),o===n.length-1?(n[n.length-1].endDate-n[0].beginDate)/t<l-1&&(r=!1):n[o+1].beginDate-e.endDate<=0?i=!1:n[o+1].beginDate-e.endDate!==t&&(r=!1)})),{isFullYear:r,isNotCross:i}})(p);if(!h)return u({intl:e,intlTitleId:d,intlContentId:\"neteco.pvms.stationInfo.addStation.priceSettingList.dateRangeCross\",failCallback:i}),!1;if(!f)return u({intl:e,intlTitleId:d,intlContentId:\"neteco.pvms.priceSetting.daysValidate\",failCallback:i}),!1;const{isFullDay:m,isPriceLegal:g,isHourNotCross:v}=(e=>{let t=!0,n=!0,r=!0;const i=[];if(e.forEach((e=>{const o=e.priceItem;o.length||(t=!1),o.sort(((e,t)=>e.beginHour-t.beginHour)),o.forEach(((e,l)=>{(e=>{const t=(0,s.xP)(e);if(void 0===t)return!0;if(!(0,a.default)(Number(t))||\"\"===e)return!1;const n=Math.abs(t);return/(^[0-9]{1,7}$)|(^[0-9]{1,7}[\\.]{1}[0-9]{1,4}$)/.test(n)})(e.price)||(n=!1),i.push(e.price),e.endHour===e.beginHour&&(r=!1),l===o.length-1?o[o.length-1].endHour-o[0].beginHour!=24&&(t=!1):o[l+1].beginHour<e.endHour?r=!1:o[l+1].beginHour>e.endHour&&(t=!1)}))})),n&&i.length>1)for(let e=0;e<i.length;e++)if(void 0===i[e]||\"\"===i[e]){n=!1;break}return{isFullDay:t,isPriceLegal:n,isHourNotCross:r}})(p);return m?g?!!v||(u({intl:e,intlTitleId:d,intlContentId:\"neteco.pvms.stationInfo.addStation.priceSettingList._24hoursCross\",failCallback:i}),!1):(u({intl:e,intlTitleId:d,intlContentId:\"neteco.pvms.elecPrice.price.validateNew\",failCallback:i,intlInfo:{integer:7,decimal:4}}),!1):(u({intl:e,intlTitleId:d,intlContentId:\"neteco.pvms.stationInfo.addStation.priceSettingList.fill24notEnough\",failCallback:i}),!1)}},88377:(e,t,n)=>{\"use strict\";n.d(t,{N:()=>i,g:()=>r});const r=\"NCOQUERYSELECTUSER/QUERY_SELECT_USER_LOADINGING\",i=\"NCOQUERYSELECTUSER/QUERY_SELECT_USER_LOADEDING\"},49125:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(44184),i=n(88377);const o={loading:!1,sortCondition:{},tableData:(0,r.W_)()},a=(e,t)=>{const n=null!=e?e:o;switch(t.type){case i.g:return{...n,loading:!0};case i.N:return{...n,loading:!1,tableData:t.payload};default:return n}}},53268:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>V});var r=n(92252),i=n(88391),o=n(22934),a=n(88927),s=n(34428),l=n(71560),c=n(1413);const u={icon:{tag:\"svg\",attrs:{viewBox:\"0 0 1024 1024\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z\"}}]},name:\"caret-right\",theme:\"outlined\"};var d=n(9345),p=function(e,t){return i.createElement(d.Z,(0,c.Z)((0,c.Z)({},e),{},{ref:t,icon:u}))};const f=i.forwardRef(p);var h=n(46759),m=n(64218),g=n(37825),v=n(44184),y=n(23712);const{neteco:b}=window;class S extends i.Component{constructor(e){var t;super(e),t=this,this.expandChildrenIfNecessary=e=>{const{expanded:t}=e;if(t)e.expanded=!1;else{let t=[e];for(;t.length>0;){const n=t.shift();!n.expanded&&n.childList&&(e.expanded=!0,t=t.concat(n.childList))}}this.hoverExpandStatus()},this.clearOldestExpandedNodeIfNecessary=e=>{const{slidingWindow:t,checkConfig:n={},domain:r,commonConfig:i={}}=this.props,{expanded:o,childList:a}=e,{singleSelectMode:s=!0}=n;if(!s||!o)return;const{slidingWindowSize:l=3}=i;if(a.length<=500)return;if(t.findIndex((t=>t.elementId===e.elementId))>=0)return;if(t.push(e),t.length<=l)return;const c=t.shift();c.childList=[],c.expanded=!1;const{elementId:u}=c,d=document.getElementById(`${r}-node-line-${u}`).lastElementChild;if(d&&\"ul\"===d.tagName.toLowerCase()){d.style.display=\"none\";const e=document.getElementById(`${r}-caret-icon-${u}`),t=e.lastElementChild,n=document.querySelector(\".caret-icon-right\").cloneNode(!0);e.removeChild(t),e.appendChild(n)}},this.handleExpand=e=>{const{buildProps:t,expandConfig:n,makeQueryParams:r,searchName:i,onSelectedDataChange:o,customPaginationConfig:a={}}=this.props,{expanded:s}=e,{useCustomizePagination:l=!1,customPageSize:c=200,callbacks:u=[]}=a;if((e=>{const{childList:t,isParent:n,isCustomParent:r}=e;return(r||n)&&t&&t.length>0})(e))this.expandChildrenIfNecessary(e),this.clearOldestExpandedNodeIfNecessary(e);else{this.hoverLoadingStatus(!0);const{getLeftTree:a}=t,{checkAllChildren:s}=n,{elementDn:d}=e;a(r({parentDn:d,searchName:i||\"\",node:e}),!0).then((t=>{const{data:n}=t;if(t.success){const[t]=n;if(t&&t.childList)if(l){const n=t.childList.filter((e=>(0,m.jE)(e.mocId)));e.allStationChildren=[...n],e.childList=t.childList.filter((e=>!(0,m.jE)(e.mocId))).concat(n.slice(0,c)),n.length>c&&(e.remainStationChildList=n.slice(c),u.forEach((e=>e())))}else e.childList=t.childList,e.hasMoreChild=t.hasMoreChild}this.expandChildrenIfNecessary(e),e.checked&&(s(e),o&&o()),this.hoverLoadingStatus(!1),this.clearOldestExpandedNodeIfNecessary(e)}))}this.hoverUlExpandStatus(e);const{expandCallbacks:d}=n;if(d){const{elementDn:t,elementId:n,mocId:r,nodeName:i,checked:o}=e;d.forEach((e=>e({node:{elementDn:t,elementId:n,mocId:r,nodeName:i,checked:o},expanded:void 0===s||!s})))}},this.hoverUlExpandStatus=e=>{const{elementId:t}=e;if(!t)return;const n=this.refs[t].lastElementChild,r=\"ul\"===n.tagName.toLowerCase(),{expanded:i}=e;r&&(n.style.display=i?\"block\":\"none\")},this.displayDefaultImg=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{nodeImgSrc:n}=t.state;if((0,v.HD)(n))if(n.startsWith(\"/pvmswebsite/\"))t.setState({nodeImgSrc:\"/pvmswebsite/assets/build/images/leftTree/device.png\"});else{const r=n.replace(e?/-[a-zA-z]+\\.png/g:/-[a-zA-z].png/g,\".png\").split(\"/\").pop();t.setState({nodeImgSrc:`/pvmswebsite/assets/build/images/leftTree/${r}`})}},this.onCheck=e=>{const{checkConfig:t}=this.props,{checkRecord:n}=t;n&&(n(e),this.setState({renderTrigger:!this.renderTrigger}))},this.hoverExpandStatus=()=>{const{renderTrigger:e}=this.state;this.setState({renderTrigger:!e})},this.hoverLoadingStatus=e=>{this.setState({loading:e})},this.state={loading:!1,renderTrigger:!1,nodeImgSrc:e.node.nodeIcon}}componentDidMount(){this.props.registerNode&&this.props.registerNode(this.props.node);const{node:e,checkDefaultIfNecessary:t,selectRecord:n,checkConfig:r,selectConfig:i={},queryConfig:o={},commonConfig:a={}}=this.props,{childList:s}=e;if(s&&s.length>0&&(e.expanded=!0,this.hoverExpandStatus()),r&&!1===r.singleSelectMode)return void t(e);const{defaultSelected:l}=i;if(l){const{defaultSelected:t}=i,{elementDn:r}=t;return void(r===e.elementDn&&n({e:null,node:e}))}const{rootElementDn:c}=o,{canCollapse:u=!1}=a;u||e.elementDn===c&&n({e:null,node:e})}componentWillUnmount(){this.props.unRegisterNode&&this.props.unRegisterNode(this.props.node),this.setState=()=>{}}componentWillReceiveProps(e){const{node:t}=e,{childList:n=[],expanded:r}=t;n.length>0&&void 0===r&&(t.expanded=!0,this.hoverUlExpandStatus(t))}render(){const{node:e,buildProps:t,currentSelected:n={},selectRecord:r,checkConfig:i,selectConfig:o={},domain:c,deleteConfig:u={},excludeParentTypeId:d=new Set,queryConfig:p,commonConfig:v}=this.props,{customSelectMode:S}=p,{deleteCallbacks:x,deleteTitle:w}=u,{hideStatus:C}=v,{loading:T,nodeImgSrc:A}=this.state,{layerIndex:E,buildTree:O}=t,{nodeName:M,elementId:P,isParent:D,parentNode:I,elementDn:N,status:_,canBeSelected:j=!0,isCustomParent:k,canBeSelect:L=!0}=e,R=b?b.util.iUnescape(M):M,{expanded:Z,mocId:B,checked:F,halfChecked:z}=e,{disableRoot:V=!1,disableTypeSet:H=new Set,disableDisconnected:U=!1,disabledNodeFunc:G,disableStyle:Y}=o,W=G?G(e):\"Connected\"!==_;let K=!j||!L;const q=n.elementDn===e.elementDn;if(!K)if(H.size>0){const e=H.has(B);K=U?e&&W:e}else K=I?!!U&&W:V;const Q=K&&W,X=C?null==A?void 0:A.replace(/-[a-zA-Z]+\\.png/g,\".png\"):null==A?void 0:A.replaceAll(/-[a-zA-z].png/g,\".png\");return(0,y.jsxs)(\"li\",{ref:P,className:\"node-line\",id:`${c}-node-line-${P}`,children:[(0,y.jsxs)(\"div\",{className:\"flex-node-line\",children:[(0,y.jsxs)(\"div\",{className:\"flex-node-line-expand-part\",id:`${c}-checkbox-wrapper-${N}`,children:[(()=>T?(0,y.jsx)(a.Z,{className:\"tree-icon\",style:{fontSize:\"2px\"}}):D&&!d.has(e.typeId)||k?Z?(0,y.jsx)(l.Z,{className:\"tree-icon\",id:`${c}-caret-icon-${P}`,onClick:()=>this.handleExpand(e)}):(0,y.jsx)(f,{className:\"tree-icon\",id:`${c}-caret-icon-${P}`,onClick:()=>this.handleExpand(e)}):(0,y.jsx)(\"span\",{className:\"useless-whitespace-span\"}))(),(()=>{if(!i)return!1;if(S)return S(e);const{singleSelectMode:t=!0}=i;return!t})()&&(0,y.jsx)(s.Z,{disabled:K,indeterminate:z&&!Q,onChange:()=>{this.onCheck(e)},checked:F&&!Q})]}),(0,y.jsxs)(\"div\",{title:R,onClick:K?g.mz:t=>{r({e:t,node:e,triggeredByUser:!0,onlyExpandCompanyFun:(0,m.B5)(e.mocId)?()=>{this.handleExpand(e)}:null})},id:`${c}-node-${P}`,className:`flex-node-line-name-part ${K?Y||\"disabled-item\":\"\"}`,children:[\"string\"==typeof A&&(0,y.jsx)(\"span\",{className:\"node-icon\",children:(0,y.jsx)(\"img\",{src:X,onError:()=>this.displayDefaultImg(C)})}),(0,y.jsxs)(\"span\",{className:\"node-name\",id:`${c}-node-name-${N}`,children:[x&&q&&\"/\"!==e.elementDn&&(0,y.jsx)(\"span\",{style:{padding:\"0 .5rem 0 0 \",color:\"rgb(153, 153, 153)\"},onClick:()=>{x.forEach((t=>t({node:e})))},title:w,children:(0,y.jsx)(\"i\",{style:{position:\"relative\",top:\"3px\"},children:(0,y.jsx)(h.Z,{})})}),R]})]})]}),O(e,e.childList,E)]})}}const x=S;var w=n(53137),C=n(5807),T=n(92935),A=n(99073),E=n(45398);const O=(0,n(93706).ZP)((function(e){let{mocIdInclude:t,level:n,onSelect:r,intl:o,value:a,searchTypeInclude:s=[]}=e;const[l,c]=(0,i.useState)([]),{searchPlaceholder:u}=function(e){switch(e){case\"20822\":return{searchPlaceholder:\"neteco.pvms.leftTree.search.placeholder.inverter\"};case\"20838\":return{searchPlaceholder:\"neteco.pvms.leftTree.search.placeholder.pcs\"};case\"20801\":return{searchPlaceholder:\"neteco.pvms.leftTree.search.placeholder.storage\"};case\"20824\":return{searchPlaceholder:\"neteco.pvms.leftTree.search.placeholder.emi\"};default:return{searchPlaceholder:\"neteco.pvms.leftTree.search.placeholder.device\"}}}(t),d={[w.aG.company]:{label:o.formatMessage({id:\"neteco.pvms.common.company\"}),value:w.aG.company,icon:\"/pvmswebsite/assets/build/images/leftTree/company.png\",searchPlaceholder:o.formatMessage({id:\"neteco.pvms.leftTree.search.placeholder.company\"})},[w.aG.station]:{label:o.formatMessage({id:\"neteco.pvms.alarmModel.station\"}),value:w.aG.station,icon:\"/pvmswebsite/assets/build/images/leftTree/station.png\",searchPlaceholder:o.formatMessage({id:\"neteco.pvms.leftTree.search.placeholder.station\"})},[w.aG.device]:{label:o.formatMessage({id:\"ncoEnergyStorageSearchForm.label.device\"}),value:w.aG.device,icon:\"/pvmswebsite/assets/build/images/leftTree/device.png\",searchPlaceholder:o.formatMessage({id:u})},[w.aG.area]:{label:o.formatMessage({id:\"neteco.pvms.register.area\"}),value:w.aG.area,icon:\"/pvmswebsite/assets/build/images/leftTree/area.png\",searchPlaceholder:o.formatMessage({id:\"neteco.pvms.leftTree.search.placeholder.area\"})}};(0,i.useEffect)((()=>{if(s.length>0)return void c(s.map((e=>d[e])));const e=[d[w.aG.company]],r=(0,w.pk)(\"COMPANY\"===n,t,n);r!==w.aG.station&&r!==w.aG.device||(e.push(d[w.aG.station]),r===w.aG.device&&e.push(d[w.aG.device])),c(e)}),[]),(0,i.useEffect)((()=>{s.length>0&&c(s.map((e=>d[e])))}),[s]);const p=l.find((e=>e.value===a))||l[l.length-1];return p&&p.value!==a&&r(p),l.length<=1?null:(0,y.jsx)(E.Z,{autoAdjustOverflow:!1,content:(0,y.jsx)(\"div\",{className:\"array-sort-content\",children:l.map((e=>{const{icon:t,label:n,value:i}=e;return(0,y.jsxs)(\"div\",{className:\"type-option-item \"+(p.value===i?\"type-option-item-selected\":\"\"),onClick:()=>{r(e)},children:[(0,y.jsx)(\"img\",{src:t}),(0,y.jsx)(\"span\",{children:n})]},i)}))}),overlayClassName:\"tree-search-select-popover\",getPopupContainer:e=>e.parentNode||document.body,placement:\"bottomLeft\",children:(0,y.jsxs)(\"div\",{className:\"tree-search-select\",children:[(0,y.jsx)(\"img\",{src:null==p?void 0:p.icon}),(0,y.jsx)(\"span\",{className:\"search-select-arrow\"}),(0,y.jsx)(\"div\",{className:\"splitor\"})]})})}));var M=n(31519),P=n(70250),D=n.n(P),I=n(68718);const N=23048,_=23047,j=23078,k=23077,L=23082,R=23081,Z=(0,y.jsx)(o.Z,{}),B=(0,y.jsx)(a.Z,{}),{Option:F}=r.Z;class z extends i.Component{constructor(e){var t;super(e),t=this,this.pageIndexMap=new Map,this.rootHasMoreChild=!1,this.hideRootElement=!1,this.treeContentRef=i.createRef(),this.setPageInfo=(e,t)=>{e.forEach((e=>{const{childList:n,elementDn:r}=e;if((null==n?void 0:n.length)>0&&t){const e=this.pageIndexMap.get(r)||0;this.pageIndexMap.set(r,e+1),this.setPageInfo(n,t)}}))},this.getTreeData=async function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{commonConfig:r={},domain:i}=t.props,o=r.customizedGetTreeData||w.M0,a=t.pageIndexMap.get(e.parentDn)||0;(t.shouldFullPagination||e.parentDn===t.props.queryConfig.rootElementDn)&&(e.pageId=a+1);const[,s]=await(0,v.AM)(o(e));let l=s;null!=r&&r.isAreaAuth&&\"new-monitor-layout\"===i&&(l=(0,T.nI)(D()(s)));const{success:c=!1,data:{childList:u,hasMoreChild:d}={}}=l||{};if(c){if(!t.shouldFullPagination||Array.isArray(s.data)&&n)return t.pageIndexMap.set(e.parentDn,a+1),l;u.length>0&&(t.setPageInfo(u,n),u[0].elementDn!==e.parentDn&&(t.pageIndexMap.set(e.parentDn,a+1),t.rootHasMoreChild=d))}return{success:c,data:u}},this.handleClearChecked=()=>{const{checkedProps:e}=this.state,{checkedMap:t,defaultCheckedSet:n}=e;t&&t.clear(),n&&n.clear()},this.makeQueryParams=e=>{let{parentDn:t,searchName:n,pageId:r,node:i}=e;if(!t)return;const{queryConfig:o={},commonConfig:a={}}=this.props,{countryCode:s}=this.state,{customizedFilterCondition:l,needStatus:c=!0}=a;let u={};const d={parentDn:t,needStatus:c,shouldFullPagination:this.shouldFullPagination},{level:p=\"COMPANY\",pageSize:f=A.jA,needPage:h=!0}=o;return u.MO_NAME=0===n.length?void 0:n,u.needPage=h,u.BUSINESS_DEVICE=1,d.self=!0,\"COMPANY\"===p?(d.companyTree=!0,u.DOMAIN=1):\"STATION\"===p?(d.companyTree=!1,u.MOC_ID_INCLUDE=\"20800,20801\",u.DOMAIN=1):\"DEVICE\"===p?(d.companyTree=!1,u.MOC_ID_INCLUDE=\"20800,20801,20810,20822,20827\"):\"STORAGE\"===p?(d.companyTree=!1,u.MOC_ID_INCLUDE=\"20800,20801,20815\"):\"OPTIMIZER\"===p?(d.companyTree=!1,u.MOC_ID_INCLUDE=\"20814,20821,20822\"):\"INVERTER\"===p?(d.companyTree=!1,u.MOC_ID_INCLUDE=\"20822\"):(d.companyTree=!0,u.DOMAIN=1),u.searchType=this.state.searchType,l&&(u={...u,...l}),s&&(u.countryCode=s),d.cond=JSON.stringify(u),d.pageId=r,this.shouldFullPagination&&(d.pageSize=f),d.node=i,d},this.checkDefaultIfNecessary=e=>{const{checkConfig:t,halfSelectedNodes:n=[]}=this.props;if(!t)return;const{singleSelectMode:r}=t;if(r)return;const{defaultCheckedSet:i,checkedMap:o}=this.state.checkedProps;let a=[e];for(;a.length>0;){const e=a.shift(),{elementDn:t}=e;if(i.has(t)){this.handleCheck(e),o.set(t,e),i.delete(t);continue}const{childList:n}=e;a=a.concat(n)}n.includes(e.elementDn)&&this.handleCheck(e,!0)},this.getRootDn=async e=>{if(e)return e;const t=await C.Z.getCurrentCompany();return(0,v.xb)(t)?\"/\":t.moDn},this.handleNoDnReloadTree=e=>{const{rootDn:t}=e,n=this.makeQueryParams({parentDn:t,searchName:\"\",pageId:0});n&&(this.pageIndexMap.clear(),this.getTreeData(n,!0).then((e=>{const{success:t,data:n}=e;t&&(this.setState({treeData:n,loading:!1,searchName:\"\"}),this.onSelect({e:null,node:n[0]}))})).catch((()=>{this.setState({treeData:[],loading:!1})})))},this.bindEventListeners=()=>{const{commonConfig:e={},domain:t}=this.props,{forbidEvent:n}=e;n||(this.renameNodeCallback=e=>{let{detail:t}=e;const{elementDn:n=\"\",nodeName:r=\"\"}=t;this.renameNode(n,r)},this.removeNodeCallback=e=>{let{detail:t}=e;const{elementIds:n}=t;this.removeNode(n)},this.reloadTreeCallback=e=>{let{detail:t}=e;this.handleClearChecked();const{targetDn:n,countryCode:r}=t;Array.isArray(r)?this.setState({countryCode:r},(()=>{this.reloadTree(n)})):this.reloadTree(n)},this.addNodeCallback=e=>{let{detail:t}=e;const{targetDn:n}=t;this.addNode(n)},this.moveNodeCallback=e=>{let{detail:t}=e;const{targetDn:n}=t;this.reloadTree(n)},this.locateNodeCallback=e=>{var t;let{detail:n}=e;const{targetDn:r,searchName:i=\"\"}=n,{onNodeTypeSelect:o,defaultSelectedNodeType:a=[]}=(null===(t=this.props.commonConfig)||void 0===t?void 0:t.nodeTypeFilterOptions)||{};if(o&&a.length>0)return this.setState({searchName:i}),void o([],(()=>{this.locateNode(r)}));this.setState({searchName:i}),this.locateNode(r)},this.reselectRootCallback=e=>{let{detail:t}=e;const{node:n}=t;if(n)return void this.onSelect({e:null,node:n});const{treeData:r=[]}=this.state;if(r.length>0){const[e]=r;this.onSelect({e:null,node:e})}},this.uncheckEventListener=e=>{let{detail:t}=e;const{node:n}=t;if(n)this.handleCheck(n);else{const{treeData:e}=this.state,[t]=e;t&&this.handleCheck(t)}},this.onSelectTreeNodeListener=e=>{let{detail:t}=e;this.onSelect(t)},this.noDnReloadTreeCallback=e=>{let{detail:t}=e;this.handleNoDnReloadTree(t)},window.addEventListener(\"onSelectTreeNode\",this.onSelectTreeNodeListener),window.addEventListener(\"rename_tree_node\",this.renameNodeCallback),window.addEventListener(`locate_tree_node_in_${t}`,this.locateNodeCallback),window.addEventListener(\"remove_tree_node\",this.removeNodeCallback),window.addEventListener(\"reload_tree_node\",this.reloadTreeCallback),window.addEventListener(\"add_tree_node\",this.addNodeCallback),window.addEventListener(\"move_tree_node\",this.moveNodeCallback),window.addEventListener(`reload_${t}_left_tree`,this.reloadTreeCallback),window.addEventListener(`clear_default_checked_${t}`,this.handleClearChecked),window.addEventListener(`${t}_reselect_root_node`,this.reselectRootCallback),window.addEventListener(`${t}-uncheck-nodes`,this.uncheckEventListener),window.addEventListener(\"no_dn_reload_tree_node\",this.noDnReloadTreeCallback))},this.renameNode=(e,t)=>{const{domain:n=\"default\"}=this.props,r=`${n}-node-name-${e}`,i=document.getElementById(r);i&&(i.innerText=t)},this.removeNode=e=>{const{domain:t=\"default\"}=this.props;e.forEach((e=>{const n=`${t}-node-line-${e}`,r=document.getElementById(n);r&&(r.style.display=\"none\")}))},this.reloadTree=e=>{const{queryConfig:t={}}=this.props,{rootElementDn:n}=t;this.doReload(n||\"/\",e)},this.locateNode=e=>{const{commonConfig:t={}}=this.props,{customizedFilterCondition:n}=t;if(n){const{MOC_ID_INCLUDE:t,treeDepth:r,EXCLUDE_SHARE_STATION:i,TYPEID_INCLUDE:o}=n;this.doLocate(e,t,r,i,o)}},this.doLocate=(e,t,n,r,i)=>{const{commonConfig:o={},domain:a}=this.props,{isAreaAuth:s}=o,l={targetDn:e,subNodeTypeIds:t,isSimple:!1,treeDepth:n,EXCLUDE_SHARE_STATION:r,TYPEID_INCLUDE:i};(0,T.XP)(l).then((e=>{let t=e;s&&\"new-monitor-layout\"===a&&(t=(0,T.x8)(D()(e)));const{success:n,treeData:r,selectedNode:i,hasMoreChild:o}=t;if(n){var l;this.pageIndexMap.clear(),this.setPageInfo(r,!0),this.props.selectConfig.locateCallBack&&this.props