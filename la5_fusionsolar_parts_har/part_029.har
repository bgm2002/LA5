,r,a,h,l,c,d,u){h=h||0,l=l||0,c=c||0;var _=u._element.getStyle(\"arrow.from.shadow\"),g=u._element.getStyle(\"arrow.from.shadow.color\"),f=u._element.getStyle(\"arrow.from.shadow.xoffset\"),v=u._element.getStyle(\"arrow.from.shadow.yoffset\"),m=u._element.getStyle(\"arrow.from.shadow.blur\"),p=c>=0&&d;if(r||p){var w=re.getShape(o);if(w&&w.points&&!(w.points&&w.points.size()<=0)){var y=W.calculatePointInfoAlongLine(n,s,h,l),A=y.point,x=y.angle;r&&(t.fillStyle=a),t.beginPath(),p&&(t.lineWidth=c,t.strokeStyle=d),re._drawArrow(t,w,x,A,e,i,d,g,_,f,v,m),_&&(t.shadowOffsetX=f,t.shadowOffsetY=v,t.shadowBlur=m,t.shadowColor=g),r&&t.fill(),p&&t.stroke()}}},_drawArrow:function(t,e,i,n,s,o,r,a,h,l,c,d){if(e.draw){for(_=new R.List,g=0;g<e.points._as.length;g++)_.add(e.points.get(g));_.add({x:-1,y:-.5}),_.add({x:-1,y:.5}),_.add({x:0,y:.5}),_.add({x:0,y:-.5});m=(_=_._as).length,p=new oe;v=new H(s,0,0,o,n.x,n.y);for(g=0;g<m;g++)p.add(v.transform(_[g]));p=p._as,v=W.createMatrix(i+Math.PI,n.x,n.y);var u=new oe;for(g=0;g<m;g++)u.add(v.transform(p[g]));e.draw&&e.draw(t,{points:u,width:s,height:o,shadowColor:a,shadow:h,shadowXOffset:l,shadowYOffset:c,shadowBlur:d})}else{var _,g,f,v,m=(_=e.points._as).length,p=new oe;for(v=new H(s,0,0,o,n.x,n.y),g=0;g<m;g++)p.add(v.transform(_[g]));p=p._as,v=W.createMatrix(i+Math.PI,n.x,n.y);var w=p[0];for(w=v.transform(w),t.moveTo(w.x,w.y),g=1;g<m;g++)(f=p[g])instanceof oe&&(f=f._as),f instanceof Array?(f[0]=v.transform(f[0]),f[1]=v.transform(f[1]),t.quadraticCurveTo(f[0].x,f[0].y,f[1].x,f[1].y)):(f=v.transform(f),t.lineTo(f.x,f.y))}},drawLinkArrow:function(t,e,i,n){if(!(i.size()<2)){var s=!!t._element.isBundleAgent&&t._element.isBundleAgent();t._element.getStyle(s?\"arrow.agent.from\":\"arrow.from\")&&re._drawFromArrow(t,e,i,n),t._element.getStyle(s?\"arrow.agent.to\":\"arrow.to\")&&re._drawToArrow(t,e,i,n)}},_drawFromArrow:function(t,e,i,n){var s=t._element,o=!!s.isBundleAgent&&s.isBundleAgent(),r=s.getStyle(o?\"arrow.agent.from.fill\":\"arrow.from.fill\"),a=s.getStyle(o?\"arrow.agent.from.outline.width\":\"arrow.from.outline.width\");s.getStyle(o?\"arrow.agent.from.shadow.color\":\"arrow.from.shadow.color\");if(r||a>=0){var h=s.getStyle(o?\"arrow.agent.from.width\":\"arrow.from.width\"),l=s.getStyle(o?\"arrow.agent.from.height\":\"arrow.from.height\"),c=s.getStyle(o?\"arrow.agent.from.xoffset\":\"arrow.from.xoffset\");if(c>0&&c<1){c*=t.getLineLength?t.getLineLength():t._element.getLineLength()}else t.getLineLength&&(c+=re.calculateArrowXOffsetAtEdge(i,t,!0,n));var d=s.getStyle(o?\"arrow.agent.from.yoffset\":\"arrow.from.yoffset\"),u=s.getStyle(o?\"arrow.agent.from.shape\":\"arrow.from.shape\");re.drawArrow(e,h,l,i,!0,u,r,s.getStyle(o?\"arrow.agent.from.color\":\"arrow.from.color\"),c,d,a,s.getStyle(o?\"arrow.agent.from.outline.color\":\"arrow.from.outline.color\"),t)}},_drawToArrow:function(t,e,i,n){var s=t._element,o=!!s.isBundleAgent&&s.isBundleAgent(),r=s.getStyle(o?\"arrow.agent.to.fill\":\"arrow.to.fill\"),a=s.getStyle(o?\"arrow.agent.to.outline.width\":\"arrow.to.outline.width\");if(r||a>=0){var h=s.getStyle(o?\"arrow.agent.to.width\":\"arrow.to.width\"),l=s.getStyle(o?\"arrow.agent.to.height\":\"arrow.to.height\"),c=s.getStyle(o?\"arrow.agent.to.xoffset\":\"arrow.to.xoffset\");if(c>0&&c<1){c*=t.getLineLength?t.getLineLength():t._element.getLineLength()}else t.getLineLength&&(c+=re.calculateArrowXOffsetAtEdge(i,t,!1,n));var d=s.getStyle(o?\"arrow.agent.to.yoffset\":\"arrow.to.yoffset\"),u=s.getStyle(o?\"arrow.agent.to.shape\":\"arrow.to.shape\");re.drawArrow(e,h,l,i,!1,u,r,s.getStyle(o?\"arrow.agent.to.color\":\"arrow.to.color\"),c,d,a,s.getStyle(o?\"arrow.agent.to.outline.color\":\"arrow.to.outline.color\"),t)}},calculateArrowXOffsetAtEdge:function(t,e,i,n){if(null==t||t.size()<2)return 0;var s=e._element;if(!(i?s.getStyle(\"arrow.from.at.edge\"):s.getStyle(\"arrow.to.at.edge\")))return 0;var o=i?e._network.getElementUI(s.getFromAgent()):e._network.getElementUI(s.getToAgent());if(!o)return 0;if(n)var r=o.getZoomBodyRect();else r=o._bodyRect;if(null==r)return 0;for(var a=W._getPoint(t.get(i?0:t.size()-1)),h=0,l=e.getLineLength();re._containsByInt(r,Math.floor(a.x),Math.floor(a.y),!1)&&h<l;)a=W.calculatePointInfoAlongLine(t,i,h++).point;return h},_containsByInt:function(t,e,i,n){return(n=void 0===n||n)?e>=Math.floor(t.x)&&e<=Math.floor(t.x+t.width)&&i>=Math.floor(t.y)&&i<=Math.floor(t.y+t.height):e>Math.floor(t.x)&&e<Math.floor(t.x+t.width)&&i>Math.floor(t.y)&&i<Math.floor(t.y+t.height)}};re.init(),D.arrow=re,R.EventDispatcher=function(){this._f=0},D.ext(\"twaver.EventDispatcher\",null,{contains:function(t,e){if(this._ls)for(var i,n=0,s=this._ls.size();n<s;n++)if(i=this._ls.get(n),t===i.l&&e===i.s)return!0;return!1},add:function(t,e,i){var n={l:t,s:e,a:i};this._ls||(this._ls=new oe),this._f?(this._addPendings||(this._addPendings=new oe),this._addPendings.add(n)):n.a?this._ls.add(n,0):this._ls.add(n)},remove:function(t,e){this._ls&&(this._f?(this._removePendings||(this._removePendings=new oe),this._removePendings.add({l:t,s:e})):this._remove(t,e))},_remove:function(t,e){for(var i,n=0,s=this._ls.size();n<s;n++)if((i=this._ls.get(n)).l===t&&i.s===e)return void this._ls.removeAt(n)},fire:function(t){if(this._ls){var e,i,n=this._ls.size();for(this._f++,e=0;e<n;e++)(i=this._ls.get(e)).s?i.l.call(i.s,t):i.l(t);if(this._f--,!this._f){if(this._removePendings){for(n=this._removePendings.size(),e=0;e<n;e++)i=this._removePendings.get(e),this._remove(i.l,i.s);delete this._removePendings}if(this._addPendings){for(n=this._addPendings.size(),e=0;e<n;e++)(i=this._addPendings.get(e)).a?this._ls.add(i,0):this._ls.add(i);delete this._addPendings}}}}}),R.ImageAsset=function(t,e,i,n,s){this._name=t,this._width=i,this._height=n,this._svg=s,this._edgeData,\"string\"==typeof e?this._src=e:\"function\"==typeof e?this._func=e:jt(e)?this._image=e:\"object\"==typeof e&&(this._image=e,this._width=e.w||e.width,this._height=e.h||e.height,!1!==e.cache&&me(e)&&(fe(t,e),this._cache=ye(e)))},D.ext(\"twaver.ImageAsset\",Object,{getName:function(){return this._name},getSrc:function(){return this._src},isSvg:function(){return this._svg},getImage:function(t,e,i){if(!t||!this._image)return this._image;this._map||(this._map={});var n;n=this._svg&&3===arguments.length?t+\",\"+e+\",\"+i:t;var s=this._map[n];return s||(s=ue(this._cache||this._image,ce(t),this._svg?e||this.getWidth():this.getWidth(),this._svg?i||this.getHeight():this.getHeight()),this._map[n]=s,s)},getWidth:function(){return this._width},getHeight:function(){return this._height},getFunction:function(){return this._func},_createEdgeData:function(t,e,i){var n=300/e;i<e&&(n=300/i);var s=Math.floor(e*n),o=Math.floor(i*n);this.tempCanvas||(this.tempCanvas=z.createElement(\"canvas\"),this.ctx=this.tempCanvas.getContext(\"2d\")),this.tempCanvas.width=s,this.tempCanvas.height=o,this.ctx.clearRect(0,0,s,o),this.ctx.drawImage(t,0,0,s,o);var r=this.ctx.getImageData(0,0,s,o),a=!0,h=[],l=0;for(e=s,i=o;l<i;l++)for(var c=0;c<e;c++){var d=4*(l*e+c);if(x=a!=(_=this._isTransparentPoint(r.data,d))||!_&&(0==c||c==e-1)){var u=_?1:0;h.push({x:c-u,y:l})}a=_}a=!0;for(c=0,e=s,i=o;c<e;c++)for(l=0;l<i;l++){var _;d=4*(l*e+c);if(x=a!=(_=this._isTransparentPoint(r.data,d))||!_&&(0==l||l==i-1)){u=_?1:0;h.push({x:c,y:l-u})}a=_}for(var g=e/2,f=i/2,v=[],m=0;m<360;m++)v.push({x:g,y:f,dist:0});m=0;for(var p=h.length;m<p;m++){var w=h[m],y=this._getPointAngleDegree(w.x,w.y,g,f),A=this._getPointDist(w.x,w.y,g,f);v[y].dist<A&&(v[y]={x:w.x,y:w.y,dist:A})}for(m=0,p=v.length;m<p;m++){var x;(x=v[m]).x=x.x/n,x.y=x.y/n,delete x.dist}return v},_isTransparentPoint:function(t,e){return t[e]+t[e+1]+t[e+2]+t[e+3]==0},_getPointAngleDegree:function(t,e,i,n){var s=i-t,o=n-e,r=Math.atan2(o,s);return r=r/Math.PI*180,r=parseInt(r)+180,r%=360},_getPointDist:function(t,e,i,n){var s=i-t,o=n-e;return Math.sqrt(s*s+o*o)}});var ae={},he=X.createCanvas();he.width=1,he.height=1;var le=he.getContext(\"2d\"),ce=function(t){var e,i=ae[t=t||\"black\"];return i||(le.clearRect(0,0,1,1),le.fillStyle=t,le.fillRect(0,0,1,1),e=le.getImageData(0,0,1,1).data,i=ae[t]={r:e[0],g:e[1],b:e[2],a:e[3]}),i},de=function(t,e){if(!e)return t;if(e=ce(e),t=ce(t),xe.PIXEL_FILTER_FUNCTION){var i=xe.PIXEL_FILTER_FUNCTION(t,e);return\"rgba(\"+i.r+\",\"+i.g+\",\"+i.b+\",\"+t.a+\")\"}return null},ue=function(t,e,i,n){var s=X.createCanvas(i,n),o=s.getContext(\"2d\");o.drawImage(t,0,0,i,n);try{for(var r=o.getImageData(0,0,i,n),a=r.data,h=0,l=a.length;h<l;h+=4){var c={r:a[h+0],g:a[h+1],b:a[h+2]},d=xe.PIXEL_FILTER_FUNCTION(c,e);a[h+0]=d.r,a[h+1]=d.g,a[h+2]=d.b}o.putImageData(r,0,0)}catch(e){return t}return s},_e={},ge=function(t,e){if(t){\"string\"===typeof t&&(t.match(Ut)||D.images[t]||(_e[t]||(_e[t]=[])).push(e))}},fe=function(t,e){e.pattern&&ge(e.pattern,t),e.v&&e.v.forEach(function(e){e.pattern&&ge(e.pattern,t)})},ve=function(t){var e=_e[t];e&&(e.forEach(function(t){var e=D.images[t];e._cache=ye(e._image)}),delete _e[t])},me=function(t){return!(!t.w||!t.h)&&pe(t)},pe=function(t){return!Object.keys(t).some(function(e){if(/^on/.test(e))return!1;var i=t[e],n=we(i);return n||\"v\"!==e||(n=i.some(function(t){if(\"draw\"===t.shape)return!0;if(\"vector\"===t.shape){var e=D.images[t.name];if(e&&!e._cache)return!0}return!!Object.keys(t).some(function(e){return\"state\"===e||\"animate\"===e||we(t[e])})||!(\"g\"!==t.shape||!t.v||!t.v.length)&&!pe(t)})),n})},we=function(t){var e=typeof t;return\"string\"===e&&t.match(Ut)||\"function\"===e},ye=function(t){var e=X.createCanvas(t.w,t.h),i=e.getContext(\"2d\");return R.Util.makeHighRes(e),Mt(i,t,null,{x:0,y:0,width:t.w,height:t.h}),e},Ae=R.imageUtil={IMAGE_LOAD_COMPLETED:\"IMAGE_LOAD_COMPLETED\",_dispatcher:new R.EventDispatcher,addEventListener:function(t,e,i){Ae._dispatcher.add(t,e,i)},removeEventListener:function(t,e){Ae._dispatcher.remove(t,e)},images:{},registerImageByUrl:function(t,e,i){if(e=e||Ae.getImageType(t),i=i||Ae.getImageName(t),!Ae.images[i]){Ae.images[i]=t;var n=new F;n.src=t,n.onload=function(){D.registerImage(i,n,n.width,n.height,!0===e),n.onload=null,delete Ae.images[i];var s={type:Ae.IMAGE_LOAD_COMPLETED,url:t,svg:e,name:i};Ae._dispatcher.fire(s)}}},getImageName:function(t){if(\"string\"!=typeof t)return null;var e=t.lastIndexOf(\"/\"),i=t;return e>=0&&(i=t.substring(e+1)),(e=i.lastIndexOf(\".\"))>=0&&(i=i.substring(0,e)),i},getImageType:function(t){if(\"string\"!=typeof t)return null;var e=t.lastIndexOf(\"/\"),i=t;return e>=0&&(i=t.substring(e+1)),(e=i.lastIndexOf(\".\"))>=0&&(i=i.substring(e+1)),i}},xe={COLORS:[\"#6495ED\",\"#FFFF00\",\"#00FFFF\",\"#FF0000\",\"#7FFF00\",\"#E0A580\",\"#5FC0CB\",\"#FA00F0\",\"#A1BC50\",\"#FFD700\",\"#4169E1\",\"#E5A5F5\",\"#1E90FF\",\"#696969\",\"#FF6347\",\"#00BFEF\",\"#FFD700\",\"#80E090\",\"#5F9EA0\",\"#A000FF\",\"#7FAF00\",\"#228BA2\",\"#FF00FF\",\"#7FFFD4\",\"#800000\",\"#0000CD\",\"#20B2AA\",\"#D2691E\",\"#6495BD\",\"#DC143C\",\"#F0A8AF\",\"#008B8B\",\"#800080\",\"#B8860B\",\"#4B0082\",\"#00FF00\",\"#FFA500\",\"#FF4500\",\"#FFFF00\",\"#9ACD32\",\"#00008B\",\"#FF1493\",\"#ADFF2F\",\"#4682B4\",\"#00C0B1\"],CALL_LATER_DELAY:17,SCROLL_BAR_WIDTH:17,SELECT_COLOR:\"#C2CFF1\",FOCUS_ON_CLICK:!0,VIEW_POSITION:\"absolute\",VIEW_FONT_SIZE:\"12px\",VIEW_FONT_FAMILY:\"arial, tahoma, helvetica, sans-serif\",TOOLTIP_BACKGROUND:\"lightyellow\",TOOLTIP_FONT_SIZE:\"12px\",TOOLTIP_COLOR:\"black\",TOOLTIP_PADDING:\"4px 8px\",TOOLTIP_BORDER:\"1px solid gray\",TOOLTIP_BORDER_RADIUS:\"6px\",TOOLTIP_XOFFSET:12,TOOLTIP_YOFFSET:12,TOOLTIP_BOX_SHADOW:\"0px 0px 3px #AAA\",TOOLTIP_ZINDEX:1e5,TOOLTIP_INITIAL_DELAY:750,TOOLTIP_RESHOW_DELAY:500,TOOLTIP_DISMISS_DELAY:4e3,ZOOM_MAX:5,ZOOM_MIN:.1,ZOOM_INCREMENT:1.3,ZOOM_ANIMATE:!0,COLUMN_INNER_TEXT:!0,COLUMN_WIDTH:80,COLUMN_HORIZONTAL_ALIGN:\"\",COLUMN_PROPERTY_TYPE:\"accessor\",COLUMN_VALUE_TYPE:\"string\",COLUMN_EDITABLE:!1,COLUMN_SORTABLE:!0,COLUMN_VISIBLE:!0,COLUMN_RESIZABLE:!0,COLUMN_MOVABLE:!0,COLUMN_RENDER_CELL:null,COLUMN_RENDER_HEADER:null,COLUMN_RENDER_EDITOR:null,PROPERTY_INNER_TEXT:!0,PROPERTY_HORIZONTAL_ALIGN:\"\",PROPERTY_PROPERTY_TYPE:\"accessor\",PROPERTY_VALUE_TYPE:\"string\",PROPERTY_EDITABLE:!1,PROPERTY_CATEGORY_NAME:null,PROPERTY_RENDER_NAME:null,PROPERTY_RENDER_VALUE:null,PROPERTY_RENDER_EDITOR:null,TAB_WIDTH:100,TAB_CLOSABLE:!1,TAB_RESIZABLE:!0,TAB_MOVABLE:!0,TAB_DISABLED:!1,TAB_VISIBLE:!0,ACCORDION_EXPAND_ICON:\"expand_icon\",ACCORDION_COLLAPSE_ICON:\"collapse_icon\",ACCORDION_TITLE_HEIGHT:20,ACCORDION_TITLE_BACKGROUND:\"#EBEBEB\",ACCORDION_BORDER_BOTTOM_COLOR:\"lightgray\",ACCORDION_ICON_POSITION:\"left\",TITLEPANE_TITLE_HEIGHT:20,TITLEPANE_TITLE_BACKGROUND:\"#DDD\",TITLEPANE_TITLE_HORIZONTAL_ALIGN:\"left\",BORDERPANE_HGAP:0,BORDERPANE_VGAP:0,CHARTPANE_TITLE_HEIGHT:20,CHARTPANE_TITLE_HORIZONTAL_ALIGN:\"center\",CHARTPANE_LEGEND_ORIENTATION:\"bottom\",CHARTPANE_LEGEND_WIDTH:80,LEGENDPANE_ICON_WIDTH:10,LEGENDPANE_ICON_HEIGHT:10,LEGENDPANE_ICON_RADIUS:0,LEGENDPANE_ROW_HEIGHT:20,LEGENDPANE_ORIENTATION:\"horizontal\",LEGENDPANE_HIDDEN_COLOR:\"#BABBBC\",LEGENDPANE_SELECT_BACKGROUND_COLOR:\"#00007D\",LEGENDPANE_SELECT_FOREGROUND_COLOR:\"#FFFFFF\",CHART_TOOLTIP_ENABLED:!0,CHART_SELECT_TOLERANCE:0,CHART_XGAP:6,CHART_YGAP:6,CHART_XZOOM_ENABLED:!0,CHART_YZOOM_ENABLED:!0,CHART_XTRANSLATE_ENABLED:!0,CHART_YTRANSLATE_ENABLED:!0,CHART_DOUBLE_CLICK_TO_RESET:!0,CHART_VALUE_VISIBLE:!0,CHART_VALUE_FONT:null,CHART_BACKGROUND_VISIBLE:!1,CHART_BACKGROUND_FILL:!0,CHART_BACKGROUND_FILL_COLOR:\"rgba(50,50,50,0.11)\",CHART_BACKGROUND_OUTLINE_WIDTH:1,CHART_BACKGROUND_OUTLINE_COLOR:\"rgba(50,50,50,0.11)\",CHART_BACKGROUND_GRADIENT:\"linear.north\",CHART_BACKGROUND_GRADIENT_COLOR:\"#FFFFFF\",PIECHART_TYPE:\"oval\",PIECHART_START_ANGLE:0,PIECHART_SELECT_OFFSET:5,PIECHART_SHADOW_OFFSET:1,PIECHART_SHADOW_COLOR:\"#C2CFF1\",PIECHART_LINE_RATE:.5,PIECHART_DONUT_RATE:.5,PIECHART_VALUE_POSITION:.5,BARCHART_TYPE:\"default\",BARCHART_UPPER_LIMIT:null,BARCHART_LOWER_LIMIT:0,BARCHART_XAXIS_LINE_COLOR:\"#808080\",BARCHART_XAXIS_LINE_WIDTH:1,BARCHART_XAXIS_TEXT_COLOR:\"#000000\",BARCHART_XAXIS_TEXT_FONT:null,BARCHART_YAXIS_LINE_COLOR:\"#808080\",BARCHART_YAXIS_LINE_WIDTH:1,BARCHART_YAXIS_TEXT_COLOR:\"#000000\",BARCHART_YAXIS_TEXT_FONT:null,BARCHART_XSCALE_TEXT_FONT:null,BARCHART_XSCALE_TEXT_COLOR:\"#000000\",BARCHART_XSCALE_TEXT_ORIENTATION:\"horizontal\",BARCHART_YSCALE_TEXT_VISIBLE:!0,BARCHART_YSCALE_TEXT_COLOR:\"#000000\",BARCHART_YSCALE_TEXT_FONT:null,BARCHART_YSCALE_LINE_COLOR:\"#808080\",BARCHART_YSCALE_LINE_WIDTH:.3,BARCHART_YSCALE_VALUE_GAP:0,BARCHART_YSCALE_PIXEL_GAP:20,BARCHART_YSCALE_MIN_TEXT_VISIBLE:!1,LINECHART_INTERRUPTABLE:!0,LINECHART_UPPER_LIMIT:null,LINECHART_LOWER_LIMIT:null,LINECHART_XAXIS_LINE_COLOR:\"#808080\",LINECHART_XAXIS_LINE_WIDTH:1,LINECHART_XAXIS_TEXT_COLOR:\"#000000\",LINECHART_XAXIS_TEXT_FONT:null,LINECHART_YAXIS_LINE_COLOR:\"#808080\",LINECHART_YAXIS_LINE_WIDTH:1,LINECHART_YAXIS_TEXT_COLOR:\"#000000\",LINECHART_YAXIS_TEXT_FONT:null,LINECHART_XSCALE_TEXT_FONT:null,LINECHART_XSCALE_TEXT_COLOR:\"#000000\",LINECHART_XSCALE_TEXT_ORIENTATION:\"horizontal\",LINECHART_XSCALE_LINE_COLOR:\"#808080\",LINECHART_XSCALE_LINE_WIDTH:.3,LINECHART_YSCALE_TEXT_VISIBLE:!0,LINECHART_YSCALE_TEXT_COLOR:\"#000000\",LINECHART_YSCALE_TEXT_FONT:null,LINECHART_YSCALE_LINE_COLOR:\"#808080\",LINECHART_YSCALE_LINE_WIDTH:.3,LINECHART_YSCALE_VALUE_GAP:0,LINECHART_YSCALE_PIXEL_GAP:20,LINECHART_YSCALE_MIN_TEXT_VISIBLE:!1,LINECHART_VALUESPANCOUNT:1,BUBBLECHART_UPPER_LIMIT:null,BUBBLECHART_LOWER_LIMIT:null,BUBBLECHART_XAXIS_UPPER_LIMIT:null,BUBBLECHART_XAXIS_LOWER_LIMIT:null,BUBBLECHART_XAXIS_LINE_COLOR:\"#808080\",BUBBLECHART_XAXIS_LINE_WIDTH:1,BUBBLECHART_XAXIS_TEXT_COLOR:\"#000000\",BUBBLECHART_XAXIS_TEXT_FONT:null,BUBBLECHART_YAXIS_LINE_COLOR:\"#808080\",BUBBLECHART_YAXIS_LINE_WIDTH:1,BUBBLECHART_YAXIS_TEXT_COLOR:\"#000000\",BUBBLECHART_YAXIS_TEXT_FONT:null,BUBBLECHART_XSCALE_TEXT_FONT:null,BUBBLECHART_XSCALE_TEXT_COLOR:\"#000000\",BUBBLECHART_XSCALE_TEXT_ORIENTATION:\"horizontal\",BUBBLECHART_XSCALE_LINE_COLOR:\"#808080\",BUBBLECHART_XSCALE_LINE_WIDTH:.3,BUBBLECHART_YSCALE_TEXT_VISIBLE:!0,BUBBLECHART_YSCALE_TEXT_COLOR:\"#000000\",BUBBLECHART_YSCALE_TEXT_FONT:null,BUBBLECHART_YSCALE_LINE_COLOR:\"#808080\",BUBBLECHART_YSCALE_LINE_WIDTH:.3,BUBBLECHART_YSCALE_VALUE_GAP:0,BUBBLECHART_YSCALE_PIXEL_GAP:20,BUBBLECHART_YSCALE_MIN_TEXT_VISIBLE:!1,BUBBLECHART_SELECT_SHADOW_COLOR:\"#000000\",BUBBLECHART_SELECT_SHADOW_OFFSET:3,RADARCHART_AXIS_TEXT_FONT:null,RADARCHART_AXIS_TEXT_COLOR:\"#000000\",RADARCHART_AXIS_TEXT_VISIBLE:!0,RADARCHART_SCALE_TEXT_FONT:null,RADARCHART_SCALE_TEXT_COLOR:\"#000000\",RADARCHART_SCALE_TEXT_VISIBLE:!0,RADARCHART_AXIS_VISIBLE:!0,RADARCHART_AXIS_LINE_COLOR:\"#808080\",RADARCHART_AXIS_LINE_WIDTH:3,RADARCHART_AXIS_START_ANGLE:0,RADARCHART_RING_VISIBLE:!0,RADARCHART_RING_TYPE:\"line\",RADARCHART_RING_LINE_COLOR:\"#808080\",RADARCHART_RING_LINE_WIDTH:1,RADARCHART_SCALE_COUNT:5,RADARCHART_SCALE_MAXVALUE:1,RADARCHART_SCALE_MINVALUE:0,RADARCHART_ANCHOR_VISIBLE:!0,RADARCHART_AREA_FILL:!0,RADARCHART_AREA_FILL_ALPHA:.2,RADARCHART_AREA_SELECT_FILL_ALPHA:.5,DIALCHART_UPPER_LIMIT:100,DIALCHART_LOWER_LIMIT:0,DIALCHART_START_ANGLE:0,DIALCHART_END_ANGLE:360,DIALCHART_INNER_RADIUS:.8,DIALCHART_COLOR_RANGE_FILL_COLOR:\"#808080\",DIALCHART_OUTLINE_WIDTH:0,DIALCHART_OUTLINE_COLOR:\"#808080\",DIALCHART_SCALE_INSIDE:!0,DIALCHART_MAJOR_SCALE_COUNT:11,DIALCHART_MAJOR_SCALE_LINE_WIDTH:2,DIALCHART_MAJOR_SCALE_LINE_LENGTH:8,DIALCHART_MAJOR_SCALE_LINE_COLOR:\"#000000\",DIALCHART_MINOR_SCALE_COUNT:4,DIALCHART_MINOR_SCALE_LINE_WIDTH:1,DIALCHART_MINOR_SCALE_LINE_LENGTH:4,DIALCHART_MINOR_SCALE_LINE_COLOR:\"#000000\",DIALCHART_SCALE_TEXT_VISIBLE:!0,DIALCHART_SCALE_UPPER_LIMIT_TEXT_VISIBLE:!0,DIALCHART_SCALE_LOWER_LIMIT_TEXT_VISIBLE:!0,DIALCHART_SCALE_TEXT_FONT:null,DIALCHART_SCALE_TEXT_COLOR:\"#000000\",DIALCHART_PIVOT_RADIUS:10,DIALCHART_PIVOT_FILL:!0,DIALCHART_PIVOT_FILL_COLOR:\"#808080\",DIALCHART_PIVOT_OUTLINE_WIDTH:0,DIALCHART_PIVOT_OUTLINE_COLOR:\"#808080\",DIALCHART_VALUE_POSITION:.5,DIALCHART_INNER_DARKER_RADIUS:10,DIALCHART_OUTER_BRIGHTER_RADIUS:10,DIALCHART_SELECT_SHADOW_COLOR:\"#000000\",DIALCHART_SELECT_SHADOW_OFFSET:3,TABPANE_TAB_GAP:1,TABPANE_TAB_RADIUS:0,TABPANE_TAB_HEIGHT:24,TABPANE_TAB_ORIENTATION:\"top\",TABPANE_RESIZE_TOLERANCE:3,TABPANE_TAB_BACKGROUND:\"#EBEBEB\",TABPANE_DISABLED_COLOR:\"#BABBBC\",TABPANE_SELECT_BACKGROUND:\"white\",TABPANE_MOVE_BACKGROUND:\"rgba(184,211,240,0.7)\",TABPANE_INSERT_BACKGROUND:\"orange\",TABPANE_HORIZONTAL_ALIGN:\"center\",TABPANE_CLOSE_ICON:\"close_icon\",TABPANE_SELECT_NEXT_ON_CLOSE:!0,TABPANE_SELECT_NEXT_ON_INVISIBLE:!0,LISTBASE_INNER_TEXT:!0,LIST_ROW_HEIGHT:19,LIST_INDENT:2,LIST_ROW_LINE_WIDTH:0,LIST_ROW_LINE_COLOR:\"#DDD\",LIST_MAKE_VISIBLE_ON_SELECTED:!0,LIST_KEYBOARD_REMOVE_ENABLED:!0,LIST_KEYBOARD_SELECT_ENABLED:!0,TREE_ROW_HEIGHT:19,TREE_INDENT:16,TREE_ROW_LINE_WIDTH:0,TREE_ROW_LINE_COLOR:\"#DDD\",TREE_MAKE_VISIBLE_ON_SELECTED:!0,TREE_KEYBOARD_REMOVE_ENABLED:!0,TREE_KEYBOARD_SELECT_ENABLED:!0,TREE_EXPAND_ICON:\"expand_icon\",TREE_COLLAPSE_ICON:\"collapse_icon\",TREE_LINE_TYPE:\"none\",TREE_LINE_THICKNESS:2,TREE_LINE_COLOR:\"#000000\",TREE_LINE_ALPHA:1,TREE_LINE_DASH:[4,2],TABLE_ROW_HEIGHT:19,TABLE_ROW_LINE_WIDTH:1,TABLE_ROW_LINE_COLOR:\"#DDD\",TABLE_COLUMN_LINE_WIDTH:1,TABLE_COLUMN_LINE_COLOR:\"#DDD\",TABLE_MAKE_VISIBLE_ON_SELECTED:!0,TABLE_KEYBOARD_REMOVE_ENABLED:!0,TABLE_KEYBOARD_SELECT_ENABLED:!0,TABLE_EDITABLE:!1,TABLEHEADER_HEIGHT:24,TABLEHEADER_RESIZE_TOLERANCE:3,TABLEHEADER_BACKGROUND:\"#EBEBEB\",TABLEHEADER_MOVE_BACKGROUND:\"rgba(184,211,240,0.7)\",TABLEHEADER_INSERT_BACKGROUND:\"orange\",TABLEHEADER_COLUMN_LINE_COLOR:\"#DDD\",TABLEHEADER_SORT_DESC_ICON:\"sort_desc\",TABLEHEADER_SORT_ASC_ICON:\"sort_asc\",TABLEHEADER_SORT_ICON_POSITION:\"98% 50%\",TREETABLE_ROW_HEIGHT:19,TREETABLE_INDENT:16,TREETABLE_ROW_LINE_WIDTH:1,TREETABLE_ROW_LINE_COLOR:\"#DDD\",TREETABLE_COLUMN_LINE_WIDTH:1,TREETABLE_COLUMN_LINE_COLOR:\"#DDD\",TREETABLE_MAKE_VISIBLE_ON_SELECTED:!0,TREETABLE_KEYBOARD_REMOVE_ENABLED:!0,TREETABLE_KEYBOARD_SELECT_ENABLED:!0,TREETABLE_EXPAND_ICON:\"expand_icon\",TREETABLE_COLLAPSE_ICON:\"collapse_icon\",TREETABLE_EDITABLE:!1,PROPERTYSHEET_AUTO_ADJUSTABLE:!0,PROPERTYSHEET_INDENT:16,PROPERTYSHEET_ROW_HEIGHT:19,PROPERTYSHEET_ROW_LINE_WIDTH:1,PROPERTYSHEET_COLUMN_LINE_WIDTH:1,PROPERTYSHEET_BORDER_COLOR:\"#EBEBEB\",PROPERTYSHEET_EXPAND_ICON:\"expand_icon\",PROPERTYSHEET_COLLAPSE_ICON:\"collapse_icon\",PROPERTYSHEET_PROPERTY_NAME_WIDTH:100,PROPERTYSHEET_PROPERTY_NAME_HORIZONTAL_ALIGN:\"\",PROPERTYSHEET_SUM_WIDTH:200,PROPERTYSHEET_RESIZE_TOLERANCE:3,PROPERTYSHEET_EDITABLE:!1,PROPERTYSHEET_CATEGORIZABLE:!0,PROPERTYSHEET_EXPAND_CATEGORY:!0,POPUPMENU_SUBNENU_ENABLE_ICON:\"submenu_enable_icon\",POPUPMENU_SUBNENU_DISABLE_ICON:\"submenu_disable_icon\",POPUPMENU_CHECKBOX_SELECTED_ICON:\"checkbox_selected_icon\",POPUPMENU_CHECKBOX_UNSELECTED_ICON:\"checkbox_unselected_icon\",POPUPMENU_RADIOBUTTON_SELECTED_ICON:\"radiobutton_selected_icon\",POPUPMENU_RADIOBUTTON_UNSELECTED_ICON:\"radiobutton_unselected_icon\",SPLITPANE_ORIENTATION:\"horizontal\",SPLITPANE_POSITION:.5,SPLITPANE_DIVIDER_WIDTH:6,SPLITPANE_DIVIDER_BACKGROUND:\"#CCCCFF\",SPLITPANE_DIVIDER_OPACITY:.5,SPLITPANE_MASK_BACKGROUND:\"\",SPLITPANE_UP_EXPAND_ICON:\"up_expand_icon\",SPLITPANE_DOWN_EXPAND_ICON:\"down_expand_icon\",SPLITPANE_LEFT_EXPAND_ICON:\"left_expand_icon\",SPLITPANE_RIGHT_EXPAND_ICON:\"right_expand_icon\",NODE_WIDTH:50,NODE_HEIGHT:50,IMAGE_NODE:\"node_image\",IMAGE_GROUP:\"group_image\",IMAGE_SUBNETWORK:\"subnetwork_image\",ICON_DATABOX:\"databox_icon\",ICON_DATA:\"data_icon\",ICON_NODE:\"node_icon\",ICON_LINK:\"link_icon\",ICON_GROUP:\"group_icon\",ICON_SUBNETWORK:\"subnetwork_icon\",ICON_GRID:\"grid_icon\",ICON_BUS:\"bus_icon\",ICON_SHAPENODE:\"shapenode_icon\",ICON_SHAPELINK:\"shapelink_icon\",ICON_LINKSUBNETWORK:\"linksubnetwork_icon\",ICON_SHAPESUBNETWORK:\"shapesubnetwork_icon\",LAYER_DEFAULT_ID:\"default\",LAYER_DEFAULT_NAME:\"default\",ATTACHMENT_POINTER_LENGTH:10,ATTACHMENT_POINTER_WIDTH:8,ATTACHMENT_CORNER_RADIUS:5,ATTACHMENT_CONTENT_WIDTH:30,ATTACHMENT_CONTENT_HEIGHT:20,ATTACHMENT_POSITION:\"topright.topright\",ATTACHMENT_XOFFSET:0,ATTACHMENT_YOFFSET:0,ATTACHMENT_PADDING:0,ATTACHMENT_PADDING_LEFT:0,ATTACHMENT_PADDING_RIGHT:0,ATTACHMENT_PADDING_TOP:0,ATTACHMENT_PADDING_BOTTOM:0,ATTACHMENT_DIRECTION:\"right\",ATTACHMENT_FILL:!1,ATTACHMENT_FILL_COLOR:\"#000000\",ATTACHMENT_GRADIENT:null,ATTACHMENT_GRADIENT_COLOR:\"#FFFFFF\",ATTACHMENT_OUTLINE_WIDTH:-1,ATTACHMENT_OUTLINE_COLOR:\"#000000\",ATTACHMENT_CAP:\"butt\",ATTACHMENT_JOIN:\"miter\",ATTACHMENT_SHADOWABLE:!0,NETWORK_TOOLTIP_ENABLED:!0,NETWORK_SELECT_MODE:\"mix\",NETWORK_MAKE_VISIBLE_ON_SELECTED:!0,NETWORK_NO_AGENT_LINK_VISIBLE:!1,NETWORK_REMOVE_ELEMENTUI_ON_INVISIBLE:!1,NETWORK_SUBNETWORK_ANIMATE:!0,NETWORK_SENDTOTOP_ON_SELECTED:!0,NETWORK_KEYBOARD_REMOVE_ENABLED:!0,NETWORK_KEYBOARD_SELECT_ENABLED:!0,NETWORK_RECT_SELECT_ENABLED:!0,NETWORK_DOUBLECLICK_TO_SUBNETWORK:!0,NETWORK_DOUBLECLICK_TO_UPSUBNETWORK:!0,NETWORK_DOUBLECLICK_TO_EMPTYSUBNETWORK:!0,NETWORK_DOUBLECLICK_TO_LINKBUNDLE:!0,NETWORK_DOUBLECLICK_TO_GROUPEXPAND:!0,NETWORK_SELECT_OUTLINE_COLOR:\"#2877A8\",NETWORK_SELECT_OUTLINE_WIDTH:1,NETWORK_SELECT_FILL_COLOR:\"rgba(184,211,240,0.4)\",NETWORK_LAZYMOVE_OUTLINE_COLOR:\"#2877A8\",NETWORK_LAZYMOVE_OUTLINE_WIDTH:1,NETWORK_LAZYMOVE_FILL_COLOR:\"rgba(184,211,240,0.4)\",NETWORK_LAZYMOVE_FILL:!0,NETWORK_LAZYMOVE_ANIMATE:!0,NETWORK_RESIZE_POINT_SIZE:3,NETWORK_RESIZE_POINT_FILL_COLOR:\"#FFFFFF\",NETWORK_RESIZE_POINT_OUTLINE_COLOR:\"#000000\",NETWORK_RESIZE_POINT_OUTLINE_WIDTH:1,NETWORK_RESIZE_LINE_COLOR:\"#000000\",NETWORK_RESIZE_LINE_WIDTH:1,NETWORK_RESIZE_ANIMATE:!0,NETWORK_EDIT_POINT_SIZE:3,NETWORK_EDIT_POINT_FILL_COLOR:\"#FFFF00\",NETWORK_EDIT_POINT_OUTLINE_COLOR:\"#000000\",NETWORK_EDIT_POINT_OUTLINE_WIDTH:1,NETWORK_EDIT_LINE_COLOR:\"rgba(184,211,240,0.7)\",NETWORK_EDIT_LINE_WIDTH:2,NETWORK_ROTATE_POINT_SIZE:5,NETWORK_ROTATE_POINT_FILL_COLOR:\"#FFFF00\",NETWORK_ROTATE_POINT_OFFSET:15,NETWORK_ROTATE_POINT_OUTLINE_WIDTH:1,NETWORK_ROTATE_POINT_OUTLINE_COLOR:\"rgba(0,0,0,1)\",NETWORK_ROTATE_SCALE_FILL_COLOR:\"rgb(227,166,103)\",NETWORK_ROTATE_SCALE_FONT_COLOR:\"#FFFFFF\",NETWORK_ROTATE_SCALE_WIDTH:30,NETWORK_ROTATE_SCALE_HEIGHT:20,NETWORK_LIMIT_ELEMENT_INPOSITIVE_LOCATION:!0,NETWORK_LINK_FLOW_STEPPING:3,NETWORK_LINK_FLOW_COLOR:\"#FF0000\",NETWORK_LINK_FLOW_INTERVAL:600,NETWORK_SELECTION_TOLERANCE:2,NETWORK_TRANSPARENT_SELECTION_ENABLE:!1,SHOW_ALARM_IN_ATTACHMENT_DIV:!0,SHOW_LABEL_IN_ATTACHMENT_DIV:!1,SHOW_LABEL2_IN_ATTACHMENT_DIV:!1,SHOW_ICON_IN_ATTACHMENT_DIV:!1,SHOW_EDIT_IN_ATTACHMENT_DIV:!0,OVERVIEW_FILL_COLOR:\"rgba(184,211,240,0.4)\",OVERVIEW_OUTLINE_COLOR:\"#B8D3F0\",OVERVIEW_OUTLINE_WIDTH:1,OVERVIEW_SELECT_COLOR:\"#0000FF\",OVERVIEW_SELECT_WIDTH:1,OVERVIEW_PADDING:1,OVERVIEW_ANIMATE:!0,OVERVIEW_MAX_PACKING_WIDTH:-1,OVERVIEW_MAX_PACKING_HEIGHT:-1,TOUCH_MOVE_THRESHOLD:5,TOUCH_RECT_SELECT_THRESHOLD:20,TOUCH_ZOOM_THRESHOLD:30,LINK_BUNDLE_AGENT_FUNCTION:null,IS_LINK_ADJUSTED_TO_BOTTOM:!1,GROUP_EXPAND_ALIGN:\"center\",ELEMENTUI_FUNCTION:function(t,e){var i=e.getElementUIClass();return i?new i(t,e):null},CANVASUI_FUNCTION:function(t,e){var i=e.getCanvasUIClass();return i?new i(t,e):null},VECTORUI_FUNCTION:function(t,e){var i=e.getVectorUIClass();return i?new i(t,e):null},KEEP_DEFAULT_FUNCTION:function(t){return!(!t.target.keepDefault&&!t.target.getAttribute(\"keepDefault\"))||(!(!t.target.parentNode||!t.target.parentNode.keepDefault&&!t.target.parentNode.getAttribute(\"keepDefault\"))||!!t.shiftKey)},SORT_FUNCTION:function(t,e){if(t===e)return 0;if(null==t&&null!=e)return 1;if(null!=t&&null==e)return-1;if(null==t&&null==e)return 0;var i,n=typeof t,s=typeof e;return\"string\"===n&&\"string\"===s&&(i=t.localeCompare(e)),\"number\"===n&&\"number\"===s&&(i=t-e),void 0===i&&(i=(\"\"+t).localeCompare(\"\"+e)),i>0?1:i<0?-1:0},CENTER_LOCATION:!1,PIXEL_FILTER_FUNCTION:function(t,e){if(!e)return t;var i=.3*t.r+.59*t.g+.11*t.b;return{r:Math.floor(e.r*i/255),g:Math.floor(e.g*i/255),b:Math.floor(e.b*i/255)}}};!function(){var t=xe;if(window.OverrideTWaverDefaults)for(var e in OverrideTWaverDefaults)t[e]=OverrideTWaverDefaults[e];t.VIEW_FONT_SIZE&&t.VIEW_FONT_FAMILY?t.FONT=t.VIEW_FONT_SIZE+\" \"+t.VIEW_FONT_FAMILY:t.FONT=z.createElement(\"canvas\").getContext(\"2d\").font,t.CHART_VALUE_FONT||(t.CHART_VALUE_FONT=\"10px \"+t.VIEW_FONT_FAMILY),t.BARCHART_XSCALE_TEXT_FONT||(t.BARCHART_XSCALE_TEXT_FONT=\"10px \"+t.VIEW_FONT_FAMILY),t.BARCHART_YSCALE_TEXT_FONT||(t.BARCHART_YSCALE_TEXT_FONT=\"10px \"+t.VIEW_FONT_FAMILY),t.BARCHART_XAXIS_TEXT_FONT||(t.BARCHART_XAXIS_TEXT_FONT=\"12px \"+t.VIEW_FONT_FAMILY),t.BARCHART_YAXIS_TEXT_FONT||(t.BARCHART_YAXIS_TEXT_FONT=\"12px \"+t.VIEW_FONT_FAMILY),t.LINECHART_XSCALE_TEXT_FONT||(t.LINECHART_XSCALE_TEXT_FONT=\"10px \"+t.VIEW_FONT_FAMILY),t.LINECHART_YSCALE_TEXT_FONT||(t.LINECHART_YSCALE_TEXT_FONT=\"10px \"+t.VIEW_FONT_FAMILY),t.LINECHART_XAXIS_TEXT_FONT||(t.LINECHART_XAXIS_TEXT_FONT=\"12px \"+t.VIEW_FONT_FAMILY),t.LINECHART_YAXIS_TEXT_FONT||(t.LINECHART_YAXIS_TEXT_FONT=\"12px \"+t.VIEW_FONT_FAMILY),t.BUBBLECHART_XAXIS_TEXT_FONT||(t.BUBBLECHART_XAXIS_TEXT_FONT=\"12px \"+t.VIEW_FONT_FAMILY),t.BUBBLECHART_YAXIS_TEXT_FONT||(t.BUBBLECHART_YAXIS_TEXT_FONT=\"12px \"+t.VIEW_FONT_FAMILY),t.BUBBLECHART_XSCALE_TEXT_FONT||(t.BUBBLECHART_XSCALE_TEXT_FONT=\"10px \"+t.VIEW_FONT_FAMILY),t.BUBBLECHART_YSCALE_TEXT_FONT||(t.BUBBLECHART_YSCALE_TEXT_FONT=\"10px \"+t.VIEW_FONT_FAMILY),t.RADARCHART_AXIS_TEXT_FONT||(t.RADARCHART_AXIS_TEXT_FONT=\"12px \"+t.VIEW_FONT_FAMILY),t.RADARCHART_SCALE_TEXT_FONT||(t.RADARCHART_SCALE_TEXT_FONT=\"10px \"+t.VIEW_FONT_FAMILY),t.DIALCHART_SCALE_TEXT_FONT||(t.DIALCHART_SCALE_TEXT_FONT=\"10px \"+t.VIEW_FONT_FAMILY)}(),R.Defaults=xe,D.ext(\"twaver.Defaults\",Object,{}),R.Colors={orange:\"#EC6C00\",orange_light:\"#EF8200\",orange_dark:\"#EA5404\",gray_light:\"#666666\",gray_dark:\"#242424\",green_light:\"#57AB9A\",green_dark:\"#238475\",blue_light:\"#61B6D8\",blue_dark:\"#0089C1\"},R.SerializationSettings=function(){var t=R.SerializationSettings;this.isDataBoxSerializable=t.isDataBoxSerializable,this.isLayerBoxSerializable=t.isLayerBoxSerializable,this.isStyleSerializable=t.isStyleSerializable,this.isClientSerializable=t.isClientSerializable,this.isImageSerializable=t.isImageSerializable,this._pm=D.clone(t._pm),this._sm=D.clone(t._sm),this._cm=D.clone(t._cm)},function(){var t=R.SerializationSettings;t.isDataBoxSerializable=!0,t.isLayerBoxSerializable=!0,t.isStyleSerializable=!0,t.isClientSerializable=!0,t.isImageSerializable=!0,t._pm={},t._sm={},t._cm={},t.setPropertyType=function(e,i){t._pm[e]=i},t.getPropertyType=function(e){return t._pm[e]},t.setStyleType=function(e,i){t._sm[e]=i},t.getStyleType=function(e){return t._sm[e]},t.setClientType=function(e,i){t._cm[e]=i},t.getClientType=function(e){return t._cm[e]}}(),D.ext(\"twaver.SerializationSettings\",Object,{setPropertyType:function(t,e){this._pm[t]=e},getPropertyType:function(t){return this._pm[t]},setStyleType:function(t,e){this._sm[t]=e},getStyleType:function(t){return this._sm[t]},setClientType:function(t,e){this._cm[t]=e},getClientType:function(t){return this._cm[t]}});var Ce=R.Styles={_m:{},setStyle:function(t,e){null==e?delete Ce._m[t]:Ce._m[t]=e},getStyle:function(t){return Ce._m[t]},getStyleProperties:function(){return D.keys(R.Styles._m)}};!function(){var t=function(t,e){R.SerializationSettings.setPropertyType(t,e)};t(\"name\",\"cdata\"),t(\"name2\",\"cdata\"),t(\"icon\",\"string\"),t(\"toolTip\",\"cdata\"),t(\"parent\",\"data\"),t(\"layerId\",\"string\"),t(\"alarmState\",\"alarmstate\"),t(\"image\",\"string\"),t(\"imageUrl\",\"string\"),t(\"location\",\"point\"),t(\"width\",\"number\"),t(\"height\",\"number\"),t(\"expanded\",\"boolean\"),t(\"host\",\"data\"),t(\"fromNode\",\"data\"),t(\"toNode\",\"data\"),t(\"points\",\"list.point\"),t(\"segments\",\"list.string\"),t(\"angle\",\"number\"),t(\"visible\",\"boolean\"),(t=function(t,e,i){null==i&&(i=null!=e?typeof e:\"string\"),R.Styles.setStyle(t,e),R.SerializationSettings.setStyleType(t,i)})(\"chart.color\",null),t(\"chart.value\",0),t(\"chart.values\",null,\"list.number\"),t(\"chart.value.color\",\"#000000\"),t(\"chart.value.font\",null),t(\"chart.line.width\",2),t(\"chart.marker.size\",6),t(\"chart.marker.shape\",\"circle\"),t(\"chart.bubble.shape\",\"circle\"),t(\"chart.names\",null,\"list.string\"),t(\"chart.xaxis.values\",null,\"list.number\"),t(\"chart.yaxis.values\",null,\"list.number\"),t(\"dialchart.rear.extension\",0),t(\"dialchart.base.width\",5),t(\"dialchart.top.width\",0),t(\"dialchart.radius\",.8),t(\"inner.color\",null),t(\"outer.shape\",\"rectangle\"),t(\"outer.color\",null),t(\"outer.width\",2),t(\"outer.padding\",1),t(\"outer.padding.left\",0),t(\"outer.padding.right\",0),t(\"outer.padding.top\",0),t(\"outer.padding.bottom\",0),t(\"outer.cap\",\"butt\"),t(\"outer.join\",\"miter\"),t(\"outer.style\",\"border\"),t(\"shadow.color\",null),t(\"shadow.xoffset\",3),t(\"shadow.yoffset\",3),t(\"shadow.blur\",6),t(\"select.style\",\"shadow\"),t(\"select.color\",\"rgba(0, 0, 0, 0.7)\"),t(\"select.shape\",\"rectangle\"),t(\"select.width\",2),t(\"select.padding\",2),t(\"select.padding.left\",0),t(\"select.padding.right\",0),t(\"select.padding.top\",0),t(\"select.padding.bottom\",0),t(\"select.cap\",\"butt\"),t(\"select.join\",\"miter\"),t(\"whole.alpha\",1),t(\"body.type\",\"default\"),t(\"network.label\",null,\"cdata\"),t(\"image.padding\",0),t(\"image.padding.left\",0),t(\"image.padding.right\",0),t(\"image.padding.top\",0),t(\"image.padding.bottom\",0),t(\"image.state\",null),t(\"vector.shape\",\"rectangle\"),t(\"vector.fill\",!0),t(\"vector.fill.color\",\"#CCCCFF\"),t(\"vector.outline.width\",-1),t(\"vector.outline.pattern\",null,\"array.number\"),t(\"vector.outline.color\",\"#5B5B5B\"),t(\"vector.gradient\",\"none\"),t(\"vector.gradient.color\",\"#FFFFFF\"),t(\"vector.padding\",0),t(\"vector.padding.left\",0),t(\"vector.padding.right\",0),t(\"vector.padding.top\",0),t(\"vector.padding.bottom\",0),t(\"vector.cap\",\"butt\"),t(\"vector.join\",\"miter\"),t(\"vector.deep\",0),t(\"group.shape\",\"rectangle\"),t(\"group.fill\",!0),t(\"group.fill.color\",\"#CCCCFF\"),t(\"group.outline.width\",-1),t(\"group.outline.color\",\"#5B5B5B\"),t(\"group.gradient\",\"none\"),t(\"group.gradient.color\",\"#FFFFFF\"),t(\"group.padding\",5),t(\"group.padding.left\",0),t(\"group.padding.right\",0),t(\"group.padding.top\",0),t(\"group.padding.bottom\",0),t(\"group.cap\",\"butt\"),t(\"group.join\",\"miter\"),t(\"group.deep\",1),t(\"group.shape.roundrect.radius\",-1),t(\"group.expend.image\",null),t(\"group.expend.image.vector\",!1),t(\"label.alpha\",1),t(\"label.color\",\"#000000\"),t(\"label.font\",null),t(\"label.position\",\"bottom.bottom\"),t(\"label.direction\",\"below\"),t(\"label.corner.radius\",0),t(\"label.pointer.length\",0),t(\"label.pointer.width\",8),t(\"label.xoffset\",0),t(\"label.yoffset\",2),t(\"label.padding\",0),t(\"label.padding.left\",0),t(\"label.padding.right\",0),t(\"label.padding.top\",0),t(\"label.padding.bottom\",0),t(\"label.fill\",!1),t(\"label.fill.color\",\"#C0C0C0\"),t(\"label.gradient\",\"none\"),t(\"label.gradient.color\",\"#FFFFFF\"),t(\"label.outline.width\",-1),t(\"label.outline.color\",\"#000000\"),t(\"label.cap\",\"butt\"),t(\"label.join\",\"miter\"),t(\"label.shadowable\",!0),t(\"label.align\",\"center\"),t(\"label.rotate.angle\",0),t(\"label.maxlength\",0),t(\"link.label.rotatable\",!1),t(\"label.linespacing\",15),t(\"label2.alpha\",1),t(\"label2.color\",\"#000000\"),t(\"label2.font\",null),t(\"label2.position\",\"top.top\"),t(\"label2.direction\",\"below\"),t(\"label2.corner.radius\",0),t(\"label2.pointer.length\",0),t(\"label2.pointer.width\",8),t(\"label2.xoffset\",0),t(\"label2.yoffset\",-2),t(\"label2.padding\",0),t(\"label2.padding.left\",0),t(\"label2.padding.right\",0),t(\"label2.padding.top\",0),t(\"label2.padding.bottom\",0),t(\"label2.fill\",!1),t(\"label2.fill.color\",\"#C0C0C0\"),t(\"label2.gradient\",\"none\"),t(\"label2.gradient.color\",\"#FFFFFF\"),t(\"label2.outline.width\",-1),t(\"label2.outline.color\",\"#000000\"),t(\"label2.cap\",\"butt\"),t(\"label2.join\",\"miter\"),t(\"label2.shadowable\",!0),t(\"label2.align\",\"center\"),t(\"label2.rotate.angle\",0),t(\"label2.maxlength\",0),t(\"label2.linespacing\",15),t(\"link.label2.rotatable\",!1),t(\"icons.names\",null,\"array.string\"),t(\"icons.colors\",null,\"array.string\"),t(\"icons.position\",null,\"array.string\"),t(\"icons.orientation\",null,\"array.string\"),t(\"icons.xoffset\",[0],\"array.number\"),t(\"icons.yoffset\",[0],\"array.number\"),t(\"icons.xgap\",[1],\"array.number\"),t(\"icons.ygap\",[1],\"array.number\"),t(\"alarm.alpha\",1),t(\"alarm.color\",\"#000000\"),t(\"alarm.font\",null),t(\"alarm.position\",\"hotspot\"),t(\"alarm.direction\",\"aboveright\"),t(\"alarm.corner.radius\",5),t(\"alarm.pointer.length\",10),t(\"alarm.pointer.width\",8),t(\"alarm.xoffset\",0),t(\"alarm.yoffset\",0),t(\"alarm.padding\",0),t(\"alarm.padding.left\",0),t(\"alarm.padding.right\",0),t(\"alarm.padding.top\",0),t(\"alarm.padding.bottom\",0),t(\"alarm.gradient\",\"none\"),t(\"alarm.gradient.color\",\"#FFFFFF\"),t(\"alarm.outline.width\",-1),t(\"alarm.outline.color\",\"#000000\"),t(\"alarm.cap\",\"butt\"),t(\"alarm.join\",\"miter\"),t(\"alarm.shadowable\",!0),t(\"link.color\",\"#658DC1\"),t(\"link.width\",3),t(\"link.cap\",\"butt\"),t(\"link.join\",\"miter\"),t(\"link.type\",\"arc\"),t(\"link.pattern\",null,\"array.number\"),t(\"link.extend\",20),t(\"link.control.point\",null,\"point\"),t(\"link.bundle.id\",0),t(\"link.bundle.enable\",!0),t(\"link.bundle.expanded\",!0),t(\"link.bundle.independent\",!1),t(\"link.bundle.offset\",20),t(\"link.bundle.gap\",12),t(\"link.bundle.group.gap\",0),t(\"link.looped.gap\",6),t(\"link.looped.direction\",\"northwest\"),t(\"link.looped.type\",\"arc\"),t(\"link.from.position\",\"center\"),t(\"link.from.xoffset\",0),t(\"link.from.yoffset\",0),t(\"link.from.percent\",null),t(\"link.from.at.edge\",!0),t(\"link.to.position\",\"center\"),t(\"link.to.xoffset\",0),t(\"link.to.yoffset\",0),t(\"link.to.percent\",null),t(\"link.to.at.edge\",!0),t(\"link.split.by.percent\",!0),t(\"link.split.percent\",.5),t(\"link.split.value\",20),t(\"link.corner\",\"round\"),t(\"link.xradius\",8),t(\"link.yradius\",8),t(\"link.flow\",!1),t(\"link.flow.converse\",!1),t(\"link.flow.offset\",0),t(\"link.handler.alpha\",1),t(\"link.handler.color\",\"#000000\"),t(\"link.handler.font\",null),t(\"link.handler.position\",\"topleft.topleft\"),t(\"link.handler.direction\",\"below\"),t(\"link.handler.corner.radius\",0),t(\"link.handler.pointer.length\",0),t(\"link.handler.pointer.width\",8),t(\"link.handler.xoffset\",0),t(\"link.handler.yoffset\",0),t(\"link.handler.padding\",0),t(\"link.handler.padding.left\",0),t(\"link.handler.padding.right\",0),t(\"link.handler.padding.top\",0),t(\"link.handler.padding.bottom\",0),t(\"link.handler.fill\",!1),t(\"link.handler.fill.color\",\"#C0C0C0\"),t(\"link.handler.gradient\",\"none\"),t(\"link.handler.gradient.color\",\"#FFFFFF\"),t(\"link.handler.outline.width\",-1),t(\"link.handler.outline.color\",\"#000000\"),t(\"link.handler.cap\",\"butt\"),t(\"link.handler.join\",\"miter\"),t(\"link.handler.shadowable\",!0),t(\"link.agent\",!1),t(\"link.agent.color\",\"#658DC1\"),t(\"link.agent.width\",3),t(\"link.agent.cap\",\"butt\"),t(\"link.agent.join\",\"miter\"),t(\"link.agent.type\",\"arc\"),t(\"link.agent.pattern\",null,\"array.number\"),t(\"link.agent.extend\",20),t(\"link.agent.control.point\",null,\"point\"),t(\"link.agent.from.position\",\"center\"),t(\"link.agent.from.xoffset\",0),t(\"link.agent.from.yoffset\",0),t(\"link.agent.from.percent\",null),t(\"link.agent.from.at.edge\",!0),t(\"link.agent.to.position\",\"center\"),t(\"link.agent.to.xoffset\",0),t(\"link.agent.to.yoffset\",0),t(\"link.agent.to.percent\",null),t(\"link.agent.to.at.edge\",!0),t(\"link.agent.split.by.percent\",!0),t(\"link.agent.split.percent\",.5),t(\"link.agent.split.value\",20),t(\"link.agent.corner\",\"round\"),t(\"link.agent.xradius\",8),t(\"link.agent.yradius\",8),t(\"link.agent.flow\",!1),t(\"link.agent.flow.converse\",!1),t(\"link.agent.flow.offset\",0),t(\"follower.row.index\",0),t(\"follower.column.index\",0),t(\"follower.row.span\",1),t(\"follower.column.span\",1),t(\"follower.padding\",0),t(\"follower.padding.left\",0),t(\"follower.padding.right\",0),t(\"follower.padding.top\",0),t(\"follower.padding.bottom\",0),t(\"follower.fill.cell\",!0),t(\"follower.cell.position\",\"center\"),t(\"glow.blur\",20),t(\"grid.row.count\",1),t(\"grid.column.count\",1),t(\"grid.row.percents\",null,\"array.number\"),t(\"grid.column.percents\",null,\"array.number\"),t(\"grid.border\",1),t(\"grid.border.left\",0),t(\"grid.border.right\",0),t(\"grid.border.top\",0),t(\"grid.border.bottom\",0),t(\"grid.padding\",1),t(\"grid.padding.left\",0),t(\"grid.padding.right\",0),t(\"grid.padding.top\",0),t(\"grid.padding.bottom\",0),t(\"grid.fill\",!0),t(\"grid.fill.color\",\"#C0C0C0\"),t(\"grid.deep\",1),t(\"grid.cell.deep\",-1),t(\"shapelink.type\",\"lineto\"),t(\"shapenode.closed\",!1),t(\"shapenode.pattern\",null,\"array.number\"),t(\"bus.style\",\"nearby\"),t(\"arrow.from\",!1),t(\"arrow.from.fill\",!0),t(\"arrow.from.shape\",\"arrow.standard\"),t(\"arrow.from.color\",\"#000000\"),t(\"arrow.from.xoffset\",0),t(\"arrow.from.yoffset\",0),t(\"arrow.from.width\",12),t(\"arrow.from.height\",9),t(\"arrow.from.outline.color\",\"#000000\"),t(\"arrow.from.outline.width\",-1),t(\"arrow.from.at.edge\",!0),t(\"arrow.from.shadow\",!1),t(\"arrow.from.shadow.color\",\"#000000\"),t(\"arrow.from.shadow.xoffset\",0),t(\"arrow.from.shadow.yoffset\",0),t(\"arrow.from.shadow.blur\",16),t(\"arrow.to\",!1),t(\"arrow.to.fill\",!0),t(\"arrow.to.shape\",\"arrow.standard\"),t(\"arrow.to.color\",\"#000000\"),t(\"arrow.to.xoffset\",0),t(\"arrow.to.yoffset\",0),t(\"arrow.to.width\",12),t(\"arrow.to.height\",9),t(\"arrow.to.outline.color\",\"#000000\"),t(\"arrow.to.outline.width\",-1),t(\"arrow.to.at.edge\",!0),t(\"arrow.agent.from\",!1),t(\"arrow.agent.from.fill\",!0),t(\"arrow.agent.from.shape\",\"arrow.standard\"),t(\"arrow.agent.from.color\",\"#000000\"),t(\"arrow.agent.from.xoffset\",0),t(\"arrow.agent.from.yoffset\",0),t(\"arrow.agent.from.width\",12),t(\"arrow.agent.from.height\",9),t(\"arrow.agent.from.outline.color\",\"#000000\"),t(\"arrow.agent.from.outline.width\",-1),t(\"arrow.agent.from.at.edge\",!0),t(\"arrow.agent.from.shadow\",!1),t(\"arrow.agent.from.shadow.color\",\"#000000\"),t(\"arrow.agent.from.shadow.xoffset\",0),t(\"arrow.agent.from.shadow.yoffset\",0),t(\"arrow.agent.from.shadow.blur\",16),t(\"arrow.agent.to\",!1),t(\"arrow.agent.to.fill\",!0),t(\"arrow.agent.to.shape\",\"arrow.standard\"),t(\"arrow.agent.to.color\",\"#000000\"),t(\"arrow.agent.to.xoffset\",0),t(\"arrow.agent.to.yoffset\",0),t(\"arrow.agent.to.width\",12),t(\"arrow.agent.to.height\",9),t(\"arrow.agent.to.outline.color\",\"#000000\"),t(\"arrow.agent.to.outline.width\",-1),t(\"arrow.agent.to.at.edge\",!0),t(\"background.image\",null),t(\"background.image.scope\",\"viewport\"),t(\"background.type\",\"none\"),t(\"background.outline.width\",-1),t(\"background.outline.color\",null),t(\"background.vector.padding\",0),t(\"background.image.padding\",0),t(\"background.image.stretch\",\"fill\"),t(\"background.vector.scope\",\"viewport\"),t(\"background.vector.fill\",null),t(\"background.vector.fill.color\",null),t(\"background.vector.gradient\",!1),t(\"background.vector.gradient.color\",null),t(\"background.vector.shape\",\"rectangle\"),t(\"background.outline.pattern\",null,\"array.number\"),t(\"attachment.label.style\",\"html\"),t(\"attachment.label2.style\",\"html\"),t(\"attachment.alarm.style\",\"html\"),t(\"attachment.htmllabel.hyperlink\",!1),t(\"attachment.htmllabel2.hyperlink\",!1),t(\"attachment.zIndex\",1e3),t(\"attachment.pointer.events\",\"auto\")}(),D.ext(\"twaver.Styles\",Object,{}),R.PropertyChangeDispatcher=function(){this._dispatcher=new R.EventDispatcher},D.ext(\"twaver.PropertyChangeDispatcher\",Object,{addPropertyChangeListener:function(t,e,i){this._dispatcher.add(t,e,i)},removePropertyChangeListener:function(t,e){this._dispatcher.remove(t,e)},firePropertyChange:function(t,e,i){if(e==i)return!1;var n={property:t,oldValue:e,newValue:i,source:this};return this._dispatcher.fire(n),this.onPropertyChanged(n),!0},onPropertyChanged:function(t){}}),R.animate.Animate=function(){},D.ext(\"twaver.animate.Animate\",Object,{current:0,step:8,delay:4,finishFunction:null,shouldBeFinished:!1,timer:null,getCurrentDelay:function(){return this.delay*this.current+1},action:function(t){},start:function(t){this.current<0&&(this.current=0),t?D.callLater(this.startImpl,null,[this],t):this.startImpl()},startImpl:function(){this.timer=setTimeout(this.tick.bind(this),this.getCurrentDelay())},tick:function(){this.current<0?this.current++:(this.current<this.step&&(this.current++,this.action(this.current/this.step),this.timer=setTimeout(this.tick.bind(this),this.getCurrentDelay())),this.current>=this.step&&this.endAnimate())},endAnimate:function(){this.shouldBeFinished&&this.current<this.step&&(this.current=this.step,this.action(this.current/this.step));var t=this.finishFunction;this.timer&&(clearTimeout(this.timer),this.timer=null),t&&t()}}),R.animate.AnimateProperty=function(t,e,i){this.objects=t,this.newValues=e,this.finishFunction=i,this.oldValues=new oe;for(var n=this.objects.size(),s=0;s<n;s++){var o=this.objects.get(s);this.oldValues.add(this.getPropertyValue(o))}},D.ext(\"twaver.animate.AnimateProperty\",R.animate.Animate,{action:function(t){for(var e=this.objects.size(),i=0;i<e;i++){var n=this.objects.get(i),s=this.oldValues.get(i),o=this.newValues.get(i);this.currentAction(n,s,o,t)}},getPropertyValue:function(t){},currentAction:function(t,e,i,n){}}),R.animate.AnimateBounds=function(t,e,i){this.node=t,this.newBounds=e,this.oldBounds=t.getRect(),this.finishFunction=i},D.ext(\"twaver.animate.AnimateBounds\",R.animate.Animate,{shouldBeFinished:!0,action:function(t){var e=this.oldBounds,i=this.newBounds;this.node.setLocation(e.x+(i.x-e.x)*t,e.y+(i.y-e.y)*t),this.node.setSize(e.width+(i.width-e.width)*t,e.height+(i.height-e.height)*t)}}),R.animate.AnimateCenterLocation=function(t,e,i){R.animate.AnimateCenterLocation.superClass.constructor.call(this,t,e,i)},D.ext(\"twaver.animate.AnimateCenterLocation\",R.animate.AnimateProperty,{getPropertyValue:function(t){return t.getCenterLocation()},currentAction:function(t,e,i,n){var s=e.x+(i.x-e.x)*n,o=e.y+(i.y-e.y)*n;t.setCenterLocation(s,o)}}),R.animate.AnimateLocation=function(t,e,i){R.animate.AnimateLocation.superClass.constructor.call(this,t,e,i)},D.ext(\"twaver.animate.AnimateLocation\",R.animate.AnimateProperty,{getPropertyValue:function(t){return t.getLocation()},currentAction:function(t,e,i,n){var s=e.x+(i.x-e.x)*n,o=e.y+(i.y-e.y)*n;t.setLocation(s,o)}}),R.animate.AnimateScrollPosition=function(t,e,i){this.view=t,this.oldHorizontalOffset=t.scrollLeft,this.oldVerticalOffset=t.scrollTop,this.newHorizontalOffset=e,this.newVerticalOffset=i},D.ext(\"twaver.animate.AnimateScrollPosition\",R.animate.Animate,{action:function(t){this.view.scrollLeft=this.oldHorizontalOffset+(this.newHorizontalOffset-this.oldHorizontalOffset)*t,this.view.scrollTop=this.oldVerticalOffset+(this.newVerticalOffset-this.oldVerticalOffset)*t}}),R.animate.AnimateZoom=function(t,e,i){this.view=t,this.oldZoom=t.getZoom(),this.newZoom=e,this.finishFunction=i},D.ext(\"twaver.animate.AnimateZoom\",R.animate.Animate,{shouldBeFinished:!0,action:function(t){this.view.setZoom(this.oldZoom+(this.newZoom-this.oldZoom)*t,!1)}}),R.animate.AnimateXZoom=function(t,e,i){this.view=t,this.oldXZoom=t.getXZoom(),this.newXZoom=e,this.finishFunction=i},D.ext(\"twaver.animate.AnimateXZoom\",R.animate.Animate,{shouldBeFinished:!0,action:function(t){this.view.setXZoom(this.oldXZoom+(this.newXZoom-this.oldXZoom)*t,!1)}}),R.animate.AnimateYZoom=function(t,e,i){this.view=t,this.oldYZoom=t.getYZoom(),this.newYZoom=e,this.finishFunction=i},D.ext(\"twaver.animate.AnimateYZoom\",R.animate.Animate,{shouldBeFinished:!0,action:function(t){this.view.setYZoom(this.oldYZoom+(this.newYZoom-this.oldYZoom)*t,!1)}}),R.animate.AnimateXYZoom=function(t,e,i,n){this.view=t,this.oldXZoom=t.getXZoom(),this.newXZoom=e,this.oldYZoom=t.getYZoom(),this.newYZoom=i,this.finishFunction=n},D.ext(\"twaver.animate.AnimateXYZoom\",R.animate.Animate,{shouldBeFinished:!0,action:function(t){this.view.setXZoom(this.oldXZoom+(this.newXZoom-this.oldXZoom)*t,!1),this.view.setYZoom(this.oldYZoom+(this.newYZoom-this.oldYZoom)*t,!1)}}),R.animate.AnimateSubNetwork=function(t,e,i){this.network=t,this.subNetwork=e,this.finishFunction=i},D.ext(\"twaver.animate.AnimateSubNetwork\",R.animate.Animate,{shouldBeFinished:!0,action:function(t){t>.5?(this.network.getView().style.opacity=2*t-1,this.network._setCurrentSubNetwork(this.subNetwork)):this.network.getView().style.opacity=1-2*t}}),R.animate.AnimateManager={timer:null,animate:null,animatesArray:[],start:function(t,e){this.animatesArray.push(t),t.start(e)},endAnimate:function(){this.animatesArray.map(function(t){t.endAnimate()}),this.animatesArray=[]}},R.DataBox=function(t){R.DataBox.superClass.constructor.apply(this,arguments),1===arguments.length&&(this._name=t),this._dataList=new oe,this._dataMap={},this._rootList=new oe,this._rootMap={},this._clientMap={},this._dataBoxChangeDispatcher=new R.EventDispatcher,this._dataPropertyChangeDispatcher=new R.EventDispatcher,this._hierarchyChangeDispatcher=new R.EventDispatcher,this._selectionModel=new R.SelectionModel(this)},D.ext(\"twaver.DataBox\",R.PropertyChangeDispatcher,{IClient:!0,__client:1,__new:1,_limit:-1,_name:\"DataBox\",_icon:xe.ICON_DATABOX,__accessor:[\"name\",\"icon\",\"toolTip\"],getSelectionModel:function(){return this._selectionModel},size:function(){return this._dataList.size()},isEmpty:function(){return this._dataList.isEmpty()},getLimit:function(){return this._limit},setLimit:function(t){var e=this._limit;this._limit=t,this.firePropertyChange(\"limit\",e,t),this._checkLimit()},_checkLimit:function(){this._limit>=0&&this.size()>this._limit&&this.removeFirst(this.size()-this._limit)},removeFirst:function(t){for(0===arguments.length&&(t=1);t>0&&this._dataList.size()>0;){var e=this._dataList.get(0);this.remove(e),t--}},getSiblings:function(t){if(!this.contains(t))throw t+\" dosen't belong to this dataBox\";var e=t.getParent();return e?e.getChildren():this._rootList},getRoots:function(){return this._rootList},getSiblingIndex:function(t){return t.getParent()?t.getParent().getChildren().indexOf(t):this._rootList.indexOf(t)},getDatas:function(){return this._dataList},getDataAt:function(t){return this._dataList.get(t)},toDatas:function(t,e){return this._dataList.toList(t,e)},forEach:function(t,e){this._dataList.forEach(t,e)},forEachReverse:function(t,e){this._dataList.forEachReverse(t,e)},forEachByDepthFirst:function(t,e,i){if(e)this._depthFirst(t,e,i);else for(var n=this._rootList.size(),s=0;s<n;s++){var o=this._rootList.get(s);if(!1===this._depthFirst(t,o,i))return}},_depthFirst:function(t,e,i){for(var n=e.getChildrenSize(),s=0;s<n;s++){var o=e.getChildAt(s);if(!1===this._depthFirst(t,o,i))return!1}if(i){if(!1===t.call(i,e))return!1}else if(!1===t(e))return!1},forEachByBreadthFirst:function(t,e,i){var n=new oe;for(e?n.add(e):this._rootList.forEach(n.add,n);n.size()>0;)if((e=n.removeAt(0)).getChildren().forEach(n.add,n),i){if(!1===t.call(i,e))return}else if(!1===t(e))return},add:function(t,e){if(t){1===arguments.length&&(e=-1);var i=t.getId();if(this._dataMap.hasOwnProperty(i))throw\"Data with ID '\"+i+\"' already exists\";this._dataBoxChangeDispatcher.fire({kind:\"preAdd\",data:t}),this._dataMap[i]=t,this._dataList.add(t),t.getParent()||(this._rootMap[i]=t,e>=0?this._rootList.add(t,e):this._rootList.add(t)),t.addPropertyChangeListener(this.handleDataPropertyChange,this,!0),this._dataBoxChangeDispatcher.fire({kind:\"add\",data:t}),this._checkLimit()}},addByDescendant:function(t){this.add(t),t.getChildren().size()>0&&t.getChildren().forEach(function(t){this.addByDescendant(t)},this)},remove:function(t){this.removeById(t.getId())},removeSelection:function(){this._selectionModel.toSelection().forEach(function(t){this.remove(t)},this)},removeById:function(t){var e=this.getDataById(t);e&&(this._dataBoxChangeDispatcher.fire({kind:\"preRemove\",data:e}),e instanceof R.Link&&(e.setFromNode(null),e.setToNode(null)),e instanceof Pe&&e.getLinks()&&e.getLinks().toList().forEach(function(t){this.remove(t)},this),e instanceof Pe&&e.getFollowers()&&e.getFollowers().toList().forEach(function(t){t.setHost(null)}),e instanceof R.Follower&&e.getHost()&&e.setHost(null),e.toChildren().forEach(function(t){this.remove(t)},this),e.getParent()&&e.getParent().removeChild(e),this._dataList.remove(e),delete this._dataMap[t],this._rootMap[t]&&(delete this._rootMap[t],this._rootList.remove(e)),this._dataBoxChangeDispatcher.fire({kind:\"remove\",data:e}),e.removePropertyChangeListener(this.handleDataPropertyChange,this))},clear:function(){if(this._dataList.size()>0){this._dataList.forEach(function(t){t.removePropertyChangeListener(this.handleDataPropertyChange,this)},this);var t=this._dataList.toList();this._dataList.clear(),this._dataMap={},this._rootList.clear(),this._rootMap={},this._dataBoxChangeDispatcher.fire({kind:\"clear\",datas:t})}},getDataById:function(t){return this._dataMap[t]},containsById:function(t){return this._dataMap.hasOwnProperty(t)},contains:function(t){return!!t&&this._dataMap[t._id]===t},moveTo:function(t,e){if(!this.contains(t))throw t+\" dosen't belong to this dataBox\";var i=this.getSiblings(t),n=i.indexOf(t);n===e||n<0||e>=0&&e<=i.size()&&(i.remove(t),e>i.size()&&e--,i.add(t,e),this._hierarchyChangeDispatcher.fire({data:t,oldIndex:n,newIndex:e}))},moveUp:function(t){var e=this.getSiblings(t);this.moveTo(t,e.indexOf(t)-1)},moveDown:function(t){var e=this.getSiblings(t);this.moveTo(t,e.indexOf(t)+1)},moveToTop:function(t){this.moveTo(t,0)},moveToBottom:function(t){var e=this.getSiblings(t);this.moveTo(t,e.size())},moveSelectionUp:function(t){t||(t=this._selectionModel);var e=new oe;wt.findMoveUpDatas(t,e,this._rootList),e.forEach(this.moveUp,this)},moveSelectionDown:function(t){t||(t=this._selectionModel);var e=new oe;wt.findMoveDownDatas(t,e,this._rootList),e.forEach(this.moveDown,this)},moveSelectionToTop:function(t){t||(t=this._selectionModel);var e=new oe;wt.findMoveToTopDatas(t,e,this._rootList),e.forEach(this.moveToTop,this)},moveSelectionToBottom:function(t){t||(t=this._selectionModel);var e=new oe;wt.findMoveToBottomDatas(t,e,this._rootList),e.forEach(this.moveToBottom,this)},handleDataPropertyChange:function(t){var e=t.source;if(\"parent\"===t.property){var i=e.getId();e.getParent()?this._rootMap[i]&&(delete this._rootMap[i],this._rootList.remove(e)):this._rootMap[i]||(this._rootMap[i]=e,this._rootList.add(e))}this.onDataPropertyChanged(e,t),this._dataPropertyChangeDispatcher.fire(t)},onDataPropertyChanged:function(t,e){},addDataBoxChangeListener:function(t,e,i){this._dataBoxChangeDispatcher.add(t,e,i)},removeDataBoxChangeListener:function(t,e){this._dataBoxChangeDispatcher.remove(t,e)},addDataPropertyChangeListener:function(t,e,i){this._dataPropertyChangeDispatcher.add(t,e,i)},removeDataPropertyChangeListener:function(t,e){this._dataPropertyChangeDispatcher.remove(t,e)},addHierarchyChangeListener:function(t,e,i){this._hierarchyChangeDispatcher.add(t,e,i)},removeHierarchyChangeListener:function(t,e){this._hierarchyChangeDispatcher.remove(t,e)},getRandomData:function(t){if(t){for(var e=new R.List,i=0;i<this._dataList.size()-1;i++){var n=this._dataList.get(i);n instanceof t&&e.add(n)}if(0==e.size())return null}return t?e.get(parseInt(R.Util.random()*e.size())):this._dataList.get(parseInt(R.Util.random()*this._dataList.size()))}}),R.ElementBox=function(t){R.ElementBox.superClass.constructor.apply(this,arguments),this._styleMap={},this._alarmBox=new R.AlarmBox(this),this._layerBox=new R.LayerBox(this),this._alarmStatePropagator=new R.AlarmStatePropagator(this),this._alarmStatePropagator.setEnable(!0),this._indexChangeDispatcher=new R.EventDispatcher,this._undoManager=new R.UndoManager(this)},R.ElementBox.IS_INTERESTED_ADJUSTELEMENTINDEX_PROPERTY={fromAgent:1,toAgent:1,expanded:1,parent:1,host:1},D.ext(\"twaver.ElementBox\",R.DataBox,{IStyle:!0,__style:1,_name:\"ElementBox\",add:function(t,e){if(t){if(!t.IElement)throw\"Only IElement can be added into ElementBox\";R.ElementBox.superClass.add.apply(this,arguments),this.adjustElementIndex(t)}},onDataPropertyChanged:function(t,e){R.ElementBox.IS_INTERESTED_ADJUSTELEMENTINDEX_PROPERTY[e.property]&&this.adjustElementIndex(t),R.ElementBox.superClass.onDataPropertyChanged.apply(this,arguments)},addIndexChangeListener:function(t,e,i){this._indexChangeDispatcher.add(t,e,i)},removeIndexChangeListener:function(t,e){this._indexChangeDispatcher.remove(t,e)},sendToTop:function(t){if(this.contains(t)){if(t!==this.getDatas().get(this.size()-1)){var e=this.getDatas().indexOf(t);this.getDatas().removeAt(e),this.getDatas().add(t),this._indexChangeDispatcher.fire({element:t,oldIndex:e,newIndex:this.size()-1})}t instanceof R.Link&&(t.getFromAgent()&&!t.getFromAgent().isAdjustedToBottom()&&this.sendToTop(t.getFromAgent()),t.getToAgent()&&!t.getToAgent().isAdjustedToBottom()&&this.sendToTop(t.getToAgent())),t instanceof Pe&&t.getFollowers()&&t.getFollowers().forEach(function(e){e.isRelatedTo(t)||t instanceof R.Follower&&e.isLoopedHostOn(t)||this.sendToTop(e)},this),t.ISubNetwork||t instanceof De&&!t.isExpanded()||t.getChildren().forEach(function(t){t instanceof R.Link||this.sendToTop(t)},this)}},sendToBottom:function(t,e){if(t!==e&&this.contains(t)&&(!e||this.contains(e))){var i=this.getDatas().remove(t),n=0;e&&(n=this.getDatas().indexOf(e)),this.getDatas().add(t,n),i!=n&&(this._indexChangeDispatcher.fire({element:t,oldIndex:i,newIndex:n}),!t.getParent()||t.getParent().ISubNetwork||t.getParent()instanceof R.Link||this.sendToBottom(t.getParent(),t))}},fireIndexChange:function(t,e,i){this._indexChangeDispatcher.fire({element:t,oldIndex:e,newIndex:i})},adjustElementIndex:function(t){this.contains(t)&&(t.isAdjustedToBottom()?(this.sendToBottom(t),t.getChildren().forEach(this.adjustElementIndex,this)):this.sendToTop(t))},forEachByLayer:function(t,e,i){var n=this.size(),s=this.getDatas();if(e)for(var o=0;o<n;o++){var r=s.get(o);if(this._layerBox.getLayerByElement(r)===e)if(i){if(!1===t.call(i,r))return}else if(!1===t(r))return}else this._layerBox.forEachByDepthFirst(function(e){for(var o=0;o<n;o++){var r=s.get(o);if(this._layerBox.getLayerByElement(r)===e)if(i){if(!1===t.call(i,r))return}else if(!1===t(r))return}},null,this)},forEachByLayerReverse:function(t,e,i){var n=new oe;this.forEachByLayer(function(t){n.add(t,0)},e),n.forEach(t,i)},getLayerBox:function(){return this._layerBox},getAlarmBox:function(){return this._alarmBox},getAlarmStatePropagator:function(){return this._alarmStatePropagator},startBatch:function(t,e){R._isInitializing=!0,R._bundleLinks={},R._links={},t.call(e);var i;for(var n in R._links)R._links[n]._checkAgentNodeImpl();for(var n in R._bundleLinks)i=R._bundleLinks[n],vt.resetBundleLinks(i[0],i[1]);R._bundleLinks=null,R._links=null,R._isInitializing=!1},getUndoManager:function(){return this._undoManager}}),R.SelectionModel=function(t){R.SelectionModel.superClass.constructor.apply(this,arguments),this._selectionMode=\"multipleSelection\",this._selectionList=new oe,this._selectionChangeDispatcher=new R.EventDispatcher,this._selectionMap={},this._setDataBox(t)},D.ext(\"twaver.SelectionModel\",R.PropertyChangeDispatcher,{getSelectionMode:function(){return this._selectionMode},setSelectionMode:function(t){if(this._selectionMode!==t&&(\"noneSelection\"===t||\"singleSelection\"===t||\"multipleSelection\"===t)){this.clearSelection();var e=this._selectionMode;this._selectionMode=t,this.firePropertyChange(\"selectionMode\",e,this._selectionMode)}},getDataBox:function(){return this._dataBox},_setDataBox:function(t){if(!t)throw\"dataBox can not be null\";if(this._dataBox!==t){this._dataBox&&(this.clearSelection(),this._dataBox.removeDataBoxChangeListener(this.handleDataBoxChange,this));var e=this._dataBox;this._dataBox=t,this._dataBox.addDataBoxChangeListener(this.handleDataBoxChange,this,!0),this.firePropertyChange(\"dataBox\",e,this._dataBox)}},dispose:function(){this.clearSelection(),this._dataBox.removeDataBoxChangeListener(this.handleDataBoxChange,this)},handleDataBoxChange:function(t){if(\"remove\"===t.kind){var e=t.data;this.contains(e)&&(this._selectionList.remove(e),delete this._selectionMap[e.getId()],this.fireSelectionChange(\"remove\",new oe(e)))}else\"clear\"===t.kind&&this.clearSelection()},getFilterFunction:function(){return this._filterFunction},setFilterFunction:function(t){if(this._filterFunction!==t){this.clearSelection();var e=this._filterFunction;this._filterFunction=t,this.firePropertyChange(\"filterFunction\",e,this._filterFunction)}},fireSelectionChange:function(t,e,i){i&&(this._selectionList.forEach(function(t){i.contains(t)?i.remove(t):i.add(t)}),e=i.toList()),this._selectionChangeDispatcher.fire({kind:t,datas:new oe(e)})},addSelectionChangeListener:function(t,e,i){this._selectionChangeDispatcher.add(t,e,i)},removeSelectionChangeListener:function(t,e){this._selectionChangeDispatcher.remove(t,e)},_filterList:function(t,e){for(var i=new oe(t),n=0;n<i.size();n++){var s=i.get(n);(this._filterFunction&&!this._filterFunction(s)||e&&this.contains(s)||!e&&!this.contains(s)||!this._dataBox.contains(s))&&(i.removeAt(n),n--)}return i},appendSelection:function(t){if(\"noneSelection\"!==this._selectionMode){var e=this._filterList(t,!0);if(!e.isEmpty()){var i=null;\"singleSelection\"===this._selectionMode&&(i=new oe(this._selectionList),this._selectionList.clear(),this._selectionMap={},e=new oe(e.get(e.size()-1)));for(var n=0;n<e.size();n++){var s=e.get(n);this._selectionList.add(s),this._selectionMap[s.getId()]=s}this.fireSelectionChange(\"append\",e,i)}}},removeSelection:function(t){var e=this._filterList(t);if(0!==e.size()){for(var i=0;i<e.size();i++){var n=e.get(i);this._selectionList.remove(n),delete this._selectionMap[n.getId()]}this.fireSelectionChange(\"remove\",e)}},toSelection:function(t,e){return this._selectionList.toList(t,e)},getSelection:function(){return this._selectionList},setSelection:function(t){if(\"noneSelection\"!==this._selectionMode&&(0!==this._selectionList.size()||null!=t)){var e=new oe(this._selectionList);this._selectionList.clear(),this._selectionMap={};var i=this._filterList(t,!0);\"singleSelection\"===this._selectionMode&&i.size()>1&&(i=new oe(i.get(i.size()-1)));for(var n=0;n<i.size();n++){var s=i.get(n);this._selectionList.add(s),this._selectionMap[s.getId()]=s}this.fireSelectionChange(\"set\",null,e)}},clearSelection:function(){if(this._selectionList.size()>0){var t=this._selectionList.toList();this._selectionList.clear(),this._selectionMap={},this.fireSelectionChange(\"clear\",t)}},selectAll:function(){if(\"noneSelection\"!==this._selectionMode){var t=this._dataBox.toDatas(),e=0,i=null;if(this._filterFunction)for(e=0;e<t.size();e++)i=t.get(e),this._filterFunction(i)||(t.removeAt(e),e--);var n=new oe(this._selectionList);for(this._selectionList.clear(),this._selectionMap={},\"singleSelection\"===this._selectionMode&&t.size()>1&&(t=new oe(t.get(t.size()-1))),e=0;e<t.size();e++)i=t.get(e),this._selectionList.add(i),this._selectionMap[i.getId()]=i;this.fireSelectionChange(\"all\",null,n)}},size:function(){return this._selectionList.size()},contains:function(t){return!!t&&null!=this._selectionMap[t.getId()]},getLastData:function(){return this._selectionList.size()>0?this._selectionList.get(this._selectionList.size()-1):null},getFirstData:function(){return this._selectionList.size()>0?this._selectionList.get(0):null},isSelectable:function(t){return!!t&&(\"noneSelection\"!==this._selectionMode&&!(this._filterFunction&&!this._filterFunction(t)))}}),R.QuickFinder=function(t,e,i,n,s){if(this._map={},!t)throw\"dataBox can not be null\";if(!e)throw\"propertyName can not be null\";this._dataBox=t,this._propertyName=e,this._propertyType=i||\"accessor\",\"accessor\"===this._propertyType&&(this._getter=D.getter(e)),this._valueFunction=n||this.getValue,this._filterFunction=s||this.isInterested,this._dataBox.forEach(this._addData,this),this._dataBox.addDataBoxChangeListener(this.handleDataBoxChange,this,!0),this._dataBox.addDataPropertyChangeListener(this.handleDataPropertyChange,this,!0)},D.ext(\"twaver.QuickFinder\",Object,{_NULL_:\"twaver-null-key\",getValueFunction:function(){return this._valueFunction},getFilterFunction:function(){return this._filterFunction},handleDataBoxChange:function(t){\"add\"===t.kind?this._addData(t.data):\"remove\"===t.kind?this._removeData(t.data):\"clear\"===t.kind&&(this._map={})},handleDataPropertyChange:function(t){if(this._filterFunction.call(this,t.source)){if(\"accessor\"===this._propertyType&&this._propertyName===t.property);else if(\"style\"===this._propertyType&&t.source.IStyle&&\"S:\"+this._propertyName===t.property);else if(\"client\"!==this._propertyType||\"C:\"+this._propertyName!==t.property)return;var e=this._getMap(t.oldValue);e&&e.remove(t.source),this._addData(t.source)}},_getMap:function(t){return t=null==t?this._NULL_:t,this._map[t]},find:function(t){var e=this._getMap(t);return e?e.toList():new oe},findFirst:function(t){var e=this._getMap(t);return!e||e.isEmpty()?null:e.get(0)},_addData:function(t){if(this._filterFunction.call(this,t)){var e=this._valueFunction.call(this,t),i=this._getMap(e);i||(i=new oe,e=null==e?this._NULL_:e,this._map[e]=i),i.add(t)}},_removeData:function(t){if(this._filterFunction.call(this,t)){var e=this._valueFunction.call(this,t),i=this._getMap(e);i&&(i.remove(t),i.isEmpty()&&(e=null==e?this._NULL_:e,delete this._map[e]))}},dispose:function(){this._dataBox.removeDataBoxChangeListener(this.handleDataBoxChange,this),this._dataBox.removeDataPropertyChangeListener(this.handleDataPropertyChange,this),delete this._dataBox},getDataBox:function(){return this._dataBox},getPropertyType:function(){return this._propertyType},getPropertyName:function(){return this._propertyName},isInterested:function(t){return!(\"style\"===this._propertyType&&!t.IStyle)&&!(\"accessor\"===this._propertyType&&this._valueFunction===this.getValue&&!t[this._getter])},getValue:function(t){return\"accessor\"===this._propertyType?t[this._getter]():\"style\"===this._propertyType&&t.getStyle?t.getStyle(this._propertyName):\"client\"===this._propertyType&&t.getClient?t.getClient(this._propertyName):null}}),R.PropertyPropagator=function(t,e,i){if(!t)throw\"dataBox can not be null\";if(!e)throw\"propertyName can not be null\";this._dataBox=t,this._propertyName=e,this._propertyType=i||\"accessor\",\"accessor\"===this._propertyType&&(this._getter=D.getter(e),this._setter=D.setter(e)),this._enable=!1,this._isPropagating=!1},D.ext(\"twaver.PropertyPropagator\",Object,{getDataBox:function(){return this._dataBox},getPropertyType:function(){return this._propertyType},getPropertyName:function(){return this._propertyName},isEnable:function(){return this._enable},setEnable:function(t){this._enable!==t&&(this._enable=t,this._enable?(this._dataBox.addDataBoxChangeListener(this.handleDataBoxChange,this),this._dataBox.addDataPropertyChangeListener(this.handleDataPropertyChange,this),this._dataBox.forEach(function(t){this.propagate(t)},this)):(this._dataBox.removeDataBoxChangeListener(this.handleDataBoxChange,this),this._dataBox.removeDataPropertyChangeListener(this.handleDataPropertyChange,this)))},handleDataBoxChange:function(t){t.data&&this.propagate(t.data)},handleDataPropertyChange:function(t){if(this.isInterestedProperty(t))this.propagate(t.source);else if(\"parent\"===t.property){var e=t.oldValue;e&&this.propagate(e),this.propagate(t.source)}},isInterestedProperty:function(t){return\"accessor\"===this._propertyType&&this._propertyName===t.property||(!(\"style\"!==this._propertyType||!t.IElement||\"S:\"+this._propertyName!==t.property)||\"client\"===this._propertyType&&\"C:\"+this._propertyName===t.property)},propagate:function(t){t&&!this._isPropagating&&(this._isPropagating=!0,this.propagateToTop(t),this._isPropagating=!1)},propagateToTop:function(t){for(this.propagateToParent(null,t);t&&t.getParent();)this.propagateToParent(t,t.getParent()),t=t.getParent()},propagateToParent:function(t,e){}}),R.AlarmStatePropagator=function(t){R.AlarmStatePropagator.superClass.constructor.call(this,t,\"alarmState\")},D.ext(\"twaver.AlarmStatePropagator\",R.PropertyPropagator,{handleDataPropertyChange:function(t){\"enablePropagation\"===t.property?this.propagate(t.source):R.AlarmStatePropagator.superClass.handleDataPropertyChange.call(this,t)},propagateToParent:function(t,e){var i=null;e.getChildren().forEach(function(t){var e=t.getAlarmState().getHighestOverallAlarmSeverity();R.AlarmSeverity.compare(e,i)>0&&(i=e)}),e.getAlarmState().setPropagateSeverity(i)}}),R.AlarmSeverity=function(t,e,i,n,s){this.value=t,this.name=e,this.nickName=i,this.color=n,this.displayName=s},D.ext(\"twaver.AlarmSeverity\",Object,{toString:function(){return this.displayName?this.displayName:this.name}}),function(){var t=R.AlarmSeverity;t.severities=new oe,t._vm={},t._nm={},t._cp=function(t,e){if(t&&e){var i=t.value-e.value;return i>0?1:i<0?-1:0}return t&&!e?1:!t&&e?-1:0},t.forEach=function(e,i){t.severities.forEach(e,i)},t.getSortFunction=function(){return t._cp},t.setSortFunction=function(e){t._cp=e,t.severities.sort(e)},t.add=function(e,i,n,s,o){var r=new t(e,i,n,s,o);return t._vm[e]=r,t._nm[i]=r,t.severities.add(r),t.severities.sort(t._cp),r},t.remove=function(e){var i=t._nm[e];return i&&(delete t._nm[e],delete t._vm[i.value],t.severities.remove(i)),i},t.CRITICAL=t.add(500,\"Critical\",\"C\",\"#FF0000\"),t.MAJOR=t.add(400,\"Major\",\"M\",\"#FFA000\"),t.MINOR=t.add(300,\"Minor\",\"m\",\"#FFFF00\"),t.WARNING=t.add(200,\"Warning\",\"W\",\"#00FFFF\"),t.INDETERMINATE=t.add(100,\"Indeterminate\",\"N\",\"#C800FF\"),t.CLEARED=t.add(0,\"Cleared\",\"R\",\"#00FF00\"),t.isClearedAlarmSeverity=function(t){return!!t&&0===t.value},t.getByName=function(e){return t._nm[e]},t.getByValue=function(e){return t._vm[e]},t.clear=function(){t.severities.clear(),t._vm={},t._nm={}},t.compare=function(e,i){return t._cp(e,i)}}(),R.AlarmState=function(t){this._e=t,this._nm={},this._am={},this._ps=null,this._haa=null,this._hna=null,this._hoa=null,this._hta=null,this._hls=!1,this._aac=0,this._nac=0},D.ext(\"twaver.AlarmState\",Object,{_ep:!0,_f:function(){this._c1(),this._c2(),this._c3(),this._c4(),this._c5(),this._c6(),this._c7(),this._e.firePropertyChange(\"alarmState\",null,this)},getHighestAcknowledgedAlarmSeverity:function(){return this._haa},getHighestNewAlarmSeverity:function(){return this._hna},getHighestOverallAlarmSeverity:function(){return this._hoa},getHighestNativeAlarmSeverity:function(){return this._hta},hasLessSevereNewAlarms:function(){return this._hls},_c1:function(){var t=null;for(var e in this._am)e=R.AlarmSeverity.getByName(e),R.AlarmSeverity.isClearedAlarmSeverity(e)||0!==this.getAcknowledgedAlarmCount(e)&&(t=t&&R.AlarmSeverity.compare(t,e)>0?t:e);this._haa=t},_c2:function(){var t=null;for(var e in this._nm)e=R.AlarmSeverity.getByName(e),R.AlarmSeverity.isClearedAlarmSeverity(e)||0!==this.getNewAlarmCount(e)&&(t=t&&R.AlarmSeverity.compare(t,e)>0?t:e);this._hna=t},_c3:function(){if(this._hna){for(var t in this._nm)if(t=R.AlarmSeverity.getByName(t),!R.AlarmSeverity.isClearedAlarmSeverity(t)&&0!==this.getNewAlarmCount(t)&&R.AlarmSeverity.compare(this._hna,t)>0)return void(this._hls=!0);this._hls=!1}else this._hls=!1},_c4:function(){var t=this._haa,e=this._hna,i=this._ps;this._hoa=t,R.AlarmSeverity.compare(e,this._hoa)>0&&(this._hoa=e),R.AlarmSeverity.compare(i,this._hoa)>0&&(this._hoa=i)},_c5:function(){var t=this._haa,e=this._hna;this._hta=t,R.AlarmSeverity.compare(e,this._hta)>0&&(this._hta=e)},increaseAcknowledgedAlarm:function(t,e){if(null==e&&(e=1),0!==e){var i=this._am[t.name];null==i&&(i=0),i+=e,this._am[t.name]=i,this._f()}},increaseNewAlarm:function(t,e){if(null==e&&(e=1),0!==e){var i=this._nm[t.name];null==i&&(i=0),i+=e,this._nm[t.name]=i,this._f()}},decreaseAcknowledgedAlarm:function(t,e){if(null==e&&(e=1),0!==e){var i=this._am[t.name];if(null==i&&(i=0),(i-=e)<0)throw\"Alarm count can not be negative\";this._am[t.name]=i,this._f()}},decreaseNewAlarm:function(t,e){if(null==e&&(e=1),0!==e){var i=this._nm[t.name];if(null==i&&(i=0),(i-=e)<0)throw\"Alarm count can not be negative\";this._nm[t.name]=i,this._f()}},acknowledgeAlarm:function(t){this.decreaseNewAlarm(t,1),this.increaseAcknowledgedAlarm(t,1)},acknowledgeAllAlarms:function(t){if(t){var e=this.getNewAlarmCount(t);this.decreaseNewAlarm(t,e),this.increaseAcknowledgedAlarm(t,e)}else for(var i in this._nm)this.acknowledgeAllAlarms(R.AlarmSeverity.getByName(i))},_c6:function(){this._aac=0;for(var t in this._am)t=R.AlarmSeverity.getByName(t),this._aac+=this.getAcknowledgedAlarmCount(t)},getAcknowledgedAlarmCount:function(t){if(t){var e=this._am[t.name];return null==e?0:e}return this._aac},getAlarmCount:function(t){return this.getAcknowledgedAlarmCount(t)+this.getNewAlarmCount(t)},_c7:function(){this._nac=0;for(var t in this._nm)t=R.AlarmSeverity.getByName(t),this._nac+=this.getNewAlarmCount(t)},getNewAlarmCount:function(t){if(t){var e=this._nm[t.name];return null==e?0:e}return this._nac},setNewAlarmCount:function(t,e){this._nm[t.name]=e,this._f()},removeAllNewAlarms:function(t){t?delete this._nm[t]:this._nm={},this._f()},setAcknowledgedAlarmCount:function(t,e){this._am[t.name]=e,this._f()},removeAllAcknowledgedAlarms:function(t){t?delete this._am[t.name]:this._am={},this._f()},isEmpty:function(){return null==this._hoa},clear:function(){this._am={},this._nm={},this._f()},getPropagateSeverity:function(){return this._ps},setPropagateSeverity:function(t){if(this._ep||(t=null),this._ps!==t){var e=this._ps;this._ps=t,this._f(),this._e.firePropertyChange(\"propagateSeverity\",e,t)}},isEnablePropagation:function(){return this._ep},setEnablePropagation:function(t){var e=this._ep;this._ep=t,this._e.firePropertyChange(\"enablePropagation\",e,t)&&(t||this.setPropagateSeverity(null))}}),R.AlarmBox=function(t){if(!t)throw\"elementBox can not be null.\";R.AlarmBox.superClass.constructor.call(this),this._elementBox=t,this._alarmElementMapping=new R.AlarmElementMapping(this,t),this._elementBox.addDataBoxChangeListener(this.handleElementBoxChange,this,!0),this.addDataBoxChangeListener(this.handleAlarmBoxChange,this,!0),this.addDataPropertyChangeListener(this.handleAlarmPropertyChange,this,!0)},D.ext(\"twaver.AlarmBox\",R.DataBox,{__accessor:[\"removeAlarmWhenElementIsRemoved\"],_name:\"AlarmBox\",_removeAlarmWhenAlarmIsCleared:!1,_removeAlarmWhenElementIsRemoved:!0,getElementBox:function(){return this._elementBox},isRemoveAlarmWhenAlarmIsCleared:function(){return this._removeAlarmWhenAlarmIsCleared},setRemoveAlarmWhenAlarmIsCleared:function(t){var e=this._removeAlarmWhenAlarmIsCleared;this._removeAlarmWhenAlarmIsCleared=t,this.firePropertyChange(\"removeAlarmWhenAlarmIsCleared\",e,t),t&&this.toDatas(function(t){return t.isCleared()}).forEach(this.remove,this)},getAlarmElementMapping:function(){return this._alarmElementMapping},setAlarmElementMapping:function(t){if(!t)throw\"alarmElementMapping can not be null\";if(this._alarmElementMapping!==t){var e=this._alarmElementMapping;this.getDatas().forEach(this._decreaseAlarmState,this),this._alarmElementMapping=t,this.getDatas().forEach(this._increaseAlarmState,this),this.firePropertyChange(\"alarmElementMapping\",e,t)}},handleElementBoxChange:function(t){\"add\"===t.kind?this.handleElementAdded(t.data):\"remove\"===t.kind?(this.handleElementRemoved(t.data),this._removeAlarmWhenElementIsRemoved&&this.removeAlarmsByElement(t.data)):\"clear\"===t.kind&&(t.datas.forEach(this.handleElementRemoved,this),this._removeAlarmWhenElementIsRemoved&&this.clear())},handleAlarmBoxChange:function(t){\"add\"===t.kind?this._increaseAlarmState(t.data):\"remove\"===t.kind?this._decreaseAlarmState(t.data):\"clear\"===t.kind&&t.datas.forEach(this._decreaseAlarmState,this)},handleAlarmPropertyChange:function(t){var e=t.source;e.isCleared()||(\"alarmSeverity\"===t.property?this.handleAlarmSeverityChange(e,t):\"acked\"===t.property&&this.handleAckedChange(e,t)),\"cleared\"===t.property&&(e.isCleared()?(this._decreaseAlarmState(e,!0),this._removeAlarmWhenAlarmIsCleared&&this.remove(e)):this._increaseAlarmState(e,!0))},handleAckedChange:function(t,e){if(t.getAlarmSeverity()){var i=this.getCorrespondingElements(t);if(i)for(var n=0;n<i.size();n++){var s=i.get(n);e.oldValue?s.getAlarmState().decreaseAcknowledgedAlarm(t.getAlarmSeverity()):s.getAlarmState().decreaseNewAlarm(t.getAlarmSeverity()),e.newValue?s.getAlarmState().increaseAcknowledgedAlarm(t.getAlarmSeverity()):s.getAlarmState().increaseNewAlarm(t.getAlarmSeverity())}}},handleAlarmSeverityChange:function(t,e){var i=e.oldValue,n=e.newValue,s=this.getCorrespondingElements(t);if(s)for(var o=0;o<s.size();o++){var r=s.get(o);i&&(t.isAcked()?r.getAlarmState().decreaseAcknowledgedAlarm(i):r.getAlarmState().decreaseNewAlarm(i)),n&&(t.isAcked()?r.getAlarmState().increaseAcknowledgedAlarm(n):r.getAlarmState().increaseNewAlarm(n))}},getCorrespondingAlarms:function(t){return this._alarmElementMapping.getCorrespondingAlarms(t)},getCorrespondingElements:function(t){return this._alarmElementMapping.getCorrespondingElements(t)},handleElementAdded:function(t){var e=this.getCorrespondingAlarms(t);if(e)for(var i=0;i<e.size();i++){var n=e.get(i);if(!n.isCleared()){var s=n.getAlarmSeverity();s&&(n.isAcked()?t.getAlarmState().increaseAcknowledgedAlarm(s):t.getAlarmState().increaseNewAlarm(s))}}},_increaseAlarmState:function(t,e){if(!t.isCleared()||e){var i=t.getAlarmSeverity();if(i){var n=this.getCorrespondingElements(t);if(n)for(var s=0;s<n.size();s++){var o=n.get(s);t.isAcked()?o.getAlarmState().increaseAcknowledgedAlarm(i):o.getAlarmState().increaseNewAlarm(i)}}}},_decreaseAlarmState:function(t,e){if(!t.isCleared()||e){var i=t.getAlarmSeverity();if(i){var n=this.getCorrespondingElements(t);if(n)for(var s=0;s<n.size();s++){var o=n.get(s);t.isAcked()?o.getAlarmState().decreaseAcknowledgedAlarm(i):o.getAlarmState().decreaseNewAlarm(i)}}}},handleElementRemoved:function(t){var e=this.getCorrespondingAlarms(t);e&&e.forEach(function(e){!e.isCleared()&&e.getAlarmSeverity()&&(e.isAcked()?t.getAlarmState().decreaseAcknowledgedAlarm(e.getAlarmSeverity()):t.getAlarmState().decreaseNewAlarm(e.getAlarmSeverity()))})},removeAlarmsByElement:function(t){var e=this.getCorrespondingAlarms(t);e&&e.forEach(this.remove,this)},add:function(t,e){if(!t.IAlarm)throw\"Only IAlarm can be added into AlarmBox\";this._removeAlarmWhenAlarmIsCleared&&t.isCleared()||R.AlarmBox.superClass.add.apply(this,arguments)}}),R.AlarmElementMapping=function(t,e){if(!e)throw\"ElementBox can not be null\";if(!t)throw\"AlarmBox can not be null\";this._elementBox=e,this._alarmBox=t,this._alarmsFinder=new R.QuickFinder(t,\"elementId\")},D.ext(\"twaver.AlarmElementMapping\",Object,{getCorrespondingAlarms:function(t){return this._alarmsFinder.find(t.getId())},getCorrespondingElements:function(t){var e=this._elementBox.getDataById(t.getElementId());return new oe(e)},dispose:function(){this._alarmsFinder.dispose(),delete this._elementBox,delete this._alarmBox,delete this._alarmsFinder}}),R.AlarmStateStatistics=function(t){R.AlarmStateStatistics.superClass.constructor.apply(this,arguments),this.sumNew=0,this.sumAcked=0,this.sumTotal=0,this.severtiyMap={},this.elementMap={},this.setElementBox(t)},D.ext(\"twaver.AlarmStateStatistics\",R.PropertyChangeDispatcher,{getElementBox:function(){return this._elementBox},setElementBox:function(t){if(!t)throw\"ElementBox can not be null\";if(this._elementBox!==t){var e=this._elementBox;e&&(e.removeDataPropertyChangeListener(this.handleElementPropertyChange,this),e.removeDataBoxChangeListener(this.handleElementBoxChange,this),this.severtiyMap={},this.elementMap={}),this._elementBox=t,this.reset(),t.addDataPropertyChangeListener(this.handleElementPropertyChange,this),t.addDataBoxChangeListener(this.handleElementBoxChange,this),this.firePropertyChange(\"elementBox\",e,t)}},dispose:function(){this._elementBox.removeDataPropertyChangeListener(this.handleElementPropertyChange,this),this._elementBox.removeDataBoxChangeListener(this.handleElementBoxChange,this),delete this._elementBox},handleElementPropertyChange:function(t){\"alarmState\"===t.property&&(this.increase(t.source),this.fireAlarmStateChange())},handleElementBoxChange:function(t){\"add\"===t.kind?(this.increase(t.data),this.fireAlarmStateChange()):\"remove\"===t.kind?(this.decrease(t.data),this.fireAlarmStateChange()):\"clear\"===t.kind&&(this.severtiyMap={},this.elementMap={},this.fireAlarmStateChange())},fireAlarmStateChange:function(){this.sumAcked=0,this.sumNew=0,this.sumTotal=0,R.AlarmSeverity.forEach(function(t){var e=this.getSumInfo(t);this.sumAcked+=e.ackedCount,this.sumNew+=e.newCount,this.sumTotal+=e.totalCount},this),this.firePropertyChange(\"alarmState\",!1,!0)},getNewAlarmCount:function(t){if(!t)return this.sumNew;return this.getSumInfo(t).newCount},getAcknowledgedAlarmCount:function(t){if(!t)return this.sumAcked;return this.getSumInfo(t).ackedCount},getTotalAlarmCount:function(t){if(!t)return this.sumTotal;return this.getSumInfo(t).totalCount},getSumInfo:function(t){var e=this.severtiyMap[t.name];return e||((e={}).newCount=0,e.ackedCount=0,e.totalCount=0,this.severtiyMap[t.name]=e),e},decrease:function(t){var e=this.elementMap[t.getId()];e&&(delete this.elementMap[t.getId()],R.AlarmSeverity.forEach(function(t){var i=e[t.name],n=this.getSumInfo(t);n.newCount=n.newCount-i.newCount,n.ackedCount=n.ackedCount-i.ackedCount,n.totalCount=n.totalCount-i.totalCount},this))},increase:function(t){if(this.decrease(t),!this._filterFunction||this._filterFunction(t)){var e={};this.elementMap[t.getId()]=e,R.AlarmSeverity.forEach(function(i){var n={};n.newCount=t.getAlarmState().getNewAlarmCount(i),n.ackedCount=t.getAlarmState().getAcknowledgedAlarmCount(i),n.totalCount=t.getAlarmState().getAlarmCount(i),e[i.name]=n;var s=this.getSumInfo(i);s.newCount=s.newCount+n.newCount,s.ackedCount=s.ackedCount+n.ackedCount,s.totalCount=s.totalCount+n.totalCount},this)}},reset:function(){this.severtiyMap={},this.elementMap={},this._elementBox.forEach(this.increase,this),this.fireAlarmStateChange()},setFilterFunction:function(t){var e=this._filterFunction;this._filterFunction=t,this.reset(),this.firePropertyChange(\"filterFunction\",e,t)},getFilterFunction:function(){return _filterFunction}}),R.LayerBox=function(t){R.LayerBox.superClass.constructor.call(this),this._elementBox=t,this._defaultLayer=new R.Layer(xe.LAYER_DEFAULT_ID,xe.LAYER_DEFAULT_NAME),this.add(this._defaultLayer)},D.ext(\"twaver.LayerBox\",R.DataBox,{_name:\"LayerBox\",getElementBox:function(){return this._elementBox},getDefaultLayer:function(){return this._defaultLayer},add:function(t,e){if(!t.ILayer)throw\"Only ILayer can be added into LayerBox\";R.LayerBox.superClass.add.apply(this,arguments)},removeById:function(t){if(t===this._defaultLayer.getId())throw\"Cannot remove default layer\";R.LayerBox.superClass.removeById.call(this,t)},getLayerByElement:function(t){if(!t)return null;if(t._layerId===xe.LAYER_DEFAULT_ID)return this._defaultLayer;var e=this.getDataById(t.getLayerId());return e||this._defaultLayer},clear:function(){this.toDatas().forEach(function(t){t!=this._defaultLayer&&this.removeById(t.getId())},this)}}),R.BundleLinks=function(t,e){this._links=t,this._siblings=e;var i,n=Ce._m[\"link.bundle.expanded\"];for(i=0;i<t.size();i++){var s=t.get(i).getStyle(\"link.bundle.expanded\");if(null!=s){n=s;break}}if(null==n&&(n=!0),xe.LINK_BUNDLE_AGENT_FUNCTION){var o=xe.LINK_BUNDLE_AGENT_FUNCTION(t);null==o?o=t.get(0):o!=t.get(0)&&(t.remove(o),t.add(o,0))}for(i=0;i<t.size();i++)t.get(i).setStyle(\"link.bundle.expanded\",n)},D.ext(\"twaver.BundleLinks\",Object,{getLinks:function(){return this._links},getSiblings:function(){return this._siblings},forEachSiblingLink:function(t,e){this._siblings.forEach(function(i){i.getLinks().forEach(t,e)})}});var Ee=function(t){return t.reduce(function(t,e){return 2*t+e},0)},Te=function(t){for(var e=[],i=7;i>=0;i--)e.push(!!(t&1<<i));return e},ke=function(t,e){for(var i,n,s=0,o=function(t){for(var i=0,n=0;n<t;n++)e.charCodeAt(s>>3)&1<<(7&s)&&(i|=1<<n),s++;return i},r=[],a=1<<t,h=a+1,l=t+1,c=[],d=function(){c=[],l=t+1;for(var e=0;e<a;e++)c[e]=[e];c[a]=[],c[h]=null};;)if(n=i,(i=o(l))!==a){if(i===h)break;if(i<c.length)n!==a&&c.push(c[n].concat(c[i][0]));else{if(i!==c.length)throw new Error(\"Invalid LZW code.\");c.push(c[n].concat(c[n][0]))}r.push.apply(r,c[i]),c.length===1<<l&&l<12&&l++}else d();return r};D.ext(function(t){this.data=t,this.len=this.data.length,this.pos=0},Object,{readByte:function(){if(this.pos>=this.data.length)throw new Error(\"Attempted to read past end of stream.\");return 255&this.data.charCodeAt(this.pos++)},readBytes:function(t){for(var e=[],i=0;i<t;i++)e.push(this.readByte());return e},read:function(t){for(var e=\"\",i=0;i<t;i++)e+=String.fromCharCode(this.readByte());return e},readUnsigned:function(){var t=this.readBytes(2);return(t[1]<<8)+t[0]}});var be=function(t){var e,i=t,n=null,s=null,o=null,r=0,a=null,h=null,l=null;this.frames=[],this.size={};var c=this,d=z.createElement(\"canvas\");this.loaded=!1;this.doParse=function(){Se(i,f)};var u=function(){h&&c.frames.push({data:h.getImageData(0,0,e.width,e.height),delay:s})},_=function(){},g=function(t){return function(e){t(e)}},f={hdr:g(function(t){e=t,c.size.width=e.width,c.size.height=e.height}),gce:g(function(t){u(),n=null,s=null,a=o,o=null,h=null,n=t.transparencyGiven?t.transparencyIndex:null,s=t.delayTime,o=t.disposalMethod}),com:g(_),app:{NETSCAPE:g(_)},img:g(function(t){h||(h=d.getContext(\"2d\"));var i=c.frames.length,s=t.lctFlag?t.lct:e.gct;i>0&&(3===a?h.putImageData(c.frames[r].data,0,0):r=i-1,2===a&&(l||h.clearRect(l.leftPos,l.topPos,l.width,l.height)));var o=h.getImageData(t.leftPos,t.topPos,t.width,t.height);t.pixels.forEach(function(t,e){t!==n&&(o.data[4*e+0]=s[t][0],o.data[4*e+1]=s[t][1],o.data[4*e+2]=s[t][2],o.data[4*e+3]=255)}),h.putImageData(o,t.leftPos,t.topPos),l=t}),eof:function(t){u(),c.loaded=!0}}},Se=function(t,e){e||(e={});var i=function(e){for(var i=[],n=0;n<e;n++)i.push(t.readBytes(3));return i},n=function(){var e,i;i=\"\";do{e=t.readByte(),i+=t.read(e)}while(0!==e);return i},s=function(){var o={};switch(o.sentinel=t.readByte(),String.fromCharCode(o.sentinel)){case\"!\":o.type=\"ext\",function(i){switch(i.label=t.readByte(),i.label){case 249:i.extType=\"gce\",function(i){t.readByte();var n=Te(t.readByte());i.reserved=n.splice(0,3),i.disposalMethod=Ee(n.splice(0,3)),i.userInput=n.shift(),i.transparencyGiven=n.shift(),i.delayTime=t.readUnsigned(),i.transparencyIndex=t.readByte(),i.terminator=t.readByte(),e.gce&&e.gce(i)}(i);break;case 254:i.extType=\"com\",function(t){t.comment=n(),e.com&&e.com(t)}(i);break;case 1:i.extType=\"pte\",function(i){t.readByte(),i.ptHeader=t.readBytes(12),i.ptData=n(),e.pte&&e.pte(i)}(i);break;case 255:i.extType=\"app\",function(i){switch(t.readByte(),i.identifier=t.read(8),i.authCode=t.read(3),i.identifier){case\"NETSCAPE\":!function(i){t.readByte(),i.unknown=t.readByte(),i.iterations=t.readUnsigned(),i.terminator=t.readByte(),e.app&&e.app.NETSCAPE&&e.app.NETSCAPE(i)}(i);break;default:!function(t){t.appData=n(),e.app&&e.app[t.identifier]&&e.app[t.identifier](t)}(i)}}(i);break;default:i.extType=\"unknown\",function(t){t.data=n(),e.unknown&&e.unknown(t)}(i)}}(o);break;case\",\":o.type=\"img\",function(s){s.leftPos=t.readUnsigned(),s.topPos=t.readUnsigned(),s.width=t.readUnsigned(),s.height=t.readUnsigned();var o=Te(t.readByte());s.lctFlag=o.shift(),s.interlaced=o.shift(),s.sorted=o.shift(),s.reserved=o.splice(0,2),s.lctSize=Ee(o.splice(0,3)),s.lctFlag&&(s.lct=i(1<<s.lctSize+1)),s.lzwMinCodeSize=t.readByte();var r=n();s.pixels=ke(s.lzwMinCodeSize,r),s.interlaced&&(s.pixels=function(t,e){for(var i=new Array(t.length),n=t.length/e,s=function(n,s){var o=t.slice(s*e,(s+1)*e);i.splice.apply(i,[n*e,e].concat(o))},o=[0,4,2,1],r=[8,8,4,2],a=0,h=0;h<4;h++)for(var l=o[h];l<n;l+=r[h])s(l,a),a++;return i}(s.pixels,s.width)),e.img&&e.img(s)}(o);break;case\";\":o.type=\"eof\",e.eof&&e.eof(o);break;default:throw new Error(\"Unknown block: 0x\"+o.sentinel.toString(16))}\"eof\"!==o.type&&setTimeout(s,0)};!function(){var n={};if(n.sig=t.read(3),n.ver=t.read(3),\"GIF\"!==n.sig)throw new Error(\"Not a GIF file.\");n.width=t.readUnsigned(),n.height=t.readUnsigned();var s=Te(t.readByte());n.gctFlag=s.shift(),n.colorRes=Ee(s.splice(0,3)),n.sorted=s.shift(),n.gctSize=Ee(s.splice(0,3)),n.bgColor=t.readByte(),n.pixelAspectRatio=t.readByte(),n.gctFlag&&(n.gct=i(1<<n.gctSize+1)),e.hdr&&e.hdr(n)}(),setTimeout(s,0)},Le=function(t,e,i){var n=z.createElement(\"canvas\");return Ie(n,e.width,e.height),n.getContext(\"2d\").clearRect(0,0,e.width,e.height),n.getContext(\"2d\").putImageData(t[i].data,0,0),n},Ie=function(t,e,i){t.width=e,t.height=i,t.style.width=e+\"px\",t.style.height=i+\"px\"};R.Data=function(t){if(R.Data.superClass.constructor.apply(this,arguments),this._childList=new oe,this._childMap={},this._clientMap={},void 0===t||null===t)this._id=D.id();else if(\"string\"==typeof t||\"number\"==typeof t||\"boolean\"==typeof t)this._id=t;else{for(var e in t)if(\"clients\"===e)for(var i in t.clients)this._clientMap[i]=t.clients[i];else if(\"styles\"===e)for(var n in t.styles)this._styleMap[n]=t.styles[n];else null!=t[e]&&(\"id\"===e?this._id=t[e]:this[D.setter(e)]&&this[D.setter(e)](t[e]));null==this._id&&(this._id=D.id())}},D.ext(\"twaver.Data\",R.PropertyChangeDispatcher,{IData:!0,IClient:!0,__client:1,__new:1,_parent:null,__accessor:[\"name\",\"name2\",\"icon\",\"toolTip\"],_icon:xe.ICON_DATA,_dragBoundsFunc:null,getId:function(){return this._id},getChildren:function(){return this._childList},getChildrenSize:function(){return this._childList.size()},toChildren:function(t,e){return this._childList.toList(t,e)},addChild:function(t,e){return void 0===e&&(e=this._childList.size()),!(!t||t===this)&&(!this._childMap[t.getId()]&&(!this.isDescendantOf(t)&&(t.getParent()&&t.getParent().removeChild(t),(e<0||e>this._childList.size())&&(e=this._childList.size()),this._childList.add(t,e),this._childMap[t._id]=t,t.setParent(this),this.firePropertyChange(\"children\",null,t),this.onChildAdded(t,e),!0)))},onChildAdded:function(t,e){},removeChild:function(t){if(!t)return!1;if(!this._childMap[t._id])return!1;var e=this._childList.remove(t);return delete this._childMap[t._id],this.firePropertyChange(\"children\",t,null),t.setParent(null),this.onChildRemoved(t,e),!0},onChildRemoved:function(t,e){},getChildAt:function(t){return this._childList.get(t)},clearChildren:function(){if(0===this._childList.size())return!1;for(var t=this._childList.toArray(),e=t.length,i=0;i<e;i++)this.removeChild(t[i]);return this.onChildrenCleared(t),!0},onChildrenCleared:function(t){},getParent:function(){return this._parent},setParent:function(t){if(!(this._isUpdatingParent||this._parent===t||this===t||t&&t.isDescendantOf(this))){var e=this._parent;this._parent=t,this._isUpdatingParent=!0,e&&e.removeChild(this),t&&t.addChild(this),delete this._isUpdatingParent,this.firePropertyChange(\"parent\",e,t),this.onParentChanged(e,t)}},onParentChanged:function(t,e){},hasChildren:function(){return this._childList.size()>0},isRelatedTo:function(t){return!!t&&(this.isDescendantOf(t)||t.isDescendantOf(this))},isParentOf:function(t){return!!t&&null!=this._childMap[t._id]},isDescendantOf:function(t){if(!t)return!1;if(!t.hasChildren())return!1;for(var e=this._parent;e;){if(t===e)return!0;e=e.getParent()}return!1},getDragBoundsFunc:function(){return this._dragBoundsFunc},setDragBoundsFunc:function(t){this._dragBoundsFunc=t},toString:function(){return this.getName()?this.getName():this._id}}),R.Alarm=function(t,e,i,n,s){R.Alarm.superClass.constructor.call(this,t),this._elementId=e,this._alarmSeverity=i,this._acked=n||!1,this._cleared=s||!1},D.ext(\"twaver.Alarm\",R.Data,{IAlarm:!0,getElementId:function(){return this._elementId},__accessor:[\"acked\",\"cleared\",\"alarmSeverity\"]}),R.Layer=function(t){R.Layer.superClass.constructor.call(this,t)},D.ext(\"twaver.Layer\",R.Data,{ILayer:!0,__accessor:[\"visible\",\"movable\",\"editable\",\"rotatable\"],_visible:!0,_movable:!0,_editable:!0,_rotatable:!0,_name:\"Default\"}),R.Element=function(t){this._styleMap=this._styleMap||{},this._alarmState=new R.AlarmState(this),R.Element.superClass.constructor.call(this,t)},D.ext(\"twaver.Element\",R.Data,{IElement:!0,IStyle:!0,__accessor:[\"layerId\"],__bool:[\"visible\",\"movable\"],__style:1,_layerId:xe.LAYER_DEFAULT_ID,_visible:!0,_movable:!0,getAlarmState:function(){return this._alarmState},isAdjustedToBottom:function(){return!1},getElementUIClass:function(){return null},getCanvasUIClass:function(){return null},getVectorUIClass:function(){return null},s:function(t,e){if(void 0!==e)return this.setStyle(t,e),this;if(\"string\"==typeof t)return this.getStyle(t);var i=this;Object.keys(t).forEach(function(e){i.setStyle(e,t[e])})},c:function(t,e){return void 0===e?this.getClient(t):(this.setClient(t,e),this)}}),R.Dummy=function(t){R.Dummy.superClass.constructor.call(this,t)},D.ext(\"twaver.Dummy\",R.Element,{IDummy:!0});var Pe=function(t){this._location={x:0,y:0},Pe.superClass.constructor.call(this,t)};R.Node=Pe,Pe.IS_INTERESTED_NODE_PROPERTY={location:1,width:1,height:1,expanded:1},D.ext(\"twaver.Node\",R.Element,{_icon:xe.ICON_NODE,_image:xe.IMAGE_NODE,_imageUrl:null,_angle:0,getLoopedLinks:function(){return this._loopedLinks},getLinks:function(){return this._links},getAgentLinks:function(){return this._agentLinks},getFollowers:function(){return this._followers},_addFollower:function(t){this._followers||(this._followers=new oe),this._followers.add(t)},_removeFollower:function(t){this._followers.remove(t),this._followers.isEmpty()&&delete this._followers},getFromLinks:function(){return this._fromLinks},getToLinks:function(){return this._toLinks},_addFromLink:function(t){this._links||(this._links=new oe(!1)),this._fromLinks||(this._fromLinks=new oe(!1)),this._links.add(t),this._toLinks&&this._toLinks.contains(t)&&(this._loopedLinks||(this._loopedLinks=new oe(!1)),this._loopedLinks.add(t)),this._fromLinks.add(t)},_addToLink:function(t){this._links||(this._links=new oe(!1)),this._toLinks||(this._toLinks=new oe(!1)),this._links.add(t),this._fromLinks&&this._fromLinks.contains(t)&&(this._loopedLinks||(this._loopedLinks=new oe(!1)),this._loopedLinks.add(t)),this._toLinks.add(t)},_removeFromLink:function(t){this._links&&this._links.remove(t),this._fromLinks&&this._fromLinks.remove(t),this._loopedLinks&&this._loopedLinks.remove(t)},_removeToLink:function(t){this._links&&this._links.remove(t),this._toLinks&&this._toLinks.remove(t),this._loopedLinks&&this._loopedLinks.remove(t)},hasAgentLinks:function(){return null!=this._agentLinks&&!this._agentLinks.isEmpty()},getFromAgentLinks:function(){return this._fromAgentLinks},getToAgentLinks:function(){return this._toAgentLinks},_addFromAgentLink:function(t){this._fromAgentLinks||(this._fromAgentLinks=new oe(!1)),this._agentLinks||(this._agentLinks=new oe(!1)),this._fromAgentLinks.add(t),this._agentLinks.add(t)},_addToAgentLink:function(t){this._toAgentLinks||(this._toAgentLinks=new oe(!1)),this._agentLinks||(this._agentLinks=new oe(!1)),this._toAgentLinks.add(t),this._agentLinks.add(t)},_removeFromAgentLink:function(t){this._fromAgentLinks&&this._fromAgentLinks.remove(t),this._agentLinks&&this._agentLinks.remove(t)},_removeToAgentLink:function(t){this._toAgentLinks&&this._toAgentLinks.remove(t),this._agentLinks&&this._agentLinks.remove(t)},getImage:function(){return this._image},setImage:function(t){var e=this._image,i=this.getWidth(),n=this.getHeight();this._image=t,this.firePropertyChange(\"image\",e,t),this.firePropertyChange(\"width\",i,this.getWidth()),this.firePropertyChange(\"height\",n,this.getHeight())},getImageUrl:function(){return this._imageUrl},setImageUrl:function(t){if(this._imageUrl!=t){var e=this._imageUrl;this._imageUrl=t,Ae.images[t]||R.imageUtil.registerImageByUrl(t,\"svg\"===R.imageUtil.getImageType(t),t),this.setImage(t),this.firePropertyChange(\"imageUrl\",e,t)}},getX:function(){return this._location.x},getY:function(){return this._location.y},setX:function(t){this.setLocation(t,this._location.y)},setY:function(t){this.setLocation(this._location.x,t)},getLocation:function(){return this._location},setLocation:function(t,e){var i;if(i=2===arguments.length?{x:arguments[0],y:arguments[1]}:arguments[0],D.num(i.x)&&D.num(i.y)&&(i.x!==this._location.x||i.y!==this._location.y)){this._dragBoundsFunc&&(i=this._dragBoundsFunc(i));var n=this._location;this._location=i,this.firePropertyChange(\"location\",n,i)}},getCenterLocation:function(){return xe.CENTER_LOCATION?this._location:{x:this.getX()+this.getWidth()/2,y:this.getY()+this.getHeight()/2}},setCenterLocation:function(t,e){var i;i=2===arguments.length?{x:arguments[0],y:arguments[1]}:D.clone(arguments[0]),D.num(i.x)&&D.num(i.y)&&(xe.CENTER_LOCATION||(i.x-=this.getWidth()/2,i.y-=this.getHeight()/2),this.setLocation(i))},translate:function(t,e){this.setLocation(this.getX()+t,this.getY()+e)},getWidth:function(){if(D.num(this._width)&&this._width>=0)return this._width;if(\"object\"!=typeof this._image){var t=D.getImageAsset(this._image);if(t){var e=t.getWidth();return D.num(e)&&e>=0?e:(t=t._image,Ht(this,t,t,\"w\"))}}else if(this._image)return this._image.w;return xe.NODE_WIDTH},setWidth:function(t){var e=this._width;this._width=t,this.firePropertyChange(\"width\",e,t)},getHeight:function(){if(D.num(this._height)&&this._height>=0)return this._height;if(\"object\"!=typeof this._image){var t=D.getImageAsset(this._image);if(t){var e=t.getHeight();return D.num(e)&&e>=0?e:(t=t._image,Ht(this,t,t,\"h\"))}}else if(this._image)return this._image.h;return xe.NODE_HEIGHT},setHeight:function(t){var e=this._height;this._height=t,this.firePropertyChange(\"height\",e,t)},setSize:function(){2===arguments.length?(this.setWidth(arguments[0]),this.setHeight(arguments[1])):(this.setWidth(arguments[0].width),this.setHeight(arguments[0].height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getRect:function(){var t=this.getOriginalRect();if(0===this._angle)return t;for(var e=W.createMatrix(this._angle*Math.PI/180,t.x+t.width/2,t.y+t.height/2),i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],n=0,s=i.length;n<s;n++)i[n]=e.transform(i[n]);return W.getRect(i)},getOriginalRect:function(){var t=this.getWidth(),e=this.getHeight();return xe.CENTER_LOCATION?{x:this._location.x-t/2,y:this._location.y-e/2,width:t,height:e}:{x:this.getX(),y:this.getY(),width:t,height:e}},getAngle:function(){return this._angle},setAngle:function(t){var e=this._angle;this._angle=t%360,this.firePropertyChange(\"angle\",e,this._angle)},onParentChanged:function(t,e){Pe.superClass.onParentChanged.call(this,t,e),this._checkLinkAgent()},_checkLinkAgent:function(){if(R._isInitializing){if(this._links)for(var t=this._links.size(),e=0;e<t;e++)this._links.get(e)._checkAgentNode()}else R.ElementBox.prototype.startBatch(function(){if(this._links)for(var t=this._links.size(),e=0;e<t;e++)this._links.get(e)._checkAgentNode()},this)},onPropertyChanged:function(t){if(Pe.superClass.onPropertyChanged.call(this,t),this._followers)for(var e=this._followers.toList(),i=e.size(),n=0;n<i;n++)e.get(n).handleHostPropertyChange(t);this.getParent()instanceof De&&Pe.IS_INTERESTED_NODE_PROPERTY[t.property]&&this.getParent().updateLocationFromChildren()},getElementUIClass:function(){return R.network.NodeUI},getCanvasUIClass:function(){return R.canvas.NodeUI},getVectorUIClass:function(){return R.vector.NodeUI}}),R.Follower=function(t){this._isUpdatingFollower=!1,this._isUpdatingLocation=!1,R.Follower.superClass.constructor.call(this,t)},R.Follower.IS_INTERESTED_HOST_GRID_PROPERTY={location:1,width:1,height:1,\"S:grid.row.count\":1,\"S:grid.column.count\":1,\"S:grid.row.percents\":1,\"S:grid.column.percents\":1,\"S:grid.border\":1,\"S:grid.border.left\":1,\"S:grid.border.right\":1,\"S:grid.border.top\":1,\"S:grid.border.bottom\":1,\"S:grid.padding\":1,\"S:grid.padding.left\":1,\"S:grid.padding.right\":1,\"S:grid.padding.top\":1,\"S:grid.padding.bottom\":1},R.Follower.IS_INTERESTED_FOLLOWER_STYLE={\"follower.row.index\":1,\"follower.column.index\":1,\"follower.row.span\":1,\"follower.column.span\":1,\"follower.padding\":1,\"follower.padding.left\":1,\"follower.padding.right\":1,\"follower.padding.top\":1,\"follower.padding.bottom\":1},D.ext(\"twaver.Follower\",Pe,{_host:null,getHost:function(){return this._host},setHost:function(t){if(this!==t&&this._host!==t){var e=this._host;e&&e._removeFollower(this),this._host=t,this._host&&this._host._addFollower(this),this.firePropertyChange(\"host\",e,t),this.onHostChanged(e,t)}},onStyleChanged:function(t,e,i){R.Follower.superClass.onStyleChanged.call(this,t,e,i),R.Follower.IS_INTERESTED_FOLLOWER_STYLE[t]&&this.updateFollower(null)},setLocation:function(){this._isUpdatingLocation||(this._isUpdatingLocation=!0,R.Follower.superClass.setLocation.apply(this,arguments),this._isUpdatingLocation=!1)},onHostChanged:function(t,e){this.updateFollower(null)},handleHostPropertyChange:function(t){this.updateFollower(t)},updateFollower:function(t){this._isUpdatingFollower||D.isDeserializing||(this._isUpdatingFollower=!0,this.updateFollowerImpl(t),this._isUpdatingFollower=!1)},updateFollowerImpl:function(t){var e=this.getHost();if(e instanceof R.Grid){if(!t||R.Follower.IS_INTERESTED_HOST_GRID_PROPERTY[t.property]){var i=this.getStyle(\"follower.row.index\"),n=this.getStyle(\"follower.column.index\"),s=e.getCellRect(i,n);if(!s)return;var o=this.getStyle(\"follower.row.span\"),r=this.getStyle(\"follower.column.span\");if(1!=o||1!=r){var a=e.getCellRect(i+o-1,n+r-1);a&&(s=W.unionRect(s,a))}if(W.addPadding(s,this,\"follower.padding\"),this.getStyle(\"follower.fill.cell\"))this.setLocation(s.x,s.y),this.setWidth(s.width),this.setHeight(s.height);else{var h=this.getStyle(\"follower.cell.position\");s=G.get(h,s,this.getRect()),this.setLocation(s.x,s.y)}}}else if(null!=t&&\"location\"===t.property){var l=t.oldValue,c=t.newValue,d=this.getLocation();this.setLocation(d.x+(c.x-l.x),d.y+(c.y-l.y))}},isHostOn:function(t){if(!t)return!1;for(var e={},i=this._host;i&&i!=this&&!e[i.getId()];){if(i===t)return!0;e[i.getId()]=i,i=i instanceof R.Follower?i.getHost():null}return!1},isLoopedHostOn:function(t){return this.isHostOn(t)&&t.isHostOn(this)}});var Re=function(t){Re.superClass.constructor.call(this,t)};R.HTMLNode=Re,D.ext(\"twaver.HTMLNode\",R.Follower,{getElementUIClass:function(){return R.network.HTMLNodeUI},getCanvasUIClass:function(){return R.canvas.HTMLNodeUI},getVectorUIClass:function(){return R.vector.HTMLNodeUI}}),R.Link=function(t,e,i){R.Link.superClass.constructor.call(this,t instanceof Pe?null:t),t instanceof Pe&&(i=e,e=t),e&&this.setFromNode(e),i&&this.setToNode(i)},R.Link.IS_INTERESTED_BUNDLE_STYLE={\"link.bundle.enable\":1,\"link.bundle.id\":1,\"link.bundle.independent\":1},D.ext(\"twaver.Link\",R.Element,{_fromNode:null,_toNode:null,_fromAgent:null,_toAgent:null,_icon:xe.ICON_LINK,getFromNode:function(){return this._fromNode},getToNode:function(){return this._toNode},getFromAgent:function(){return this._fromAgent},getToAgent:function(){return this._toAgent},setFromNode:function(t){if(this._fromNode!==t){var e=this._fromNode;this._fromNode=t,e&&e._removeFromLink(this),this._fromNode&&this._fromNode._addFromLink(this),this._checkAgentNode(),this.firePropertyChange(\"fromNode\",e,t)}},setToNode:function(t){if(this._toNode!==t){var e=this._toNode;this._toNode=t,e&&e._removeToLink(this),this._toNode&&this._toNode._addToLink(this),this._checkAgentNode(),this.firePropertyChange(\"toNode\",e,t)}},isLooped:function(){return this._fromNode===this._toNode&&null!=this._fromNode&&null!=this._toNode},_checkAgentNode:function(){R._isInitializing?R._links[this._id]||(R._links[this._id]=this):this._checkAgentNodeImpl()},_checkAgentNodeImpl:function(){var t,e,i=vt.figureFromAgent(this);this._fromAgent!=i&&(t=this._fromAgent,this._fromAgent&&this._fromAgent._removeFromAgentLink(this),this._fromAgent=i,this._fromAgent&&this._fromAgent._addFromAgentLink(this),this.firePropertyChange(\"fromAgent\",t,this._fromAgent),R._isInitializing?(t&&this._toAgent&&(e=t._id+\":\"+this._toAgent._id,R._bundleLinks[e]||(R._bundleLinks[e]=[t,this._toAgent])),this._fromAgent&&this._toAgent&&(e=this._fromAgent._id+\":\"+this._toAgent._id,R._bundleLinks[e]||(R._bundleLinks[e]=[this._fromAgent,this._toAgent]))):(vt.resetBundleLinks(t,this._toAgent),vt.resetBundleLinks(this._fromAgent,this._toAgent)));var n=vt.figureToAgent(this);this._toAgent!=n&&(t=this._toAgent,this._toAgent&&this._toAgent._removeToAgentLink(this),this._toAgent=n,this._toAgent&&this._toAgent._addToAgentLink(this),this.firePropertyChange(\"toAgent\",t,this._toAgent),R._isInitializing?(t&&this._fromAgent&&(e=t._id+\":\"+this._fromAgent._id,R._bundleLinks[e]||(R._bundleLinks[e]=[t,this._fromAgent])),this._toAgent&&this._fromAgent&&(e=this._toAgent._id+\":\"+this._fromAgent._id,R._bundleLinks[e]||(R._bundleLinks[e]=[this._toAgent,this._fromAgent]))):(vt.resetBundleLinks(t,this._fromAgent),vt.resetBundleLinks(this._toAgent,this._fromAgent)))},_setBundleLinks:function(t){this._bundleLinks=t,this.firePropertyChange(\"bundleLinks\",!0,!1)},getBundleLinks:function(){return this._bundleLinks},getBundleCount:function(){return this._bundleLinks?this._bundleLinks.getLinks().size():1},getBundleIndex:function(){return this._bundleLinks?this._bundleLinks.getLinks().indexOf(this):0},reverseBundleExpanded:function(){if(this._bundleLinks&&this._bundleLinks.getLinks().size()>0){var t,e=this._bundleLinks.getLinks(),i=!this.getStyle(\"link.bundle.expanded\");for(t=0;t<e.size();t++)e.get(t).setStyle(\"link.bundle.expanded\",i);var n=this._bundleLinks.getSiblings();for(t=0;t<n.size();t++){var s=n.get(t);if(s!=this._bundleLinks){e=s.getLinks();for(var o=0;o<e.size();o++)e.get(o).firePropertyChange(\"bundleLinks\",null,s)}}return!0}return!1},isBundleAgent:function(){return null!=this._bundleLinks&&this._bundleLinks.getLinks().size()>1&&this===this._bundleLinks.getLinks().get(0)&&!this.getStyle(\"link.bundle.expanded\")},onStyleChanged:function(t,e,i){R.Link.superClass.onStyleChanged.call(this,t,e,i),R.Link.IS_INTERESTED_BUNDLE_STYLE[t]&&vt.resetBundleLinks(this._toAgent,this._fromAgent)},getElementUIClass:function(){return R.network.LinkUI},getCanvasUIClass:function(){return R.canvas.LinkUI},getVectorUIClass:function(){return R.vector.LinkUI},isAdjustedToBottom:function(){return xe.IS_LINK_ADJUSTED_TO_BOTTOM}}),R.HTMLLink=function(t,e,i){R.HTMLLink.superClass.constructor.call(this,t,e,i)},R.Util.ext(\"twaver.HTMLLink\",R.Link,{getElementUIClass:function(){return R.network.HTMLLinkUI},getCanvasUIClass:function(){return R.canvas.HTMLLinkUI},getVectorUIClass:function(){return R.vector.HTMLLinkUI}});var De=function(t){this._isUpdatingLocationFromChildren=!1,this._isAdjusting=!1,this._expanded=!1,De.superClass.constructor.call(this,t)};R.Group=De,D.ext(\"twaver.Group\",R.Follower,{_image:xe.IMAGE_GROUP,_icon:xe.ICON_GROUP,isAdjustedToBottom:function(){return this.isExpanded()&&vt.hasAgentLinks(this)},onChildAdded:function(t,e){De.superClass.onChildAdded.apply(this,arguments),this.updateLocationFromChildren()},onChildRemoved:function(t,e){De.superClass.onChildRemoved.apply(this,arguments),this.updateLocationFromChildren()},updateLocationFromChildren:function(){if(!this._isAdjusting&&!D.isDeserializing){for(var t,e,i=0,n=this.getChildrenSize();i<n;i++)(e=this.getChildAt(i))instanceof Pe&&(t=W.unionRect(t,this.getChildRect(e)));t&&(this._isUpdatingLocationFromChildren=!0,\"lefttop\"===xe.GROUP_EXPAND_ALIGN?this.setLocation(t.x-this.getWidth()/2,t.y-this.getHeight()/2):this.setLocation(t.x+t.width/2-this.getWidth()/2,t.y+t.height/2-this.getHeight()/2),this._isUpdatingLocationFromChildren=!1)}},getChildRect:function(t){var e;return t instanceof Pe&&(t instanceof De?(t.isExpanded()&&t.getChildren().forEach(function(i){e=W.unionRect(e,t.getChildRect(i))}),e||(e=t.getRect())):e=t.getRect()),e},setLocation:function(){if(!this._isAdjusting){var t;if(t=2===arguments.length?{x:arguments[0],y:arguments[1]}:arguments[0],!D.isDeserializing&&!this._isUpdatingLocationFromChildren){this._isAdjusting=!0;var e=t.x-this.getX(),i=t.y-this.getY();vt.moveElements(this.getChildren(),e,i),this._isAdjusting=!1}De.superClass.setLocation.call(this,t)}},reverseExpanded:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._expanded},setExpanded:function(t){if(this._expanded!==t){var e=this._expanded;this._expanded=t,this.firePropertyChange(\"expanded\",e,this._expanded),this._checkLinkAgent()}},_checkLinkAgent:function(){De.superClass._checkLinkAgent.call(this);for(var t=this.getChildrenSize(),e=0;e<t;e++){var i=this.getChildAt(e);i instanceof Pe&&i._checkLinkAgent()}},getElementUIClass:function(){return R.network.GroupUI},getCanvasUIClass:function(){return R.canvas.GroupUI},getVectorUIClass:function(){return R.vector.GroupUI}}),R.SubNetwork=function(t){R.SubNetwork.superClass.constructor.call(this,t)},D.ext(\"twaver.SubNetwork\",R.Follower,{ISubNetwork:!0,_image:xe.IMAGE_SUBNETWORK,_icon:xe.ICON_SUBNETWORK,_checkLinkAgent:function(){R.SubNetwork.superClass._checkLinkAgent.call(this);for(var t=this.getChildrenSize(),e=0;e<t;e++){var i=this.getChildAt(e);i instanceof Pe&&i._checkLinkAgent()}}}),R.Grid=function(t){R.Grid.superClass.constructor.call(this,t)},D.ext(\"twaver.Grid\",R.Follower,{_icon:xe.ICON_GRID,_image:null,getCellObject:function(t,e){1===arguments.length&&(e=t.y,t=t.x);for(var i=this.getStyle(\"grid.row.count\"),n=this.getStyle(\"grid.column.count\"),s=0;s<i;s++)for(var o=0;o<n;o++){var r=this.getCellRect(s,o);if(W.containsPoint(r,t,e))return{rowIndex:s,columnIndex:o,rect:r}}return null},getCellRect:function(t,e){var i=this.getStyle(\"grid.row.count\"),n=this.getStyle(\"grid.column.count\");if(i<=0||n<=0)return null;if(t<0||t>=i)return null;if(e<0||e>=n)return null;var s=this.getRect();W.addPadding(s,this,\"grid.border\");var o=0,r=this.getStyle(\"grid.row.percents\"),a=this.getStyle(\"grid.column.percents\");if(r&&r.length===i){var h=0;for(o=0;o<t;o++)h+=s.height*r[o];s.y+=h,s.height=s.height*r[t]}else s.height=s.height/i,s.y+=s.height*t;if(a&&a.length===n){var l=0;for(o=0;o<e;o++)l+=s.width*a[o];s.x+=l,s.width=s.width*a[e]}else s.width=s.width/n,s.x+=s.width*e;return W.addPadding(s,this,\"grid.padding\"),s},getElementUIClass:function(){return R.network.GridUI},getCanvasUIClass:function(){return R.canvas.GridUI},getVectorUIClass:function(){return R.vector.GridUI}}),R.ShapeNode=function(t){this._isUpdatingShapeNode=!1,this._points=new oe,R.ShapeNode.superClass.constructor.call(this,t)},D.ext(\"twaver.ShapeNode\",R.Follower,{_icon:xe.ICON_SHAPENODE,__accessor:[\"segments\"],getElementUIClass:function(){return R.network.ShapeNodeUI},getCanvasUIClass:function(){return R.canvas.ShapeNodeUI},getVectorUIClass:function(){return R.vector.ShapeNodeUI},getPoints:function(){return this._points},setPoints:function(t){t||(t=new oe);var e=new oe(this._points);this._points=t,this.firePointsChange(e,this._points)},getSegments:function(){return this._segments},setSegments:function(t){t||(t=new oe);var e=new oe(this._segments);this._segments=t,this._reCalculateLineLength(),this.firePropertyChange(\"segments\",e,this._segments)},addPoint:function(t,e){var i=new oe(this._points);this._points.add(t,e),this.firePointsChange(i,this._points)},setPoint:function(t,e){var i=new oe(this._points);this._points.set(t,e),this.firePointsChange(i,this._points)},removePoint:function(t){var e=new oe(this._points);this._points.remove(t),this.firePointsChange(e,this._points)},removeAt:function(t){var e=new oe(this._points);this._points.removeAt(t),this.firePointsChange(e,this._points)},setWidth:function(t){if(t<1&&(t=1),!this._isUpdatingShapeNode&&!D.isDeserializing){this._isUpdatingShapeNode=!0;for(var e=new oe(this._points),i=0;i<this._points.size();i++){var n=this._points.get(i);n.x=(n.x-this.getX())*t/this.getWidth()+this.getX()}this.firePointsChange(e,this._points),this._isUpdatingShapeNode=!1}R.ShapeNode.superClass.setWidth.apply(this,arguments)},setHeight:function(t){if(t<1&&(t=1),!this._isUpdatingShapeNode&&!D.isDeserializing){this._isUpdatingShapeNode=!0;for(var e=new oe(this._points),i=0;i<this._points.size();i++){var n=this._points.get(i);n.y=(n.y-this.getY())*t/this.getHeight()+this.getY()}this.firePointsChange(e,this._points),this._isUpdatingShapeNode=!1}R.ShapeNode.superClass.setHeight.apply(this,arguments)},setLocation:function(){if(!this._isUpdatingShapeNode&&!D.isDeserializing){var t;if(t=2===arguments.length?{x:arguments[0],y:arguments[1]}:arguments[0],!D.num(t.x)||!D.num(t.y))return;var e=t.x-this.getX(),i=t.y-this.getY();if(0===e&&0===i)return;this._isUpdatingShapeNode=!0;for(var n=new oe(this._points),s=0;s<this._points.size();s++){var o=this._points.get(s);o.x+=e,o.y+=i}this.firePointsChange(n,this._points),this._isUpdatingShapeNode=!1}R.ShapeNode.superClass.setLocation.apply(this,arguments)},firePointsChange:function(t,e){if(!this._isUpdatingShapeNode&&!D.isDeserializing){var i=W.getRect(e);i?(this._isUpdatingShapeNode=!0,xe.CENTER_LOCATION?this.setLocation(i.x+i.width/2,i.y+i.height/2):this.setLocation(i.x,i.y),this.setWidth(i.width),this.setHeight(i.height),this._isUpdatingShapeNode=!1):(this._isUpdatingShapeNode=!0,this.setWidth(0),this.setHeight(0),this._isUpdatingShapeNode=!1)}this._reCalculateLineLength(),this.firePropertyChange(\"points\",t,e)},_reCalculateLineLength:function(){null!=this._points&&this._points.size()>0?this._lineLength=W.calculateLineLength(this._points,this._segments):this._lineLength=0},getLineLength:function(){return this._lineLength}}),R.Bus=function(t){this._styleMap={},this._styleMap[\"vector.fill\"]=!1,this._styleMap[\"shapenode.closed\"]=!1,R.Bus.superClass.constructor.call(this,t)},D.ext(\"twaver.Bus\",R.ShapeNode,{_icon:xe.ICON_BUS,firePointsChange:function(t,e){var i=e.size();if(!D.isDeserializing&&i>=2)for(var n=e.get(0),s=1;s<i;s++){var o=e.get(s);Math.abs(o.x-n.x)>Math.abs(o.y-n.y)?o.y=n.y:o.x=n.x,n=o}R.Bus.superClass.firePointsChange.apply(this,arguments)}}),R.ShapeLink=function(t,e,i){this._points=new oe,this._styleMap={},this._styleMap[\"link.bundle.enable\"]=!1,R.ShapeLink.superClass.constructor.call(this,t,e,i)},D.ext(\"twaver.ShapeLink\",R.Link,{_icon:xe.ICON_SHAPELINK,getElementUIClass:function(){return R.network.ShapeLinkUI},getCanvasUIClass:function(){return R.canvas.ShapeLinkUI},getVectorUIClass:function(){return R.vector.ShapeLinkUI},getPoints:function(){return this._points},setPoints:function(t){t||(t=new oe);var e=new oe(this._points);this._points=t,this.firePointsChange(e,this._points)},addPoint:function(t,e){var i=new oe(this._points);this._points.add(t,e),this.firePointsChange(i,this._points)},setPoint:function(t,e){var i=new oe(this._points);this._points.set(t,e),this.firePointsChange(i,this._points)},removePoint:function(t){var e=new oe(this._points);this._points.remove(t),this.firePointsChange(e,this._points)},removeAt:function(t){var e=new oe(this._points);this._points.removeAt(t),this.firePointsChange(e,this._points)},firePointsChange:function(t,e){this.firePropertyChange(\"points\",t,e)}}),R.ShapeSubNetwork=function(t){R.ShapeSubNetwork.superClass.constructor.call(this,t)},D.ext(\"twaver.ShapeSubNetwork\",R.ShapeNode,{ISubNetwork:!0,_icon:xe.ICON_SHAPESUBNETWORK,_checkLinkAgent:function(){R.ShapeSubNetwork.superClass._checkLinkAgent.call(this);for(var t=this.getChildrenSize(),e=0;e<t;e++){var i=this.getChildAt(e);i instanceof Pe&&i._checkLinkAgent()}}}),R.LinkSubNetwork=function(){R.LinkSubNetwork.superClass.constructor.apply(this,arguments)},D.ext(\"twaver.LinkSubNetwork\",R.Link,{ISubNetwork:!0,_icon:xe.ICON_LINKSUBNETWORK}),R.ShapeLinkSubNetwork=function(){R.ShapeLinkSubNetwork.superClass.constructor.apply(this,arguments)},D.ext(\"twaver.ShapeLinkSubNetwork\",R.ShapeLink,{ISubNetwork:!0,_icon:xe.ICON_LINKSUBNETWORK}),R.RotatableNode=function(t){R.RotatableNode.superClass.constructor.call(this,t)},D.ext(\"twaver.RotatableNode\",R.Follower,{getWidth:function(){return 0==this._angle?this._getOrignalWidth():this._getRotateRect().width},setWidth:function(t){},getHeight:function(){return 0==this._angle?this._getOrignalHeight():this._getRotateRect().height},setHeight:function(t){},getElementUIClass:function(){return R.network.RotatableNodeUI},getCanvasUIClass:function(){return R.canvas.RotatableNodeUI},getVectorUIClass:function(){return R.vector.RotatableNodeUI},_getRotateRect:function(){for(var t=this._getOrignalWidth(),e=this._getOrignalHeight(),i=W.createMatrix(this._angle*Math.PI/180,t/2,e/2),n=[{x:0,y:0},{x:t,y:0},{x:t,y:e},{x:0,y:e}],s=0,o=n.length;s<o;s++)n[s]=i.transform(n[s]);return W.getRect(n)},_getOrignalWidth:function(){return R.RotatableNode.superClass.getWidth.call(this)},_getOrignalHeight:function(){return R.RotatableNode.superClass.getHeight.call(this)}}),R.controls.ControlBase=function(){R.controls.ControlBase.superClass.constructor.apply(this,arguments),this._pools=new oe},D.ext(\"twaver.controls.ControlBase\",R.PropertyChangeDispatcher,{_autoAdjustBounds:!1,addPool:function(t){this._pools.contains(t)||this._pools.add(t)},removePool:function(t){this._pools.remove(t)},adjustBounds:function(t){var e=this._view.style;e.position=\"absolute\",e.left=t.x+\"px\",e.top=t.y+\"px\",e.width=t.width+\"px\",e.height=t.height+\"px\",!0===this._autoAdjustBounds&&(e.left=\"0px\",e.top=\"0px\",e.right=\"0px\",e.bottom=\"0px\"),this.invalidate&&this.invalidate()},setAutoAdjustBounds:function(t){!0===t?X.addEventListener(\"resize\",\"_handleResize\",window,this):X.removeEventListener(\"resize\",window,this),this._autoAdjustBounds=t},isAutoAdjustBounds:function(){return this._autoAdjustBounds},_handleResize:function(t){this.adjustBounds({x:0,y:0,width:z.documentElement.clientWidth,height:z.documentElement.clientHeight})},getView:function(){return this._view},invalidate:function(t){this._invalidate||(this._invalidate=!0,D.callLater(this.validate,this,null,t))},validate:function(){this._invalidate&&(this._invalidate=!1,0===this._view.offsetWidth&&0===this._view.offsetHeight&&null!==this._reinvalidateCount?(void 0===this._reinvalidateCount&&(this._reinvalidateCount=100),this._reinvalidateCount>0?this._reinvalidateCount--:this._reinvalidateCount=null,this.invalidate()):this.validateImpl())},validateImpl:function(){}}),R.controls.ViewBase=function(){R.controls.ViewBase.superClass.constructor.apply(this,arguments),this._interactionDispatcher=new R.EventDispatcher,this._viewDispatcher=new R.EventDispatcher},D.ext(\"twaver.controls.ViewBase\",R.controls.ControlBase,{__bool:[\"focusOnClick\"],_focusOnClick:xe.FOCUS_ON_CLICK,getSelectionModel:function(){return this._selectionModel?this._selectionModel:this._box.getSelectionModel()},isShareSelectionModel:function(){return null==this._selectionModel},setShareSelectionModel:function(t){var e=null==this._selectionModel;e!==t&&(t?(this._box.getSelectionModel().addSelectionChangeListener(this.handleSelectionChange,this),this._selectionModel.removeSelectionChangeListener(this.handleSelectionChange,this),this._selectionModel.dispose(),this._selectionModel=null):(this._box.getSelectionModel().removeSelectionChangeListener(this.handleSelectionChange,this),this._selectionModel=new R.SelectionModel(this._box),this._selectionModel.addSelectionChangeListener(this.handleSelectionChange,this)),this.onShareSelectionModelChanged(),this.firePropertyChange(\"shareSelectionModel\",e,t))},onShareSelectionModelChanged:function(){},removeSelection:function(){if(0===this.getSelectionModel().size())return null;var t=this.getSelectionModel().toSelection();return this._box._undoManager._enabled&&this._box._undoManager.startBatch(),t.forEach(function(t){this._box.remove(t)},this),this._box._undoManager._enabled&&this._box._undoManager.endBatch(),t},selectAll:function(){var t=new oe;return this._box.forEach(function(e){this.isVisible(e)&&t.add(e)},this),this.getSelectionModel().setSelection(t),t},isSelected:function(t){return this.getSelectionModel().contains(t)},isSelectable:function(t){return this.getSelectionModel().isSelectable(t)},getLabel:function(t){return t.getName()},getToolTip:function(t){return t.getToolTip()},getIcon:function(t){return t.getIcon()},getSelectColor:function(t){return xe.SELECT_COLOR},addViewListener:function(t,e,i){this._viewDispatcher.add(t,e,i)},removeViewListener:function(t,e){this._viewDispatcher.remove(t,e)},fireViewEvent:function(t){this._viewDispatcher.fire(t)},addInteractionListener:function(t,e,i){this._interactionDispatcher.add(t,e,i)},removeInteractionListener:function(t,e){this._interactionDispatcher.remove(t,e)},fireInteractionEvent:function(t){this._interactionDispatcher.fire(t)},invalidate:function(t){this._invalidate||(this._invalidate=!0,this.fireViewEvent({kind:\"invalidate\"}),D.callLater(this.validate,this,null,t))},validate:function(){this._invalidate&&(this._invalidate=!1,B||0!==this._view.offsetWidth||0!==this._view.offsetHeight||null===this._reinvalidateCount?(this._isValidating=!0,this.fireViewEvent({kind:\"validateStart\"}),this.validateImpl(),this.fireViewEvent({kind:\"validateEnd\"}),delete this._isValidating):(void 0===this._reinvalidateCount&&(this._reinvalidateCount=100),this._reinvalidateCount>0?this._reinvalidateCount--:this._reinvalidateCount=null,this.invalidate()))}}),R.controls.View=function(){R.controls.View.superClass.constructor.apply(this,arguments)},D.ext(\"twaver.controls.View\",R.controls.ViewBase,{_zoom:1,_maxZoom:xe.ZOOM_MAX,_minZoom:xe.ZOOM_MIN,getRootDiv:function(){return this._rootDiv},isValidEvent:function(t){return X.isValidEvent(this._view,t)},getAlarmFillColor:function(t){if(t.IElement){var e=t.getAlarmState().getHighestNewAlarmSeverity();if(e)return e.color}return null},getInnerColor:function(t){if(t.IElement){var e=t.getAlarmState().getHighestNativeAlarmSeverity();return e?e.color:t.getStyle(\"inner.color\")}return null},getOuterColor:function(t){if(t.IElement){var e=t.getAlarmState().getPropagateSeverity();return e?e.color:t.getStyle(\"outer.color\")}return null},zoomOverview:function(t){var e=Math.min(this._view.clientWidth/this._viewRect.width,this._view.clientHeight/this._viewRect.height);this.setZoom(e,t)},getLogicalPoint:function(t){return X.getLogicalPoint(this._view,t,this.getZoom(),this._rootDiv)},centerByLogicalPoint:function(t,e,i){i&&R.animate.AnimateManager.endAnimate();var n=this._view.scrollWidth-this._view.clientWidth,s=this._view.scrollHeight-this._view.clientHeight,o=(t-this._view.clientWidth/this._zoom/2)*this._zoom,r=(e-this._view.clientHeight/this._zoom/2)*this._zoom;o<0&&(o=0),r<0&&(r=0),o>n&&(o=n),r>s&&(r=s),i?R.animate.AnimateManager.start(new R.animate.AnimateScrollPosition(this._view,o,r)):(this._view.scrollLeft=o,this._view.scrollTop=r)},panByOffset:function(t,e){t*=this.getZoom(),e*=this.getZoom();var i=this._view.scrollLeft+t,n=this._view.scrollTop+e,s=this._view.scrollWidth-this._view.clientWidth,o=this._view.scrollHeight-this._view.clientHeight;i<0&&(i=0),i>s&&(i=s),n<0&&(n=0),n>o&&(n=o);var r={x:(i-this._view.scrollLeft)/this.getZoom(),y:(n-this._view.scrollTop)/this.getZoom()};return this._view.scrollLeft=i,this._view.scrollTop=n,r},getMaxZoom:function(){return this._maxZoom},setMaxZoom:function(t){if(!(t<0)){var e=this._maxZoom;this._maxZoom=t,this.firePropertyChange(\"maxZoom\",e,t),this.getZoom()>t&&this.setZoom(t)}},getMinZoom:function(){return this._minZoom},setMinZoom:function(t){if(!(t<0)){var e=this._minZoom;this._minZoom=t,this.firePropertyChange(\"minZoom\",e,t),this.getZoom()<t&&this.setZoom(t,!1)}},getZoom:function(){return this._zoom},onZoomChanged:function(t,e){},zoomIn:function(t){this.setZoom(this._zoom*xe.ZOOM_INCREMENT,t)},zoomOut:function(t){this.setZoom(this._zoom/xe.ZOOM_INCREMENT,t)},zoomReset:function(t){this.setZoom(1,t)},checkZoom:function(t){return t<this._minZoom&&(t=this._minZoom),t>this._maxZoom&&(t=this._maxZoom),t},setZoom:function(t,e){if(D.num(t)&&!(t<=0)&&(t=this.checkZoom(t))!==this._zoom)if(null==e&&(e=xe.ZOOM_ANIMATE),e)R.animate.AnimateManager.start(new R.animate.AnimateZoom(this,t));else{var i=(this._view.scrollLeft+this._view.clientWidth/2)/this._zoom,n=(this._view.scrollTop+this._view.clientHeight/2)/this._zoom,s=this._zoom;this._zoom=t,X.setZoom(this._rootDiv,t),this.firePropertyChange(\"zoom\",s,t),this.onZoomChanged(s,t),this.centerByLogicalPoint(i,n,!1)}},setTouchZoom:function(t){this.setZoom(t,!1)}}),function(){var t=function(t,e,i,n){var s=new F;s.src=n,R.Util.registerImage(t,s,e,i)};(t=function(t,e,i,n){R.Util.registerImage(t,n,e,i)})}(),U.__tree=function(t,e){t._rootVisible=!0,t._initTree=function(t){this._rootData=null,this._expandMap={},this._levelMap={}},t.validateModel=function(){this._rowDatas.clear(),this._levelMap={},this._dataRowMap={},this._currentLevel=0,this._rootData?this._rootVisible?this.isVisible(this._rootData)&&this._buildData(this._rootData):this._buildChildren(this._rootData):this._buildChildren(),delete this._currentLevel},t._buildData=function(t){this._dataRowMap[t.getId()]=this._rowDatas.size(),this._rowDatas.add(t),this._levelMap[t.getId()]=this._currentLevel,this.isExpanded(t)&&(this._currentLevel++,this._buildChildren(t),this._currentLevel--)},t._buildChildren=function(t){var e=t?t.getChildren():this._box.getRoots(),i=this.getCurrentSortFunction();i&&this.isChildrenSortable(t)?e.toList(this.isVisible,this).sort(i).forEach(function(t){this._buildData(t)},this):e.forEach(function(t){this.isVisible(t)&&this._buildData(t)},this)},t.getLevel=function(t){return this._levelMap[t.getId()]},t.getToggleImage=function(t){return t.getChildrenSize()>0?this.isExpanded(t)?this._expandIcon:this._collapseIcon:null},t.isCheckable=function(t){return this.isCheckMode()},t.isCheckMode=function(){return 1===U.__tree._checkMap[this._checkMode]},t.isChildrenSortable=function(t){return!0},t.handleDataBoxChange=function(t){\"remove\"===t.kind?delete this._expandMap[t.data.getId()]:\"clear\"===t.kind&&(this._expandMap={}),this.invalidateModel()},t.isExpanded=function(t){return 1===this._expandMap[t.getId()]},t.expand=function(t){if(!this.isExpanded(t)){for(var e=t.getParent();null!=e&&e!==this._rootData;)this._expandMap[e.getId()]=1,e=e.getParent();this._expandMap[t.getId()]=1,this.invalidateModel()}},t.collapse=function(t){this.isExpanded(t)&&(delete this._expandMap[t.getId()],this.invalidateModel())},t.expandAll=function(){this._box.forEach(function(t){this._expandMap[t.getId()]=1},this),this.invalidateModel()},t.collapseAll=function(){this._expandMap={},this.invalidateModel()},t._handleClick=function(t){if(this.isFocusOnClick()&&R.Util.setFocus(this._view),!this._isValidating){var e;if(t.target._expandData&&!t.target.ableExpand)e=t.target._expandData,this.isExpanded(e)?(this.collapse(e),this.fireInteractionEvent({kind:\"collapse\",data:e})):(this.expand(e),this.fireInteractionEvent({kind:\"expand\",data:e}));else if(t.target._selectData||t.target.parentNode._selectData){if(this._handlePressSelection(t.target._selectData||t.target.parentNode._selectData,t),this.isCheckMode()){this.getRowIndexAt(t)>=0&&this.__handleClick(t)}}else this._treeColumn?(e=this.getDataAt(t))&&(this.isCheckMode()?t.target._checkData||this.__handleClick(t):this._handlePressSelection(e,t)):this.isCheckMode()&&!t.target._checkData&&this.__handleClick(t);if(this._currentEditor&&!this._isCommitting&&(this._isCommitting=!0,this.commitEditValue(this._currentEditor._editInfo,this._currentEditor)),this.updateCurrentEditor){var i=this;setTimeout(function(){i.updateCurrentEditor(t)},0)}}},t.__handleClick=function(t){var e=this.getDataAt(t);if(e){var i=this.getRowIndexByData(e);if(this._focusedRow!==i){var n=this._rowDatas.get(this._focusedRow);this._focusedRow=i,n&&this.invalidateData(n),this.invalidateData(e)}}},t._handleDoubleClick=function(t){if(this.isFocusOnClick()&&R.Util.setFocus(this._view),!this._isValidating){var e;t.target.ableExpand&&t.target._expandData&&(e=t.target._expandData,this.isExpanded(e)?(this.collapse(e),this.fireInteractionEvent({kind:\"collapse\",data:e})):(this.expand(e),this.fireInteractionEvent({kind:\"expand\",data:e})))}},t.handleChange=function(t){if(!(this._isCommitting||this._isCanceling||this._isValidating)){var e=t.target._checkData;if(e){var i,n=this.isSelected(e),s=this.getSelectionModel();if(\"default\"===this._checkMode)n?s.removeSelection(e):s.appendSelection(e);else if(\"children\"===this._checkMode)(i=new oe(e)).addAll(e.getChildren());else if(\"descendant\"===this._checkMode)i=new oe,D.fillDescendant(e,i);else if(\"descendantAncestor\"===this._checkMode&&(i=new oe,D.fillDescendant(e,i),!n))for(var o=e.getParent();o;)i.add(o),o=o.getParent();n?s.removeSelection(i):s.appendSelection(i)}t.target._editInfo&&this.commitEditValue&&(this._isCommitting=!0,this.commitEditValue(t.target._editInfo,t.target))}},t.onLabelRendered=function(t,e,i,n,s,o){},t.onToggleImageRendered=function(t){},t._renderTree=function(t,e,i,n){var s=this._levelMap[e.getId()],o=this.getToggleImage(e),r=this.getLineType(),a=this._indent,h=this.__spanPool.get();h.style.display=\"inline-block\",h.style.position=\"relative\",h.style.verticalAlign=\"top\",h.style.margin=\"0px 1px 0px 1px\",h.style.width=(s+1)*a+\"px\",t.appendChild(h);var l=e,c=l.getParent(),d=0;if(\"dotted\"===r||\"solid\"===r){if(null==c){var u=this.getIcon(e);this._addLine(h,e,u,!0)}for(;null!==c;){var _=c.getChildren(),g=l===_.get(_.size()-1);u=this.getIcon(l);l.setClient(\"isLast\",g),0==d&&this._addLine(h,e,u,g),d++,l=c,c=c.getParent()}}if(o){var f=this.__imagePool.get();f.setAttribute(\"src\",D.getImageSrc(o)),f.style.verticalAlign=\"middle\",f._expandData=e,f.style.position=\"absolute\",f.style.right=\"0px\";var v=this;f.onload=function(){f.style.top=v.getRowHeight()/2-f.height/2+\"px\"},h.appendChild(f),this.onToggleImageRendered(f)}var m=this.isCheckable(e),p=\"disabled\"===this.getUncheckableStyle();if(m||p){this._addCheckBox(t,e,n).disabled=!m}if(u=this.getIcon(e)){var w=this.isCheckMode()||this._treeColumn?null:e;this._addIcon(t,e,u,w)}var y=this.getLabel(e);y&&((h=this.__textPool.get()).style.whiteSpace=\"nowrap\",h.style.verticalAlign=\"middle\",h.style.padding=\"1px 2px 1px 2px\",D.setText(h,y,this._treeColumn?this._treeColumn.isInnerText():this._innerText),o&&(h._expandData=e,h.ableExpand=!0),this.isCheckMode()||this._treeColumn?this._focusedRow===i&&(h.style.backgroundColor=this.getSelectColor(e)):(h._selectData=e,h.style.backgroundColor=n?this.getSelectColor(e):\"\"),this.onLabelRendered(h,e,y,i,s,n),t.appendChild(h),t.title=this.getToolTip(e))}},U.__tree._checkMap={default:1,children:1,descendant:1,descendantAncestor:1},R.Column=function(t){R.Column.superClass.constructor.call(this,t)},D.ext(\"twaver.Column\",R.Data,{IColumn:!0,__property:1,__accessor:[\"width\",\"horizontalAlign\",\"valueType\",\"propertyType\",\"propertyName\",\"editable\",\"visible\",\"sortable\",\"resizable\",\"movable\",\"sortDirection\",\"sortFunction\",\"enumInfo\"],__bool:[\"innerText\"],_innerText:xe.COLUMN_INNER_TEXT,_width:xe.COLUMN_WIDTH,_horizontalAlign:xe.COLUMN_HORIZONTAL_ALIGN,_propertyName:null,_propertyType:xe.COLUMN_PROPERTY_TYPE,_valueType:xe.COLUMN_VALUE_TYPE,_editable:xe.COLUMN_EDITABLE,_sortable:xe.COLUMN_SORTABLE,_visible:xe.COLUMN_VISIBLE,_resizable:xe.COLUMN_RESIZABLE,_movable:xe.COLUMN_MOVABLE,_sortDirection:\"asc\",_sortFunction:xe.SORT_FUNCTION,_enumInfo:null,renderCell:xe.COLUMN_RENDER_CELL,renderHeader:xe.COLUMN_RENDER_HEADER,renderEditor:xe.COLUMN_RENDER_EDITOR,setParent:function(t){throw\"parent not supported\"},getEnumInfo:function(){return\"object\"==typeof this._enumInfo?this._enumInfo:\"function\"==typeof this._enumInfo?1===arguments.length?this._enumInfo(arguments[0]):this._enumInfo():void 0}}),R.ColumnBox=function(t){R.ColumnBox.superClass.constructor.apply(this,arguments)},D.ext(\"twaver.ColumnBox\",R.DataBox,{_name:\"ColumnBox\",add:function(t,e){if(!t.IColumn)throw\"Only IColumn can be added into ColumnBox\";R.ColumnBox.superClass.add.apply(this,arguments)}}),R.Property=function(t){R.Property.superClass.constructor.call(this,t)},D.ext(\"twaver.Property\",R.Data,{IProperty:!0,__property:1,__accessor:[\"horizontalAlign\",\"valueType\",\"editable\",\"propertyType\",\"propertyName\",\"categoryName\",\"enumInfo\"],__bool:[\"innerText\"],_innerText:xe.PROPERTY_INNER_TEXT,_horizontalAlign:xe.PROPERTY_HORIZONTAL_ALIGN,_propertyName:null,_propertyType:xe.PROPERTY_PROPERTY_TYPE,_valueType:xe.PROPERTY_VALUE_TYPE,_editable:xe.PROPERTY_EDITABLE,_categoryName:xe.PROPERTY_CATEGORY_NAME,_enumInfo:null,renderName:xe.PROPERTY_RENDER_NAME,renderValue:xe.PROPERTY_RENDER_VALUE,isVisible:null,renderEditor:xe.PROPERTY_RENDER_EDITOR,setParent:function(t){throw\"parent not supported\"},setPropertyName:function(t){var e=this._propertyName;this._propertyName=t,this.firePropertyChange(\"propertyName\",e,t)},setPropertyType:function(t){var e=this._propertyType;this._propertyType=t,this.firePropertyChange(\"propertyType\",e,t)},getEnumInfo:function(){return\"object\"==typeof this._enumInfo?this._enumInfo:\"function\"==typeof this._enumInfo?1===arguments.length?this._enumInfo(arguments[0]):this._enumInfo():void 0}}),R.PropertyBox=function(t){R.PropertyBox.superClass.constructor.apply(this,arguments)},D.ext(\"twaver.PropertyBox\",R.DataBox,{_name:\"PropertyBox\",add:function(t,e){if(!t.IProperty)throw\"Only IProperty can be added into PropertyBox\";R.PropertyBox.superClass.add.apply(this,arguments)}}),R.Tab=function(t){R.Tab.superClass.constructor.call(this,t)},D.ext(\"twaver.Tab\",R.Data,{ITab:!0,__accessor:[\"view\",\"width\",\"closable\",\"resizable\",\"movable\",\"disabled\",\"visible\"],_icon:null,_width:xe.TAB_WIDTH,_closable:xe.TAB_CLOSABLE,_resizable:xe.TAB_RESIZABLE,_movable:xe.TAB_MOVABLE,_disabled:xe.TAB_DISABLED,_visible:xe.TAB_VISIBLE,setParent:function(t){throw\"parent not supported\"}}),R.TabBox=function(t){R.TabBox.superClass.constructor.apply(this,arguments),this.getSelectionModel().setSelectionMode(\"singleSelection\")},D.ext(\"twaver.TabBox\",R.DataBox,{_name:\"TabBox\",add:function(t,e){if(!t.ITab)throw\"Only ITab can be added into TabBox\";R.TabBox.superClass.add.apply(this,arguments)}}),R.controls.ListBase=function(t){R.controls.ListBase.superClass.constructor.apply(this,arguments),this._invalidate=!1,this._invalidateModel=!1,this._invalidateDisplay=!1,this._invalidateDatas=null,this._rowDatas=new oe,this._startRowIndex=0,this._endRowIndex=0,this._renderMap={},this._dataRowMap={},this.__divPool=new R.Pool(\"div\",20),this.__imagePool=new R.Pool(\"img\",20),this.__canvasPool=new R.Pool(\"canvas\",20),this.__spanPool=new R.Pool(\"span\",20),this.__textPool=new R.Pool(\"span\",20),this.__checkBoxPool=new R.Pool(\"input\",20),this.__linePool=new R.Pool(\"canvas\",20),this._pools.add(this.__divPool),this._pools.add(this.__linePool),this._pools.add(this.__imagePool),this._pools.add(this.__canvasPool),this._pools.add(this.__spanPool),this._pools.add(this.__textPool),this._pools.add(this.__checkBoxPool),this._view=X.createView(\"auto\",!0),this._rootDiv=X.createDiv(),this._dataDiv=X.createDiv(),this._dataDiv.style.width=\"1px\",this._view.appendChild(this._rootDiv),this._rootDiv.appendChild(this._dataDiv),this.setDataBox(t||new R.DataBox);var e=this;e.handleChange&&e._view.addEventListener(\"change\",function(t){e.handleChange(t)},!1),V.isTouchable?V.isMSTouchable?new R.controls.ListBaseMSTouchInteraction(this):(new R.controls.ListBaseTouchInteraction(this),new R.controls.ListBaseInteraction(this)):new R.controls.ListBaseInteraction(this)},D.ext(\"twaver.controls.ListBase\",R.controls.View,{__bool:[\"innerText\"],_innerText:xe.LISTBASE_INNER_TEXT,getDataDiv:function(){return this._dataDiv},getStartRowIndex:function(){return this._startRowIndex},getEndRowIndex:function(){return this._endRowIndex},getRowDatas:function(){return this._rowDatas},getRowIndexByData:function(t){return this._dataRowMap[t.getId()]},getRowIndexById:function(t){return this._dataRowMap[t]},getRowSize:function(){return this._rowDatas.size()},getDataBox:function(){return this._box},setDataBox:function(t){if(!t)throw\"DataBox can not be null\";if(this._box!==t){var e=this._box;e&&(e.removeDataBoxChangeListener(this.handleDataBoxChange,this),e.removeDataPropertyChangeListener(this.handlePropertyChange,this),e.removeHierarchyChangeListener(this.handleHierarchyChange,this),this._selectionModel||e.getSelectionModel().removeSelectionChangeListener(this.handleSelectionChange,this)),this._box=t,this._box.addDataBoxChangeListener(this.handleDataBoxChange,this),this._box.addDataPropertyChangeListener(this.handlePropertyChange,this),this._box.addHierarchyChangeListener(this.handleHierarchyChange,this),this._selectionModel?this._selectionModel._setDataBox(t):this._box.getSelectionModel().addSelectionChangeListener(this.handleSelectionChange,this),this.invalidateModel(),this.firePropertyChange(\"dataBox\",e,this._box)}},onPropertyChanged:function(t){\"zoom\"===t.property?this.invalidate():this.invalidateModel()},invalidateModel:function(){this._invalidateModel||(this._invalidateModel=!0,this._invalidateDisplay=!0,this._invalidateDatas=null,this.invalidate())},invalidateDisplay:function(){this._invalidateDisplay||(this._invalidateDisplay=!0,this._invalidateDatas=null,this.invalidate())},invalidateData:function(t){this._invalidateDisplay||(this._invalidateDatas||(this._invalidateDatas={}),this._invalidateDatas[t.getId()]=t,this.invalidate())},validateImpl:function(){var t=this._view.scrollLeft,e=this._view.scrollTop;this._invalidateModel&&(this._invalidateModel=!1,this.validateModel()),this._invalidateDisplay&&(this._invalidateDisplay=!1,this._renderMap={},X.release(this._dataDiv),this._dataDiv.style.height=this.getRowSize()*this._rowHeight+\"px\");var i;if(this._invalidateDatas){for(i in this._invalidateDatas){var n=this._renderMap[i];n&&(X.release(n),this._dataDiv.removeChild(n),delete this._renderMap[i])}this._invalidateDatas=null}var s=this._view.scrollTop/this._zoom,o=this._view.clientHeight/this._zoom;this._startRowIndex=Math.floor(s/this._rowHeight)-2,this._endRowIndex=Math.ceil((s+o)/this._rowHeight)+2,this._startRowIndex<0&&(this._startRowIndex=0),this._endRowIndex>this._rowDatas.size()&&(this._endRowIndex=this._rowDatas.size());for(var r=this._rowHeight-this._rowLineWidth-2+\"px\",a=this._rowLineWidth+\"px\",h=0;h<this._rowDatas.size();h++){var l=this._rowDatas.get(h);i=l.getId();var c=this._renderMap[i];if(!c){var d=(c=this.__divPool.get()).style;d.position=\"absolute\",d.whiteSpace=\"nowrap\",d.lineHeight=r,d.top=h*this._rowHeight+\"px\",d.borderStyle=\"solid\",d.borderWidth=\"0px\",d.borderBottomWidth=a,d.borderBottomColor=this._rowLineColor,d.opacity=l.getStyle?l.getStyle(\"whole.alpha\"):1,this._dataDiv.appendChild(c),this._renderMap[i]=c;var u=this.isSelected(l);this.renderData(c,l,h,u),this.onDataRendered(c,l,h,u)}}this._dataDiv.style.width=this.calculateSumWidth()+\"px\",\"0px\"===this._dataDiv.style.height&&(this._dataDiv.style.height=\"1px\"),this._pools.forEach(function(t){t.clear()}),this._view.scrollLeft!==t&&(this._view.scrollLeft=t),this._view.scrollTop!==e&&(this._view.scrollTop=e),this.adjustRowSize(),this.onValidated()},adjustRowSize:function(){var t,e,i=this._rowHeight-this._rowLineWidth+\"px\",n=Math.floor((this._view.scrollLeft+this._view.clientWidth)/this._zoom)+\"px\";for(t in this._renderMap)(e=this._renderMap[t]).style.height=i,e.style.width=n},onValidated:function(){},onDataRendered:function(t,e,i,n){},calculateSumWidth:function(){return 0},_addCheckBox:function(t,e,i){var n=this.__checkBoxPool.get();return n.keepDefault=!0,n.type=\"checkbox\",n.style.margin=\"0px 2px\",n.style.verticalAlign=\"middle\",n._checkData=e,n.checked=i,n.disabled=!1,t.appendChild(n),n},_addIcon:function(t,e,i,n){var s,o=D.getImageAsset(i),r=this.getInnerColor(e),a=this.getOuterColor(e),h=this.getAlarmFillColor(e);if(o&&o.getImage()){var l=o.getWidth(),c=o.getHeight();(s=this.__canvasPool.get()).style.verticalAlign=\"middle\",s.setAttribute(\"width\",l),s.setAttribute(\"height\",c);var d=s.getContext(\"2d\");d.clearRect(0,0,l,c);Dt(d,i,r,{x:0,y:0,width:l,height:c},e,this),a&&(d.lineWidth=2,d.strokeStyle=a,d.beginPath(),d.rect(0,0,l,c),d.closePath(),d.stroke()),h&&(d.fillStyle=Y.createRadialGradient(d,h,\"white\",1,c-9,8,8,.75,.25),d.beginPath(),d.arc(5,c-5,4,0,2*Math.PI,!0),d.closePath(),d.fill())}else(s=this.__imagePool.get()).style.verticalAlign=\"middle\",s.setAttribute(\"src\",D.getImageSrc(i));s.style.margin=\"0px 1px 0px 1px\",s._selectData=n,t.appendChild(s)},_addLine:function(t,e,i,n){var s,o,r=this.__linePool.get(),a=D.getImageAsset(i),h=this.getToggleImage(e),l=this._levelMap[e.getId()],c=this._indent,d=c,u=c;this.isCheckable(e),this.getUncheckableStyle();a&&(d=a.getWidth(),u=a.getHeight()),s=(l+2-1)*c+d,o=this.getRowHeight(),t.style.width=(l+2-1)*c+d+\"px\",t.style.height=o+u+\"px\";var _=this.getLineType(),g=this.getLineColor(),f=this.getLineAlpha(),v=this.getLineThickness(),m=this.getLineDash();D.getImageSrc(h);r.style.verticalAlign=\"top\",r.style.margin=\"0px 0px 0px 0px\",r.style.zIndex=-1,r.setAttribute(\"width\",s),r.setAttribute(\"height\",o);var p=r.getContext(\"2d\");p.lineWidth=v,p.strokeStyle=g,p.globalAlpha=f,\"dotted\"===_&&p.setLineDash(m);var w=2*(l+2);if(n){var y=(x=e).getParent();p.clearRect(0,0,s,o);null===y&&0!==e.getChildrenSize()&&this.isExpanded(e)&&(p.moveTo((l+2+1)*s/w,o/2+u/2),p.lineTo((l+2+1)*s/w,o),p.stroke());for(var A=2*l-1;A>=1;A-=2){if(x.getClient(\"isLast\")){if(x=y,y=x.getParent(),(A+1)/2!=l)continue}else y=(x=y).getParent();A==2*l-1?(p.moveTo((A+2)*s/w,0),p.lineTo((A+2)*s/w,o/2),p.stroke(),p.moveTo((A+2)*s/w,o/2),p.lineTo((A+2+1)*s/w,o/2),p.stroke(),0!==e.getChildrenSize()&&this.isExpanded(e)&&(p.moveTo((A+2+2)*s/w,o/2+u/2),p.lineTo((A+2+2)*s/w,o),p.stroke())):(p.moveTo((A+2)*s/w,0),p.lineTo((A+2)*s/w,o),p.stroke())}}else{var x;y=(x=e).getParent();p.clearRect(0,0,s,o);for(A=2*l-1;A>=1;A-=2){if(x.getClient(\"isLast\")){if(x=y,y=x.getParent(),(A+1)/2!=l)continue}else y=(x=y).getParent();p.moveTo((A+2)*s/w,0),p.lineTo((A+2)*s/w,o),p.stroke(),A==2*l-1&&(p.moveTo((A+2)*s/w,o/2),p.lineTo((A+2+1)*s/w,o/2),p.stroke(),0!==e.getChildrenSize()&&this.isExpanded(e)&&(p.moveTo((A+2+2)*s/w,o/2+u/2),p.lineTo((A+2+2)*s/w,o),p.stroke()))}}return t.appendChild(r),r},isVisible:function(t){return!!this._box.contains(t)&&(!this._visibleFunction||this._visibleFunction(t))},handleDataBoxChange:function(t){this.invalidateModel()},handlePropertyChange:function(t){\"parent\"===t.property?this.invalidateModel():this.invalidateData(t.source)},handleHierarchyChange:function(t){this.invalidateModel()},handleSelectionChange:function(t){t.datas.forEach(function(t){this.invalidateData(t)},this),this.onSelectionChanged(t)},getRowIndexAt:function(t){var e=this.getLogicalPoint(t);if(!e)return-1;var i=parseInt(e.y/this._rowHeight);return i>=0&&i<this._rowDatas.size()?i:-1},getDataAt:function(t){var e=this.getRowIndexAt(t);return e>=0?this._rowDatas.get(e):null},getCurrentSortFunction:function(){return this._sortFunction},validateModel:function(){this._rowDatas.clear(),this._dataRowMap={},this._buildChildren(this._box.getRoots()),this._rowDatas=this._rowDatas.toList(this.isVisible,this);var t=this.getCurrentSortFunction();t&&this._rowDatas.sort(t);for(var e=this._rowDatas.size(),i=0;i<e;i++)this._dataRowMap[this._rowDatas.get(i).getId()]=i},_buildChildren:function(t){t.forEach(function(t){this._rowDatas.add(t),this._buildChildren(t.getChildren())},this)},_handlePressSelection:function(t,e){var i=this.getSelectionModel();if(D.isCtrlDown(e))i.contains(t)?i.removeSelection(t):i.appendSelection(t);else if(e.shiftKey&&i.getLastData()){var n=i.getLastData(),s=this.getRowIndexByData(n),o=this.getRowIndexByData(t),r=new oe;for(r.add(this.getRowDatas().get(s));s!==o;)s+=o>s?1:-1,r.add(this.getRowDatas().get(s));i.setSelection(r)}else 1===i.size()&&i.contains(t)||i.setSelection(t);this.fireInteractionEvent({kind:2===e.detail?\"doubleClick\":\"click\",data:t})},_handleDoubleClick:function(t){var e=this.getDataAt(t);this.fireInteractionEvent({kind:2===t.detail?\"doubleClick\":\"click\",data:e})},_handleClick:function(t){this.isFocusOnClick()&&R.Util.setFocus(this._view);var e=this.getDataAt(t);if(e){if(this.isCheckMode()&&!t.target._checkData){var i=this.getRowIndexByData(e);if(this._focusedRow!==i){var n=this._rowDatas.get(this._focusedRow);this._focusedRow=i,n&&this.invalidateData(n),this.invalidateData(e)}}this.isCheckMode()||this._handlePressSelection(e,t)}if(this._currentEditor&&this.commitEditValue(this._currentEditor._editInfo,this._currentEditor),this.updateCurrentEditor){var s=this;setTimeout(function(){s.updateCurrentEditor(t)},0)}},handleChange:function(t){if(!this._isCanceling&&!this._isValidating){var e=t.target._checkData;if(e){var i=this.isSelected(e),n=this.getSelectionModel();i?n.removeSelection(e):n.appendSelection(e)}t.target._editInfo&&this.commitEditValue&&this.commitEditValue(t.target._editInfo,t.target)}},scrollToData:function(t){if(t){var e=this.getRowIndexById(t.getId());if(!(e<0)){var i=e*this._rowHeight*this._zoom,n=i+this._rowHeight*this._zoom,s=this._view.scrollTop;this._view.scrollTop>i&&(s=i),this._view.scrollTop+this._view.clientHeight<n&&(s=n-this._view.clientHeight),this._view.scrollTop!=s&&(this._view.scrollTop=s,this.invalidate())}}},makeVisible:function(t){this.isVisible(t)&&(this.expand&&this.expand(t),D.callLater(this.scrollToData,this,[t],2*xe.CALL_LATER_DELAY))},onSelectionChanged:function(t){this._makeVisibleOnSelected&&(\"append\"!==t.kind&&\"set\"!==t.kind&&\"all\"!==t.kind||(this.expand&&this.getSelectionModel().getSelection().forEach(function(t){t.getParent()&&this.expand(t.getParent())},this),D.callLater(this.scrollToData,this,[this.getSelectionModel().getLastData()],2*xe.CALL_LATER_DELAY)))},onShareSelectionModelChanged:function(){this.invalidateModel()}}),R.controls.TableBase=function(t){this._columnBox=new R.ColumnBox,this._columnBox.addDataBoxChangeListener(this.handleColumnBoxChange,this),this._columnBox.addDataPropertyChangeListener(this.handleColumnPropertyChange,this),this._columnBox.addHierarchyChangeListener(this.handleColumnHierarchyChange,this),R.controls.TableBase.superClass.constructor.apply(this,arguments),this._cellPool=new R.Pool(\"div\",20),this._stringPool=new R.Pool(\"span\",20),this._booleanPool=new R.Pool(\"input\",20),this._colorPool=new R.Pool(\"div\",20),this._pools.add(this._cellPool),this._pools.add(this._stringPool),this._pools.add(this._booleanPool),this._pools.add(this._colorPool)},D.ext(\"twaver.controls.TableBase\",R.controls.ListBase,{getColumnBox:function(){return this._columnBox},handleColumnBoxChange:function(t){this.invalidateDisplay()},handleColumnPropertyChange:function(t){t.source!==this._sortColumn||\"sortDirection\"!==t.property&&\"sortFunction\"!==t.property&&\"sortable\"!==t.property?this.invalidateDisplay():this.invalidateModel()},handleColumnHierarchyChange:function(t){this.invalidateDisplay()},renderData:function(t,e,i,n){for(var s,o=this._columnBox.getRoots(),r=o.size(),a=0,h=this._rowHeight-this._rowLineWidth+\"px\",l=0;l<r;l++){var c=o.get(l),d=c.getWidth();d<0&&(d=0);var u=Math.min(this._columnLineWidth,d);if(c.isVisible()){var _=this._cellPool.get();(s=_.style).position=\"absolute\",s.whiteSpace=\"nowrap\",s.verticalAlign=\"middle\",s.textAlign=c.getHorizontalAlign(),s.overflow=\"hidden\",s.textOverflow=\"ellipsis\",s.left=a+\"px\",s.width=d-u+\"px\",s.height=h,s.borderStyle=\"solid\",s.borderWidth=\"0px\",s.borderRightWidth=u+\"px\",s.borderRightColor=this._columnLineColor,0===l?(s.borderLeftWidth=u+\"px\",s.borderLeftColor=this._columnLineColor):s.borderLeftWidth=\"0px\",t.appendChild(_);var g={data:e,value:this.getValue(e,c),div:_,view:this,column:c,rowIndex:i,selected:n};this.renderCell(g),this.onCellRendered(g),a+=d}}(s=t.style).width=a+\"px\",s.height=h,s.backgroundColor=this.isCheckMode()&&this._focusedRow===i||!this.isCheckMode()&&n?this.getSelectColor(e):\"\"},adjustRowSize:function(){},onCellRendered:function(t){},calculateSumWidth:function(){for(var t=this._columnBox.getRoots(),e=t.size(),i=0,n=0;n<e;n++){var s=t.get(n).getWidth();s<0&&(s=0),i+=s}return i},getCurrentSortFunction:function(){var t=this._sortColumn;if(t){var e=t.getSortFunction();if(e){var i=this,n=\"asc\"===t.getSortDirection()?1:-1;return function(s,o){var r=i.getValue(s,t),a=i.getValue(o,t);return e.call(i,r,a,s,o)*n}}}return this._sortFunction},renderCell:function(t){var e=t.column;if(e.renderCell)e.renderCell(t);else{var i=t.value,n=e.getEnumInfo(t.rowIndex);n&&!Array.isArray(n)&&(i=n.map[i]),t.view.isCellEditable(t.data,e)&&(t.enumInfo=n,t.div._editInfo=t),At.render(e.getValueType(),i,t.div,t.view,e.isInnerText())}},getValue:function(t,e){return e.getValue(t,this)},setValue:function(t,e,i){e.setValue(t,i,this)},getColumnAt:function(t){var e=this.getLogicalPoint(t);if(!e)return null;for(var i=this._columnBox.getRoots(),n=0,s=i.size(),o=0;n<s;n++){var r=i.get(n),a=r.getWidth();if(a<0&&(a=0),e.x>o&&e.x<o+a)return r;o+=a}return null},isCellEditable:function(t,e){return this.isEditable()&&e.isEditable()},commitEditValue:function(t,e){if(!this._isCanceling){var i;i=\"checkbox\"===e.type?e.checked:e.value;var n=t.column,s=n.getValueType();if(\"int\"===s&&\"string\"==typeof i)i=parseInt(i);else if(\"number\"===s&&\"string\"==typeof i)i=parseFloat(i);else if(\"list.points\"===s){for(var o=i.replace(/\\]/g,\"\").replace(/\\[/g,\"\").split(\",\"),r=new R.List,a=0;a<o.length;a+=2)a+1>=o.length||r.add({x:parseInt(o[a]),y:parseInt(o[a+1])});i=r}if(this.setValue(t.data,n,i),this._currentEditor){var h=this._currentEditor.parentNode,l=this._currentEditor;delete this._currentEditor,h&&h.removeChild(l),R.Util.setFocus(this._view)}delete this._isCommitting}},cancelEditing:function(){if(this._currentEditor){this._isCanceling=!0;var t=this._currentEditor.parentNode,e=this._currentEditor;delete this._currentEditor,t&&t.removeChild(e),R.Util.setFocus(this._view),delete this._isCanceling}},renderEditor:function(t){},onEditorRendered:function(t){},getEditorValue:function(t){var e=t.column.getValueType(),i=t.value,n=\"\";if(\"list.points\"===e){var s=i._as?i._as:i;s.forEach(function(t,e){n+=e==s.length-1?\"[\"+t.x+\",\"+t.y+\"]\":\"[\"+t.x+\",\"+t.y+\"],\"})}else n=i;return n},updateCurrentEditor:function(t){var e=t.target;if(e!==this._currentEditor&&e.parentNode!==this._currentEditor){for(var i;e&&e!==this._view&&!(i=e._editInfo);)e=e.parentNode;if(i&&e===i.div){(n=this.renderEditor&&this.renderEditor(i))?(this._currentEditor=n.view,null!=i.value&&(this._currentEditor.value=this.getEditorValue(i))):i.enumInfo?this._currentEditor=X.createSelect(i.enumInfo,i.value):(this._currentEditor=z.createElement(\"input\"),null!=i.value&&(this._currentEditor.value=this.getEditorValue(i)));if(i.column&&i.column.renderEditor){var n;(n=\"function\"==typeof i.column.renderEditor?i.column.renderEditor(this,i):i.column.renderEditor)&&(this._currentEditor=n)}if(this._currentEditor){if(n&&n.onKeyDown){var s=n.onKeyDown;s&&Array.isArray(s)&&this._currentEditor.addEventListener(\"keydown\",function(t){for(var e=0;e<s.length;e++)if(s[e].combKey){var i=null;switch(s[e].combKey){case\"ctrlKey\":i=t.ctrlKey;break;case\"shiftKey\":i=t.shiftKey;break;case\"altKey\":i=t.altKey}t.keyCode===s[e].keyCode&&i&&s[e].handlerEvent&&s[e].handlerEvent(t)}else t.keyCode===s[e].keyCode&&s[e].handlerEvent&&s[e].handlerEvent(t)})}else this._currentEditor.addEventListener(\"keydown\",function(t){var e=t.target._editInfo.view;13===t.keyCode&&t.shiftKey||(13===t.keyCode?e.commitEditValue(t.target._editInfo,t.target):27===t.keyCode&&e.cancelEditing())},!1);if(this._currentEditor.addEventListener(\"blur\",function(t){var e=t.target._editInfo.view;e._isCanceling||e.commitEditValue(t.target._editInfo,t.target)},!1),this._currentEditor.keepDefault=!0,this._currentEditor._editInfo=i,!this._currentEditor.parentNode){var o=this._currentEditor.style;o.position=\"absolute\",o.margin=\"0px\",o.border=\"0px\",o.padding=\"0px\",o.left=i.div.style.left,o.top=i.div.parentNode.style.top,o.width=i.div.style.width,o.height=i.div.style.height,this._rootDiv.appendChild(this._currentEditor)}R.Util.setFocus(this._currentEditor)}}}},onColumnSorted:function(t){},getCurrentEditor:function(){return this._currentEditor}}),R.controls.List=function(t){R.controls.List.superClass.constructor.apply(this,arguments)},D.ext(\"twaver.controls.List\",R.controls.ListBase,{__accessor:[\"rowHeight\",\"indent\",\"rowLineWidth\",\"rowLineColor\",\"sortFunction\",\"visibleFunction\"],__bool:[\"makeVisibleOnSelected\",\"keyboardRemoveEnabled\",\"keyboardSelectEnabled\"],_checkMode:!1,_rowHeight:xe.LIST_ROW_HEIGHT,_indent:xe.LIST_INDENT,_rowLineWidth:xe.LIST_ROW_LINE_WIDTH,_rowLineColor:xe.LIST_ROW_LINE_COLOR,_makeVisibleOnSelected:xe.LIST_MAKE_VISIBLE_ON_SELECTED,_keyboardRemoveEnabled:xe.LIST_KEYBOARD_REMOVE_ENABLED,_keyboardSelectEnabled:xe.LIST_KEYBOARD_SELECT_ENABLED,isCheckMode:function(){return this._checkMode},setCheckMode:function(t){delete this._focusedRow;var e=this._checkMode;this._checkMode=t,this.firePropertyChange(\"checkMode\",e,t)},isCheckable:function(t){return!0===this._checkMode},renderData:function(t,e,i,n){var s;this._indent>0&&((s=this.__spanPool.get()).style.width=this._indent+\"px\",s.style.display=\"inline-block\",t.appendChild(s));this.isCheckable(e)&&this._addCheckBox(t,e,n);var o=this.getIcon(e);o&&this._addIcon(t,e,o);var r=this.getLabel(e);if(r){var a=(s=this.__textPool.get()).style;a.whiteSpace=\"nowrap\",a.verticalAlign=\"middle\",a.padding=\"1px 2px 1px 2px\",a.display=\"inline-block\",D.setText(s,r,this._innerText),this.onLabelRendered(s,e,r,i,n),t.appendChild(s)}this.isCheckMode()?t.style.backgroundColor=this._focusedRow===i?this.getSelectColor(e):\"\":t.style.backgroundColor=n?this.getSelectColor(e):\"\"},onLabelRendered:function(t,e,i,n,s){}}),R.controls.ListBaseInteraction=function(t){this.listBase=t,this.view=t._view,this.clickTimer=0,this.doubleClickInterval=300;var e=this;this.view.addEventListener(\"scroll\",function(t){e.handleScroll(t)},!1),this.view.addEventListener(\"mouseup\",function(t){e.handleMouseUp(t)},!1),this.view.addEventListener(\"keydown\",function(t){e.handleKeyDown(t)},!1)},D.ext(\"twaver.controls.ListBaseInteraction\",Object,{handleMouseUp:function(t){var e=this.listBase,i=this;t.target!==e._currentEditor&&t.target.parentNode!==e._currentEditor&&(i.clickTimer?(clearTimeout(i.clickTimer),i.clickTimer=0,e._handleDoubleClick(t)):(e._handleClick(t),i.clickTimer=setTimeout(function(){clearTimeout(i.clickTimer),i.clickTimer=0},300)))},handleKeyDown:function(t){var e=this.listBase;if(!e._currentEditor)if(D.isCtrlDown(t)&&65==t.keyCode)e.isKeyboardSelectEnabled()&&e.selectAll().size()>0&&e.fireInteractionEvent({kind:\"selectAll\"}),X.preventDefault(t);else if(46==t.keyCode)e.isKeyboardRemoveEnabled()&&e.removeSelection()&&e.fireInteractionEvent({kind:\"removeElement\"}),X.preventDefault(t);else if(e.isCheckMode()||38!==t.keyCode&&40!==t.keyCode&&37!==t.keyCode&&39!==t.keyCode)D.showVersion(t);else{var i=e.getSelectionModel().getLastData();if(i)if(38===t.keyCode||40===t.keyCode){var n=e.getRowDatas(),s=e.getRowIndexByData(i);s>=0&&(38===t.keyCode?0!==s&&(i=n.get(s-1),e.getSelectionModel().setSelection(i)):s!==n.size()-1&&(i=n.get(s+1),e.getSelectionModel().setSelection(i)))}else!e.expand||37!==t.keyCode&&39!==t.keyCode||i.hasChildren()&&(37===t.keyCode?e.collapse(i):e.expand(i));else e.getRowDatas().size()>0&&(i=e.getRowDatas().get(0),e.getSelectionModel().setSelection(i))}},handleScroll:function(t){this.listBase.invalidate()}}),R.controls.ListBaseTouchInteraction=function(t){this.listBase=t,this.view=t._view,X.addEventListener(\"touchstart\",\"handleTouchstart\",this.view,this)},D.ext(\"twaver.controls.ListBaseTouchInteraction\",Object,{handleTouchstart:function(t){X.preventDefault(t),this.startPoint=this.lastPoint=this.listBase.getLogicalPoint(t),X.addEventListener(\"touchmove\",\"handleTouchmove\",this.view,this),X.addEventListener(\"touchend\",\"handleTouchend\",this.view,this),yt.isMultiTouch(t)&&(this.distance=yt.getDistance(t),this.zoom=this.listBase._zoom)},handleTouchmove:function(t){X.preventDefault(t);var e=this.listBase.getLogicalPoint(t);if(!(W.getDistance(this.startPoint,e)<20))if(this.moved||(this.moved=!0),yt.isSingleTouch(t)){if(this.lastPoint){var i=this.lastPoint.x-e.x,n=this.lastPoint.y-e.y,s=this.listBase.panByOffset(i,n);this.listBase.invalidate(),this.lastPoint.x-=i-s.x,this.lastPoint.y-=n-s.y}}else if(this.distance){var o=yt.getDistance(t)/this.distance;this.listBase.setZoom(this.zoom*o,!1)}},handleTouchend:function(t){X.preventDefault(t),this.moved||t.target===this.listBase._currentEditor||t.target.parentNode===this.listBase._currentEditor||this.listBase._handleClick(t),delete this.startPoint,delete this.lastPoint,delete this.moved,delete this.distance,delete this.zoom,X.removeEventListener(\"touchmove\",this.view,this),X.removeEventListener(\"touchend\",this.view,this)}}),R.controls.ListBaseMSTouchInteraction=function(t){R.controls.ListBaseMSTouchInteraction.superClass.constructor.apply(this,arguments),this._pointerMap={},this._pointerIdArray=[],X.addEventListener(\"MSPointerDown\",\"handleTouchstart\",this.view,this),X.addEventListener(\"MSPointerMove\",\"handleTouchmove\",this.view,this),X.addEventListener(\"MSPointerUp\",\"handleTouchend\",this.view,this),X.addEventListener(\"MSPointerCancel\",\"handleTouchend\",this.view,this),this.superHandleMouseDown=R.controls.ListBaseMSTouchInteraction.superClass.handleMouseDown},D.ext(\"twaver.controls.ListBaseMSTouchInteraction\",R.controls.ListBaseInteraction,{handleMouseDown:function(t){},handleTouchstart:function(t){t.isPrimary&&this._pointerIdArray.length>0&&(this._pointerMap={},this._pointerIdArray=[]),this._pointerMap[t.pointerId]||null==this.listBase.getLogicalPoint(t)||(this._pointerIdArray.push(t.pointerId),this._pointerMap[t.pointerId]=t),1==this._pointerIdArray.length&&t.pointerType==t.MSPOINTER_TYPE_MOUSE&&this.superHandleMouseDown(t),1==this._pointerIdArray.length?(this._startTouchPoint=this.listBase.getLogicalPoint(t),this._startTouchTime=new Date):2==this._pointerIdArray.length&&(this._distance=this._getDistance(),this._zoom=this.listBase.getZoom())},handleTouchmove:function(t){if(null!=this._startTouchPoint&&0!=this._pointerIdArray.length&&this._pointerMap[t.pointerId]&&!(W.getDistance({x:this._pointerMap[t.pointerId].pageX,y:this._pointerMap[t.pointerId].pageY},{x:t.pageX,y:t.pageY})<=10))if(this._pointerMap[t.pointerId]=t,2==this._pointerIdArray.length){var e=this._getDistance()/this._distance;this.listBase.setZoom(this._zoom*e,!1)}else if(1==this._pointerIdArray.length&&t.pointerType!=t.MSPOINTER_TYPE_MOUSE&&this._startTouchPoint){var i=this.listBase.getLogicalPoint(t);if(null==i)return;var n=this._startTouchPoint.x-i.x,s=this._startTouchPoint.y-i.y,o=this.listBase.panByOffset(n,s);this.listBase.invalidate(),this._startTouchPoint.x-=n-o.x,this._startTouchPoint.y-=s-o.y}},handleTouchend:function(t){if(this._startTouchPoint&&1==this._pointerIdArray.length&&t.pointerType!=t.MSPOINTER_TYPE_MOUSE){var e=this.listBase.getLogicalPoint(t);if(e){(new Date).getTime()-this._startTouchTime.getTime()<=500&&W.getDistance(this._startTouchPoint,e)<=20&&this.superHandleMouseDown(t)}}this._pointerMap={},this._pointerIdArray=[]},_getDistance:function(){return W.getDistance({x:this._pointerMap[this._pointerIdArray[0]].pageX,y:this._pointerMap[this._pointerIdArray[0]].pageY},{x:this._pointerMap[this._pointerIdArray[1]].pageX,y:this._pointerMap[this._pointerIdArray[1]].pageY})}}),R.controls.Tree=function(t){this._interactionDispatcher=new R.EventDispatcher,this._initTree(t),R.controls.Tree.superClass.constructor.apply(this,arguments)},D.ext(\"twaver.controls.Tree\",R.controls.ListBase,{__tree:1,__accessor:[\"rootData\",\"sortFunction\",\"visibleFunction\",\"indent\",\"rowHeight\",\"rowLineWidth\",\"rowLineColor\",\"expandIcon\",\"collapseIcon\",\"uncheckableStyle\",\"lineType\",\"lineColor\",\"lineThickness\",\"lineAlpha\",\"lineDash\"],__bool:[\"rootVisible\",\"makeVisibleOnSelected\",\"keyboardRemoveEnabled\",\"keyboardSelectEnabled\"],_checkMode:!1,_indent:xe.TREE_INDENT,_rowHeight:xe.TREE_ROW_HEIGHT,_rowLineWidth:xe.TREE_ROW_LINE_WIDTH,_rowLineColor:xe.TREE_ROW_LINE_COLOR,_makeVisibleOnSelected:xe.TREE_MAKE_VISIBLE_ON_SELECTED,_keyboardRemoveEnabled:xe.TREE_KEYBOARD_REMOVE_ENABLED,_keyboardSelectEnabled:xe.TREE_KEYBOARD_SELECT_ENABLED,_expandIcon:xe.TREE_EXPAND_ICON,_collapseIcon:xe.TREE_COLLAPSE_ICON,_uncheckableStyle:\"none\",_lineType:xe.TREE_LINE_TYPE,_lineColor:xe.TREE_LINE_COLOR,_lineThickness:xe.TREE_LINE_THICKNESS,_lineAlpha:xe.TREE_LINE_ALPHA,_lineDash:xe.TREE_LINE_DASH,getCheckMode:function(){return this._checkMode},setCheckMode:function(t){delete this._focusedRow;var e=this._checkMode;this._checkMode=t,this.firePropertyChange(\"checkMode\",e,t)},renderData:function(t,e,i,n){this._renderTree(t,e,i,n)},getToolTip:function(t){return t.getToolTip()||t.getName()}}),R.controls.Table=function(t){this._checkColumn=new R.Column,this._checkColumn.setName(\"check\"),this._checkColumn.setEditable(!0),this._checkColumn.setWidth(40),this._checkColumn.setHorizontalAlign(\"center\"),this._checkColumn.renderCell=this.renderCheckCell;var e=this;this._checkColumn.getValue=function(t,i){return e.isSelected(t)},R.controls.Table.superClass.constructor.apply(this,arguments)},D.ext(\"twaver.controls.Table\",R.controls.TableBase,{__accessor:[\"rowHeight\",\"rowLineWidth\",\"rowLineColor\",\"columnLineWidth\",\"columnLineColor\",\"sortFunction\",\"visibleFunction\",\"sortColumn\"],__bool:[\"editable\",\"makeVisibleOnSelected\",\"keyboardRemoveEnabled\",\"keyboardSelectEnabled\"],_editable:xe.TABLE_EDITABLE,_rowHeight:xe.TABLE_ROW_HEIGHT,_rowLineWidth:xe.TABLE_ROW_LINE_WIDTH,_rowLineColor:xe.TABLE_ROW_LINE_COLOR,_columnLineWidth:xe.TABLE_COLUMN_LINE_WIDTH,_columnLineColor:xe.TABLE_COLUMN_LINE_COLOR,_makeVisibleOnSelected:xe.TABLE_MAKE_VISIBLE_ON_SELECTED,_keyboardRemoveEnabled:xe.TABLE_KEYBOARD_REMOVE_ENABLED,_keyboardSelectEnabled:xe.TABLE_KEYBOARD_SELECT_ENABLED,getCheckColumn:function(){return this._checkColumn},isCheckMode:function(){return this._columnBox.contains(this._checkColumn)},setCheckMode:function(t){t!==this.isCheckMode()&&(delete this._focusedRow,t?this._columnBox.add(this._checkColumn,0):this._columnBox.remove(this._checkColumn),this.firePropertyChange(\"checkMode\",!t,t))},renderCheckCell:function(t){var e=t.view._booleanPool.get();e.disabled=!1,e.type=\"checkbox\",e.style.margin=\"0px 2px\",e.style.verticalAlign=\"middle\",e.checked=t.selected;var i=t.div;i.appendChild(e),\"\"===i.style.textAlign&&(i.style.textAlign=\"center\"),e._checkData=t.data}}),R.controls.TableHeader=function(t){R.controls.TableHeader.superClass.constructor.apply(this,arguments),this._invalidateScroll=!1,this._invalidateDisplay=!1,this._divPool=new R.Pool(\"div\"),this._imagePool=new R.Pool(\"img\"),this._textPool=new R.Pool(\"span\"),this._resizePool=new R.Pool(\"div\"),this._pools.add(this._divPool),this._pools.add(this._imagePool),this._pools.add(this._textPool),this._pools.add(this._resizePool),this._table=t,this._tableView=t.getView(),this._columnBox=t.getColumnBox(),this._columnBox.addDataBoxChangeListener(this.handleColumnBoxChange,this),this._columnBox.addDataPropertyChangeListener(this.handleColumnPropertyChange,this),this._columnBox.addHierarchyChangeListener(this.handleColumnHierarchyChange,this);var e=this;t.getView().addEventListener(\"scroll\",function(t){e.invalidateScroll()},!1),t.addPropertyChangeListener(function(t){e.invalidateDisplay()},this),this._view=X.createView(\"hidden\"),this._view.tabIndex=-1,this._view.style.background=xe.TABLEHEADER_BACKGROUND,this._rootDiv=X.createDiv(),this._view.appendChild(this._rootDiv),this.invalidateDisplay(),V.isTouchable&&new R.controls.TableHeaderTouchInteraction(this),new R.controls.TableHeaderInteraction(this)},D.ext(\"twaver.controls.TableHeader\",R.controls.ControlBase,{__accessor:[\"height\",\"moveBackground\",\"insertBackground\",\"columnLineColor\",\"resizeTolerance\",\"sortDescIcon\",\"sortAscIcon\",\"sortIconPosition\"],_height:xe.TABLEHEADER_HEIGHT,_moveBackground:xe.TABLEHEADER_MOVE_BACKGROUND,_insertBackground:xe.TABLEHEADER_INSERT_BACKGROUND,_columnLineColor:xe.TABLEHEADER_COLUMN_LINE_COLOR,_resizeTolerance:xe.TABLEHEADER_RESIZE_TOLERANCE,_sortDescIcon:xe.TABLEHEADER_SORT_DESC_ICON,_sortAscIcon:xe.TABLEHEADER_SORT_ASC_ICON,_sortIconPosition:xe.TABLEHEADER_SORT_ICON_POSITION,getRootDiv:function(){return this._rootDiv},handleColumnBoxChange:function(t){this.invalidateDisplay()},handleColumnPropertyChange:function(t){this.invalidateDisplay()},handleColumnHierarchyChange:function(t){this.invalidateDisplay()},onPropertyChanged:function(t){this.invalidateDisplay()},invalidateScroll:function(){this._invalidateScroll||(this._invalidateScroll=!0,this.invalidate())},invalidateDisplay:function(){this._invalidateDisplay||(this._invalidateDisplay=!0,this._invalidateScroll=!0,this.invalidate())},validate:function(){this._invalidate&&(this._invalidate=!1,this._invalidateDisplay&&(this._invalidateDisplay=!1,this.validateDisplay()),this._invalidateScroll&&(this._invalidateScroll=!1,this._rootDiv.style.left=-this._tableView.scrollLeft+\"px\"))},validateDisplay:function(){X.release(this._rootDiv);for(var t=this._table.getZoom(),e=this.getHeight()+\"px\",i=this.getHeight()-2+\"px\",n=this._table.getColumnBox().getRoots(),s=n.size(),o=0,r=this._table._columnLineWidth*t,a=0;a<s;a++){var h=n.get(a);if(h.isVisible()){var l=h.getWidth()*t;l<0&&(l=0);var c=Math.min(r,l),d=this._divPool.get();d._column=h;var u=d.style;u.position=\"absolute\",u.whiteSpace=\"nowrap\",u.lineHeight=i,u.overflow=\"hidden\",u.textOverflow=\"ellipsis\",u.backgroundPosition=this._sortIconPosition?this._sortIconPosition:\"\",u.backgroundRepeat=\"no-repeat\",u.backgroundImage=\"\",u.textAlign=h.getHorizontalAlign(),u.borderStyle=\"solid\",u.borderWidth=\"0px\",u.borderRightWidth=c+\"px\",u.borderRightColor=this._columnLineColor,0===a?(u.borderLeftWidth=c+\"px\",u.borderLeftColor=this._columnLineColor):u.borderLeftWidth=\"0px\",u.left=o+\"px\",u.width=l-c+\"px\",u.height=e,d._x=o,d._width=l-c,this._rootDiv.insertBefore(d,this._rootDiv.firstChild),this.renderColumn(d,h),this.onColumnRendered(d,h),o+=l,h.isResizable()&&((d=this._resizePool.get())._resizeColumn=h,(u=d.style).position=\"absolute\",u.backgroundColor=\"white\",u.opacity=0,u.left=o-c-this._resizeTolerance+\"px\",u.width=c+2*this._resizeTolerance+\"px\",u.height=e,this._rootDiv.appendChild(d))}}this._pools.forEach(function(t){t.clear()}),this._rootDiv.style.width=o+\"px\",this._rootDiv.style.height=e},renderColumn:function(t,e){if(e.renderHeader)e.renderHeader(t);else{var i=this._textPool.get();if(i.style.whiteSpace=\"nowrap\",i.style.verticalAlign=\"middle\",i.style.padding=\"1px 2px 1px 2px\",i.innerHTML=e.getName()?e.getName():e.getPropertyName(),i.setAttribute(\"title\",i.innerHTML),t.appendChild(i),V.isOpera){var n=t.cloneNode(!1);n.style.left=\"0px\",n.style.top=\"0px\",n.style.opacity=0,t.appendChild(n)}}if(this._table.getSortColumn()===e&&e.isSortable()){var s=\"asc\"===e.getSortDirection()?this._sortAscIcon:this._sortDescIcon,o=D.getImageSrc(s);if(this._sortIconPosition&&\"\"!==this._sortIconPosition)t.style.backgroundImage=\"url(\"+o+\")\";else{var r=this._imagePool.get();r.setAttribute(\"src\",o),r.style.verticalAlign=\"middle\",t.appendChild(r)}}},onColumnRendered:function(t,e){}}),R.controls.TableHeaderInteraction=function(t){this.header=t,this.table=t._table,this.view=t._view;var e=this;this.view.addEventListener(\"mousedown\",function(t){e.handleMouseDown(t)},!1),this.view.addEventListener(\"mousemove\",function(t){e.handleMouseMove(t)},!1)},D.ext(\"twaver.controls.TableHeaderInteraction\",Object,{handleMouseDown:function(t){0===t.button&&(this.movableDiv?this.handleMouseUp(t):(this.resizeColumn=t.target._resizeColumn,this.resizeColumn||(this.movableDiv=this.getMovableDivAt(t)),this.changeCursor(t),this._startClient=X.getClientPoint(t),this.lastX=this.getX(t),this._startLogicalX=this.lastX,X.handle_mousedown(this,t)))},changeCursor:function(t){var e=\"\";if(t.target._resizeColumn)e=\"ew-resize\";else{var i=this.getColumnAt(t);i&&(i.isMovable()||i.isSortable())&&(e=\"pointer\")}this.view.style.cursor=e},handleMouseMove:function(t){if(null!=this.lastX){if(X.target===this){var e=this._startLogicalX+t.clientX-this._startClient.x;if(this.resizeColumn){if(null!=this.stopX){if(e<this.stopX)return;delete this.stopX}var i=this.resizeColumn.getWidth()+(e-this.lastX)/this.table.getZoom();i<10&&(i=10,this.stopX=e),this.resizeColumn.setWidth(i),this.lastX=e}else if(this.movableDiv){var n=e-this.lastX;if(!this.cloneDiv){if(Math.abs(n)<3)return;this.cloneDiv=this.movableDiv.cloneNode(!0),this.cloneDiv._x=this.movableDiv._x,this.cloneDiv.style.background=this.header.getMoveBackground(),this.insertDiv=X.createDiv(),this.insertDiv.style.width=\"1px\",this.insertDiv.style.height=this.cloneDiv.style.height,this.insertDiv.style.background=this.header.getInsertBackground(),this.movableDiv.parentNode.appendChild(this.cloneDiv),this.movableDiv.parentNode.appendChild(this.insertDiv)}var s=this.cloneDiv._x+n;this.cloneDiv.style.left=s+\"px\",this.cloneDiv._x=s,this.lastX=e,this.columnInfo=this.getColumnInfoAt(t),this.columnInfo&&(this.insertDiv.style.left=this.columnInfo.position)}}}else this.changeCursor(t)},handleMouseUp:function(t){if(0===t.button){var e;if(this.resizeColumn);else if(this.movableDiv&&this.columnInfo){e=this.movableDiv._column;var i=this.columnInfo.index;this.table.getColumnBox().moveTo(e,i)}else if((e=this.getColumnAt(t))&&e.isSortable()){var n=e.getSortDirection();this.table.getSortColumn()===e?(\"desc\"===n&&this.table.setSortColumn(null),e.setSortDirection(\"asc\"===n?\"desc\":\"asc\")):this.table.setSortColumn(e),this.table.onColumnSorted(this.table.getSortColumn())}this.clear()}},clear:function(){this.view.style.cursor=\"\",this.cloneDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.cloneDiv),this.insertDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.insertDiv),delete this.movableDiv,delete this.columnInfo,delete this.insertDiv,delete this.cloneDiv,delete this.resizeColumn,delete this.stopX,delete this.lastX,delete this._startClient,delete this._startLogicalX},getColumnAt:function(t){t=t.target;for(var e;t&&t!==this.view&&!(e=t._column);)t=t.parentNode;return e},getMovableDivAt:function(t){t=t.target;for(var e;t&&t!==this.view&&!(e=t._column);)t=t.parentNode;return e&&e.isMovable()?t:null},getX:function(t){var e=X.getLogicalPoint(this.view,t);return e?e.x:null},getColumnInfoAt:function(t){for(var e=this._startLogicalX+t.clientX-this._startClient.x+this.table.getView().scrollLeft,i=this.table.getColumnBox().getRoots(),n=i.size(),s=this.table.getZoom(),o=0,r=!1,a=0;a<n;a++){var h=i.get(a);if(h===this.movableDiv._column&&(r=!0),h.isVisible()){var l=h.getWidth()*s;if(l<=0)continue;if(e>=o&&e<=o+l){var c=e<o+l/2;!r||h===this.movableDiv._column&&c||a--;var d=c?Math.max(0,a):Math.min(a+1,n),u=c?o:o+l;return u=Math.max(0,u-1),{index:d,column:h,position:u+\"px\"}}o+=l}}return this.columnInfo}}),R.controls.TableHeaderTouchInteraction=function(t){this.header=t,this.table=t._table,this.view=t._view,X.addEventListener(\"touchstart\",\"handleTouchstart\",this.view,this)},D.ext(\"twaver.controls.TableHeaderTouchInteraction\",Object,{handleTouchstart:function(t){X.preventDefault(t),this.movableDiv?this.handleTouchend(t):(this.resizeColumn=t.target._resizeColumn,this.resizeColumn||(this.movableDiv=this.getMovableDivAt(t)),this.lastX=this.getX(t),X.addEventListener(\"touchmove\",\"handleTouchmove\",this.view,this),X.addEventListener(\"touchend\",\"handleTouchend\",this.view,this))},handleTouchmove:function(t){if(X.preventDefault(t),null!=this.lastX){var e;if(this.resizeColumn){if(e=this.getX(t),null!=this.stopX){if(e<this.stopX)return;delete this.stopX}var i=this.resizeColumn.getWidth()+(e-this.lastX)/this.table.getZoom();i<0&&(i=0,this.stopX=e),this.resizeColumn.setWidth(i),this.lastX=e}else if(this.movableDiv){var n=(e=this.getX(t))-this.lastX;if(!this.cloneDiv){if(Math.abs(n)<3)return;this.cloneDiv=this.movableDiv.cloneNode(!0),this.cloneDiv._x=this.movableDiv._x,this.cloneDiv.style.background=this.header.getMoveBackground(),this.insertDiv=X.createDiv(),this.insertDiv.style.width=\"1px\",this.insertDiv.style.height=this.cloneDiv.style.height,this.insertDiv.style.background=this.header.getInsertBackground(),this.movableDiv.parentNode.appendChild(this.cloneDiv),this.movableDiv.parentNode.appendChild(this.insertDiv)}var s=this.cloneDiv._x+n;this.cloneDiv.style.left=s+\"px\",this.cloneDiv._x=s,this.lastX=e,this.columnInfo=this.getColumnInfoAt(t),this.columnInfo&&(this.insertDiv.style.left=this.columnInfo.position)}}},handleTouchend:function(t){X.preventDefault(t);var e;if(this.resizeColumn);else if(this.movableDiv&&this.columnInfo){e=this.movableDiv._column;var i=this.columnInfo.index;this.table.getColumnBox().moveTo(e,i)}else if((e=this.getColumnAt(t))&&e.isSortable()){var n=e.getSortDirection();this.table.getSortColumn()===e?(\"desc\"===n&&this.table.setSortColumn(null),e.setSortDirection(\"asc\"===n?\"desc\":\"asc\")):this.table.setSortColumn(e)}this.clear(),X.removeEventListener(\"touchmove\",this.view,this),X.removeEventListener(\"touchend\",this.view,this)},clear:function(){this.cloneDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.cloneDiv),this.insertDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.insertDiv),delete this.movableDiv,delete this.columnInfo,delete this.insertDiv,delete this.cloneDiv,delete this.resizeColumn,delete this.stopX,delete this.lastX},getColumnAt:function(t){t=t.target;for(var e;t&&t!==this.view&&!(e=t._column);)t=t.parentNode;return e},getMovableDivAt:function(t){t=t.target;for(var e;t&&t!==this.view&&!(e=t._column);)t=t.parentNode;return e&&e.isMovable()?t:null},getX:function(t){var e=X.getLogicalPoint(this.view,t);return e?e.x:null},getColumnInfoAt:function(t){for(var e=this.getX(t)+this.table.getView().scrollLeft,i=this.table.getColumnBox().getRoots(),n=i.size(),s=this.table.getZoom(),o=0,r=!1,a=0;a<n;a++){var h=i.get(a);if(h===this.movableDiv._column&&(r=!0),h.isVisible()){var l=h.getWidth()*s;if(l<=0)continue;if(e>=o&&e<=o+l){var c=e<o+l/2;!r||h===this.movableDiv._column&&c||a--;var d=c?Math.max(0,a):Math.min(a+1,n),u=c?o:o+l;return u=Math.max(0,u-1),{index:d,column:h,position:u+\"px\"}}o+=l}}return this.columnInfo}}),R.controls.TablePane=function(t,e){R.controls.TablePane.superClass.constructor.apply(this,arguments),this.invalidate(),this._table=t,this._tableHeader=e||new R.controls.TableHeader(t),this._view=X.createView(\"hidden\",!0),this._view.tabIndex=-1,this._view.appendChild(this._tableHeader.getView()),this._view.appendChild(this._table.getView());var i=this;this._tableHeader.addPropertyChangeListener(function(t){\"height\"===t.property&&i.invalidate()})},D.ext(\"twaver.controls.TablePane\",R.controls.ControlBase,{onPropertyChanged:function(t){this.invalidate()},getTable:function(){return this._table},getTableHeader:function(){return this._tableHeader},validateImpl:function(){var t=this._view.offsetWidth,e=this._view.offsetHeight,i=this._tableHeader.getHeight();this._tableHeader.adjustBounds({x:0,y:0,width:t,height:i}),this._table.adjustBounds({x:0,y:i,width:t,height:Math.max(0,e-i)})}}),R.controls.TreeTable=function(t){this._treeColumn=new R.Column,this._treeColumn.setName(\"tree\"),this._treeColumn.setWidth(120),this._treeColumn.renderCell=this.renderTreeCell,this._treeColumn.getValue=this.getTreeValue,this._treeColumn.setValue=this.setTreeValue,this._initTree(t),R.controls.TreeTable.superClass.constructor.apply(this,arguments),this._columnBox.add(this._treeColumn)},D.ext(\"twaver.controls.TreeTable\",R.controls.TableBase,{__tree:1,__accessor:[\"sortFunction\",\"visibleFunction\",\"checkMode\",\"rootData\",\"sortColumn\",\"indent\",\"rowHeight\",\"rowLineWidth\",\"rowLineColor\",\"columnLineWidth\",\"columnLineColor\",\"expandIcon\",\"collapseIcon\",\"uncheckableStyle\",\"lineType\",\"lineColor\",\"lineThickness\",\"lineAlpha\",\"lineDash\"],__bool:[\"editable\",\"rootVisible\",\"makeVisibleOnSelected\",\"keyboardRemoveEnabled\",\"keyboardSelectEnabled\"],_editable:xe.TREETABLE_EDITABLE,_indent:xe.TREETABLE_INDENT,_rowHeight:xe.TREETABLE_ROW_HEIGHT,_rowLineWidth:xe.TREETABLE_ROW_LINE_WIDTH,_rowLineColor:xe.TREETABLE_ROW_LINE_COLOR,_columnLineWidth:xe.TREETABLE_COLUMN_LINE_WIDTH,_columnLineColor:xe.TREETABLE_COLUMN_LINE_COLOR,_makeVisibleOnSelected:xe.TREETABLE_MAKE_VISIBLE_ON_SELECTED,_keyboardRemoveEnabled:xe.TREETABLE_KEYBOARD_REMOVE_ENABLED,_keyboardSelectEnabled:xe.TREETABLE_KEYBOARD_SELECT_ENABLED,_expandIcon:xe.TREETABLE_EXPAND_ICON,_collapseIcon:xe.TREETABLE_COLLAPSE_ICON,_lineType:xe.TREE_LINE_TYPE,_lineColor:xe.TREE_LINE_COLOR,_lineThickness:xe.TREE_LINE_THICKNESS,_lineAlpha:xe.TREE_LINE_ALPHA,_lineDash:xe.TREE_LINE_DASH,getTreeColumn:function(){return this._treeColumn},renderTreeCell:function(t){t.view._renderTree(t.div,t.data,t.rowIndex,t.selected)},getTreeValue:function(t,e){return e.getLabel(t)},setTreeValue:function(t,e,i){t.setName(e)}}),R.controls.PropertySheet=function(t){R.controls.PropertySheet.superClass.constructor.apply(this,arguments),this._currentRowIndex=-1,this._currentEditor=null,this._currentData=null,this._invalidate=!1,this._resizeDiv=X.createDiv(),this._resizeDiv.style.backgroundColor=\"white\",this._resizeDiv.style.opacity=0,this._resizeDiv.style.top=\"0px\",this._categoryList=new oe,this._categoryMap={},this._rowList=new oe,this._propertyBox=new R.PropertyBox,this._propertyBox.addDataBoxChangeListener(this.invalidatePropertyBox,this),this._propertyBox.addDataPropertyChangeListener(this.invalidatePropertyBox,this),this._propertyBox.addHierarchyChangeListener(this.invalidatePropertyBox,this),this.__divPool=new R.Pool(\"div\",2),this.__cellPool=new R.Pool(\"div\",2),this.__imagePool=new R.Pool(\"img\",2),this.__textPool=new R.Pool(\"span\",2),this._stringPool=new R.Pool(\"span\",2),this._booleanPool=new R.Pool(\"input\",2),this._colorPool=new R.Pool(\"div\",2),this._pools.add(this.__divPool),this._pools.add(this.__cellPool),this._pools.add(this.__imagePool),this._pools.add(this.__textPool),this._pools.add(this._stringPool),this._pools.add(this._booleanPool),this._pools.add(this._colorPool),this._view=X.createView(\"auto\"),this._rootDiv=X.createDiv(),this._dataDiv=X.createDiv(),this._view.appendChild(this._rootDiv),this._rootDiv.appendChild(this._dataDiv),this.setDataBox(t||new R.DataBox);var e=this;this._view.addEventListener(\"change\",function(t){e.handleChange(t)},!1),V.isTouchable?V.isMSTouchable?new R.controls.PropertySheetMSTouchInteraction(this):(new R.controls.PropertySheetTouchInteraction(this),new R.controls.PropertySheetInteraction(this)):new R.controls.PropertySheetInteraction(this)},D.ext(\"twaver.controls.PropertySheet\",R.controls.View,{__accessor:[\"indent\",\"rowHeight\",\"sumWidth\",\"propertyNameWidth\",\"propertyNameHorizontalAlign\",\"autoAdjustable\",\"rowLineWidth\",\"columnLineWidth\",\"borderColor\",\"categorizable\",\"resizeTolerance\",\"editable\",\"selectColor\",\"expandIcon\",\"collapseIcon\",\"sortFunction\",\"visibleFunction\"],_autoAdjustable:xe.PROPERTYSHEET_AUTO_ADJUSTABLE,_selectColor:xe.SELECT_COLOR,_categorizable:xe.PROPERTYSHEET_CATEGORIZABLE,_editable:xe.PROPERTYSHEET_EDITABLE,_propertyNameWidth:xe.PROPERTYSHEET_PROPERTY_NAME_WIDTH,_propertyNameHorizontalAlign:xe.PROPERTYSHEET_PROPERTY_NAME_HORIZONTAL_ALIGN,_sumWidth:xe.PROPERTYSHEET_SUM_WIDTH,_indent:xe.PROPERTYSHEET_INDENT,_rowHeight:xe.PROPERTYSHEET_ROW_HEIGHT,_rowLineWidth:xe.PROPERTYSHEET_ROW_LINE_WIDTH,_columnLineWidth:xe.PROPERTYSHEET_COLUMN_LINE_WIDTH,_borderColor:xe.PROPERTYSHEET_BORDER_COLOR,_expandIcon:xe.PROPERTYSHEET_EXPAND_ICON,_collapseIcon:xe.PROPERTYSHEET_COLLAPSE_ICON,_resizeTolerance:xe.PROPERTYSHEET_RESIZE_TOLERANCE,getPropertyBox:function(){return this._propertyBox},getCurrentData:function(){return this._currentData},getDataDiv:function(){return this._dataDiv},getDataBox:function(){return this._box},setDataBox:function(t){if(!t)throw\"DataBox can not be null\";if(this._box!==t){var e=this._box;e&&(e.removeDataPropertyChangeListener(this.handlePropertyChange,this),this._selectionModel||e.getSelectionModel().removeSelectionChangeListener(this.handleSelectionChange,this)),this._box=t,this._box.addDataPropertyChangeListener(this.handlePropertyChange,this),this._selectionModel?this._selectionModel._setDataBox(t):this._box.getSelectionModel().addSelectionChangeListener(this.handleSelectionChange,this),this.invalidate(),this.firePropertyChange(\"dataBox\",e,this._box)}},invalidatePropertyBox:function(){this._isValidating||this.invalidate()},onPropertyChanged:function(t){\"zoom\"!==t.property&&this.invalidate()},isVisible:function(t){return!(t.isVisible&&!t.isVisible(this._currentData,this))&&(!this._visibleFunction||this._visibleFunction(t))},handlePropertyChange:function(t){this._currentData===t.source&&this.invalidate()},handleSelectionChange:function(t){this._currentData!==this.getSelectionModel().getLastData()&&(this._currentRowIndex=-1,this.invalidate())},isExpanded:function(t){if(!t)return!0;var e=this._categoryMap[t];return e?e.isExpanded:xe.PROPERTYSHEET_EXPAND_CATEGORY},expand:function(t){if(t){var e=this._categoryMap[t];e&&!e.isExpanded&&(e.isExpanded=!0,this.invalidate())}},expandAll:function(){for(var t in this._categoryMap){var e=this._categoryMap[t];e&&(e.isExpanded=!0)}this.invalidate()},collapse:function(t){if(t){var e=this._categoryMap[t];e&&e.isExpanded&&(e.isExpanded=!1,this.invalidate())}},collapseAll:function(){for(var t in this._categoryMap){var e=this._categoryMap[t];e&&(e.isExpanded=!1)}this.invalidate()},getCategoryName:function(t){if(!this.isCategorizable())return\"null\";var e=t.getCategoryName();return e||\"null\"},validateModel:function(){this._rowList.clear(),this._categoryList.clear();var t,e,i,n,s,o={},r=new oe,a=this._currentData?this._propertyBox.getRoots():new oe;for(n=a.size(),t=0;t<n;t++)s=a.get(t),this.isVisible(s)&&(r.add(s),o[i=this.getCategoryName(s)]||(this._categoryList.add(i),o[i]={isExpanded:this.isExpanded(i),properties:new oe}));for(this._sortFunction&&r.sort(this._sortFunction),this._categoryMap=o,n=r.size(),t=0;t<this._categoryList.size();t++){\"null\"!==(i=this._categoryList.get(t))&&this._rowList.add(i);var h=o[i];if(h.isExpanded)for(e=0;e<n;e++)s=r.get(e),this.getCategoryName(s)===i&&(h.properties.add(s),this._rowList.add({view:this,data:this._currentData,property:s,value:this._currentData?this.getValue(this._currentData,s):null}))}},adjustWidth:function(){var t=this._view.offsetWidth,e=this._view.offsetHeight;t<=this._indent||e<=0||(t-=this._indent,this._rowList.size()*this._rowHeight>e&&(t-=xe.SCROLL_BAR_WIDTH)<=0||(0===this._sumWidth||this._propertyNameWidth>this._sumWidth?this._propertyNameWidth=t/2:this._propertyNameWidth=t*(this._propertyNameWidth/this._sumWidth),this._sumWidth=t,this._view.style.overflowX=\"hidden\",this._view.style.overflowY=\"auto\"))},validateDisplay:function(){var t=this._rowList.size(),e=this._borderColor,i=this._indent,n=this._rowHeight,s=this._propertyNameWidth,o=Math.max(0,this._sumWidth-s),r=this._rowLineWidth,a=this._columnLineWidth,h=n-r+\"px\",l=n-r-2+\"px\",c=i+\"px\",d=s-a+\"px\",u=o-a+\"px\",_=s+o+\"px\",g=r+\"px\",f=a+\"px\",v=s+\"px\",m=this._dataDiv,p=m.style;p.height=t*n+\"px\",p.width=i+s+o+\"px\";var w=this.__divPool.get();(p=w.style).position=\"absolute\",p.left=\"0px\",p.top=\"0px\",p.width=c,p.height=m.style.height,p.borderWidth=\"0px\",p.backgroundColor=e,m.appendChild(w);for(var y=0;y<t;y++){var A=this._rowList.get(y),x=y*n+\"px\",C=this.__divPool.get();if(A.rowDiv=C,p=C.style,p.position=\"absolute\",p.whiteSpace=\"nowrap\",p.overflow=\"hidden\",p.textOverflow=\"ellipsis\",p.left=c,p.top=x,p.width=_,p.height=h,p.lineHeight=l,p.borderStyle=\"solid\",p.borderWidth=\"0px\",p.borderBottomWidth=g,p.borderBottomColor=e,m.appendChild(C),\"string\"==typeof A){p.backgroundColor=e,(p=(w=this.__divPool.get()).style).position=\"absolute\",p.left=\"0px\",p.top=x,p.width=c,p.height=h,p.lineHeight=l,p.borderWidth=\"0px\",m.appendChild(w);var E=this.__imagePool.get(),T=this.isExpanded(A)?this._expandIcon:this._collapseIcon;E.setAttribute(\"src\",D.getImageSrc(T)),(p=E.style).verticalAlign=\"middle\",E._expandData=A,w.appendChild(E),this.renderCategory(C,A),this.onCategoryRendered(C,A)}else{var k=A.property,b=this.__cellPool.get();A.nameRender=b,p=b.style,this._currentRowIndex===y&&(p.backgroundColor=this.getSelectColor()),p.position=\"absolute\",p.verticalAlign=\"middle\",p.textAlign=this._propertyNameHorizontalAlign,p.overflow=\"hidden\",p.textOverflow=\"ellipsis\",p.whiteSpace=\"nowrap\",p.left=\"0px\",p.top=\"0px\",p.width=d,p.height=h,p.borderStyle=\"solid\",p.borderWidth=\"0px\",p.borderRightWidth=f,p.borderRightColor=e,C.appendChild(b),this.renderName(A),this.onNameRendered(A),b=this.__cellPool.get(),A.valueRender=b,(p=b.style).position=\"absolute\",p.verticalAlign=\"middle\",p.textAlign=k.getHorizontalAlign(),p.whiteSpace=\"nowrap\",p.overflow=\"hidden\",p.textOverflow=\"ellipsis\",p.left=v,p.top=\"0px\",p.width=u,p.height=h,p.borderStyle=\"solid\",p.borderWidth=\"0px\",p.borderRightWidth=f,p.borderRightColor=e,C.appendChild(b),this.renderValue(A),this.onValueRendered(A)}}(p=this._resizeDiv.style).left=i+s-a-this._resizeTolerance+\"px\",p.width=a+2*this._resizeTolerance+\"px\",p.height=m.style.height,m.appendChild(this._resizeDiv)},renderCategory:function(t,e){var i=this.__textPool.get(),n=i.style;n.fontWeight=\"bold\",n.whiteSpace=\"nowrap\",n.overflow=\"hidden\",n.textOverflow=\"ellipsis\",n.verticalAlign=\"middle\",n.padding=\"1px 2px 1px 2px\",i.innerHTML=e,i.setAttribute(\"title\",e),t.appendChild(i)},onCategoryRendered:function(t,e){},renderName:function(t){if(t.property.renderName)t.property.renderName(t);else{var e=this.__textPool.get(),i=e.style;i.fontWeight=\"\",i.whiteSpace=\"nowrap\",i.verticalAlign=\"middle\",i.padding=\"1px 2px 1px 2px\";var n=t.property.getName();n||(n=t.property.getPropertyName()),e.innerHTML=n,e.setAttribute(\"title\",n),t.nameRender.appendChild(e)}},onNameRendered:function(t){},renderValue:function(t){var e=t.property;if(e.renderValue)e.renderValue(t);else{var i=t.value,n=e.getEnumInfo(this._currentData);n&&!Array.isArray(n)&&(i=n.map[i]),t.view.isCellEditable(t.data,e)&&(t.enumInfo=n,t.valueRender._editInfo=t),t.valueRender.innerHTML=\"\",At.render(e.getValueType(),i,t.valueRender,t.view,e.isInnerText())}},onValueRendered:function(t){},renderEditor:function(t){},onEditorRendered:function(t){},updateCurrentData:function(){this._currentData=this.getSelectionModel().getLastData()},validateImpl:function(){var t=this._view.scrollLeft,e=this._view.scrollTop;X.release(this._dataDiv),this.updateCurrentData(),this.validateModel(),this.isAutoAdjustable()&&this.adjustWidth(),this.validateDisplay(),this._pools.forEach(function(t){t.clear()}),this._view.scrollLeft!==t&&(this._view.scrollLeft=t),this._view.scrollTop!==e&&(this._view.scrollTop=e)},getValue:function(t,e){return t?e.getValue(t,this):null},setValue:function(t,e,i){t&&e.setValue(t,i,this)},isCellEditable:function(t,e){return!!t&&(this.isEditable()&&e.isEditable())},getRowIndexAt:function(t){var e=this.getLogicalPoint(t);if(!e)return-1;var i=parseInt(e.y/this._rowHeight);return i>=0&&i<this._rowList.size()?i:-1},handleChange:function(t){this._isCommitting||this._isCanceling||this._isValidating||t.target._editInfo&&this.commitEditValue&&this.commitEditValue(t.target._editInfo,t.target)},commitEditValue:function(t,e){var i;i=\"checkbox\"===e.type?e.checked:e.value;var n=t.property,s=n.getValueType();if(\"int\"===s&&\"string\"==typeof i)i=parseInt(i);else if(\"number\"===s&&\"string\"==typeof i)i=parseFloat(i);else if(\"array.string\"===s)i=i.split(\",\");else if(\"array.number\"===s)for(var o=0,r=(i=i.split(\",\")).length;o<r;o++)i[o]=parseFloat(i[o]);else if(\"list.points\"===s){var a=i.replace(/\\]/g,\"\").replace(/\\[/g,\"\").split(\",\"),h=new R.List;for(o=0;o<a.length;o+=2)o+1>=a.length||h.add({x:parseInt(a[o]),y:parseInt(a[o+1])});i=h}if(e._rowInfo&&(e._rowInfo.value=i,this.renderValue(e._rowInfo)),this.setValue(t.data,n,i),R.Util.setFocus(this._view),this._currentEditor){var l=this._currentEditor.parentNode;l&&l.removeChild(this._currentEditor),delete this._currentEditor}delete this._isCommitting},cancelEditing:function(){if(this._currentEditor){var t=this._currentEditor.parentNode;t&&t.removeChild(this._currentEditor),delete this._currentEditor,delete this._isCanceling}},getEditorValue:function(t){var e=t.valueRender._editInfo.property.getValueType(),i=t.valueRender._editInfo.value,n=\"\";if(\"list.points\"===e){var s=i._as?i._as:i;s.forEach(function(t,e){n+=e==s.length-1?\"[\"+t.x+\",\"+t.y+\"]\":\"[\"+t.x+\",\"+t.y+\"],\"})}else n=i;return n},updateCurrentRowIndex:function(t){var e=this._rowList.size();(t<0||t>=e)&&(t=-1);var i,n=this._currentRowIndex;if(t!==n&&(n>=0&&n<e&&(i=this._rowList.get(n)).nameRender&&(i.nameRender.style.backgroundColor=\"\"),this._currentRowIndex=t),t>=0&&(i=this._rowList.get(t)).nameRender&&(i.nameRender.style.backgroundColor=this.getSelectColor(),!this._currentEditor&&i.valueRender&&i.valueRender._editInfo)){var s=i.valueRender._editInfo;(o=this.renderEditor&&this.renderEditor(i))?(this._currentEditor=o.view,null!=s.value&&(this._currentEditor.value=this.getEditorValue(i))):s.enumInfo?this._currentEditor=X.createSelect(s.enumInfo,s.value):(this._currentEditor=z.createElement(\"input\"),null!=s.value&&(this._currentEditor.value=this.getEditorValue(i)));if(i.property&&i.property.renderEditor){var o;(o=\"function\"==typeof i.property.renderEditor?i.property.renderEditor(this,i):i.property.renderEditor)&&(this._currentEditor=o)}if(this._currentEditor){if(o&&o.onKeyDown){var r=o.onKeyDown;r&&Array.isArray(r)&&this._currentEditor.addEventListener(\"keydown\",function(t){for(var e=0;e<r.length;e++)if(r[e].combKey){var i=null;switch(r[e].combKey){case\"ctrlKey\":i=t.ctrlKey;break;case\"shiftKey\":i=t.shiftKey;break;case\"altKey\":i=t.altKey}t.keyCode===r[e].keyCode&&i&&r[e].handlerEvent&&r[e].handlerEvent(t)}else t.keyCode===r[e].keyCode&&r[e].handlerEvent&&r[e].handlerEvent(t)})}else this._currentEditor.addEventListener(\"keydown\",function(t){var e=t.target._editInfo.view;if(13!==t.keyCode||!t.shiftKey)if(13===t.keyCode){if(e._isCommitting)return;e._isCommitting=!0,e.commitEditValue(t.target._editInfo,t.target)}else 27===t.keyCode&&(e._isCanceling=!0,e.cancelEditing())},!1);if(this._currentEditor.addEventListener(\"blur\",function(t){var e=t.target._editInfo.view;e._isCommitting||e._isCanceling||(e._isCommitting=!0,e.commitEditValue(t.target._editInfo,t.target))},!1),this._currentEditor.keepDefault=!0,this._currentEditor._rowInfo=i,this._currentEditor._editInfo=s,!this._currentEditor.parentNode){var a=this._currentEditor.style;a.position=\"absolute\",a.margin=\"0px\",a.border=\"0px\",a.padding=\"0px\",a.left=this._indent+this._propertyNameWidth+\"px\",a.top=i.rowDiv.style.top,a.width=i.valueRender.style.width,a.height=i.valueRender.style.height,this._rootDiv.appendChild(this._currentEditor)}R.Util.setFocus(this._currentEditor),this.onEditorRendered&&this.onEditorRendered(i)}}}}),R.controls.PropertySheetInteraction=function(t){this.sheet=t,this.view=t._view,this.resizeDiv=t._resizeDiv;var e=this;this.view.addEventListener(\"mousedown\",function(t){0===t.button&&e.handleMouseDown(t)},!1),this.view.addEventListener(\"mousemove\",function(t){e.handleMouseMove(t)},!1)},D.ext(\"twaver.controls.PropertySheetInteraction\",Object,{minGap:10,handleMouseDown:function(t){if(t.target!==this.sheet._currentEditor&&t.target.parentNode!==this.sheet._currentEditor&&(this.sheet.isFocusOnClick()&&R.Util.setFocus(this.view),!this.sheet._isValidating))if(t.target._expandData){var e=t.target._expandData;this.sheet.isExpanded(e)?this.sheet.collapse(e):this.sheet.expand(e)}else if(t.target===this.resizeDiv)this.lastX=this.getX(t),X.handle_mousedown(this,t);else{this.sheet._currentEditor&&!this.sheet._isCommitting&&(this.sheet._isCommitting=!0,this.sheet.commitEditValue(this.sheet._currentEditor._editInfo,this.sheet._currentEditor));var i=this.sheet.getRowIndexAt(t);this.sheet.updateCurrentRowIndex(i)}},handleMouseMove:function(t){if(null!=this.lastX||X.target){if(X.target===this&&null!=this.lastX){var e=this.getX(t);if(null!=this.stopLeft){if(e<this.stopLeft)return;delete this.stopLeft}if(null!=this.stopRight){if(e>this.stopRight)return;delete this.stopRight}var i=this.sheet.getPropertyNameWidth()+(e-this.lastX);i<this.minGap?(i=this.minGap,this.stopLeft=e):i>this.sheet.getSumWidth()-this.minGap&&(i=this.sheet.getSumWidth()-this.minGap,this.stopRight=e),this.sheet.setPropertyNameWidth(i),this.lastX=e}}else this.changeCursor(t)},handleMouseUp:function(t){0===t.button&&(this.view.style.cursor=\"default\",delete this.stopLeft,delete this.stopRight,delete this.lastX)},changeCursor:function(t){this.view.style.cursor=t.target===this.resizeDiv?\"ew-resize\":\"default\"},getX:function(t){return t.clientX/this.sheet.getZoom()}}),R.controls.PropertySheetTouchInteraction=function(t){this.sheet=t,this.view=t._view,this.resizeDiv=t._resizeDiv,X.addEventListener(\"touchstart\",\"handleTouchstart\",this.view,this)},D.ext(\"twaver.controls.PropertySheetTouchInteraction\",Object,{minGap:10,handleTouchstart:function(t){X.preventDefault(t),t.target!==this.sheet._currentEditor&&t.target.parentNode!==this.sheet._currentEditor&&(this.sheet.isFocusOnClick()&&R.Util.setFocus(this.view),this.sheet._isValidating||(t.target===this.resizeDiv&&(this.lastX=this.getX(t)),this.lastPoint=this.sheet.getLogicalPoint(t),yt.isMultiTouch(t)&&(this.distance=yt.getDistance(t),this.zoom=this.sheet.getZoom()),X.addEventListener(\"touchmove\",\"handleTouchmove\",this.view,this),X.addEventListener(\"touchend\",\"handleTouchend\",this.view,this)))},handleTouchmove:function(t){if(X.preventDefault(t),this.moved||(this.moved=!0),null!=this.lastX){var e=this.getX(t);if(null!=this.stopLeft){if(e<this.stopLeft)return;delete this.stopLeft}if(null!=this.stopRight){if(e>this.stopRight)return;delete this.stopRight}var i=this.sheet.getPropertyNameWidth()+(e-this.lastX);i<this.minGap?(i=this.minGap,this.stopLeft=e):i>this.sheet.getSumWidth()-this.minGap&&(i=this.sheet.getSumWidth()-this.minGap,this.stopRight=e),this.sheet.setPropertyNameWidth(i),this.lastX=e}else if(yt.isSingleTouch(t)){if(this.lastPoint){var n=this.sheet.getLogicalPoint(t),s=this.lastPoint.x-n.x,o=this.lastPoint.y-n.y,r=this.sheet.panByOffset(s,o);this.lastPoint.x-=s-r.x,this.lastPoint.y-=o-r.y}}else if(this.distance){var a=yt.getDistance(t)/this.distance;this.sheet.setZoom(this.zoom*a,!1)}},handleTouchend:function(t){if(X.preventDefault(t),!this.moved)if(t.target._expandData){var e=t.target._expandData;this.sheet.isExpanded(e)?this.sheet.collapse(e):this.sheet.expand(e)}else if(t.target===this.resizeDiv);else{var i=this.sheet.getRowIndexAt(t);this.sheet.updateCurrentRowIndex(i)}delete this.stopLeft,delete this.stopRight,delete this.lastX,delete this.lastPoint,delete this.distance,delete this.zoom,delete this.moved,X.removeEventListener(\"touchmove\",this.view,this),X.removeEventListener(\"touchend\",this.view,this)},getX:function(t){return t.changedTouches[0].clientX}}),R.controls.PropertySheetMSTouchInteraction=function(t){this.sheet=t,this.view=t._view,this.resizeDiv=t._resizeDiv,this._pointerMap={},this._pointerIdArray=[],X.addEventListener(\"MSPointerDown\",\"handleTouchstart\",this.view,this),X.addEventListener(\"MSPointerMove\",\"handleTouchmove\",this.view,this),X.addEventListener(\"MSPointerUp\",\"handleTouchend\",this.view,this),X.addEventListener(\"MSPointerCancel\",\"handleTouchend\",this.view,this),this.superHandleMouseDown=R.controls.PropertySheetMSTouchInteraction.superClass.handleMouseDown},D.ext(\"twaver.controls.PropertySheetMSTouchInteraction\",R.controls.PropertySheetInteraction,{handleMouseDown:function(t){},handleTouchstart:function(t){t.isPrimary&&this._pointerIdArray.length>0&&(this._pointerMap={},this._pointerIdArray=[]),this._pointerMap[t.pointerId]||null==this.sheet.getLogicalPoint(t)||(this._pointerIdArray.push(t.pointerId),this._pointerMap[t.pointerId]=t),1==this._pointerIdArray.length&&t.pointerType==t.MSPOINTER_TYPE_MOUSE&&this.superHandleMouseDown(t),1==this._pointerIdArray.length?(this._startTouchPoint=this.sheet.getLogicalPoint(t),this._startTouchTime=new Date):2==this._pointerIdArray.length&&(this._distance=this._getDistance(),this._zoom=this.sheet.getZoom())},handleTouchmove:function(t){if(0!=this._pointerIdArray.length&&this._pointerMap[t.pointerId]&&!(W.getDistance({x:this._pointerMap[t.pointerId].pageX,y:this._pointerMap[t.pointerId].pageY},{x:t.pageX,y:t.pageY})<=10))if(this._pointerMap[t.pointerId]=t,2==this._pointerIdArray.length){var e=this._getDistance()/this._distance;this.sheet.setZoom(this._zoom*e,!1)}else if(1==this._pointerIdArray.length&&t.pointerType!=t.MSPOINTER_TYPE_MOUSE&&this._startTouchPoint){var i=this.sheet.getLogicalPoint(t);if(null==i)return;var n=this._startTouchPoint.x-i.x,s=this._startTouchPoint.y-i.y,o=this.sheet.panByOffset(n,s);this._startTouchPoint.x-=n-o.x,this._startTouchPoint.y-=s-o.y}},handleTouchend:function(t){if(1==this._pointerIdArray.length&&t.pointerType!=t.MSPOINTER_TYPE_MOUSE){var e=this.sheet.getLogicalPoint(t);(new Date).getTime()-this._startTouchTime.getTime()<=500&&W.getDistance(this._startTouchPoint,e)<=20&&this.superHandleMouseDown(t)}this._pointerMap={},this._pointerIdArray=[]},_getDistance:function(){return W.getDistance({x:this._pointerMap[this._pointerIdArray[0]].pageX,y:this._pointerMap[this._pointerIdArray[0]].pageY},{x:this._pointerMap[this._pointerIdArray[1]].pageX,y:this._pointerMap[this._pointerIdArray[1]].pageY})}}),R.controls.SplitPane=function(t,e,i,n){R.controls.SplitPane.superClass.constructor.apply(this,arguments),this._view=X.createView(\"hidden\",!0),this._view.tabIndex=-1,this._dividerDiv=X.createDiv(),this._dividerDiv.tabIndex=-1,this._isPercentPosition=!0,this._view.appendChild(this._dividerDiv),t&&this.setFirstView(t),e&&this.setNextView(e),i&&this.setOrientation(i),n>1&&(this._isPercentPosition=!1),null!=n&&this.setPosition(n,this._isPercentPosition),this.setDividerDraggable(!0),this.setExpandable(!1),this.invalidate(),V.isTouchable&&new R.controls.SplitPaneTouchInteraction(this),new R.controls.SplitPaneInteraction(this)},D.ext(\"twaver.controls.SplitPane\",R.controls.ControlBase,{__accessor:[\"orientation\",\"dividerWidth\",\"dividerBackground\",\"dividerOpacity\",\"maskBackground\",\"upExpandIcon\",\"downExpandIcon\",\"leftExpandIcon\",\"rightExpandIcon\"],__bool:[\"dividerDraggable\",\"expandable\"],_position:xe.SPLITPANE_POSITION,_orientation:xe.SPLITPANE_ORIENTATION,_dividerWidth:xe.SPLITPANE_DIVIDER_WIDTH,_dividerBackground:xe.SPLITPANE_DIVIDER_BACKGROUND,_dividerOpacity:xe.SPLITPANE_DIVIDER_OPACITY,_maskBackground:xe.SPLITPANE_MASK_BACKGROUND,_upExpandIcon:xe.SPLITPANE_UP_EXPAND_ICON,_downExpandIcon:xe.SPLITPANE_DOWN_EXPAND_ICON,_leftExpandIcon:xe.SPLITPANE_LEFT_EXPAND_ICON,_rightExpandIcon:xe.SPLITPANE_RIGHT_EXPAND_ICON,onPropertyChanged:function(t){this.invalidate()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(t,e){if(e&&t<0&&(t=0),t!==this._position){var i=this._position;this._position=t,this.firePropertyChange(\"position\",i,t),null==this.lastDividerLocation&&(this.lastDividerLocation=t)}},setFirstView:function(t){if(this._firstView!==t){var e=this._firstView;e&&(e.getView?this._view.removeChild(e.getView()):this._view.removeChild(e)),this._firstView=t,t&&(t.getView?this._view.insertBefore(t.getView(),this._dividerDiv):this._view.insertBefore(t,this._dividerDiv)),this.firePropertyChange(\"firstView\",e,t)}},getFirstView:function(){return this._firstView},setNextView:function(t){if(this._nextView!==t){var e=this._nextView;e&&(e.getView?this._view.removeChild(e.getView()):this._view.removeChild(e)),this._nextView=t,t&&(t.getView?this._view.insertBefore(t.getView(),this._dividerDiv):this._view.insertBefore(t,this._dividerDiv)),this.firePropertyChange(\"nextView\",e,t)}},getNextView:function(){return this._nextView},validateImpl:function(){var t,e=this._position,i=this._view.offsetWidth,n=this._view.offsetHeight,s=this._dividerWidth;if(s>=8||0===s?this._coverDiv&&(this._dividerDiv.removeChild(this._coverDiv),delete this._coverDiv):this._coverDiv||(this._coverDiv=X.createDiv(),this._coverDiv.tabIndex=-1,this._dividerDiv.appendChild(this._coverDiv)),\"horizontal\"===this._orientation){if(s>i&&(s=i),this._isPercentPosition)var o=(i-s)*e;else o=e;var r=i-s-o+1;D.setViewBounds(this._firstView,{x:0,y:0,width:o,height:n}),D.setViewBounds(this._nextView,{x:o+s,y:0,width:r,height:n}),D.setViewBounds(this._dividerDiv,{x:o,y:0,width:s,height:n}),this._dividerDiv.position=o,this._coverDiv&&D.setViewBounds(this._coverDiv,{x:s/2-4,y:0,width:8,height:n}),this._expandable&&(this._expandCvs1||((t=D.html.createDiv()).tabIndex=-1,D.setViewBounds(t,{x:0,y:0,width:s,height:11}),this._expandCvs1=D.html.createImg(D.getImageSrc(this._leftExpandIcon)),this._expandCvs1.style.left=s/2-3+\"px\",t.appendChild(this._expandCvs1),this._dividerDiv.appendChild(t)),this._expandCvs2||((t=D.html.createDiv()).tabIndex=-1,D.setViewBounds(t,{x:0,y:15,width:s,height:11}),this._expandCvs2=D.html.createImg(D.getImageSrc(this._rightExpandIcon)),this._expandCvs2.style.left=s/2-3+\"px\",t.appendChild(this._expandCvs2),this._dividerDiv.appendChild(t)))}else{if(s>n&&(s=n),this._isPercentPosition)var a=(n-s)*e;else a=e;var h=n-s-a;D.setViewBounds(this._firstView,{x:0,y:0,width:i,height:a}),D.setViewBounds(this._nextView,{x:0,y:a+s,width:i,height:h}),D.setViewBounds(this._dividerDiv,{x:0,y:a,width:i,height:s}),this._dividerDiv.position=a,this._coverDiv&&D.setViewBounds(this._coverDiv,{x:0,y:s/2-4,width:i,height:8}),this._expandable&&(this._expandCvs1||((t=D.html.createDiv()).tabIndex=-1,D.setViewBounds(t,{x:0,y:0,width:11,height:s}),this._expandCvs1=D.html.createImg(D.getImageSrc(this._upExpandIcon)),this._expandCvs1.style.top=s/2-3+\"px\",t.appendChild(this._expandCvs1),this._dividerDiv.appendChild(t)),this._expandCvs2||((t=D.html.createDiv()).tabIndex=-1,D.setViewBounds(t,{x:15,y:0,width:11,height:s}),this._expandCvs2=D.html.createImg(D.getImageSrc(this._downExpandIcon)),this._expandCvs2.style.top=s/2-3+\"px\",t.appendChild(this._expandCvs2),this._dividerDiv.appendChild(t)))}this._dividerDiv.style.background=this._dividerBackground}}),R.controls.SplitPaneInteraction=function(t){this.splitPane=t,this.view=t._view,this.dividerDiv=t._dividerDiv,this.isPercentPosition=t._isPercentPosition;var e=this;this.view.addEventListener(\"mousedown\",function(t){0===t.button&&e.handleMouseDown(t)},!1),this.view.addEventListener(\"mousemove\",function(t){e.handleMouseMove(t)},!1)},D.ext(\"twaver.controls.SplitPaneInteraction\",Object,{handleMouseDown:function(t){if(this.splitPane.isExpandable()){var e,i,n=this.splitPane._dividerWidth;if(t.target===this.splitPane._expandCvs1)return void(\"horizontal\"===this.splitPane._orientation?(n>(e=this.view.clientWidth)&&(n=e),this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(0):this.splitPane.lastDividerLocation<this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition())):(n>(i=this.view.clientHeight)&&(n=i),this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(0):this.splitPane.lastDividerLocation<this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition())));if(t.target===this.splitPane._expandCvs2)return void(\"horizontal\"===this.splitPane._orientation?(n>(e=this.view.clientWidth)&&(n=e),this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(1):this.splitPane.lastDividerLocation>this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition())):(n>(i=this.view.clientHeight)&&(n=i),this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(1):this.splitPane.lastDividerLocation>this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition())))}if(this.splitPane.isDividerDraggable())if(this.resizeDiv)this.clear(t);else if(t.target===this.dividerDiv||t.target===this.splitPane._coverDiv){this.resizeDiv=X.createDiv();var s=this.resizeDiv.style;s.left=this.dividerDiv.style.left,s.top=this.dividerDiv.style.top,s.width=this.dividerDiv.style.width,s.height=this.dividerDiv.style.height,s.opacity=this.splitPane.getDividerOpacity(),s.background=this.splitPane.getDividerBackground(),this.resizeDiv.lastPosition=\"horizontal\"===this.splitPane._orientation?t.clientX:t.clientY,this.resizeDiv.maskDiv=X.createDiv(),(s=this.resizeDiv.maskDiv.style).left=\"0px\",s.top=\"0px\",s.width=this.view.clientWidth+\"px\",s.height=this.view.clientHeight+\"px\",s.background=this.splitPane.getMaskBackground(),this.view.appendChild(this.resizeDiv.maskDiv),this.view.appendChild(this.resizeDiv),X.handle_mousedown(this,t),t.preventDefault()}},handleMouseMove:function(t){if((!this.splitPane.isExpandable()||t.target!==this.splitPane._expandCvs1&&t.target!==this.splitPane._expandCvs2)&&this.splitPane.isDividerDraggable())if(this.resizeDiv||X.target)this.resizeDiv&&X.target===this&&(\"horizontal\"===this.splitPane._orientation?this.resizeDiv.style.left=this.dividerDiv.position+t.clientX-this.resizeDiv.lastPosition+\"px\":this.resizeDiv.style.top=this.dividerDiv.position+t.clientY-this.resizeDiv.lastPosition+\"px\");else{var e=\"horizontal\"===this.splitPane._orientation?\"ew-resize\":\"ns-resize\";this.view.style.cursor=t.target===this.dividerDiv||t.target===this.splitPane._coverDiv?e:\"default\"}},handleMouseUp:function(t){(!this.splitPane.isExpandable()||t.target!==this.splitPane._expandCvs1&&t.target!==this.splitPane._expandCvs2)&&this.splitPane.isDividerDraggable()&&0===t.button&&this.clear(t)},clear:function(t){if(this.resizeDiv){var e,i=this.splitPane._dividerWidth;if(\"horizontal\"===this.splitPane._orientation){var n=this.view.clientWidth;i>n&&(i=n),e=this.dividerDiv.position+t.clientX-this.resizeDiv.lastPosition,this.isPercentPosition?this.splitPane.setPosition(e/(n-i)):this.splitPane.setPosition(e)}else{var s=this.view.clientHeight;i>s&&(i=s),e=this.dividerDiv.position+t.clientY-this.resizeDiv.lastPosition,this.isPercentPosition?this.splitPane.setPosition(e/(s-i)):this.splitPane.setPosition(e)}this.splitPane.lastDividerLocation=this.splitPane.getPosition(),this.view.removeChild(this.resizeDiv.maskDiv),this.view.removeChild(this.resizeDiv),delete this.resizeDiv}}}),R.controls.SplitPaneTouchInteraction=function(t){this.splitPane=t,this.view=t._view,this.dividerDiv=t._dividerDiv,this.isPercentPosition=t._isPercentPosition,X.addEventListener(\"touchstart\",\"handleTouchstart\",this.view,this)},D.ext(\"twaver.controls.SplitPaneTouchInteraction\",Object,{handleTouchstart:function(t){if(X.preventDefault(t),this.splitPane.isExpandable()){var e,i,n=this.splitPane._dividerWidth;if(t.target===this.splitPane._expandCvs1)return void(\"horizontal\"===this.splitPane._orientation?(n>(e=this.view.clientWidth)&&(n=e),this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(0):this.splitPane.lastDividerLocation<this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition())):(n>(i=this.view.clientHeight)&&(n=i),this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(0):this.splitPane.lastDividerLocation<this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition())));if(t.target===this.splitPane._expandCvs2)return void(\"horizontal\"===this.splitPane._orientation?(n>(e=this.view.clientWidth)&&(n=e),this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(1):this.splitPane.lastDividerLocation>this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition())):(n>(i=this.view.clientHeight)&&(n=i),this.splitPane.lastDividerLocation===this.splitPane.getPosition()?this.splitPane.setPosition(1):this.splitPane.lastDividerLocation>this.splitPane.getPosition()&&(this.splitPane.setPosition(this.splitPane.lastDividerLocation),this.splitPane.lastDividerLocation=this.splitPane.getPosition())))}if(this.resizeDiv)this.clear(t);else if(t.target===this.dividerDiv||t.target===this.splitPane._coverDiv){this.resizeDiv=X.createDiv();(o=this.resizeDiv.style).left=this.dividerDiv.style.left,o.top=this.dividerDiv.style.top,o.width=this.dividerDiv.style.width,o.height=this.dividerDiv.style.height,o.opacity=this.splitPane.getDividerOpacity(),o.background=this.splitPane.getDividerBackground();var s=t.changedTouches[0];this.resizeDiv.lastPosition=\"horizontal\"===this.splitPane._orientation?s.clientX:s.clientY,this.resizeDiv.maskDiv=X.createDiv();var o;(o=this.resizeDiv.maskDiv.style).left=\"0px\",o.top=\"0px\",o.width=this.view.clientWidth+\"px\",o.height=this.view.clientHeight+\"px\",o.background=this.splitPane.getMaskBackground(),this.view.appendChild(this.resizeDiv.maskDiv),this.view.appendChild(this.resizeDiv)}X.addEventListener(\"touchmove\",\"handleTouchmove\",this.view,this),X.addEventListener(\"touchend\",\"handleTouchend\",this.view,this)},handleTouchmove:function(t){if(X.preventDefault(t),!this.splitPane.isExpandable()||t.target!==this.splitPane._expandCvs1&&t.target!==this.splitPane._expandCvs2)if(this.resizeDiv){var e=t.changedTouches[0];\"horizontal\"===this.splitPane._orientation?this.resizeDiv.style.left=this.dividerDiv.position+e.clientX-this.resizeDiv.lastPosition+\"px\":this.resizeDiv.style.top=this.dividerDiv.position+e.clientY-this.resizeDiv.lastPosition+\"px\"}else;},handleTouchend:function(t){(!this.splitPane.isExpandable()||t.target!==this.splitPane._expandCvs1&&t.target!==this.splitPane._expandCvs2)&&(X.removeEventListener(\"touchmove\",this.view,this),X.removeEventListener(\"touchend\",this.view,this),this.clear(t))},clear:function(t){var e=t.changedTouches[0];if(this.resizeDiv){var i=this.splitPane._dividerWidth;if(\"horizontal\"===this.splitPane._orientation){var n=this.view.clientWidth;i>n&&(i=n);var s=this.dividerDiv.position+e.clientX-this.resizeDiv.lastPosition;this.isPercentPosition?this.splitPane.setPosition(s/(n-i)):this.splitPane.setPosition(s)}else{var o=this.view.clientHeight;i>o&&(i=o);s=this.dividerDiv.position+e.clientY-this.resizeDiv.lastPosition;this.isPercentPosition?this.splitPane.setPosition(s/(o-i)):this.splitPane.setPosition(s)}this.splitPane.lastDividerLocation=this.splitPane.getPosition(),this.view.removeChild(this.resizeDiv.maskDiv),this.view.removeChild(this.resizeDiv),delete this.resizeDiv}}}),R.controls.TabPane=function(){R.controls.TabPane.superClass.constructor.apply(this,arguments),this._tabBox=new R.TabBox,this._tabBox.addDataBoxChangeListener(this.handleTabChange,this),this._tabBox.addDataPropertyChangeListener(this.handleTabChange,this),this._tabBox.addHierarchyChangeListener(this.handleTabChange,this),this._tabBox.getSelectionModel().addSelectionChangeListener(this.handleTabChange,this),this._view=X.createView(\"hidden\",!0),this._tabDiv=X.createDiv(),this._tabDiv.onmousedown=X.preventDefault,this._tabDiv.onkeydown=X.preventDefault,this._contentDiv=X.createDiv(),this._view.appendChild(this._tabDiv),this._view.appendChild(this._contentDiv),this._divPool=new R.Pool(\"div\"),this._iconPool=new R.Pool(\"img\"),this._closePool=new R.Pool(\"img\"),this._textPool=new R.Pool(\"span\"),this._resizePool=new R.Pool(\"div\"),this._pools.add(this._divPool),this._pools.add(this._iconPool),this._pools.add(this._closePool),this._pools.add(this._textPool),this._pools.add(this._resizePool),this.invalidateTab(),V.isTouchable&&new R.controls.TabPaneTouchInteraction(this),new R.controls.TabPaneInteraction(this)},D.ext(\"twaver.controls.TabPane\",R.controls.ControlBase,{__accessor:[\"tabGap\",\"tabRadius\",\"tabHeight\",\"horizontalAlign\",\"tabOrientation\",\"resizeTolerance\",\"tabBackground\",\"selectBackground\",\"moveBackground\",\"insertBackground\",\"closeIcon\",\"disabledColor\"],__bool:[\"selectNextOnClose\",\"selectNextOnInVisible\"],_tabGap:xe.TABPANE_TAB_GAP,_tabRadius:xe.TABPANE_TAB_RADIUS,_tabHeight:xe.TABPANE_TAB_HEIGHT,_resizeTolerance:xe.TABPANE_RESIZE_TOLERANCE,_tabOrientation:xe.TABPANE_TAB_ORIENTATION,_tabBackground:xe.TABPANE_TAB_BACKGROUND,_disabledColor:xe.TABPANE_DISABLED_COLOR,_selectBackground:xe.TABPANE_SELECT_BACKGROUND,_moveBackground:xe.TABPANE_MOVE_BACKGROUND,_insertBackground:xe.TABPANE_INSERT_BACKGROUND,_horizontalAlign:xe.TABPANE_HORIZONTAL_ALIGN,_closeIcon:xe.TABPANE_CLOSE_ICON,_selectNextOnClose:xe.TABPANE_SELECT_NEXT_ON_CLOSE,_selectNextOnInVisible:xe.TABPANE_SELECT_NEXT_ON_INVISIBLE,onPropertyChanged:function(t){this.invalidateTab()},getTabBox:function(){return this._tabBox},getTabDiv:function(){return this._tabDiv},getContentDiv:function(){return this._contentDiv},handleTabChange:function(t){if(this._selectNextOnInVisible&&\"visible\"===t.property&&!t.newValue&&this._tabBox.getSelectionModel().contains(t.source)){for(var e,i,n=t.source,s=this._tabBox.getRoots().indexOf(n),o=this._tabBox.getRoots(),r=o.size(),a=s;a<r-1;)if((e=o.get(++a)).isVisible()&&!e.isDisabled()){i=e;break}if(!i)for(a=s;a>0;)if((e=o.get(--a)).isVisible()&&!e.isDisabled()){i=e;break}this._tabBox.getSelectionModel().setSelection(i)}this.invalidateTab()},invalidateTab:function(t){this._invalidateTab||(this._invalidateTab=!0,this.invalidate(t))},validateImpl:function(){this._invalidateTab&&(this._invalidateTab=!1,this.validateTab());var t,e=this._view.offsetWidth,i=this._view.offsetHeight;\"top\"===this._tabOrientation?(this._tabDiv.style.top=\"0px\",t={x:0,y:this._tabHeight,width:e,height:Math.max(0,i-this._tabHeight)}):(this._tabDiv.style.top=i-this._tabHeight+\"px\",t={x:0,y:0,width:e,height:Math.max(0,i-this._tabHeight)}),this._currentView&&D.setViewBounds(this._currentView,t)},getCurrentTab:function(){return this._currentTab},getCurrentView:function(){return this._currentView},onViewRemoved:function(t){},onViewAdded:function(t){},validateTab:function(){this._currentTab=this._tabBox.getSelectionModel().getLastData();var t=this._currentTab?this._currentTab.getView():null;if(t!==this._currentView){var e;this._currentView&&((this._currentView.getView?this._currentView.getView():this._currentView).style.visibility=\"hidden\",this.onViewRemoved(this._currentView)),t&&((e=t.getView?t.getView():t).style.visibility=\"inherit\",e.parentNode||this._contentDiv.appendChild(e),this.onViewAdded(t)),this._currentView=t}X.release(this._tabDiv);for(var i=this._tabBox.getRoots(),n=this._tabHeight+\"px\",s=this._tabHeight-2+\"px\",o=this._tabRadius+\"px\",r=i.size(),a=0,h=0;h<r;h++){var l=i.get(h);if(l.isVisible()){var c=this._currentTab===l,d=l.getWidth();d<0&&(d=0);var u=Math.min(this._tabGap,d),_=this._divPool.get();_._tab=l;var g=_.style;g.position=\"absolute\",g.whiteSpace=\"nowrap\",g.lineHeight=s,g.overflow=\"hidden\",g.textOverflow=\"ellipsis\",g.background=c?this._selectBackground:this._tabBackground,g.textAlign=this._horizontalAlign,\"top\"===this._tabOrientation?(g.borderTopLeftRadius=o,g.borderTopRightRadius=o,g.borderBottomLeftRadius=\"0px\",g.borderBottomRightRadius=\"0px\"):(g.borderTopLeftRadius=\"0px\",g.borderTopRightRadius=\"0px\",g.borderBottomLeftRadius=o,g.borderBottomRightRadius=o),g.left=a+\"px\",g.width=d-u+\"px\",g.height=n,_._x=a,_._width=d-u,this.renderTab(_,l),this.onTabRendered(_,l),this._tabDiv.insertBefore(_,this._tabDiv.firstChild),a+=d,l.isResizable()&&((_=this._resizePool.get())._resizeTab=l,(g=_.style).position=\"absolute\",g.backgroundColor=\"white\",g.opacity=0,g.left=a-u-this._resizeTolerance+\"px\",g.width=u+2*this._resizeTolerance+\"px\",g.height=n,this._tabDiv.appendChild(_))}}this._tabDiv.style.left=\"0px\",this._tabDiv.style.width=a+\"px\",this._tabDiv.style.height=this._tabHeight+\"px\",this._pools.forEach(function(t){t.clear()})},renderTab:function(t,e){if(e.renderTab)e.renderTab(t);else{var i=e.getIcon();if(i){(r=this._iconPool.get()).setAttribute(\"src\",D.getImageSrc(i)),r.style.paddingLeft=\"4px\",r.style.verticalAlign=\"middle\",t.appendChild(r)}var n=e.getName();if(n){var s=this._textPool.get();s.style.whiteSpace=\"nowrap\",s.style.verticalAlign=\"middle\",s.style.padding=\"2px 4px\",s.innerHTML=n,t.appendChild(s)}if(V.isOpera){var o=t.cloneNode(!1);o.style.left=\"0px\",o.style.top=\"0px\",o.style.opacity=0,t.appendChild(o)}}if(e.isClosable()){var r,a=this._tabRadius/4+2;(r=this._closePool.get())._closeTab=e,r.setAttribute(\"src\",D.getImageSrc(this._closeIcon)),r.style.position=\"absolute\",r.style.top=a+\"px\",r.style.right=a+\"px\",t.appendChild(r)}e.isDisabled()?t.style.color=this.getDisabledColor():t.style.color=\"\"},onTabRendered:function(t,e){}}),R.controls.TabPaneInteraction=function(t){this.tabPane=t,this.view=t.getTabDiv();var e=this;this.view.addEventListener(\"mousedown\",function(t){e.handleMouseDown(t)},!1),this.view.addEventListener(\"mousemove\",function(t){e.handleMouseMove(t)},!1)},D.ext(\"twaver.controls.TabPaneInteraction\",Object,{handleMouseDown:function(t){0===t.button&&(this.movableDiv?this.handleMouseUp(t):(this.resizeTab=t.target._resizeTab,this.resizeTab||(this.movableDiv=this.getMovableDivAt(t)),this.changeCursor(t),this.lastX=this.getX(t),this._startClient=X.getClientPoint(t),this._startLogicalX=this.lastX,X.handle_mousedown(this,t)))},changeCursor:function(t){var e=\"\";if(t.target._resizeTab)e=\"ew-resize\";else{var i=this.getTabAt(t);!i||i.isDisabled()&&!i.isMovable()||(e=\"pointer\")}this.view.style.cursor=e},handleMouseMove:function(t){if(null!=this.lastX){if(X.target===this){var e=this._startLogicalX+t.clientX-this._startClient.x;if(this.resizeTab){if(null!=this.stopX){if(e<this.stopX)return;delete this.stopX}var i=this.resizeTab.getWidth()+(e-this.lastX);i<10&&(i=10,this.stopX=e),this.resizeTab.setWidth(i),this.lastX=e}else if(this.movableDiv){var n=e-this.lastX;if(!this.cloneDiv){if(Math.abs(n)<3)return;this.cloneDiv=this.movableDiv.cloneNode(!0),this.cloneDiv._x=this.movableDiv._x,this.cloneDiv.style.background=this.tabPane.getMoveBackground(),this.insertDiv=X.createDiv(),this.insertDiv.style.width=\"1px\",this.insertDiv.style.height=this.cloneDiv.style.height,this.insertDiv.style.background=this.tabPane.getInsertBackground(),this.movableDiv.parentNode.appendChild(this.cloneDiv),this.movableDiv.parentNode.appendChild(this.insertDiv)}var s=this.cloneDiv._x+n;this.cloneDiv.style.left=s+\"px\",this.cloneDiv._x=s,this.lastX=e,this.tabInfo=this.getTabInfoAt(t),this.tabInfo&&(this.insertDiv.style.left=this.tabInfo.position)}}}else this.changeCursor(t)},handleMouseUp:function(t){if(0===t.button){if(this.resizeTab);else if(this.movableDiv&&this.tabInfo){var e=this.movableDiv._tab,i=this.tabInfo.index;this.tabPane.getTabBox().moveTo(e,i)}else{var n=this.tabPane.getTabBox();if(e=t.target._closeTab)if(this.tabPane.isSelectNextOnClose()&&this.tabPane.getCurrentTab()===e){var s=n.getRoots();i=s.indexOf(e);n.remove(e),s.size()>0&&(i>=s.size()&&(i=s.size()-1),n.getSelectionModel().setSelection(s.get(i)))}else n.remove(e);else{(e=this.getTabAt(t))&&!e.isDisabled()&&n.getSelectionModel().setSelection(e)}}this.clear()}},clear:function(){this.view.style.cursor=\"\",this.cloneDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.cloneDiv),this.insertDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.insertDiv),delete this.movableDiv,delete this.tabInfo,delete this.insertDiv,delete this.cloneDiv,delete this.resizeTab,delete this.stopX,delete this.lastX,delete this._startLogicalX,delete this._startClient},getTabAt:function(t){t=t.target;for(var e;t&&t!==this.view&&!(e=t._tab);)t=t.parentNode;return e},getMovableDivAt:function(t){t=t.target;for(var e;t&&t!==this.view&&!(e=t._tab);)t=t.parentNode;return e&&e.isMovable()?t:null},getX:function(t){var e=X.getLogicalPoint(this.view,t);return e?e.x:null},getTabInfoAt:function(t){for(var e=this._startLogicalX+t.clientX-this._startClient.x,i=this.tabPane.getTabBox().getRoots(),n=i.size(),s=0,o=!1,r=0;r<n;r++){var a=i.get(r);if(a===this.movableDiv._tab&&(o=!0),a.isVisible()){var h=a.getWidth();if(h<=0)continue;if(e>=s&&e<=s+h){var l=e<s+h/2;!o||a===this.movableDiv._tab&&l||r--;var c=l?Math.max(0,r):Math.min(r+1,n),d=l?s:s+h;return d=Math.max(0,d-1),{index:c,tab:a,position:d+\"px\"}}s+=h}}return this.tabInfo}}),R.controls.TabPaneTouchInteraction=function(t){this.tabPane=t,this.view=t.getTabDiv(),X.addEventListener(\"touchstart\",\"handleTouchstart\",this.view,this)},D.ext(\"twaver.controls.TabPaneTouchInteraction\",Object,{handleTouchstart:function(t){X.preventDefault(t),this.movableDiv?this.handleTouchend(t):(this.resizeTab=t.target._resizeTab,this.resizeTab||(this.movableDiv=this.getMovableDivAt(t)),this.lastX=this.getX(t),X.addEventListener(\"touchmove\",\"handleTouchmove\",this.view,this),X.addEventListener(\"touchend\",\"handleTouchend\",this.view,this))},handleTouchmove:function(t){if(null!=this.lastX)if(this.resizeTab){var e=this.getX(t);if(null!=this.stopX){if(e<this.stopX)return;delete this.stopX}var i=this.resizeTab.getWidth()+(e-this.lastX);i<0&&(i=0,this.stopX=e),this.resizeTab.setWidth(i),this.lastX=e}else if(this.movableDiv){var n=(e=this.getX(t))-this.lastX;if(!this.cloneDiv){if(Math.abs(n)<3)return;this.cloneDiv=this.movableDiv.cloneNode(!0),this.cloneDiv._x=this.movableDiv._x,this.cloneDiv.style.background=this.tabPane.getMoveBackground(),this.insertDiv=X.createDiv(),this.insertDiv.style.width=\"1px\",this.insertDiv.style.height=this.cloneDiv.style.height,this.insertDiv.style.background=this.tabPane.getInsertBackground(),this.movableDiv.parentNode.appendChild(this.cloneDiv),this.movableDiv.parentNode.appendChild(this.insertDiv)}var s=this.cloneDiv._x+n;this.cloneDiv.style.left=s+\"px\",this.cloneDiv._x=s,this.lastX=e,this.tabInfo=this.getTabInfoAt(t),this.tabInfo&&(this.insertDiv.style.left=this.tabInfo.position)}},handleTouchend:function(t){if(this.resizeTab);else if(this.movableDiv&&this.tabInfo){var e=this.movableDiv._tab,i=this.tabInfo.index;this.tabPane.getTabBox().moveTo(e,i)}else{var n=this.tabPane.getTabBox();if(e=t.target._closeTab)if(this.tabPane.isSelectNextOnClose()&&this.tabPane.getCurrentTab()===e){var s=n.getRoots();i=s.indexOf(e);n.remove(e),s.size()>0&&(i>=s.size()&&(i=s.size()-1),n.getSelectionModel().setSelection(s.get(i)))}else n.remove(e);else{(e=this.getTabAt(t))&&!e.isDisabled()&&n.getSelectionModel().setSelection(e)}}this.clear(),X.removeEventListener(\"touchmove\",this.view,this),X.removeEventListener(\"touchend\",this.view,this)},clear:function(){this.cloneDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.cloneDiv),this.insertDiv&&this.movableDiv&&this.movableDiv.parentNode.removeChild(this.insertDiv),delete this.movableDiv,delete this.tabInfo,delete this.insertDiv,delete this.cloneDiv,delete this.resizeTab,delete this.stopX,delete this.lastX},getTabAt:function(t){t=t.target;for(var e;t&&t!==this.view&&!(e=t._tab);)t=t.parentNode;return e},getMovableDivAt:function(t){t=t.target;for(var e;t&&t!==this.view&&!(e=t._tab);)t=t.parentNode;return e&&e.isMovable()?t:null},getX:function(t){var e=X.getLogicalPoint(this.view,t);return e?e.x:null},getTabInfoAt:function(t){for(var e=this.getX(t),i=this.tabPane.getTabBox().getRoots(),n=i.size(),s=0,o=!1,r=0;r<n;r++){var a=i.get(r);if(a===this.movableDiv._tab&&(o=!0),a.isVisible()){var h=a.getWidth();if(h<=0)continue;if(e>=s&&e<=s+h){var l=e<s+h/2;!o||a===this.movableDiv._tab&&l||r--;var c=l?Math.max(0,r):Math.min(r+1,n),d=l?s:s+h;return d=Math.max(0,d-1),{index:c,tab:a,position:d+\"px\"}}s+=h}}return this.tabInfo}}),R.controls.TitlePane=function(t,e,i){R.controls.TitlePane.superClass.constructor.apply(this,arguments),this.invalidate(),this._titleDiv=X.createDiv(),this._titleDiv.tabIndex=-1,this._titleDiv.style.verticalAlign=\"middle\",this._titleDiv.style.fontWeight=\"bold\",this._titleDiv.style.textOverflow=\"ellipsis\",this._titleDiv.style.overflow=\"hidden\",this._titleDiv.style.whiteSpace=\"nowrap\",this._titleDiv.onmousedown=X.preventDefault,this._span=z.createElement(\"span\"),this._span.style.verticalAlign=\"middle\",this._span.style.paddingLeft=\"4px\",this._span.style.paddingRight=\"4px\",this._img=z.createElement(\"img\"),this._img.style.verticalAlign=\"middle\",this._img.style.paddingLeft=\"4px\",this._view=X.createView(\"hidden\",!0),this._view.tabIndex=-1,this._view.appendChild(this._titleDiv),e&&this.setTitle(e),t&&this.setContent(t),i&&this.setIcon(i)},D.ext(\"twaver.controls.TitlePane\",R.controls.ControlBase,{__accessor:[\"icon\",\"title\",\"titleHeight\",\"titleHorizontalAlign\",\"titleBackground\"],_titleHeight:xe.TITLEPANE_TITLE_HEIGHT,_titleBackground:xe.TITLEPANE_TITLE_BACKGROUND,_titleHorizontalAlign:xe.TITLEPANE_TITLE_HORIZONTAL_ALIGN,onPropertyChanged:function(t){this.invalidate()},getTitleDiv:function(){return this._titleDiv},getContent:function(){return this._content},setContent:function(t){if(this._content!==t){var e=this._content;e&&(e.getView?this._view.removeChild(e.getView()):this._view.removeChild(e)),this._content=t,t&&(t.getView?this._view.appendChild(t.getView()):this._view.appendChild(t)),this.firePropertyChange(\"content\",e,t)}},validateImpl:function(){var t=this._view.offsetWidth,e=this._view.offsetHeight;(i=this._titleDiv.style).textAlign=this._titleHorizontalAlign,i.lineHeight=this._titleHeight-2+\"px\",i.background=this._titleBackground,X.clear(this._titleDiv),this._icon&&(this._img.setAttribute(\"src\",D.getImageSrc(this._icon)),this._titleDiv.appendChild(this._img)),this._title&&(this._span.innerHTML=this._title,this._span.setAttribute(\"title\",this._title),this._titleDiv.appendChild(this._span));var i;(i=this._titleDiv.style).left=\"0px\",i.top=\"0px\",i.width=t+\"px\",i.height=this._titleHeight+\"px\",D.setViewBounds(this._content,{x:0,y:this._titleHeight,width:t,height:Math.max(e-this._titleHeight,0)})}}),R.controls.Accordion=function(){R.controls.Accordion.superClass.constructor.apply(this,arguments),this._titleMap={},this._titleList=new oe,this._currentTitle=null,this._currentView=null,this._view=X.createView(\"hidden\",!0),this.invalidate();var t=this;this._view.addEventListener(\"mousedown\",function(e){t.handleMouseDown(e)},!1)},D.ext(\"twaver.controls.Accordion\",R.controls.ControlBase,{__accessor:[\"expandIcon\",\"collapseIcon\",\"titleHeight\",\"titleBackground\",\"borderBottomColor\",\"iconPosition\"],_expandIcon:xe.ACCORDION_EXPAND_ICON,_collapseIcon:xe.ACCORDION_COLLAPSE_ICON,_titleHeight:xe.ACCORDION_TITLE_HEIGHT,_titleBackground:xe.ACCORDION_TITLE_BACKGROUND,_borderBottomColor:xe.ACCORDION_BORDER_BOTTOM_COLOR,_iconPosition:xe.ACCORDION_ICON_POSITION,onPropertyChanged:function(t){this.invalidate()},handleMouseDown:function(t){if(0===t.button){var e=t.target._title;e||(e=t.target.parentNode._title),e&&(this._currentTitle===e?this.collapse():this.expand(e))}},getTitles:function(){return this._titleList},getCurrentTitle:function(){return this._currentTitle},add:function(t,e){if(this._titleMap[t])throw\"Title ' + title + ' already exists\";var i=X.createDiv();i._title=t,i.onmousedown=X.preventDefault,i.style.cursor=\"pointer\",i.style.textAlign=\"left\",i.style.textOverflow=\"ellipsis\",i.style.whiteSpace=\"nowrap\",i.style.overflow=\"hidden\",i.style.borderBottomWidth=\"1px\",i.style.borderBottomStyle=\"solid\";var n=z.createElement(\"img\");n.style.verticalAlign=\"middle\",n.style.paddingLeft=\"4px\";var s=z.createElement(\"span\");if(s.style.verticalAlign=\"middle\",s.style.paddingLeft=\"4px\",s.innerHTML=t,s.setAttribute(\"title\",t),this._view.appendChild(i),i.appendChild(n),i.appendChild(s),\"right\"==this._iconPosition){var o=n.style,r=(this._titleHeight-8)/2;o.marginTop=r+\"px\",o.right=\"15px\",o.position=\"absolute\"}this._titleMap[t]={content:e,titleDiv:i,span:s,img:n},this._titleList.add(t),this.invalidate()},remove:function(t){var e=this._titleMap[t];e&&this._view.removeChild(e.titleDiv),delete this._titleMap[t],this._titleList.remove(t),this.invalidate()},clear:function(){var t=this;Object.keys(t._titleMap).forEach(function(e){t._view.removeChild(t._titleMap[e].titleDiv)}),t._titleMap={},t._titleList.clear(),t.invalidate()},expand:function(t){this._titleMap[t]&&this._currentTitle!==t&&(this._currentTitle=t,this.onExpanded(t),this.invalidate())},onExpanded:function(t){},collapse:function(){this._currentTitle&&(this.onCollapsed(this._currentTitle),this._currentTitle=null,this.invalidate())},onCollapsed:function(t){},validateImpl:function(){var t=this._currentView;this._currentView=null;for(var e=this._view.offsetWidth,i=this._view.offsetHeight,n=this._titleList.size(),s=0,o=0;o<n;o++){var r=this._titleList.get(o),a=this._titleMap[r],h=a.titleDiv.style;h.lineHeight=this._titleHeight-3+\"px\",h.background=this._titleBackground,h.borderBottomColor=this._borderBottomColor,h.left=\"0px\",h.top=s+\"px\",h.width=e+\"px\",h.height=this._titleHeight-1+\"px\";var l=this._currentTitle===r,c=l?this._expandIcon:this._collapseIcon;if(a.img.setAttribute(\"src\",D.getImageSrc(c)),l){var d=Math.max(0,i-n*this._titleHeight);a.content&&(this._currentView=a.content.getView?a.content.getView():a.content,D.setViewBounds(a.content,{x:0,y:s+this._titleHeight,width:e,height:d}),a.content.style.overflowY=\"auto\"),s+=this._titleHeight+d}else s+=this._titleHeight}this._currentView&&this._currentView!==t&&this._view.appendChild(this._currentView),t&&t!==this._currentView&&this._view.removeChild(t)}}),R.controls.BorderPane=function(t,e,i,n,s){R.controls.BorderPane.superClass.constructor.apply(this,arguments),this.invalidate(),this._view=X.createView(\"hidden\",!0),this._view.tabIndex=-1,t&&this.setCenter(t),e&&this.setTop(e),i&&this.setRight(i),n&&this.setBottom(n),s&&this.setLeft(s)},D.ext(\"twaver.controls.BorderPane\",R.controls.ControlBase,{__accessor:[\"hGap\",\"vGap\",\"topHeight\",\"bottomHeight\",\"leftWidth\",\"rightWidth\"],_hGap:xe.BORDERPANE_HGAP,_vGap:xe.BORDERPANE_VGAP,_topHeight:0,_bottomHeight:0,_leftWidth:0,_rightWidth:0,onPropertyChanged:function(t){this.invalidate()},getCenter:function(){return this._center},setCenter:function(t){this._setContent(\"center\",t)},getTop:function(){return this._top},setTop:function(t){this._setContent(\"top\",t)},getRight:function(){return this._right},setRight:function(t){this._setContent(\"right\",t)},getBottom:function(){return this._bottom},setBottom:function(t){this._setContent(\"bottom\",t)},getLeft:function(){return this._left},setLeft:function(t){this._setContent(\"left\",t)},_setContent:function(t,e){var i=this[\"_\"+t];if(i!==e){if(i){var n=i.getView?i.getView():i;this._view.contains(n)&&this._view.removeChild(n)}this[\"_\"+t]=e,e&&(e.getView?this._view.appendChild(e.getView()):this._view.appendChild(e)),this.firePropertyChange(t,i,e)}},validateImpl:function(){var t=this._view.offsetWidth,e=this._view.offsetHeight,i=0,n=0,s=t,o=e,r=0,a=0,h=0,l=0;this._top&&(n=(r=this._topHeight||(this._top.getView?this._top.getView().offsetHeight:this._top.offsetHeight))+this._vGap),this._bottom&&(o=e-(a=this._bottomHeight||(this._bottom.getView?this._bottom.getView().offsetHeight:this._bottom.offsetHeight))-this._vGap),this._left&&(i=(h=this._leftWidth||(this._left.getView?this._left.getView().offsetWidth:this._left.offsetWidth))+this._hGap),this._right&&(s=t-(l=this._rightWidth||(this._right.getView?this._right.getView().offsetWidth:this._right.offsetWidth))-this._hGap);var c=Math.max(0,s-i),d=Math.max(0,o-n);this._top&&D.setViewBounds(this._top,{x:0,y:0,width:t,height:r}),this._bottom&&D.setViewBounds(this._bottom,{x:0,y:o,width:t,height:a}),this._left&&D.setViewBounds(this._left,{x:0,y:n,width:h,height:d}),this._right&&D.setViewBounds(this._right,{x:s,y:n,width:l,height:d}),this._center&&D.setViewBounds(this._center,{x:i,y:n,width:c,height:d})}}),R.controls.PopupMenu=function(t){this._view=X.createDiv(),this._view.style.zIndex=100001,this._items=[],this._itemsMap={},this.setContextView(t);var e=this._view,i=this;e.addEventListener(\"mouseover\",function(t){i._mouseOver=!0},!1),e.addEventListener(\"mouseout\",function(t){i._mouseOver=!1},!1),e.oncontextmenu=function(t){t.preventDefault()},X.addEventListener(\"mousedown\",\"_handleClick\",e,this)},D.ext(\"twaver.controls.PopupMenu\",Object,{_width:200,_xOffset:0,_yOffset:0,_menuItemHeight:25,_background:\"#F9F9F9\",_border:\"2px outset white\",_disabledColor:\"#BABBBC\",_focusColor:\"white\",_focusBackground:\"#C2CFF1\",_color:\"black\",_subMenuEnableIcon:xe.POPUPMENU_SUBNENU_ENABLE_ICON,_subMenuDisableIcon:xe.POPUPMENU_SUBNENU_DISABLE_ICON,_checkboxSelectedIcon:xe.POPUPMENU_CHECKBOX_SELECTED_ICON,_checkboxUnselectedIcon:xe.POPUPMENU_CHECKBOX_UNSELECTED_ICON,_radiobuttonSelectedIcon:xe.POPUPMENU_RADIOBUTTON_SELECTED_ICON,_radiobuttonUnselectedIcon:xe.POPUPMENU_RADIOBUTTON_UNSELECTED_ICON,getView:function(){return this._view},getContextView:function(){return this._contextView},setContextView:function(t){if(this._removeContextmenuListener(),this._contextView=t,t){var e=t.getView?t.getView():t;V.isTouchable?(e.addEventListener(\"touchstart\",this._getTouchStartListener(),!1),e.addEventListener(\"touchmove\",this._getTouchMoveListener(),!1),e.addEventListener(\"touchend\",this._getTouchEndListener(),!1),X.addEventListener(\"contextmenu\",\"_handleContextmenu\",e,this)):X.addEventListener(\"contextmenu\",\"_handleContextmenu\",e,this)}},getMenuItems:function(){return this._items},setMenuItems:function(t){if(this._items=[],this._itemsMap={},t)for(var e=0,i=t.length;e<i;e++)this.addMenuItem(t[e])},addMenuItem:function(t){!0!==t.separator&&(this._itemsMap[t.id||t.label]=t),this._items.push(t)},getMenuItem:function(t){return this._itemsMap[t]},addSeparator:function(){this.addMenuItem({separator:!0})},getMenuItemById:function(t){return this._itemsMap[t]},isVisible:function(t){return!1!==t.visible},isEnabled:function(t){return!1!==t.enabled},show:function(t){this.hide();var e,i,n=this._view,s=this._view.style;if(V.isTouchable?(e=t.changedTouches&&t.changedTouches[0].clientX||t.clientX,i=t.changedTouches&&t.changedTouches[0].clientY||t.clientY):(e=t.clientX,i=t.clientY),X.clear(n),this.renderMenu(n,this._items),0!==this._height){V.isTouchable&&X.addEventListener(\"touchstart\",\"_handleBodyClicked\",z.body,this),X.addEventListener(\"mousedown\",\"_handleBodyClicked\",z.body,this);var o=X.windowWidth()-this._width-10,r=X.windowHeight()-this._height-10;e=e>o?o:e,i=i>r?r:i,e=e<0?0:e,i=i<0?0:i,s.left=e+yt.scrollLeft()+this._xOffset+\"px\",s.top=i+yt.scrollTop()+this._yOffset+\"px\",z.body.appendChild(n)}},_showMenuItem:function(t,e){this._hideMenuItem(e);var i=z.createElement(\"div\");e.menuItem.childrenDiv=i;var n=i.style;n.color=\"#000000\",n.position=\"absolute\";var s=this._width,o=e.offsetTop,r=e.menuItem.items;if(this._itemsShow=!0,e._itemsShow=!0,X.clear(i),this.renderMenu(i,r),0!==this._height){var a=X.windowWidth()-this._width-10,h=X.windowHeight()-10,l=this._getPosition(this._view);s=l.left+this._width>a?-this._width:s,o=l.top+o+r.length*this._menuItemHeight>h?o-(r.length-1)*this._menuItemHeight:o,n.left=s+\"px\",n.top=o+\"px\",e.appendChild(i)}},hide:function(){z.body.contains(this._view)&&z.body.removeChild(this._view),delete this._mouseOver,delete this._itemsShow,V.isTouchable&&X.removeEventListener(\"touchstart\",z.body,this),X.removeEventListener(\"mousedown\",z.body,this)},_hideMenuItem:function(t){var e=t.menuItem.childrenDiv;e&&t.contains(e)&&t.removeChild(e),this._itemsShow=!1,t._itemsShow=!1},dispose:function(){this._removeContextmenuListener(),this.hide()},onMenuShowing:function(t){return!0},onAction:function(t){},renderMenu:function(t,e){var i=t.style;i.background=this._background,i.border=this._border,i.width=this._width+\"px\",this._height=0,delete this._separator,t.menuItems=e;for(var n,s=0,o=e.length;s<o;s++)if(n=e[s],this.isVisible(n))if(!0===n.separator)this._separator=!0;else{var r=z.createElement(\"div\");this.isEnabled(n)&&this._addMouseoverListener(r,n),r._itemsShow=!1,r.menuItem=n,t.appendChild(r),this.renderMenuItem(r,n),this.onMenuItemRendered(r,n),this._separator=!1,this._height+=this._menuItemHeight}},renderMenuItem:function(t,e){var i=t.style;i.height=this._menuItemHeight+\"px\",this._separator&&(i.borderTop=\"1px solid gray\"),this.isEnabled(e)||(i.color=this._disabledColor);var n=z.createElement(\"span\");(i=n.style).position=\"absolute\",i.width=\"25px\",i.height=this._menuItemHeight+\"px\",i.lineHeight=this._menuItemHeight+\"px\",i.textAlign=\"center\",t.appendChild(n);var s;if(\"check\"===e.type?s=e.selected?this._checkboxSelectedIcon:this._checkboxUnselectedIcon:\"radio\"===e.type?s=e.selected?this._radiobuttonSelectedIcon:this._radiobuttonUnselectedIcon:e.icon&&(s=e.icon),s){var o=new F;o.src=D.getImageSrc(s),o.style.verticalAlign=\"middle\",n.appendChild(o)}var r=z.createElement(\"label\");if(D.setText(r,e.label,!0),i=r.style,i.position=\"absolute\",i.height=this._menuItemHeight+\"px\",i.lineHeight=this._menuItemHeight+\"px\",i.left=\"25px\",t.appendChild(r),e.items&&t.parentNode){var a=z.createElement(\"img\");i=a.style,this.isEnabled(e)?a.setAttribute(\"src\",D.getImageSrc(this._subMenuEnableIcon)):a.setAttribute(\"src\",D.getImageSrc(this._subMenuDisableIcon));var h=(this._menuItemHeight-8)/2;i.marginTop=h+\"px\",i.right=\"5px\",i.position=\"absolute\",t.appendChild(a)}},onMenuItemRendered:function(t,e){},_addMouseoverListener:function(t,e){var i=this;this._contextView;V.isTouchable&&(t.addEventListener(\"touchstart\",function(n){t.style.background=i._focusBackground,t.style.color=i._focusColor,this===n.relatedTarget||this.contains(n.relatedTarget)||e.items&&!i._it