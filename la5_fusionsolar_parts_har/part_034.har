alueAndConfirmValueValidator(i);let a=await o.validateSmValue(e,t,n,i);return a||(a=await(0,r.Nh)(e,i)),a}},8281:(e,t,n)=>{\"use strict\";n.d(t,{T:()=>o});var r=n(37216);const i=e=>{if(e){const t=[127,129,141,143,144,157,173];for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);if(r>=0&&r<=31||t.indexOf(r)>-1)return!0}}return!1};async function o(){const e={},t=\" !\\\"#$%&'()*+,-./:;<=>?@[\\\\]^`{_|}~\";let n,o=[];function a(e,t){let n=0,r=0;for(;-1!==(r=e.indexOf(t,r));)r+=t.length,n++;return n}function s(e){let t=0,n=0;for(let i=0;i<e.length-1;i++){if(!((r=e.charAt(i))>=\"0\"&&r<=\"9\"||r>=\"a\"&&r<=\"z\"||r>=\"A\"&&r<=\"Z\"))return!1;if(0===i)t=e.charAt(i+1).charCodeAt()-e.charAt(i).charCodeAt();else if(n=e.charAt(i+1).charCodeAt()-e.charAt(i).charCodeAt(),t!==n)return!1}var r;return!0}function l(e,t){return\"en-us\"===e.locale.toLowerCase()?e.formatMessage({id:\"neteco.pvms.char.continuous.error\"},{limitNum:t+1},{limitNum2:t+1}):e.formatMessage({id:\"neteco.pvms.char.continuous.error\"},{limitNum:t})}return e.checkMaxDuplicateCharacter=function(e){return function(t){const n={};for(let e=0;e<t.length;e++)Object.prototype.hasOwnProperty.call(n,t[e])?n[t[e]]++:n[t[e]]=1;for(const t in n)if(n[t]>e)return!1;return!0}},e.checkContinuousChar=function(e){return function(t){let n=0,r=0,i=0;for(;n<t.length;n++)t[n]===t[r]?i=i>=n-r+1?i:n-r+1:r=n;return r!==n&&(i=i>=n-r+1?i:n-r),!(i>e)}},e.and=function(e){return function(t){for(let n=0;n<e.length;n++)if(!e[n].check(t))return e[n].validationErrorMsg;return null}},e.or=function(e){return function(t){let n=null,r=!1;for(let i=0;i<e.length;i++)e[i].check(t)?r=!0:n=e[i].validationErrorMsg;return{validationResult:r,validationErrorMsg:n}}},e.rangeLength=function(e,t){return function(n){return n.length>=e&&n.length<=t}},e.alphaMinLen=function(t){let n;return-1===parseInt(t)?(n=new RegExp(\"[A-Za-z]{1}\"),e.regexNotAllow(n)):(n=new RegExp(`[A-Za-z]{${t}}`),e.regex(n))},e.upMinLen=function(t){let n;return-1===parseInt(t)?(n=new RegExp(\"[A-Z]{1}\"),e.regexNotAllow(n)):(n=new RegExp(`[A-Z]{${t}}`),e.regex(n))},e.lowMinLen=function(t){let n;return-1===parseInt(t)?(n=new RegExp(\"[a-z]{1}\"),e.regexNotAllow(n)):(n=new RegExp(`[a-z]{${t}}`),e.regex(n))},e.digitMinLen=function(t){let n;return-1===parseInt(t)?(n=new RegExp(\"[0-9]{1}\"),e.regexNotAllow(n)):(n=new RegExp(`[0-9]{${t}}`),e.regex(n))},e.countSpecCharNum=function(e){let n=0;for(let r=0;r<e.length;r++)-1!==t.indexOf(e.charAt(r))&&n++;return n},e.specCharMinLen=function(t){return function(n){const r=e.countSpecCharNum(n);return!(-1===parseInt(t)&&r>0||t>r)}},e.regex=function(e){return function(n){const r=function(e){const n=[],r=e.split(\"\");for(let e=0;e<r.length;e++)-1===t.indexOf(r[e])&&n.push(r[e]);return n.sort(),n.join(\"\")}(n);return e.test(r)}},e.regexNotAllow=function(e){return function(t){return!e.test(t)}},e.checkUserPwdExpireRel=function(e){return!(e.isUserPwdexpired&&0!==parseInt(e.pwdPeriodDays)&&parseInt(e.expiryNotificationDdays)+parseInt(e.changeValueInterval)>parseInt(e.pwdPeriodDays))},e.checkExpriedNotification=function(e){return!(e.isUserPwdexpired&&0!==parseInt(e.pwdPeriodDays)&&parseInt(e.expiryNotificationDdays)>=parseInt(e.pwdPeriodDays))},e.checkChangeInterval=function(e){return!(e.isUserPwdexpired&&0!==parseInt(e.pwdPeriodDays)&&parseInt(e.changeValueInterval)>parseInt(e.pwdPeriodDays))},e.noNeedToCheck=function(){return function(){return!0}},e.checkCharPolicy=function(t,n,r,i,o){if(n){const e={check:o(-1),validationErrorMsg:i};t.push(e)}else if(null!=n&&0===r){const n={check:e.noNeedToCheck(),validationErrorMsg:\"\"};t.push(n)}else{const e={check:o(r),validationErrorMsg:i};t.push(e)}},e.isNotContainSpace=function(){return function(e){return-1===e.indexOf(\" \")}},e.checkRepeatCharSeq=function(e,t){return function(n){if(n.length<=t)return!0;let r=0,i=0;for(;r+t-1<n.length;){const o=n.substring(r,r+t);if(i=a(n,o),i>=e)break;r++}return!(i>=e)}},e.checkNotAllowAlphaNumSeq=function(){return function(e){if(s(e))return!1;const t=function(e){let t=\"\",n=\"\";for(let r=0;r<e.length;r++)r%2==0?t+=e.charAt(r):n+=e.charAt(r);return[t,n]}(e);return!s(t[0])||!s(t[1])}},e.makeValueAndConfirmValueValidator=async function(i){n=await(0,r.cy)(),n.specialChar=t;const a=(0,r.tN)(i,n,[]);o=[];let s=i.formatMessage({id:\"neteco.pvms.length.error\"},{minchar:n.valueMinLength,maxchar:n.valueMaxLength});n.valueMinLength===n.valueMaxLength&&(s=i.formatMessage({id:\"neteco.pvms.rule.length.min.max.same\"},{valueMinLength:n.valueMinLength}));const c={check:e.rangeLength(n.valueMinLength,n.valueMaxLength),validationErrorMsg:s};if(o.push(c),e.checkCharPolicy(o,n.notAllowAlphabetFlag,n.minAlphabetNum,a,e.alphaMinLen),e.checkCharPolicy(o,n.notAllowUppercaseFlag,n.minUppercaseNum,a,e.upMinLen),e.checkCharPolicy(o,n.notAllowLowercaseFlag,n.minLowercaseNum,a,e.lowMinLen),e.checkCharPolicy(o,n.notAllowNumberFlag,n.minNumberNum,a,e.digitMinLen),e.checkCharPolicy(o,n.notAllowSpecCharFlag,n.minSpecCharNum,a,e.specCharMinLen),n.notAllowRestrictedChar){const t={check:e.isNotContainSpace(),validationErrorMsg:a};o.push(t)}if(n.unlimitContinuousCharLimitNum){const t={check:e.checkContinuousChar(n.continuousCharLimitNum),validationErrorMsg:l(i,n.continuousCharLimitNum)};o.push(t)}if(n.notAllowAlphaNumSeqFlag){const t={check:e.checkNotAllowAlphaNumSeq(),validationErrorMsg:i.formatMessage({id:\"neteco.pvms.rule.not.allow.AlphaNumSeq\"})};o.push(t)}if(n.notAllowRepeatCharSeqFlag){const t={check:e.checkRepeatCharSeq(n.pwdRepeatSeqCount,n.pwdRepeatSeqCharNum),validationErrorMsg:i.formatMessage({id:\"neteco.pvms.not.allow.repeat.char.seq\"},{pwdRepeatSeqCount:n.pwdRepeatSeqCount,pwdRepeatSeqCharNum:n.pwdRepeatSeqCharNum})};o.push(t)}},e.validateSmValue=function(t,r,i,a){const s=t.toLowerCase(),l=r.trim().toLowerCase();let c=!0,u=\"\";const d=l.split(\"\").reverse().join(\"\");if(\"\"===s)return u=a.formatMessage({id:\"neteco.pvms.input.required\"}),u;if(i){if(c=!0,s.length<n.adminMinLen||s.length>n.valueMaxLength)return u=a.formatMessage({id:\"neteco.pvms.admin.length.error\"},{minLen:n.adminMinLen},{maxLen:n.valueMaxLength}),n.adminMinLen===n.valueMaxLength&&(u=a.formatMessage({id:\"neteco.pvms.admin.length.min.max.same\"},{minLen:n.adminMinLen})),u}else c=!1;if(l&&n.maxSameSubstrLenWithNameFlag){const e=function(e,t,n){let r=t.maxSameSubstrLenWithName;const i=e.length;0===Number(r)&&(r=i);for(let t=0;t<i-r+1;t++){const i=e.substring(t,t+r);if(n.indexOf(i)>-1)return!0}return!1}(l,n,s);if(e)return n.maxSameSubstrLenWithName>1?u=a.formatMessage({id:\"neteco.pvms.rule.max.same.substr.with.name\"},{maxSameSubstrLenWithName:n.maxSameSubstrLenWithName}):0===n.maxSameSubstrLenWithName?u=a.formatMessage({id:\"neteco.pvms.contain.username\"}):1===n.maxSameSubstrLenWithName&&(u=a.formatMessage({id:\"neteco.pvms.rule.max.same.one.with.name\"})),u}return l&&s.indexOf(d)>-1&&n.notAllowRevUName?(u=a.formatMessage({id:\"neteco.pvms.username.reverse\"}),u):(u=(p=()=>t,f=e.and(o),function(){return f(p())})(),u);var p,f},e.validateRegionName=async function(e,t){let n=\"\";return 0===(e=e.trim()).length&&(n=t.formatMessage({id:\"neteco.pvms.input.required\"})),(/[\\r\\t\\n\\f\\b`~\\*()|\\[\\]{}:,\\\"\\'\\+\\/;<=>\\?\\\\]+/.test(e)||i(e))&&(n=t.formatMessage({id:\"neteco.pvms.regionname.invalidchar\"})),n},e.validateUserName=async function(e,t,o){var a;n=await(0,r.cy)();const s=/[\\\"\\r\\t\\n\\f\\b&\\'\\+\\/;<=>\\?\\\\®©`~\\*()|:,\\[\\]{}%^ ]+/,l=new RegExp(/^[a-zA-Z0-9\\_\\-\\.!@#$]+$/),c=new RegExp(/^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/);let u=\"\";if(e.trim().length<=0&&(u=t.formatMessage({id:\"neteco.pvms.input.required\"})),null!==(a=window.common)&&void 0!==a&&a.wideCharVerified)l.test(e)&&!i(e)||(u=t.formatMessage({id:\"neteco.pvms.username.invalid.wide.chars\"}));else{if(/^\\d+$/.test(e))return u=t.formatMessage({id:\"neteco.pvms.userName.errorrtip2\"}),u;if(c.test(e)||i(e))return u=t.formatMessage({id:\"neteco.pvms.userName.errorrtip1\"}),u;if(s.test(e)||i(e))return u=t.formatMessage({id:\"neteco.pvms.username.invalidchars\"}),u}if(o)for(const n of e)if(n.codePointAt(0)>65535)return u=t.formatMessage({id:\"neteco.pvms.username.invalidchars\"}),u;let d=!0;return n.nameMinLength&&(d=e.length>=n.nameMinLength),d&&(d=n.nameMaxLength?e.length<=n.nameMaxLength:e.length<=32),d||(u=n.nameMinLength===n.nameMaxLength?t.formatMessage({id:\"neteco.pvms.username.length.fix.error\"},{atLeastChar:n.nameMinLength}):t.formatMessage({id:\"neteco.pvms.username.length.error\"},{minchar:n.nameMinLength,maxchar:n.nameMaxLength?n.nameMaxLength:32})),u},e.getResultDetail=function(e,t){switch(n=(0,r.I$)(),t){case\"user.user.value_policy_violation_length\":return n.valueMinLength===n.valueMaxLength?e.formatMessage({id:\"neteco.pvms.rule.length.min.max.same\"},{valueMinLength:n.valueMinLength}):e.formatMessage({id:\"neteco.pvms.length.error\"},{minchar:n.valueMinLength,maxchar:n.valueMaxLength});case\"user.user.alphabet.not_allowd\":return e.formatMessage({id:\"neteco.pvms.not.allow.alphabet\"});case\"user.user.value_policy_violation_alphabet\":return e.formatMessage({id:\"neteco.pvms.miss.min.alphabet\"},{alphabetNum:n.minAlphabetNum});case\"user.user.upper.letter.not_allowd\":return e.formatMessage({id:\"neteco.pvms.not.allow.uppcase\"});case\"user.user.upper.letter\":return e.formatMessage({id:\"neteco.pvms.miss.min.uppercase\"},{minUppercaseNum:n.minUppercaseNum});case\"user.user.lower.letter.not_allowd\":return e.formatMessage({id:\"neteco.pvms.not.allow.lowercase\"});case\"user.user.lower.letter\":return e.formatMessage({id:\"neteco.pvms.miss.min.lowercase\"},{minLowercaseNum:n.minLowercaseNum});case\"user.user.digit.not_allowd\":return e.formatMessage({id:\"neteco.pvms.not.allow.digit\"});case\"user.user.digit\":return e.formatMessage({id:\"neteco.pvms.miss.min.digit\"},{minNumberNum:n.minNumberNum});case\"user.user.special_char.not_allowd\":return e.formatMessage({id:\"neteco.pvms.not.allow.specchar\"});case\"user.user.value_policy_violation_special_char_count\":return e.formatMessage({id:\"neteco.pvms.miss.min.specchar\"},{minSpecCharNum:n.minSpecCharNum});case\"user.user.space.not_allowd\":return e.formatMessage({id:\"neteco.pvms.not.allow.space\"});case\"user.user.conflict_with_username_reverse\":return e.formatMessage({id:\"neteco.pvms.username.reverse\"});case\"user.user.value_policy_violation_alpha_num_seq\":return e.formatMessage({id:\"neteco.pvms.rule.not.allow.AlphaNumSeq\"});case\"user.user.conflict_with_username\":{let t=e.formatMessage({id:\"neteco.pvms.contain.username\"});return n.maxSameSubstrLenWithName>1&&(t=e.formatMessage({id:\"neteco.pvms.rule.max.same.substr.with.name\"},{maxSameSubstrLenWithName:n.maxSameSubstrLenWithName})),0===n.maxSameSubstrLenWithName&&(t=e.formatMessage({id:\"neteco.pvms.contain.username\"})),1===n.maxSameSubstrLenWithName&&(t=e.formatMessage({id:\"neteco.pvms.rule.max.same.one.with.name\"})),t}case\"user.user.value_policy_violation_repeat_char_seq\":return e.formatMessage({id:\"neteco.pvms.not.allow.repeat.char.seq\"},{pwdRepeatSeqCount:n.pwdRepeatSeqCount},{pwdRepeatSeqCharNum:n.pwdRepeatSeqCharNum});case\"user.user.value_policy_violation_continuous_count\":return l(e,n.continuousCharLimitNum);default:return e.formatMessage({errorCode:t})}},e.validateCompanyName=function(e,t){let n=\"\";const r=\"/[`|:,&‘’\\\\'<>?]+\";return e||(e=\"\"),(!(e=e.trim())||0===e.length||e.length>60||\"null\"===e)&&(n=t.formatMessage({id:\"neteco.pvms.systemSetting.register.company.notNull.tip\"},{companyLength:60,chars:r})),(/[/\\[`|:,&‘’\\\\'<>\\?\\]\\+ ]+/.test(e)||i(e))&&(n=t.formatMessage({id:\"neteco.pvms.systemSetting.register.company.char.tip\"},{chars:r})),n},e}},37216:(e,t,n)=>{\"use strict\";n.d(t,{I$:()=>o,Nh:()=>s,cy:()=>a,tN:()=>l});const{neteco:r}=window;let i;const o=async()=>{const e=r.request.get({url:\"/rest/pvms/web/company/v1/policy\",dataType:\"json\",async:!1});return e?(i=e,e):null},a=async()=>i||await o(),s=async(e,t)=>{const n=JSON.stringify({checkValue:e});return new Promise((e=>{r.request.put({url:`/rest/pvms/web/company/v1/pwdweak?_${(new Date).getTime()}`,data:n,dataType:\"text\",contentType:\"application/json\",cache:\"false\",success(n){e(\"true\"===n?t.formatMessage({id:\"neteco.pvms.user.weak_psw_desc\"}):\"\")}})}))};function l(e,t,n){const r=e.formatMessage({id:\"neteco.pvms.rule.separator.label\"});let i=\"\";if(t.notAllowAlphabetFlag?i+=e.formatMessage({id:\"neteco.pvms.rule.alphabet.notallowd\"})+r:1===Number(t.minAlphabetNum)?i+=e.formatMessage({id:\"neteco.pvms.rule.one.alphabet.label\"})+r:t.minAlphabetNum>1&&(i+=e.formatMessage({id:\"neteco.pvms.rule.alphabet.label\"},{minAlphabetNum:t.minAlphabetNum})+r),!t.notAllowAlphabetFlag){let n=\"\";t.notAllowUppercaseFlag?n+=e.formatMessage({id:\"neteco.pvms.rule.upper.notallowd\"})+r:1===Number(t.minUppercaseNum)?n+=e.formatMessage({id:\"neteco.pvms.rule.one.upper.label\"})+r:t.minUppercaseNum>1&&(n+=e.formatMessage({id:\"neteco.pvms.rule.upper.label\"},{minUppercaseNum:t.minUppercaseNum})+r);let o=\"\";t.notAllowLowercaseFlag?o+=e.formatMessage({id:\"neteco.pvms.rule.lower.notallowd\"})+r:1===Number(t.minLowercaseNum)?o+=e.formatMessage({id:\"neteco.pvms.rule.one.lower.label\"})+r:t.minLowercaseNum>1&&(o+=e.formatMessage({id:\"neteco.pvms.rule.lower.label\"},{minLowercaseNum:t.minLowercaseNum})+r),i+=n+o}t.notAllowNumberFlag?i+=e.formatMessage({id:\"neteco.pvms.rule.digit.notallowd\"})+r:1===Number(t.minNumberNum)?i+=e.formatMessage({id:\"neteco.pvms.rule.one.digit.label\"})+r:0!==Number(t.minNumberNum)&&(i+=e.formatMessage({id:\"neteco.pvms.rule.digit.label\"},{minNumberNum:t.minNumberNum})+r);let o=!1;if(t.notAllowSpecCharFlag)i+=e.formatMessage({id:\"neteco.pvms.rule.specchar.notallowd\"})+r;else{if(0!==Number(t.minSpecCharNum)){let n=t.specialChar;n.indexOf(\"\\\\\\\\\")>-1&&(n=n.replace(\"\\\\'\",\"'\").replace(\"\\\\\\\\\",\"\\\\\")),i+=e.formatMessage({id:\"neteco.pvms.rule.specchar.label\"},{minSpecCharNum:t.minSpecCharNum,specChar:n})+r}t.notAllowRestrictedChar&&(i+=e.formatMessage({id:\"neteco.pvms.rule.space.label\"}),o=!0)}if(o||(i=\"en-us\"===e.locale.toLowerCase()?i.slice(0,i.length-2)+e.formatMessage({id:\"neteco.pvms.batchmove.end\"}):i.slice(0,i.length-1)+e.formatMessage({id:\"neteco.pvms.batchmove.end\"})),1!==i.length)return i=e.formatMessage({id:\"neteco.pvms.rule.character.label\"},{0:i}),n.push(i),i}},37825:(e,t,n)=>{\"use strict\";n.d(t,{$b:()=>o,D8:()=>l,H0:()=>a,M5:()=>i,SC:()=>c,Y:()=>r,mz:()=>s,vO:()=>u});const r=\"ALL\",i={smartpvms:\"smartpvms\",aiboost:\"aiboost\",energy:\"energy\",park:\"park\",dcAiboost:\"dc_aiboost\",siteAiboost:\"site_aiboost\"},o=[i.energy,i.park,i.dcAiboost,i.siteAiboost],a=[i.smartpvms,i.aiboost],s=()=>{},l={table:1,report:2,kpi:3,dpa:4,ecoDevice:5},c={CHINESE:\"zh_CN\",ENGLISH:\"en_US\"},u={CHINESE:\"zh\",ENGLISH:\"en\"}},10749:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>i});var r=n(40401);const i={clearSelectedRowSubject:new r.x,changeLonLatSubject:new r.x,hoverLeftMenu:new r.x,reloadLeftTree:new r.x,refreshHistorySignals:new r.x,clearSelectedRowKeysSubject:new r.x,reloadSiteBoundDevices:new r.x,clearNewDeviceList:new r.x,changeBasicCurrentStationName:new r.x,backToLoginPage:new r.x,selectTreeItem:new r.x,resetOrginationTreeMoList:new r.x,configAndRefresh:new r.x,clearExpandRowKeysSubject:new r.x,changeBasicCurrentGridtime:new r.x,updateModalTableSubject:new r.x,reloadUserList:new r.x,refreshMessageList:new r.x,deleteCompanySubject:new r.x,switchThemeSubject:new r.x,redrawHistoryCanvas:new r.x,resetMonitorTab:new r.x,updateLeftTreePath:new r.x,reloadBatteryModal:new r.x,updateSubmatrixCanvas:new r.x,sendLithiumCellExportData:new r.x,uploadLoading:new r.x,isEmptySignal:new r.x,editPlantLayoutSubject:new r.x,refreshTouParam:new r.x,updateTableSubject:new r.x,searchFormSubject:new r.x,reloadDeviceInspectionSubject:new r.x,reloadPvTableDataSubject:new r.x,updateSubjectReportTable:new r.x,reloadSystemListDataSubject:new r.x,reloadPlanningDetailsSubject:new r.x,reloadStationListSubject:new r.x,changeCompany:new r.x,checkIfCompanySupportPoverty:new r.x,removeNewDeviceListSubject:new r.x,validateDeviceListSubject:new r.x,reloadCompanySubject:new r.x,physicalSwitchTreeSubject:new r.x,logicalSwitchTreeSubject:new r.x,reloadStaLicenseListSubject:new r.x,reloadsubmatrixOverviewSubject:new r.x,updateToolbarBtnSubject:new r.x,updateModalTable:new r.x,updatExpandedRowKeys:new r.x,updateSearchConditionSub:new r.x,updateTrackTable:new r.x}},91650:(e,t,n)=>{\"use strict\";n.d(t,{Ne:()=>s,Qp:()=>r,ZP:()=>a,st:()=>i});const r=48,i=(e,t,n)=>e<24?t+2*e:n+2*(e-24),o=(e,t,n)=>e<24?t+3*e:n+2*(e-24),a={basicSignals:[10010,10002,20029,21001,50001,50002,50003,50004,50005,50006,50007,50008,50009,50010,50011,50012,50013,50014,50015,50021,50023],pvSignals:Array(r).fill(0).map(((e,t)=>i(t,22001,22050))),pvConfigSignals:Array(r).fill(0).map(((e,t)=>i(t,22002,22051))),pvInputVSignals:Array(r).fill(0).map(((e,t)=>o(t,11001,11072))),pvInputASignals:Array(r).fill(0).map(((e,t)=>o(t,11002,11073))),pvStatusSignals:Array(r).fill(0).map(((e,t)=>14001+t))},s=new Set([230154823,230320283,230154824,230200061,230190101,20014,230320486,230190116,230190136,230102787,230102792,230223895,230223903,230200223,230700059,230700179,230200219])},61859:(e,t,n)=>{\"use strict\";n.d(t,{Bw:()=>o,J3:()=>i,X:()=>s,Xe:()=>a,kD:()=>l,nZ:()=>r});const r={currentTime:\"#DDDDDD\",PVInverterPower:\"#00B767\",aiDisAndChargePower:\"#2162D3\",userCapPower:\"#F76354\",limitPower:\"#999999\",PVForecastPower:\"#00B76766\",loadForecastPower:\"#F7635466\",buyCapPower:\"#99ABED\",buyCapPrice:\"#F46465\",onGridPrice:\"#EEBA18\",socEMMA:\"#B62BF799\",socDefault:\"#B62BF7\"},i={currentTime:\"#DDDDDD\",PVInverterPower:\"#18CF87\",PVInverterPowerArea:\"#18CF8733\",storeInPower:\"#038BA8\",storeInPowerArea:\"#038BA833\",storeOutPower:\"#AC44FB\",storeOutPowerArea:\"#AC44FB33\",userCapPower:\"#F76354\",userCapPowerArea:\"#F7635433\",limitPower:\"#999999\",PVForecastPower:\"#18CF87\",loadForecastPower:\"#F76354\",socEMMA:\"#B62BF7\",socEMMAArea:\"#B62BF733\",socDefault:\"#B62BF7\",powerPrice:\"#F59869\",loadPower:\"#FF8400\",loadPowerArea:\"#FF840033\",gridPower:\"#111A2C66\",gridPowerArea:\"#111A2C33\",storePowerDefault:\"#2162D3\",storePowerDefaultArea:\"#2162D333\",storePowerAi:\"#B79BF7\",storePowerAiArea:\"#B79BF733\"},o={percent:{selfUsePowerRatioByProductColor:\" #1AAC6E\",onGridPowerRatioColor:\" #92E143\",selfUsePowerRatioByUseColor:\"#FF8400\",buyPowerColor:\"#FFD685\",businessGeneratorPowerColor:\"#EE8FD8\"},power:{productPowerColor:\"#6ACA94\",usePowerColor:\"#FF8400\",chargeAndDisChargePowerColor:\"#2162D3\",businessChargePowerColor:\"#BD72F0FF\",bigScreenMeterActivePowerColor:\"#7b7d82\",meterActivePowerColor:\"#111A2C66\"},electricity:{disGridPowerColor:\"#2DA769\",productPowerColor:\"#90DCAE\",onGridPowerColor:\"#EC6F1A\",usePowerColor:\"#F7BC92\",dischargePowerColor:\"#6ACA94\",chargePowerColor:\"#F59869\",businessChargePowerColor:\"#BD72F0\",radiationDosePowerColor:\"#FDC100\"}},a=[[\"#5990FD\"],[\"#8EBDFC\",\"#357DF9\"],[\"#BBDAFD\",\"#5990FD\",\"#0A59F7\"],[\"#BBDAFD\",\"#5990FD\",\"#0A59F7\",\"#032EA2\"],[\"#BBDAFD\",\"#8EBDFC\",\"#5990FD\",\"#357DF9\",\"#0A59F7\"],[\"#BBDAFD\",\"#8EBDFC\",\"#5990FD\",\"#357DF9\",\"#0A59F7\",\"#0642CC\"],[\"#BBDAFD\",\"#8EBDFC\",\"#5990FD\",\"#357DF9\",\"#0A59F7\",\"#0642CC\",\"#032EA2\"],[\"#E3EDFF\",\"#BBDAFD\",\"#8EBDFC\",\"#5990FD\",\"#357DF9\",\"#0A59F7\",\"#0642CC\",\"#032EA2\"]],s=[[\"#6ACA94\"],[\"#90DCAE\",\"#49B97D\"],[\"#BAEDCD\",\"#6ACA94\",\"#2DA769\"],[\"#BAEDCD\",\"#6ACA94\",\"#2DA769\",\"#107A4C\"],[\"#BAEDCD\",\"#90DCAE\",\"#49B97D\",\"#1D905B\",\"#107A4C\"],[\"#BAEDCD\",\"#90DCAE\",\"#6ACA94\",\"#2DA769\",\"#1D905B\",\"#107A4C\"],[\"#BAEDCD\",\"#90DCAE\",\"#6ACA94\",\"#49B97D\",\"#2DA769\",\"#1D905B\",\"#107A4C\"],[\"#D6F9E3\",\"#BAEDCD\",\"#90DCAE\",\"#6ACA94\",\"#49B97D\",\"#2DA769\",\"#1D905B\",\"#107A4C\"]],l={percent:{selfProduceCapColor:\"#36c18d\",ongridPowerColor:\"#3a511c\",selfUsePowerByUseColor:\"#f69e39\",buyPowerColor:\"#5d4a23\",businessGeneratorPowerColor:\"#EE8FD8\"}}},95899:(e,t,n)=>{\"use strict\";n.d(t,{My:()=>r,aL:()=>o,ap:()=>i});const r=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR\\n0IArs4c6QAAARxJREFUOBGdkjGKwkAUhh1J5RnEA4hVsLAQtrASSZaksl/UG2zjRZZF7CwUCckGO5tdsPQWNlvYaZcYvxfIEtCsGR8\\nMkzjzff/MM6qiWa7r1qMo6oN9Ub9Kh3cc5yWO4wDmO0mSrlKqWS0rEJjkDftnJL8y7xBYpU6QS/4keQI4Q/BmGEbr4QkyGHBM8jtgK\\nmG2Pc87/CvIw2EYrmzbHpI+InmA7AdJpfAK92D2f0hyBhcKysJ3BTrwjUAXFsFfEzOYJk2yhrF+c2eB8pU2MQ8HQbCUbrPpISwixeY\\n281aSdWERyBUGjPUzsAgMkvnIko5lWXPeXUb6P3My+eoajKI6m6Y5FcECwaVK8dzzfX8vBL8dea8V0aydWLtcAToPzSi/IA09AAAAA\\nElFTkSuQmCC\",i=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0\\nIArs4c6QAAAZNJREFUOBGFU71Kw1AUzk/BDgmClThJ8RUc3Fx0ckhrhzxEdRAHZ8FJ6gM4uGRKBpcYBzcfR2kVLIjQoEn8vss91xpK\\ne6E95/u5J+eem9jWgtXr9UZ1XZ9Daols2/ZDnufHgiU6kjTi0HGcXd/3N/hrt9sd6If9fn+74bPsMAzvQB40hB3P84I0Td+Fh2+CLm\\nbo7Fs4xOcWyEskFYR113VvKCJ+zW/W3B4iO7HKsrxAmGLvFbGF1k5x7lQB/KGYDW5fMHNygukFd0IsMxgjD8QwGAy6VVVlgpmTE6y9\\nE2JVANUJtkhw4QjkzROZa44yF718qLmmMYqYDigsW9r71wEmzgl3oihyl22kRg+9uGbVgTpCkiQf0MqiKDZXFdCenyzLpvTKEDl5dr\\nHyGPTA+yYPMgVAsCUzSDEsiGaA1EwBVOZQVAd4fV+Ar2Uzc3IaB9qroPlY0NYrGHXXcRzPkI/0Bgsfkcnh62rv/wKY6iOEW7xlFD5l\\ncyP6wGfwDoWff1ksbI5Q5AjimhgasUD7T+joXvhfCIeOYLMiLlsAAAAASUVORK5CYII=\",o=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAAXN\\nSR0IArs4c6QAAANFJREFUKBVjYMAB/Pz8buOQYmDCJfH//38VXHI4NeHSABIfAE1BQUGS+JwEDBhxmDzceb9//94HlMiESSDT/v7+W\\nUD+QZgYXBMzM7MnULAMXSOIDwzJUiYmJg+YJkYYA0QHBAQo/Pv3bz8jI2M3kJ4KVJgN1eC4YcOGBzC1TECT2mAckARQoSNIIUgMmwa\\nQeiagRCVME4iGmqgHdK4XOzu7FrINIHmQekZfX98nQNOTN27cuBMkiA8AA8QdqGkOI5DhBWTMBGIZfBqgck+BLkgFABVuVhi2kpwBA\\nAAAAElFTkSuQmCC\"},69131:(e,t,n)=>{\"use strict\";n.d(t,{v:()=>r});const r={app_startCronTaskOfLocale:6e3,activateStatisticDownload:3e3,devicePropConfigModal_freshStatus:3e3,bigScreen_loadHeaderData:1e3,dailyStationRank_updateStationRank:18e4,homeContainer_refreshCardData:18e4,homeKpi_updatePlant:18e4,screenBottom_load:15e3,messageContainer_getNoReadCount:6e5,messagePublish_refreshMessageList:5e3,monitorConfigForm_getConfigStatus:1e4,monitorAirConditioner_refreshRealTime:1e3,monitorCharge_RealTime:1e3,monitorStationDcDcOverview_getDcDcData:1e3,monitorStationMpptDetails_getOutputList:5e3,monitorPcsDetail_loadPcsData:1e3,monitorStorageBoxDetail_getRealTime:1e3,monitorStorageBoxOverview:{getChargeDischargePower:18e4,getDeviceStatus:1e3,getStatusInfo:1e3,getRunningInfo:1e3},monitorStsOverview_getStatisticsList:1e3,monitorTcuDetail_getRealTime:18e4,devicePropConfigModal_getFreshStatus:3e3,optimizerRealTimeInfo_loadOptList:1e3,optimizerSearch_getCurrentProgress:1e4,regulationModal_presetResult:2e3,storageDetailInfo_getDcData:18e4,pvTable_reloadPvTable:18e4,dcNetwork_reloadNetWork:100,deviceRealtimePage:{loadRealTimeInfo:1e3,sampleMeterRealTime:1e3},exportExporting_setText:200,paramTaskList_getPollParamData:1e4,powerAndProfit_loadData:18e4,reportDownload_refreshTaskList:3e3,baseDataLoader_load:3e5,storageBoxAndBatteryCabinet_dataLoad:1e3,autoGenerateEnhancer_queryStatus:5e3,energyFlowLiveDataIcon_loadLiveEnergyFlowData:1e3,monitorEnergyFlow_refreshBoxStatus:5e3,revenueTrends_getNcoPowerAndProfit:1e3,monitorBusinessStationOverview_getStationInfo:1e3,monitorStationOverview_getStationInfo:1e3,monitorSubmatrixOverview_querySubMatrixInfo:1e3,companyMirgrationOperation_setReloadTab:3e4,customSummary_loadTableData:1e4,dataRepairTable_loadTableData:18e4,deviceUpgradeTable_queryTaskProgress:5e3,licenseLoad_refreshTable:5e3,licenseLogout_refreshTable:5e3,licenseDownload_doLoadLicenseExportList:3e3,inspectionFautyDeviceManagement_loadNcoSearchList:8e3,userDataExport_loadExportList:3e3,alarmToolBar_refresh:1e3,dcLogOutput_refreshTable:2e3,downloadManagement_loadExportTask:3e3,powerAndProfit_loadNcoPowerAndProfit:18e4,tasksManagerModal_getTaskList:2e3,defectProgress_loadDisDefectProgress:1e4,componentDiagnosisTable_loadTableData:1e4,businessStationRunningStatusRefresh:18e4,activateStatistic_check_task:3e3,activateStatistic_check_task_first:1e3,emmaMigrateTaskRunningStatusRefresh:5e3}},8411:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>r});const r=e=>{switch(e){case\"date\":case\"hour\":default:return\"2\";case\"month\":case\"timeRange\":return\"4\";case\"year\":return\"5\";case\"lifetime\":return\"6\"}}},4905:(e,t,n)=>{\"use strict\";n.d(t,{A5:()=>T,J6:()=>g,JI:()=>S,J_:()=>x,Jq:()=>E,Vb:()=>y,_5:()=>C,dR:()=>b,js:()=>m,qG:()=>w,s1:()=>v,uf:()=>A});var r=n(13528),i=n(96299),o=n(4342),a=n(44184),s=n(99073);const[l,c,u,d]=[1e9,1e6,1e3,.001],[p,f,h]=[1e4,1e8,1e12],m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(e===s.lH||e===s.Nw)return{unit:i.Z.intl.formatMessage({id:\"neteco.pvms.unit.KW\"}),value:s.lH,multiple:1};const n=Number(e),r=[i.Z.intl.formatMessage({id:\"neteco.pvms.unit.KW\"}),i.Z.intl.formatMessage({id:\"neteco.pvms.unit.MW\"}),i.Z.intl.formatMessage({id:\"neteco.pvms.unit.GW\"})];let o=n.toFixed(t);const a=1e3,l=r.length;for(let e=0;e<l;e+=1){if(Math.abs(o)<a||e===l-1)return{value:o,unit:r[e],multiple:a**e};o=(o/a).toFixed(t)}},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=Number(e);let r={value:n.toFixed(t),unit:\"kWp\"};return Math.abs(n/c)>1?r={value:(n/c).toFixed(t),unit:\"GWp\"}:Math.abs(n/u)>1?r={value:(n/u).toFixed(t),unit:\"MWp\"}:Math.abs(n/d)<1&&(r={value:(n/d).toFixed(t),unit:\"Wp\"}),r},v=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=Number(e),r=window.neteco.i18n.getLocale();let o={value:n.toFixed(2),unit:i.Z.intl.formatMessage({id:\"neteco.pvms.unit.kWhUnit\"}),multiple:1};if(t&&\"zh-cn\"===r){if(\"--\"===e||\"-\"===e)return{value:\"--\",unit:\"度\",multiple:1};o=Math.abs(n/h)>1?{value:(n/h).toFixed(2),unit:\"万亿度\",multiple:h}:Math.abs(n/f)>1?{value:(n/f).toFixed(2),unit:\"亿度\",multiple:f}:Math.abs(n/p)>1?{value:(n/p).toFixed(2),unit:\"万度\",multiple:p}:{value:n.toFixed(2),unit:\"度\",multiple:1}}else\"--\"===e||\"-\"===e?o={...o,value:\"--\"}:Math.abs(n/c)>1?o={value:(n/c).toFixed(2),unit:i.Z.intl.formatMessage({id:\"nco.unit.GWh\"}),multiple:c}:Math.abs(n/u)>1&&(o={value:(n/u).toFixed(2),unit:i.Z.intl.formatMessage({id:\"nco.unit.MWh\"}),multiple:u});return o},y=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=10**t;return Math.abs(e)>=l?Math.round(e/l*r)/r+\"G\":Math.abs(e)>=c?Math.round(e/c*r)/r+\"M\":Math.abs(e)>=u?Math.round(e/u*r)/r+\"K\":n?Number(e).toFixed(t):Number(e)},b=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,r.Lq)(y(e,t,n))},S=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e&&0!==e||\"--\"===e||\"-\"===e)return{value:\"--\",unit:t,multiple:1};if(\"元\"!==t)return{value:y(e,2),unit:t,multiple:1};let r={};const i=Number(e);return r=Math.abs(i/h)>1||n&&Math.abs(i/h)>=1?{value:(i/h).toFixed(2),unit:\"万亿元\",multiple:h}:Math.abs(i/f)>1||n&&Math.abs(i/f)>=1?{value:(i/f).toFixed(2),unit:\"亿元\",multiple:f}:Math.abs(i/p)>1||n&&Math.abs(i/p)>=1?{value:(i/p).toFixed(2),unit:\"万元\",multiple:p}:{value:i.toFixed(2),unit:\"元\",multiple:1},r},x=e=>{let t=Number.parseFloat(null==e?void 0:e.toString());if(isNaN(Number(t)))return\"--\";let n=null==e?void 0:e.toString().substr(-1);return n=[\"G\",\"M\",\"K\"].includes(n)?n:\"\",(0,r.af)(t.toFixed(2))+n},w=(e,t,n)=>(0,a.lF)(t)?S(e,t,n):((e,t)=>{if(!e&&0!==e||\"--\"===e||\"-\"===e)return{value:\"--\",unit:\"\",multiple:1};let n={};const r=Number(e);return n=Math.abs(r/1e9)>1||t&&Math.abs(r/1e9)>=1?{value:(r/1e9).toFixed(2),unit:\"G\",multiple:1e9}:Math.abs(r/1e6)>1||t&&Math.abs(r/1e6)>=1?{value:(r/1e6).toFixed(2),unit:\"M\",multiple:1e6}:Math.abs(r/1e3)>1||t&&Math.abs(r/1e3)>=1?{value:(r/1e3).toFixed(2),unit:\"k\",multiple:1e3}:{value:r.toFixed(2),unit:\"\",multiple:1},n})(e,n),C=(e,t)=>{const n=Number(e);let r={value:n.toFixed(2),unit:\"kg\",multiple:1};return n/u>1&&(r={value:(n/u).toFixed(2),multiple:1e3,unit:t.formatMessage({id:\"neteco.pvms.partials.plants.index.socialContribution.ton\"})}),r},T=(e,t)=>{const[n,r,i,a,s]=[1e3,1e4,1e6,1e8,1e12],l=(0,o.ej)(\"locale\")||\"en-us\";let c,u=2;if(0===t&&(e*=n),e/n<1&&0!==t)return u=3,c=(e/n).toFixed(u),c;if(c=(e/n).toFixed(u),\"zh-cn\"===l){if(0===t&&e/n/r<=1)return u=0,c=(e/n).toFixed(u),c;c/s>1?c=(e=(c/s).toFixed(u))?e+\"万亿\":\"\":c/a>1&&(c=(e=(c/a).toFixed(u))?e+\"亿\":\"\"),c/r>1&&(c=(e=(c/r).toFixed(u))?e+\"万\":\"\")}else{if(0===t&&e/n/n<=1)return u=0,c=(e/n).toFixed(u),c;c/a>1?c=(e=(c/a).toFixed(u))?e+\"G\":\"\":c/i>1?c=(e=(c/i).toFixed(u))?e+\"M\":\"\":c/n>1&&(c=(e=(c/n).toFixed(u))?e+\"K\":\"\")}return c};function A(e){const t=i.Z.intl.locale||\"en-us\";return new Intl.NumberFormat(t).format(e)}function E(e,t){return e?[\"MWp\",\"MW\"].includes(t)?1e6*e:[\"kWp\",\"kW\"].includes(t)?1e3*e:Number(e):0}},20928:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(44184);const{neteco:i}=window,o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=\"\";const a=n.method;delete n.method;let s=e;if(!(0,r.xb)(t)){s+=\"?\";for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s+=`&${e}=${t[e]}`);s=s.replace(/\\&$/,\"\")}let l={headers:{\"Content-Type\":\"application/json\",roarand:i.request.getRand()},method:a||\"POST\"};return(0,r.xb)(n)||(l={...l,body:JSON.stringify(n)}),new Promise(((e,t)=>{fetch(s,l).then((e=>{200!==e.status&&t(e);const n=e.headers.get(\"Content-Disposition\");return n&&(o=decodeURIComponent(n.split(/[F|f]ilename=/)[1]).replace(/^\\\"|\\\"$/g,\"\")),e.blob()})).then((t=>{if(t){const n=window.top.document.createElement(\"a\");n.download=o,n.style.display=\"none\",n.href=window.URL.createObjectURL(t),window.top.document.body.appendChild(n),n.click(),window.top.document.body.removeChild(n),e(\"success\")}})).catch((e=>{t(e)}))}))}},68020:(e,t,n)=>{\"use strict\";n.d(t,{VI:()=>u,Zz:()=>f,_z:()=>g,af:()=>w,gJ:()=>S,h0:()=>b,nm:()=>m,p1:()=>d,rJ:()=>p,t_:()=>y,uT:()=>A,vp:()=>h,w8:()=>c,zy:()=>l});var r=n(37920),i=n.n(r),o=n(13528),a=n(64923);const s=\"/rest/pvms/web/electricityprice/\",l=`${s}get-price`,c=`${s}update-price`,u=`${s}get-default-price`,d=`${s}set-default-price`,p=\"0\",f=\"1\",h=\"2\",m=()=>[{beginMonth:1,beginDay:1,endMonth:12,endDay:31,hourRange:[{beginHour:0,endHour:24,price:void 0}]}],g=()=>({stationCode:\"-1\",ongridPrice:m(),purchasePrice:m()}),v=e=>{const t=[];return e.forEach((e=>{const n=e.price.beginDateString.split(\"-\"),r=e.price.endDateString.split(\"-\");e.priceItem.forEach((e=>{e.price=(0,o.xP)(e.price)})),t.push({beginMonth:parseInt(n[0]),beginDay:parseInt(n[1]),endMonth:parseInt(r[0]),endDay:parseInt(r[1]),hourRange:e.priceItem})})),t},y=(e,t,n)=>({stationCode:e,ongridPrice:v(t),purchasePrice:v(n)}),b=(e,t,n,r)=>{const i={stationCode:e,priceType:t};return t===p?(i.updateType=0,i.ongridPrice=v(n),i.purchasePrice=v(r)):t===f?(i.updateType=1,i.ongridPrice=v(n),i.purchasePrice=[]):t===h&&(i.updateType=2,i.ongridPrice=[],i.purchasePrice=v(r)),i},S=e=>{const t=i()().year();return e.map((e=>{const n=e.beginMonth.toString().padStart(2,\"0\"),r=e.beginDay.toString().padStart(2,\"0\"),o=e.endMonth.toString().padStart(2,\"0\"),a=e.endDay.toString().padStart(2,\"0\");return{price:{beginDateString:`${n}-${r}`,endDateString:`${o}-${a}`,beginDate:i()(`${t}-${n}-${r}`,\"YYYY-MM-DD\"),endDate:i()(`${t}-${o}-${a}`,\"YYYY-MM-DD\")},priceItem:e.hourRange}}))},x=e=>{if(1!==e.length)return!1;const t=e[0];return\"01-01\"===t.price.beginDateString&&\"12-31\"===t.price.endDateString&&!!t.priceItem[0]&&!(0!==t.priceItem[0].beginHour||24!==t.priceItem[0].endHour||void 0!==t.priceItem[0].price)},w=(e,t,n)=>!(e&&e.changed)||C(e,t,n),C=(e,t,n)=>{const r=x(e.onGridPrice),i=x(e.purchasePrice);let o=!0,a=!0;return!(!r&&(o=T(e,t,n,[\"onGridPrice\"]),!o))&&(i||(a=T(e,t,n,[\"purchasePrice\"])),o&&a)},T=(e,t,n,r)=>{let i;return i=1===r.length?(0,a.S)(n,e.onGridPrice,e.purchasePrice,r[0]):(0,a.S)(n,e.onGridPrice,e.purchasePrice,\"onGridPrice\")&&(0,a.S)(n,e.onGridPrice,e.purchasePrice,\"purchasePrice\"),!!i||(t&&t.forEach((e=>{e&&e()})),!1)},A=e=>{let t,n;return e.onGridPrice&&(t=x(e.onGridPrice)?[]:e.onGridPrice),e.purchasePrice&&(n=x(e.purchasePrice)?[]:e.purchasePrice),{ongridPrice:t,purchasePrice:n}}},72673:(e,t,n)=>{\"use strict\";n.d(t,{L:()=>i,h:()=>r});const r=new RegExp(\"^[a-zA-Z0-9!#$%&'*+\\\\/=?^_`{|}~.-]+@[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?(\\\\.[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?)+$\"),i=(e,t)=>0===e.trim().length||e.length>64?t.formatMessage({id:\"ncoCompanyManagement.userBasicInfo.message.inputValidEmail\"}):r.test(e)?void 0:t.formatMessage({id:\"ncoCompanyManagement.userBasicInfo.message.inputValidEmail\"})},56730:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(37920),i=n.n(r);const o=e=>{switch(e){case\"date\":default:return i()().startOf(\"day\");case\"month\":return i()().startOf(\"month\");case\"year\":case\"lifetime\":return i()().startOf(\"year\");case\"timeRange\":return[i()().startOf(\"month\"),i()().startOf(\"day\")]}}},90338:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>r});const r=e=>e?-1*new Date(e).getTimezoneOffset()/60:-1*(new Date).getTimezoneOffset()/60},5807:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(44184),i=n(53137),o=n(59516);const a=new class{constructor(){this.currentComp=null,this.interfaceRights=[o.kZj,o.vZ,o.$$w,o.kRj,o.FyL,o.Ebp,o.umM,o.F72],this.useCache=!0}async init(){const{success:e,data:t}=await(0,i.bX)(\"/rest/neteco/web/organization/v2/company/current\");return e?t.data:{}}initSync(){let e=\"\";return neteco.request.get({url:\"/rest/neteco/web/organization/v2/company/current\",async:!1,data:{},dataType:\"json\",success:t=>{t.success&&(this.currentComp=t.data,e=t.data.currency)}}),e}async getCurrentCompany(){return this.useCache||(this.currentComp=await this.init()),(0,o.agq)(this.interfaceRights)?((0,r.xb)(this.currentComp)&&(this.currentComp=await this.init()),this.currentComp):{}}getCurrency(){return(0,o.agq)(this.interfaceRights)?(0,r.xb)(this.currentComp)?this.initSync():null!==(e=null===(t=this.currentComp)||void 0===t?void 0:t.currency)&&void 0!==e?e:\"\":\"\";var e,t}closeCache(){this.useCache=!1}}},27051:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>l});var r=n(44184),i=n(49453),o=n(96299);const a=[{value:\"de_DE\",label:\"Deutsch\",intl:\"neteco.pvms.sysparamset.about.de_de\"},{value:\"en_US\",label:\"English\",intl:\"neteco.pvms.sysparamset.about.en_us\"},{value:\"es_ES\",label:\"Español\",intl:\"neteco.pvms.sysparamset.about.es_es\"},{value:\"fr_FR\",label:\"Français\",intl:\"neteco.pvms.sysparamset.about.fr_fr\"},{value:\"it_IT\",label:\"Italiano\",intl:\"neteco.pvms.sysparamset.about.it_it\"},{value:\"hu_HU\",label:\"Magyar\",intl:\"neteco.pvms.sysparamset.about.hu_hu\"},{value:\"nl_NL\",label:\"Nederlands\",intl:\"neteco.pvms.sysparamset.about.nl_nl\"},{value:\"pl_PL\",label:\"Polski\",intl:\"neteco.pvms.sysparamset.about.pl_pl\"},{value:\"pt_BR\",label:\"Português\",intl:\"neteco.pvms.sysparamset.about.pt_br\"},{value:\"vi_VN\",label:\"Tiếng Việt\",intl:\"neteco.pvms.sysparamset.about.vi_vn\"},{value:\"tr_TR\",label:\"Türkçe\",intl:\"neteco.pvms.sysparamset.about.tr_tr\"},{value:\"uk_UA\",label:\"Українська\",intl:\"neteco.pvms.sysparamset.about.uk_ua\"},{value:\"zh_CN\",label:\"中文(简体)\",intl:\"neteco.pvms.sysparamset.about.zh_cn\"},{value:\"zh_TW\",label:\"中文(繁體)\",intl:\"neteco.pvms.sysparamset.about.zh_tw\"},{value:\"ja_JP\",label:\"日本語\",intl:\"neteco.pvms.sysparamset.about.ja_jp\"},{value:\"ko_KR\",label:\"한국어\",intl:\"neteco.pvms.sysparamset.about.ko_kr\"},{value:\"ro_RO\",label:\"Română\",intl:\"neteco.pvms.sysparamset.about.ro_ro\"},{value:\"cs_CZ\",label:\"Čeština\",intl:\"neteco.pvms.sysparamset.about.cs_cz\"}],s=[{value:\"th_TH\",label:\"ไทย\",intl:\"neteco.pvms.sysparamset.about.th_th\"}],l=new class{async init(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[t,n]=await(0,r.AM)((0,i.U2)(\"/rest/dp/pvms/pvmswebsite/v1/languages\"));if(t||(0,r.xb)(n))return a;let l=a.concat(s).filter((e=>n.includes(e.value))).map((e=>({...e,label:o.Z.intl.formatMessage({id:e.intl})})));return e&&(l=l.map((e=>({...e,value:e.value.replace(\"_\",\"-\")})))),l}getFullLocaleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isHyphen:t=!1,isLowercase:n=!1}=e;let r=a.concat(s).map((e=>({...e,label:o.Z.intl.formatMessage({id:e.intl})})));return t&&(r=r.map((e=>({...e,value:e.value.replace(\"_\",\"-\")})))),n&&(r=r.map((e=>({...e,value:e.value.toLowerCase()})))),r}replaceIntlLang(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(null===(t=this.getFullLocaleList(n).find((t=>t.value.toLowerCase()===e.toLowerCase())))||void 0===t?void 0:t.label)||\"\"}}},48820:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>u});var r=n(30912),i=n(37920),o=n.n(i),a=n(90338),s=n(44184),l=n(49453),c=n(59516);const u=new class{constructor(){this.stationListRes=null,this.interfaceRights=[c.sZ,c.oz1],this.params=this.paramsBefore={curPage:1,pageSize:10,gridConnectedTime:\"\",queryTime:o()().startOf(\"day\").valueOf(),timeZone:(0,a.Z)(),sortId:\"createTime\",sortDir:\"DESC\",locale:(0,r.Z)(\"_\")}}async init(){return await(0,s.AM)((0,l.v_)(\"/rest/pvms/web/station/v1/station/station-list\",this.params))}UpdateParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{searchName:i,deviceType:s,installedCapacity:l,gridTime:c,areaName:u,plantType:d,deviceEsn:p,plantStatus:f}=e,{page:h,pageSize:m}=t,{sortBy:g,sortOrder:v}=n,y=(c?c.map(((e,t)=>t?o()(e).endOf(\"day\").valueOf():o()(e).startOf(\"day\").valueOf())):[]).join();this.params={curPage:h||1,searchName:i&&i.trim(),pageSize:m||10,deviceType:s,deviceEsn:p,plantType:d,gridConnectedTime:y,queryTime:o()().startOf(\"day\").valueOf(),timeZone:(0,a.Z)(),installedCapacity:l,area:u,sortId:g||\"createTime\",sortDir:\"ascend\"===v?\"ASC\":\"DESC\",locale:(0,r.Z)(\"_\"),plantStatus:f}}isObjectChanged(e,t){return JSON.stringify(e)!==JSON.stringify(t)}async getStationList(e,t,n){return(0,c.agq)(this.interfaceRights)?(this.UpdateParams(e,t,n),this.init()):[]}async getStationListGlobalCache(e,t,n,r){return(0,c.agq)(this.interfaceRights)?(this.UpdateParams(e,t,n),r?this.stationListRes=await this.init():!(0,s.xb)(this.stationListRes)&&!this.isObjectChanged(this.paramsBefore,this.params)||r||(this.paramsBefore=this.params,this.stationListRes=await this.init()),this.stationListRes):[]}}},42271:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(44184),i=n(49453);const o=new class{constructor(){this.supportRisk=null}async init(){const[e,t]=await(0,r.AM)((0,i.U2)(\"/rest/dp/pvms/webservice/v1/validate/risk-control-switch\"));return!e&&t}async getSupportRisk(){return(0,r.xb)(this.supportRisk)&&(this.supportRisk=await this.init()),this.supportRisk}}},69896:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(44184),i=n(49453);const o=new class{constructor(){this.systemConfig=null}async init(){const[e,t]=await(0,r.AM)((0,i.Sg)(\"/rest/pvms/web/systemtype/v1/system-configs\"));return e||null==t||!t.success?{}:null==t?void 0:t.data}async getSystemConfigs(){return(0,r.xb)(this.systemConfig)&&(this.systemConfig=await this.init()),this.systemConfig}}},98298:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a});var r=n(44184),i=n(30912),o=n(49453);const a=new class{constructor(){this.areaList=null,this.regionAreaList=null,this.countriesCacheMap=new Map}async init(e){var t;const[n,a]=await(0,r.AM)((0,o.U2)(\"/rest/pvms/web/station/v1/station/area-list\",{isRegionQuery:e,locale:(0,i.Z)(\"_\")}));return n||null==a||!a.success?[]:(null==a||a.data.forEach((e=>{const{areaId:t,areaName:n}=e||{};this.countriesCacheMap.set(Number(t),n)})),null!==(t=null==a?void 0:a.data)&&void 0!==t?t:[])}async loadTimeZoneList(e){return e?((0,r.xb)(this.regionAreaList)&&(this.regionAreaList=await this.init(e)),this.regionAreaList):((0,r.xb)(this.areaList)&&(this.areaList=await this.init()),this.areaList)}getCountryById(e){return this.countriesCacheMap.get(Number(e))}}},65055:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>r}),n(31464);const r=(e,t)=>{let n=\"\";const r=\"zh-cn\"===window.neteco.i18n.getLocale();return e?(n=t.find((t=>t.id===String(e)))||{},(r&&1===e?n.i18n:n.symbol)||\"\"):n}},6196:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>i});const{neteco:r}=window,i=e=>{let{tipId:t}=e;r.help.create({tipId:t})}},61906:(e,t,n)=>{\"use strict\";n.d(t,{nP:()=>g,LX:()=>f,qM:()=>a,rf:()=>l});var r=n(88391);n(69587),n(96315),n(35217);var i=n(95693),o=n(99073);function a(){const e=(0,i.Z)();return{translate:(t,n)=>{const r=(null==t?void 0:t.id)||t;return r?e.formatMessage({id:r},n):o.lH},intl:e}}var s=n(44184);function l(e,t){const n=(0,r.useRef)(!1);(0,r.useEffect)((()=>()=>{n.current=!1}),[]),(0,r.useEffect)((()=>{if(n.current)return e();n.current=!0}),t)}function c(){return\"hidden\"!==document.visibilityState}const u=[];window.addEventListener(\"visibilitychange\",(()=>{if(c())for(let e=0;e<u.length;e++)(0,u[e])()}),!1),new Map,new Map;const d=[],p=()=>{if(c()&&(void 0===navigator.onLine||navigator.onLine))for(let e=0;e<d.length;e++)(0,d[e])()};function f(e,t){(0,r.useEffect)((()=>{(0,s.mf)(e)&&e()}),t)}window.addEventListener(\"visibilitychange\",p,!1),window.addEventListener(\"focus\",p,!1),n(37825);var h=n(2326),m=n(80770);function g(e){let{intl:t,message:n,isNewStyle:i,isMenu:o=!1}=e;const[a,l]=(0,r.useState)(!1),c=(0,h.k6)();return[a,l,e=>!a||((0,m.ST)(n,(()=>{l(!1),o?c.goBack():(0,s.mf)(e)&&e()}),null,t,null,i),!1)]}},34754:(e,t,n)=>{\"use strict\";n.d(t,{k:()=>l,w:()=>s});var r=n(31251),i=n(53137),o=n(37825);const a=\"isDCorString\";async function s(){let e=(0,r.rC)()===o.M5.aiboost;const t=await(0,i.EM)();let n=e||t;sessionStorage.setItem(a,n)}function l(){return\"true\"===sessionStorage.getItem(a)}},27022:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>i});var r=n(3922);const i=e=>{let{latitude:t,longitude:n}=e;return(0,r.default)(t)&&t>-90&&t<90&&(0,r.default)(n)&&n>=-180&&n<=180}},7812:(e,t,n)=>{\"use strict\";n.d(t,{CT:()=>o,JK:()=>a,NB:()=>i});var r=n(26887);const i=(e,t)=>{r.ZP.destroy(),r.ZP.success(e.formatMessage({id:t||\"common.message.success\"}))},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"common.message.failure\";r.ZP.destroy(),r.ZP.error(e.formatMessage({id:t}))},a=e=>{r.ZP.destroy(),r.ZP.open(e)}},59516:(e,t,n)=>{\"use strict\";n.d(t,{$$w:()=>S,$I_:()=>Dt,$b6:()=>oa,$nF:()=>Se,$qC:()=>gt,$zq:()=>Xr,A9j:()=>Ee,AAX:()=>In,AHz:()=>No,AX0:()=>jn,A_k:()=>vo,AnA:()=>ye,Api:()=>Lr,ArY:()=>Vi,Awl:()=>ht,B2d:()=>en,BBj:()=>Or,BDT:()=>Gr,BDX:()=>ho,BNb:()=>ue,BXe:()=>re,Bbh:()=>Hn,BgD:()=>Ce,Bm2:()=>te,Bn7:()=>f,Bqd:()=>Ro,C1W:()=>oe,CPS:()=>Ne,CSW:()=>Yr,Cj9:()=>cr,D60:()=>s,DFz:()=>ro,DKG:()=>Yt,DMu:()=>Co,D_d:()=>D,Dco:()=>Yi,E0$:()=>R,ECm:()=>$n,EFg:()=>hr,EHI:()=>Et,EHm:()=>Wr,EYI:()=>_i,Ebp:()=>Xe,ElI:()=>_,F72:()=>et,FG1:()=>Kt,FT7:()=>u,Fgk:()=>dt,Fm3:()=>wo,Fo6:()=>so,FyL:()=>k,G6y:()=>q,GIM:()=>Me,GJX:()=>ut,GNl:()=>yo,H4e:()=>me,HSx:()=>Ki,HkP:()=>xe,IGc:()=>M,IO6:()=>C,IPK:()=>tn,ITN:()=>vi,ITW:()=>Ke,IVT:()=>nn,IWf:()=>Gt,IaW:()=>St,IdH:()=>ur,Iff:()=>Jt,Ii4:()=>rr,IkG:()=>Kn,ItM:()=>G,J6v:()=>Hi,J8H:()=>on,J8o:()=>Fo,JD1:()=>Mi,Jte:()=>ti,Jw4:()=>ae,K3i:()=>fi,KF:()=>Ht,KGk:()=>Wn,KPU:()=>to,KWA:()=>Fi,KZA:()=>Nr,Kht:()=>nr,Kwj:()=>Ni,Kwq:()=>Ui,L5Y:()=>Ei,Lel:()=>mo,Lhm:()=>kn,MRN:()=>Pt,MgI:()=>na,Mks:()=>Yo,Myr:()=>Jn,N5W:()=>ii,N7r:()=>Ie,N88:()=>Ao,NUq:()=>gi,NYc:()=>yr,Nfv:()=>Gn,Nx_:()=>Sn,O36:()=>sr,O7P:()=>nt,O9c:()=>oo,OjG:()=>It,OmA:()=>tt,OpA:()=>Di,OpH:()=>Ko,Owp:()=>Ft,PJG:()=>Jr,PJW:()=>yn,PcI:()=>sa,PrR:()=>Fr,Pvd:()=>jo,PyK:()=>O,Pyp:()=>Fn,Pzw:()=>ao,QHn:()=>Io,QJC:()=>lo,QNB:()=>Nn,QSs:()=>xt,QqA:()=>zo,Qrv:()=>eo,QtB:()=>Uo,R2A:()=>wi,RJv:()=>lr,RN5:()=>Ir,RcF:()=>Ge,Rek:()=>Ci,RhV:()=>Cr,Rwl:()=>xn,RyF:()=>ze,S9z:()=>U,SBi:()=>Je,SKg:()=>yi,SZV:()=>be,SZq:()=>We,S_2:()=>ee,Slq:()=>Mt,SxK:()=>gn,Sxw:()=>yt,TM9:()=>Ct,TSA:()=>o,TuT:()=>Le,Tvw:()=>ei,Tx6:()=>Er,UG6:()=>rn,Ucq:()=>ge,Umk:()=>wt,Ury:()=>xo,Ux9:()=>Qt,V0i:()=>kr,V9u:()=>mi,VC:()=>h,VNI:()=>Dr,Vcd:()=>F,Vjm:()=>Go,Vss:()=>ko,VtU:()=>x,VwK:()=>Te,W4V:()=>Oi,WL9:()=>pr,Wg_:()=>kt,Wqv:()=>_n,XEj:()=>Oo,Xbd:()=>Y,XcW:()=>Zr,Xpb:()=>ai,Xqw:()=>ce,Xtm:()=>mr,Xvk:()=>vt,YBD:()=>An,Ye1:()=>vr,YqI:()=>sn,Z0j:()=>ct,Z3l:()=>Pn,ZBq:()=>Qr,ZMZ:()=>an,ZNS:()=>zr,ZTu:()=>rt,Zg3:()=>Ii,Ziv:()=>Mr,ZkG:()=>si,Zmx:()=>mn,Zph:()=>Z,ZsC:()=>Ze,ZyP:()=>Ho,_Ez:()=>$r,_G0:()=>Kr,_Wy:()=>De,_iZ:()=>le,_qB:()=>d,a1_:()=>X,a7G:()=>ln,aKR:()=>$i,aOL:()=>pt,aSf:()=>So,aTG:()=>co,agq:()=>Xo,b54:()=>p,bCd:()=>Mo,bHd:()=>ji,bfm:()=>Pr,bxE:()=>de,c3V:()=>Tn,cB9:()=>Ar,cCe:()=>fn,cIG:()=>Ln,cRN:()=>at,cYO:()=>je,ci4:()=>Bt,cu_:()=>Bo,dZE:()=>Zo,dim:()=>Re,dkH:()=>ve,drw:()=>K,dtv:()=>Sr,ePr:()=>dn,emJ:()=>ta,en$:()=>Bi,etf:()=>qn,ewo:()=>bo,fAH:()=>_o,fDk:()=>er,fEB:()=>Vn,fHL:()=>Xi,fKA:()=>Lt,fP:()=>Eo,fSq:()=>Ut,fjL:()=>Yn,fow:()=>c,fr:()=>no,frs:()=>oi,fx9:()=>_r,fxy:()=>Cn,gDF:()=>qe,gDj:()=>z,gI3:()=>br,gTZ:()=>ui,gWq:()=>v,gjO:()=>wr,gvf:()=>di,gxG:()=>Oe,gy1:()=>$,gzZ:()=>Zt,hH0:()=>Ti,hND:()=>Vt,hV2:()=>Ue,hXL:()=>N,hYL:()=>lt,hw6:()=>or,i$n:()=>Wi,iBd:()=>bt,iCR:()=>j,iOf:()=>P,ieb:()=>Dn,jDb:()=>g,jDo:()=>Hr,jIM:()=>Vo,jRf:()=>Mn,jSe:()=>pi,jXC:()=>ri,jmJ:()=>Rr,kAD:()=>Un,kRj:()=>T,kUp:()=>ie,kZj:()=>ir,l3Z:()=>cn,lNZ:()=>Xn,lVp:()=>Qo,las:()=>m,liS:()=>ra,lm$:()=>uo,lw4:()=>Zn,lxn:()=>zi,m$2:()=>ca,m$c:()=>H,mCK:()=>gr,mOu:()=>aa,mai:()=>wn,mrj:()=>Gi,mxS:()=>Zi,myN:()=>fr,n0c:()=>E,nA4:()=>po,nEQ:()=>At,nKO:()=>A,n_C:()=>w,nbt:()=>bi,nsi:()=>se,nu5:()=>Qn,o2t:()=>Xt,o5$:()=>Qe,oAT:()=>Wt,oCx:()=>B,oNu:()=>Lo,ofE:()=>Li,ohQ:()=>mt,oiJ:()=>hi,opv:()=>ki,oz1:()=>li,ozc:()=>qi,p$r:()=>_t,p4n:()=>Jo,pM_:()=>J,pSM:()=>ia,pT5:()=>xi,pW_:()=>Qi,pf:()=>Ur,pg$:()=>I,phi:()=>jt,prC:()=>Fe,psM:()=>Br,q7C:()=>$t,qFt:()=>He,qS6:()=>Ye,qZs:()=>Pi,qa7:()=>ni,ql_:()=>Ri,qv6:()=>Pe,qwz:()=>Rn,rEn:()=>tr,rHz:()=>xr,rLx:()=>En,rQ5:()=>bn,rfP:()=>we,rnn:()=>Q,s3s:()=>Si,s8L:()=>Tr,sE_:()=>To,sFQ:()=>un,sGt:()=>zn,sX$:()=>Ve,sZ:()=>i,shZ:()=>he,sjd:()=>Bn,t2q:()=>Wo,tCm:()=>fo,tGo:()=>Ai,tH$:()=>_e,tH4:()=>$e,tHC:()=>qr,tSF:()=>Ji,teu:()=>ne,tur:()=>ft,u4l:()=>ot,u9:()=>qt,uAD:()=>it,uP:()=>pn,uZN:()=>Rt,umM:()=>W,ut5:()=>ci,v8U:()=>Tt,vOk:()=>Do,vQ6:()=>Vr,vY4:()=>ar,vZ:()=>y,v_v:()=>st,vgM:()=>Ae,viM:()=>fe,wFJ:()=>Ot,wLE:()=>hn,wNZ:()=>Nt,weT:()=>On,wgS:()=>ke,wmg:()=>vn,wov:()=>Po,xQf:()=>la,xfD:()=>dr,xhA:()=>a,yDu:()=>pe,yav:()=>ea,yb:()=>io,yo7:()=>go,zDz:()=>b,zN0:()=>Be,zOd:()=>l,zRd:()=>zt,zVX:()=>L,zcW:()=>V,zz7:()=>jr});var r=n(4342);const i=\"pvms.homePage.stationList\",o=\"pvms.homePage.stationMap\",a=\"pvms.homePage.kpi.menu\",s=\"pvms.homePage.kpi.stationKpi\",l=\"pvms.homePage.kpi.stationStatus\",c=\"pvms.homePage.kpi.realtimeAlarm\",u=\"pvms.homePage.kpi.povertyCompletion\",d=\"pvms.dashboard.menu\",p=\"pvms.dashboard.dashboardSetup\",f=\"pvms.dashboard.stationLevel.config\",h=\"pvms.dashboard.stationLevel.pv\",m=\"pvms.dashboard.stationLevel.ess\",g=\"pvms.dashboard.stationLevel.charge\",v=\"pvms.report.station.subscribe\",y=\"pvms.report.station.export\",b=\"pvms.report.inverter.subscribe\",S=\"pvms.report.inverter.export\",x=\"pvms.report.inverter.subscribe\",w=\"pvms.report.inverter.export\",C=\"pvms.report.energystore.subscribe\",T=\"pvms.report.energystore.export\",A=\"pvms.report.station.view\",E=\"pvms.report.inverter.view\",O=\"pvms.report.inverter.view\",M=\"pvms.report.energystore.view\",P=\"pvms.station.menu\",D=\"pvms.station.query\",I=\"pvms.station.modify\",N=\"pvms.station.create\",_=\"pvms.station.delete\",j=\"pvms.station.export.basic\",k=\"pvms.station.modify.basicInfo\",L=\"pvms.station.modify.devicePv\",R=\"pvms.station.modify.price\",Z=\"pvms.electric.price.purchase\",B=\"pvms.electric.price.ongrid\",F=\"pvms.station.modify.pvconfig\",z=\"pvms.station.modify.otherInfo\",V=\"pvms.station.modify.camera\",H=\"pvms.station.share\",U=\"pvms.station.cancelShare\",G=\"pvms.station.delete.complete\",Y=\"pvms.sation.msp.save\",W=\"pvms.station.singleStation.overview.kpi.setting\",K=\"pvms.station.plantViewPermissions.query\",q=\"pvms.station.plantViewPermissions.modify\",Q=\"pvms.station.migration.execute\",X=\"pvms.station.modify.archives.station.upload\",J=\"pvms.station.modify.archives.station.delete\",$=\"pvms.station.modify.archives.station.view\",ee=\"pvms.station.modify.archives.energyStorage.upload\",te=\"pvms.station.modify.archives.energyStorage.replace\",ne=\"pvms.station.modify.archives.energyStorage.delete\",re=\"pvms.station.modify.archives.energyStorage.refreshInstallEnv\",ie=\"pvms.station.modify.archives.energyStorage.view\",oe=\"pvms.station.modify.archives.energyStorage.approve\",ae=\"pvms.station.singleStation.kiosk.menu\",se=\"pvms.station.singleStation.overview.menu\",le=\"pvms.station.singleStation.overview.menu.screen\",ce=\"pvms.station.singleStation.overview.pv\",ue=\"pvms.station.singleStation.overview.ess\",de=\"pvms.station.singleStation.overview.charge\",pe=\"pvms.station.user.query\",fe=\"pvms.monitor.loadshedding\",he=\"pvms.system.loadshedding.config\",me=\"pvms.station.singleStation.layout.query\",ge=\"pvms.station.singleStation.layout.addDiagram\",ve=\"pvms.station.singleStation.layout.deleteDiagram\",ye=\"pvms.station.singleStation.layout.createLayout\",be=\"pvms.station.singleStation.layout.deleteLayout\",Se=\"pvms.station.migration.query.menu\",xe=\"pvms.station.migration.create\",we=\"pvms.station.migration.revoke\",Ce=\"pvms.station.migration.approval.approval\",Te=\"pvms.station.migration.approval.menu\",Ae=\"pvms.station.license.menu\",Ee=\"pvms.station.license.refresh\",Oe=\"pvms.station.license.query\",Me=\"pvms.plan.menu\",Pe=\"pvms.plan.add\",De=\"pvms.plan.delete\",Ie=\"pvms.plan.export\",Ne=\"pvms.plan.import\",_e=\"pvms.plan.modify\",je=\"pvms.station.auth.menu\",ke=\"pvms.log.gridAuth.menu\",Le=\"pvms.log.gridAuth.query\",Re=\"pvms.log.gridAuth.export\",Ze=\"pvms.diagnosis.powerNormalization\",Be=\"pvms.diagnosis.powerNormalization.query\",Fe=\"pvms.station.diagnose\",ze=\"pvms.station.diagnose.query\",Ve=\"pvms.device.menu\",He=\"pvms.device.system.menu\",Ue=\"pvms.station.shareEMI\",Ge=\"pvms.device.modify\",Ye=\"pvms.device.signalConfig\",We=\"pvms.device.signalQuery\",Ke=\"pvms.device.delete\",qe=\"pvms.device.replace\",Qe=\"pvms.device.detail.remoteRegulating\",Xe=\"pvms.device.detail.deviceInfo\",Je=\"pvms.device.detail.historyInfo\",$e=\"homemgr.charge.mainten.history.view\",et=\"pvms.device.detail.realtimeInfo\",tt=\"pvms.device.export.basicInfo\",nt=\"pvms.device.export.pmData\",rt=\"pvms.device.detail.optimizer.search\",it=\"pvms.device.detail.remoteOnOff\",ot=\"pvms.device.detail.reset\",at=\"pvms.device.detail.search\",st=\"pvms.device.batchRename\",lt=\"pvms.device.detail.alarm.confirm\",ct=\"pvms.device.signalDump.create\",ut=\"pvms.device.universal.sohCheck\",dt=\"pvms.device.ecoSmartLoad.modelpackage.manage\",pt=\"pvms.device.migrate.data.task.manage\",ft=\"pvms.device.migrate.data.task.query\",ht=\"pvms.sunshine.menu\",mt=\"pvms.sunshine.bindExistingStation\",gt=\"pvms.sunshine.bindNewStation\",vt=\"pvms.sunshine.unbind\",yt=\"pvms.upgrade.vermanage.create\",bt=\"pvms.upgrade.vermanage.modify\",St=\"pvms.upgrade.vermanage.delete\",xt=\"pvms.upgrade.devupgrade.create\",wt=\"devmgr.swm.vermanage.query\",Ct=\"devmgr.swm.devupgrade.query\",Tt=\"devmgr.swm.autoupgraderule.query\",At=\"devmgr.houp.config.query\",Et=\"pvms.app.version.page\",Ot=\"pvms.app.version.save\",Mt=\"pvms.app.version.upload\",Pt=\"pvms.app.version.update\",Dt=\"pvms.app.version.changeStatus\",It=\"pvms.app.version.delete\",Nt=\"pvms.devlicense.licenseinfo\",_t=\"pvms.devlicense.licenseapply\",jt=\"pvms.devlicense.licenseload.load\",kt=\"pvms.devlicense.licenseload.menu\",Lt=\"pvms.devlicense.licensecancel.cancel\",Rt=\"pvms.devlicense.licensecancel.menu\",Zt=\"pvms.device.inspection.view\",Bt=\"pvms.device.inspection.create\",Ft=\"pvms.device.inspection.stop\",zt=\"pvms.device.inspection.export\",Vt=\"pvms.device.faultManagement.create\",Ht=\"pvms.device.faultManagement.downloadTemplate\",Ut=\"pvms.device.faultManagement.import\",Gt=\"pvms.device.faultManagement.export\",Yt=\"pvms.device.faultManagement.createTask\",Wt=\"pvms.device.faultManagement.sendNotice\",Kt=\"pvms.device.simCardManagement.menu\",qt=\"pvms.device.simCardManagement.query\",Qt=\"pvms.status.station.contradistinction\",Xt=\"pvms.alarm.device.query\",Jt=\"pvms.alarm.device.save\",$t=\"pvms.alarm.device.export\",en=\"pvms.alarm.device.clear\",tn=\"pvms.alarm.device.defect\",nn=\"pvms.alarm.system.save\",rn=\"pvms.alarm.system.export\",on=\"pvms.alarm.system.clear\",an=[\"neteco.fm.alarm.setting.redefine\",\"devmgr.fm.alarm.setting.redefine.query\"],sn=\"pvms.system.business.alarm.setting.push\",ln=\"pvms.intelligence.diagnostics.menu\",cn=\"pvms.intelligence.diagnostics.task.menu\",un=\"pvms.intelligence.diagnostics.task.query\",dn=\"pvms.intelligence.diagnostics.task.create\",pn=\"pvms.intelligence.diagnostics.task.create\",fn=\"pvms.intelligence.diagnostics.task.delete\",hn=\"pvms.device.string.menu\",mn=\"pvms.device.string.query\",gn=\"pvms.component.diagnosis.menu\",vn=\"pvms.component.diagnosis.task\",yn=\"pvms.component.diagnosis.delete\",bn=\"pvms.component.diagnosis.export\",Sn=\"pvms.device.stringModuleLibrary.menu\",xn=\"pvms.device.stringModuleLibrary.query\",wn=\"pvms.device.stringModuleLibrary.create\",Cn=\"pvms.device.stringModuleLibrary.delete\",Tn=\"pvms.device.stringModuleLibrary.update\",An=\"pvms.device.stringModuleLibrary.downloadTemplate\",En=\"pvms.device.stringModuleLibrary.import\",On=\"pvms.device.stringModuleLibrary.export\",Mn=\"pvms.intelligence.diagnostics.export.menu\",Pn=\"pvms.intelligence.diagnostics.export.query\",Dn=\"pvms.intelligence.diagnostics.export.delete\",In=\"pvms.intelligence.diagnostics.export.create\",Nn=\"pvms.intelligence.diagnostics.export.download\",_n=\"pvms.intelligence.diagnostics.selfLearning.menu\",jn=\"pvms.intelligence.diagnostics.selfLearning.query\",kn=\"pvms.intelligence.diagnostics.selfLearning.modify\",Ln=\"pvms.poverty.query\",Rn=\"pvms.poverty.export\",Zn=\"pvms.poverty.create\",Bn=\"pvms.poverty.modify\",Fn=\"pvms.poverty.delete\",zn=\"pvms.poverty.import\",Vn=\"pvms.poverty.template.download\",Hn=\"pvms.monitercenter.menu\",Un=\"pvms.buyonline.service.query\",Gn=\"pvms.buyonline.service.menu\",Yn=\"pvms.buyonline.service.refresh\",Wn=\"pvms.buyonline.service.buy\",Kn=\"pvms.buyonline.software.menu\",qn=\"pvms.buyonline.software.query\",Qn=\"pvms.buyonline.software.refresh\",Xn=\"pvms.buyonline.software.buy\",Jn=\"pvms.promote.invitationcode.active\",$n=\"pvms.company.menu\",er=\"pvms.company.create\",tr=\"pvms.company.modify\",nr=\"pvms.company.delete\",rr=\"pvms.company.query\",ir=\"pvms.company.basic\",or=\"pvms.cisNumber.modify\",ar=\"pvms.user.menu\",sr=\"pvms.user.create\",lr=\"pvms.user.export\",cr=\"pvms.user.modify\",ur=\"pvms.user.delete\",dr=\"pvms.default.price.ongrid.query\",pr=\"pvms.default.price.ongrid.add\",fr=\"pvms.default.price.ongrid.delete\",hr=\"pvms.default.price.ongrid.modify\",mr=\"pvms.default.price.purchase.query\",gr=\"pvms.default.price.purchase.add\",vr=\"pvms.default.price.purchase.delete\",yr=\"pvms.default.price.purchase.modify\",br=\"pvms.dpa.query\",Sr=\"pvms.about.feedback.query\",xr=\"pvms.about.feedback.export\",wr=\"pvms.about.feedback.delete\",Cr=\"pvms.sysparam.query\",Tr=\"pvms.sysparam.modify\",Ar=\"pvms.sysparam.menu\",Er=\"op.neteco.performance.sync.create\",Or=\"op.neteco.performance.sync.menu\",Mr=\"pvms.dataAmendment.dataRepair.menu\",Pr=\"pvms.dataAmendment.manualStatic.menu\",Dr=\"pvms.openapi.query\",Ir=\"pvms.openapi.create\",Nr=\"pvms.openapi.modify\",_r=\"pvms.openapi.delete\",jr=\"pvms.openapi.menu\",kr=\"pvms.openapi.create.control\",Lr=\"pvms.openapi.modify.control\",Rr=\"pvms.business.configuration.serverManagement.config\",Zr=\"pvms.business.configuration.doc.config\",Br=\"pvms.business.configuration.link.config\",Fr=\"pvms.nbi.management.north.app.menu\",zr=\"pvms.nbi.management.north.app.create\",Vr=\"pvms.nbi.management.north.app.get\",Hr=\"pvms.nbi.management.north.app.modify\",Ur=\"pvms.nbi.management.north.app.delete\",Gr=\"pvms.nbi.management.north.app.password.reset\",Yr=\"pvms.nbi.management.north.app.permission.operate\",Wr=\"pvms.ess.promotion.menu\",Kr=\"pvms.menu.aimanagement\",qr=\"pvms.aimanagement.stations.menu\",Qr=\"pvms.aimanagement.stations.operations\",Xr=\"pvms.aimanagement.stations.export\",Jr=\"pvms.aimanagement.area.menu\",$r=\"pvms.aimanagement.area.add\",ei=\"pvms.aimanagement.area.delete\",ti=\"pvms.aimanagement.area.forecast\",ni=\"pvms.weather.apikey.management.menu\",ri=\"pvms.weather.apikey.management.modify\",ii=\"pvms.menu.annualreportmanagement\",oi=\"pvms.questionnaire.query\",ai=\"pvms.settings.configuration.DemoAccount.config\",si=\"pvms.settings.configuration.weather.config\",li=\"pvms.settings.configuration.map.query\",ci=\"pvms.settings.configuration.buyonline.config\",ui=\"pvms.settings.configuration.clusterConfig\",di=\"pvms.settings.configuration.other.config\",pi=\"pvms.settings.configuration.other.queryConfig\",fi=\"pvms.settings.configuration.about.config\",hi=\"pvms.settings.configuration.systemParam\",mi=\"pvms.settings.configuration.ownerAuth.config\",gi=\"pvms.settings.configuration.ownerAuth.query\",vi=\"pvms.menu.loadshedding\",yi=\"pvms.release.notes.upload\",bi=\"pvms.settings.configuration.price\",Si=\"pvms.systemnote.message.menu\",xi=\"pvms.systemnote.remind.menu\",wi=\"pvms.systemnote.sending.query\",Ci=\"pvms.systemnote.sending.create\",Ti=\"pvms.systemnote.sending.delete\",Ai=\"pvms.systemnote.sending.createByRoles\",Ei=\"pvms.systemnote.sending.additionalUrl\",Oi=\"pvms.systemnote.openapi.notice.query\",Mi=\"pvms.systemnote.openapi.notice.delete\",Pi=\"pvms.systemnote.openapi.notice.modify\",Di=\"pvms.systemnote.openapi.notice.create\",Ii=\"pvms.operation.message.menu\",Ni=\"pvms.operation.message.create\",_i=\"pvms.operation.message.delete\",ji=\"pvms.operation.message.modify\",ki=\"pvms.operation.message.publish\",Li=\"pvms.menu.monitor.revenue.analysis\",Ri=\"pvms.monitor.revenue.export\",Zi=\"pvms.monitor.revenue.emma.benefit\",Bi=\"pvms.monitor.revenue.emma.benefit.all\",Fi=\"pvms.monitor.revenue.emma.benefit.demand\",zi=\"pvms.monitor.revenue.emma.benefit.arbitrage\",Vi=\"pvms.monitor.revenue.storage.benefit\",Hi=\"pvms.monitor.revenue.storage.benefit.all\",Ui=\"pvms.monitor.revenue.storage.benefit.demand\",Gi=\"pvms.monitor.revenue.storage.benefit.arbitrage\",Yi=\"pvms.monitor.revenue.pv.benefit\",Wi=\"pvms.monitor.revenue.pv.benefit.query\",Ki=\"pvms.monitor.revenue.all.benefit\",qi=\"pvms.monitor.revenue.all.benefit.query\",Qi=\"pvms.app.service.management.modify\",Xi=\"pvms.energyanalyzer.menu.view\",Ji=\"pvms.energyanalyzer.template.create\",$i=\"pvms.energyanalyzer.template.query\",eo=\"pvms.energyanalyzer.template.delete\",to=\"pvms.energyanalyzer.template.export\",no=\"pvms.energyanalyzer.template.query.tree\",ro=\"pvms.energyanalyzer.energyflow.query\",io=\"pvms.energyanalyzer.energyflow.soc.price\",oo=\"pvms.energyanalyzer.energyflow.export\",ao=\"pvms.energyanalyzer.historydata.export\",so=\"pvms.station.msp.emma.setting\",lo=\"pvms.promote.invitationcode.gen.get\",co=\"pvms.promote.invitationcode.create\",uo=\"pvms.promote.invitationcode.email\",po=\"pvms.promote.invitationcode.feature.get\",fo=\"pvms.promote.invitationcode.details.get\",ho=\"pvms.promote.invitationcode.details.export\",mo=\"pvms.device.cert.upload\",go=\"pvms.intelligence.dispersion\",vo=\"pvms.ems.config.query\",yo=\"pvms.ems.config.modify\",bo=\"pvms.task.inspection.task.list.add\",So=\"pvms.task.inspection.config.update\",xo=\"pvms.task.inspection.config.delete\",wo=\"pvms.task.inspection.config.download.template\",Co=\"pvms.task.inspection.config.import\",To=\"pvms.task.inspection.config.export\",Ao=\"pvms.task.inspection.task.list.query\",Eo=\"pvms.task.inspection.task.list.add\",Oo=\"pvms.task.inspection.task.list.user.setting\",Mo=\"pvms.task.inspection.station.list.query\",Po=\"pvms.task.inspection.station.list.add\",Do=\"pvms.task.defect.query\",Io=\"pvms.task.defect.add\",No=\"pvms.task.defect.copy\",_o=\"pvms.task.defect.user.setting\",jo=\"pvms.smart.disaster.rev.apikey.query\",ko=\"pvms.smart.disaster.rev.apikey.save\",Lo=\"pvms.smart.disaster.rev.apikey.test\",Ro=\"pvms.menu.sysmaintain\",Zo=\"pvms.ess.promotion.analysis.create\",Bo=\"pvms.ess.promotion.analysis.export\",Fo=\"pvms.ess.promotion.statistics.export\",zo=\"pvms.ess.promotion.config.create\",Vo=\"pvms.ess.promotion.config.modify\",Ho=\"pvms.ess.promotion.config.delete\",Uo=\"pvms.user.query\",Go=\"pvms.station.openapi\",Yo=\"pvms.station.openapi.query\",Wo=\"pvms.station.openapi.delete\",Ko=\"pvms.menu.sysmaintain\",{neteco:qo}=window,Qo=e=>qo.auth.check(e),Xo=e=>e.reduce(((e,t)=>e||Qo(t)),!1),Jo=e=>e.reduce(((e,t)=>e&&Qo(t)),!0),$o={[r.xZ.devmaintain]:[We,en],[r.xZ.devoperation]:[We,en]};function ea(e){return(0,r.Jm)().some((t=>{let{name:n}=t;return($o[n]||[]).indexOf(e)>=0}))}const ta=e=>Xo([\"pvms.intelligence.diagnostics.iv.curve\",\"pvms.intelligence.diagnostics.iv.curve.add.task\",\"pvms.intelligence.diagnostics.iv.curve.setting\",e]),na=()=>Xo([Xt,\"pvms.alarm.system.query\",sn,...an]),ra=()=>Qo(on)&&Qo(nn)&&Qo(rn)&&Qo(\"pvms.alarm.system.confirm\"),ia=()=>Qo(go),oa=()=>Xo([Ao,Mo,Do]),aa=()=>Xo([Ao,Mo]),sa=()=>la(),la=()=>Qo(\"pvms.intelligence.remoteOnOff.menu\"),ca=()=>Xo([bo,So,xo,wo,Co,To])},20884:(e,t,n)=>{\"use strict\";n.d(t,{LS:()=>i,OA:()=>r,PY:()=>o});const r=/^1+[\\d]{10}$/,i=/^[0-9]{5,11}$/,o={EXISTS:0,FORMAT_ERROR:1,ERROR:5}},31251:(e,t,n)=>{\"use strict\";n.d(t,{FX:()=>d,MJ:()=>c,Nc:()=>u,WN:()=>s,eO:()=>l,rC:()=>a});var r,i,o=n(37825);function a(){var e,t,n,r,i,a;return(null===(e=window.neteco)||void 0===e||null===(t=e.util)||void 0===t?void 0:t.getProductType().type)||(null===(n=window.parent.neteco)||void 0===n||null===(r=n.util)||void 0===r?void 0:r.getProductType().type)||(null===(i=window.top.neteco)||void 0===i||null===(a=i.util)||void 0===a?void 0:a.getProductType().type)||function(){const e=new window.URL(window.location.href).searchParams.get(\"app-id\");return null!=e&&e.includes(\"smartpvms\")?o.M5.smartpvms:e}()}const s=\"Cloud\"===(null===(r=window.neteco)||void 0===r||null===(i=r.framework)||void 0===i?void 0:i.type)&&a()===o.M5.park,l=a()===o.M5.park,c=a()===o.M5.smartpvms,u=a()===o.M5.aiboost,d=a()===o.M5.siteAiboost},49453:(e,t,n)=>{\"use strict\";n.d(t,{F:()=>w,F0:()=>y,Fe:()=>S,Fw:()=>g,IV:()=>v,LI:()=>f,Md:()=>p,Sg:()=>u,Sv:()=>C,U2:()=>b,cd:()=>r.cd,gz:()=>d,v_:()=>m});var r=n(2955),i=n(96299),o=n(8394),a=n(80770),s=n(44184);const{neteco:l}=window,c=[\"/rest/pvms/web/report/v1/station/station-kpi-list\",\"/rest/pvms/web/report/v1/inverter/energy-generate-kpi-list\",\"/rest/pvms/web/report/v1/cn/energy-store-kpi-list\"],u=(e,t,n)=>new Promise(((r,i)=>{l.request.get({url:e,data:t,dataType:\"json\",timeout:n||3e4}).done((e=>{r(e)})).fail((e=>{i(e)})).catch((e=>{w.catch(e),i(e)}))})),d=(e,t,n)=>new Promise(((r,i)=>{l.request.put({url:e,dataType:n||\"json\",data:JSON.stringify(t),contentType:\"application/json\"}).done((e=>{r(e)})).fail((e=>{i(e)})).catch((e=>{w.catch(e),i(e)}))})),p=(e,t)=>new Promise(((n,r)=>{l.request.post({url:e,dataType:\"json\",data:t,contentType:\"application/x-www-form-urlencoded\"}).done((e=>{n(e)})).fail((e=>{r(e)})).catch((e=>{w.catch(e),r(e)}))})),f=(e,t)=>new Promise(((n,r)=>{l.request.post({url:e,dataType:\"json\",data:t,processData:!1,contentType:!1}).done((e=>{n(e)})).fail((e=>{r(e)}))}));let h={};const m=(e,t,n,r)=>new Promise(((i,o)=>{const a=n?{url:e,dataType:\"json\",data:t}:{url:e,dataType:r||\"json\",data:JSON.stringify(t),contentType:\"application/json\"},s=`post:${e}`;h[s]&&(h[s].abort(),h[s]=void 0);const u=l.request.post(a);c.includes(e)&&(h[s]=u),u.done((e=>{i(e)})).fail((e=>{o(e)})).catch((e=>{w.catch(e),o(e)})).always((()=>{0===u.readyState&&\"abort\"===u.statusText&&o(u),h[s]=void 0}))})),g=function(e,t){let{config:n={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((r,i)=>{const o={url:e,dataType:\"json\",contentType:\"application/json\"};t&&(o.data=JSON.stringify(t)),Object.assign(o,n),l.request.post(o).done((e=>{r(e)})).fail((e=>{i(e)})).catch((e=>{w.catch(e),i(e)}))}))},v=(e,t,n)=>new Promise(((r,i)=>{l.request.delete({url:e,dataType:n||\"json\",data:JSON.stringify(t),contentType:\"application/json\"}).done((e=>{r(e)})).fail((e=>{i(e)})).catch((e=>{w.catch(e),i(e)}))})),y=(e,t,n)=>new Promise(((r,i)=>{l.request.post({url:e,data:JSON.stringify(t),contentType:\"application/json\",timeout:n||0}).done((e=>{r(e)})).fail((e=>{i(e)})).catch((e=>{w.catch(e),i(e)}))})),b=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise(((i,o)=>{l.request.get({url:e,dataType:n||\"json\",data:t}).done((e=>{i(e)})).fail((e=>{o(e)})).catch((e=>{r&&w.catch(e),o(e)}))}))},S=e=>{const t={failCode:500,code:500,success:!1};return(e=>!!e&&(\"object\"==typeof e||\"function\"==typeof e)&&\"function\"==typeof e.then)(e)?e.then((e=>e)).catch((()=>t)):Promise.resolve(t)},x=[{statusCode:406,exceptionId:\"UA.00010001\",operation:()=>(0,a.jT)(i.Z.intl.formatMessage({id:\"neteco.pvms.station.unauthorized.tip\"}))},{statusCode:451,exceptionId:\"CLIENT_REQUEST_FORBIDDEN_EXCEPTION\",operation:()=>(0,a.jT)(i.Z.intl.formatMessage({id:\"neteco.pvms.sensitive.text\"}))},{statusCode:429,exceptionId:\"PVMS.00110429\",operation:()=>o.Z.info({message:i.Z.intl.formatMessage({id:\"neteco.pvms.system.storage.statics.push.error.msg\"}),isNewStyle:!0})}],w=new class{constructor(e){var t=this;this.pvmsExceptionList=[],this.register=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.pvmsExceptionList.unshift(...e)},this.catch=e=>{const t=this.pvmsExceptionList.find((t=>e.status===t.statusCode&&(!t.exceptionId||e.responseJSON.exceptionId===t.exceptionId)));null==t||t.operation(e)},this.register(e)}}(x),C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=\"\";const i=n.method;delete n.method;let o=e;if(!(0,s.xb)(t)){o+=\"?\";for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o+=`&${e}=${t[e]}`);o=o.replace(/\\&$/,\"\")}let a={headers:{\"Content-Type\":\"application/json\",roarand:l.request.getRand()},method:i||\"POST\"};(0,s.xb)(n)||(a={...a,body:JSON.stringify(n)});const c=new Promise(((e,t)=>{fetch(o,a).then((n=>{if(200!==n.status)return t(n);const i=n.headers.get(\"Content-Disposition\");return i&&(r=decodeURIComponent(i.split(/[F|f]ilename=/)[1]).replace(/^\\\"|\\\"$/g,\"\")),e(n.blob())})).catch((e=>{t(e)}))}));return c.then((e=>{if(e){const t=window.top.document.createElement(\"a\");t.download=r,t.style.display=\"none\",t.href=window.URL.createObjectURL(e),window.top.document.body.appendChild(t),t.click(),window.top.document.body.removeChild(t)}})),c}},18206:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>r});const r=function(e){return function(t){return e.formatMessage({id:\"neteco.pvms.station.subarray.pagination.total\"},{total:t})}}},30912:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>r});const r=e=>{var t;const n=(()=>{const e=document.cookie.match(new RegExp(\"(^| )locale=([^;]*)(;|$)\"));return e&&e.length?e[2]:null})().split(\"-\");return`${n[0]}${e}${null===(t=n[1])||void 0===t?void 0:t.toUpperCase()}`}},10412:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>l});var r=n(62073),i=n(88391),o=n(79790),a=n(13528),s=n(23712);const l=(0,i.forwardRef)(((e,t)=>{let{value:n,onChange:l,isNewStyle:c,...u}=e;const d=(0,i.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l((0,a.xP)(e.target.value),...n)}),[l]),p=c?o.Z:r.Z;return(0,s.jsx)(p,{value:(0,a.eD)(n),ref:t,onChange:d,...u})}))},65835:(e,t,n)=>{\"use strict\";n.d(t,{$:()=>a,G:()=>s});var r=n(88391),i=n(44184);const{globalVar:o={}}=window,a={setIsUserAgree:function(e){const{setIsUserAgree:t}=o.behaviorUtils||{};(0,i.mf)(t)&&t(e)},saveAnalyticsData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{saveAnalyticsData:r}=o.behaviorUtils||{};(0,i.mf)(r)&&r(e,t,n)},pageAccess:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{pageAccess:n}=o.behaviorUtils||{};return(0,i.mf)(n)?n(e,t):new Date},pageLeave:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{pageLeave:r}=o.behaviorUtils||{};return(0,i.mf)(r)?r(e,t,n):new Date},refreshAutoTrackCommonData:function(){const{refreshAutoTrackCommonData:e}=o.behaviorUtils||{};return(0,i.mf)(e)?e():new Date}};function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.useEffect)((()=>{const n=a.pageAccess(e[0],t);return()=>{a.pageLeave(n,e[1],t)}}),[])}},80553:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>r});const r=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{const t=e.realValue||\"-\",n=\"-\"===t?\"\":e.unit||\"\",r=e.id||\"\",i=e.value||\"-\";return{span:8,title:e.name,unit:n,value:t,id:r,useIntl:!1,displayExp:e.displayExp,realValue:i}}))}},45995:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>a,j:()=>o});var r=n(53137),i=n(44184);const o={DISABLE_INSTALLER_OPERATE_OWNER_SWITCH_KEY:\"disable_installer_operate_owner\",COMPANY_BIND_SWITCH_CONFIG_KEY:\"register-company-bind-switch\",COMPANY_BIND_SWITCH:\"company-bind-switch\",OWNER_MIGRATION_SWITCH:\"owner_migration_switch\",UNIPORTAL_LOGIN_SWITCH:\"uniportal-login-switch\",ENABLE_STATION_OWNER_ADMIN:\"enable_station_owner_admin\"},a=new class{constructor(){this.switchConfigs=[]}async init(){const e={configKey:Object.values(o).join(\",\")};this.switchConfigs=await(0,r.MF)(e)}async getConfigSwitch(e){var t;return(0,i.xb)(this.switchConfigs)&&await this.init(),((null===(t=this.switchConfigs)||void 0===t?void 0:t.find((t=>t.configKey===e)))||{}).configValue}clear(){this.switchConfigs=[]}}},86325:(e,t,n)=>{\"use strict\";function r(e,t){return e.filter((e=>t.includes(e.dnId))).map((e=>e.name)).join()}n.d(t,{M:()=>r})},64218:(e,t,n)=>{\"use strict\";n.d(t,{Zy:()=>X,kG:()=>U,E3:()=>C,Nu:()=>x,QM:()=>w,lW:()=>b,jx:()=>v,EB:()=>A,X$:()=>G,_v:()=>y,zg:()=>j,Ek:()=>z,HQ:()=>S,B5:()=>B,Ou:()=>M,Cx:()=>K,Bl:()=>Z,FU:()=>I,ax:()=>T,Zr:()=>P,cx:()=>k,QL:()=>R,kt:()=>_,f3:()=>O,sb:()=>Q,PW:()=>W,Bb:()=>V,hy:()=>E,ht:()=>L,jE:()=>F,HD:()=>N,Po:()=>D,bq:()=>H,kJ:()=>q});var r=n(17489),i=(n(88391),n(37920),n(64120)),o=n(78939),a=n(97809),s=n(99073),l=n(13528),c=n(83621),u=n(44184),d=n(23712);const p=e=>{let{value:t}=e,n=t;return(Number(t)<0||Number(t)>4||(0,u.xb)(t)||isNaN(Number(t)))&&(n=\"0\"),(0,d.jsx)(\"div\",{className:\"nco-signalStrength-status\",children:(0,d.jsxs)(\"span\",{class:`icon-signal-filled-four-${n}`,children:[(0,d.jsx)(\"span\",{class:\"path1\"}),(0,d.jsx)(\"span\",{class:\"path2\"}),(0,d.jsx)(\"span\",{class:\"path3\"}),(0,d.jsx)(\"span\",{class:\"path4\"})]})})},f=e=>{let{value:t}=e,n=t;return(Number(t)<0||Number(t)>5||(0,u.xb)(t)||isNaN(Number(t)))&&(n=\"0\"),(0,d.jsx)(\"div\",{className:\"nco-signalStrength-status\",children:(0,d.jsxs)(\"span\",{class:`icon-dp-signal-filled-${n}`,children:[(0,d.jsx)(\"span\",{class:\"path1\"}),(0,d.jsx)(\"span\",{class:\"path2\"}),(0,d.jsx)(\"span\",{class:\"path3\"}),(0,d.jsx)(\"span\",{class:\"path4\"}),(0,d.jsx)(\"span\",{class:\"path5\"})]})})},{neteco:h}=window,m=new Set([20011,20012]),g=new Map([[c.o.CHARGE,[10001,10002,2101252,2101251,10007,10012]]]),v=e=>{let t=0;for(let n=0;n<e.length;n+=1){const r=e.charCodeAt(n);t+=r>=1&&r<=126||r>=65376&&r<=65439?1:2}return t},y=e=>\"zh-cn\"===h.i18n.getLocale()&&e===s.Gw?\"度\":\"zh-cn\"===h.i18n.getLocale()&&e===s._w?(0,d.jsx)(o.Z,{id:\"neteco.pvms.userManagement.online.onlyUseInZh.time.minute\"}):e,b=(e,t)=>(P(t)&&(0,i.default)(e,(e=>m.has(Number(e.id)))),e),S=e=>49===e,x=(e,t)=>{window.dispatchEvent(new CustomEvent(e,{detail:t}))},w=(e,t)=>{if(!e)return\"\";let n=!1;return\"string\"==typeof e&&(n=!0),(0,d.jsx)(\"div\",{title:n?e:null==e?void 0:e.title,className:\"wrapper-ellipsis\",style:t?{maxWidth:t-16+\"px\"}:{},children:n?e:null==e?void 0:e.component})},C=e=>{const t=e.map((e=>[e.name,{maxWidth:e.maxWidth,width:e.width,render:t=>w(t,e.maxWidth),fixed:e.fixed,singleStationPageWidth:e.singleStationPageWidth}]));return Object.fromEntries(t)},T=()=>window.screen.width<1400,A=()=>{const e=[23060,23061,23062,23067];for(let t=23300;t<23600;t++)e.push(t);return e},E=e=>20821===parseInt(e)||20820===parseInt(e),O=e=>20825===parseInt(e),M=(e,t)=>20819===parseInt(e)||23019===t,P=e=>N(e),D=(e,t)=>20847===e&&A().includes(Number(t)),I=e=>20810===parseInt(e),N=e=>20822===parseInt(e),_=e=>20814===parseInt(e),j=(e,t)=>t&&[23900,40962].includes(t)||60080===(e&&parseInt(e)),k=(e,t)=>20822===parseInt(e)&&23063===parseInt(t),L=(e,t)=>20819===parseInt(e)&&23059===parseInt(t),R=e=>20816===parseInt(e),Z=(e,t)=>R(e)&&23076===parseInt(t),B=e=>20800===parseInt(e)||-1===e,F=e=>20801===parseInt(e),z=(e,t)=>20816===e&&32778===t,V=e=>23068===e,H=(e,t)=>20847===e&&23310===t,U=(e,t,n)=>{const{dotStatus:i,useWrap:c,useBorderAround:u,useBlueBackground:p,intl:f,titleWidth:m=12,valueWidth:v=12,isBasicInfo:y,deviceType:b,isSts3rdEnum:S=!1}=n,{useEmpty:x,useIntl:w=!0}=e,C=parseInt(t/3)%2==0,T=u?{borderRight:\"1px solid #e8e8e8\"}:{},A={width:i?\"\":\"100%\",textOverflow:c?\"\":\"ellipsis\",overflow:c?\"\":\"hidden\",whiteSpace:c?\"\":\"nowrap\"},{suffix:E,value:O,title:M,id:P,signalDbm:D}=e,I=O?y||null!==(N=g.get(b))&&void 0!==N&&N.includes(P)?O:h.util?(0,l.af)(h.util.iUnescape(O)):(0,l.af)(O):s.lH;var N;const _=M?h.util?h.util.iUnescape(M):M:\"-\";return(0,d.jsxs)(r.Z,{span:e.span,className:C?\"odd-line\":\"even-line\",style:u&&t%3==0?{borderLeft:\"1px solid #e8e8e8\"}:{},children:[(0,d.jsxs)(r.Z,{span:m,className:\"has-padding has-padding-first\",title:e.title?w?`${f.formatMessage({id:e.title})} ${E||\"\"}`:`${_} ${E||\"\"}`:\"\",style:{...T,...p?{backgroundColor:\"#eaf6f9\"}:{}},children:[!x&&(0,d.jsx)(\"span\",{className:\"circle\"}),e.title?(0,d.jsxs)(\"span\",{style:{textOverflow:\"ellipsis\",overflow:\"hidden\"},children:[w?(0,d.jsx)(o.Z,{id:e.title}):(0,d.jsx)(\"span\",{children:_}),E?`(${E})`:\"\"]}):(0,d.jsx)(\"span\",{})]}),(0,d.jsx)(r.Z,{span:v,style:{...T,...p?{backgroundColor:\"#fff\"}:{}},className:\"has-padding\",children:(0,d.jsxs)(\"div\",{title:D||I,style:{...A,textAlign:\"center\",display:i?\"flex\":\"unset\"},children:[i&&(0,d.jsx)(\"div\",{style:{marginRight:\"0.5rem\",alignSelf:\"center\"},children:(0,d.jsx)(a.Z,{status:i,title:I,form:S?\"\":\"inverter\"})}),Y(e,I,n)]})})]},e.title?w?`${f.formatMessage({id:e.title})} ${E||\"\"}`:`${_} ${E||\"\"}`:`null-${t}`)},G=e=>{const{value:t}=e;if(!/^[0-9]+$/.test(String(t)))return\"\";const n=new Date(1e3*parseInt(t)),r=n.getFullYear();let i=n.getMonth();i=i>=10?i:`0${i}`;let o=n.getDate();o=o>=10?o:`0${o}`;let a=n.getHours();a=a>=10?a:`0${a}`;let s=n.getMinutes();s=s>=10?s:`0${s}`;let l=n.getSeconds();return l=l>=10?l:`0${l}`,`${r}-${i}-${o} ${a}:${s}:${l}`},Y=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return\"s\"===e.unit?G(e):\"kWh\"===e.unit?`${(0,l.af)(e.value)} ${y(e.unit)}`:\"averageSignal\"===(null==e?void 0:e.id)?(0,d.jsx)(f,{value:e.value}):\"averageSignalFour\"===(null==e?void 0:e.id)?(0,d.jsx)(p,{value:e.value}):!e.useEmpty&&!n.isSts3rdEnum&&`${t||\"-\"}${\"%\"===e.unit||\"℃\"===e.unit?\"\":\" \"}${e.unit||\"\"}`},W=e=>{if(!e)return!1;const{elementDn:t,parentNode:n}=e;return\"share-station-company-dn\"===t||!!n&&W(n)},K=e=>new Set([230190110,230190111]).has(parseInt(e)),q=(e,t)=>[230190116,230102787,230223895,230700176].includes(e)?\"\":t,Q=e=>\"/\"===e,X=e=>e.filter((e=>(null==e?void 0:e.mocId)!==c.o.CHARGE&&(null==e?void 0:e.mocId)!==c.o.HEMS&&23900!==(null==e?void 0:e.devTypeId)&&40962!==(null==e?void 0:e.devTypeId)&&23070!==(null==e?void 0:e.devTypeId))).length>0},5679:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(49453),i=n(44184);const o=new class{constructor(){this.deployment=\"\"}async init(){const[e,t]=await(0,i.AM)((0,r.U2)(\"/rest/dp/pvms/pvmswebsite/v1/deployment\"));return e?\"\":t.site}async queryDeployment(){return(0,i.xb)(this.deployment)&&(this.deployment=await this.init()),this.deployment}clear(){this.deployment=\"\"}}},35657:(e,t,n)=>{\"use strict\";n.d(t,{Ow:()=>o,ZP:()=>a,lw:()=>i});const r=new class{constructor(){var e=this;this.setIntl=e=>{this.intl=e},this.getIntl=()=>this.intl,this.getFormatMessage=function(t){var n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e||null===(n=e.intl)||void 0===n?void 0:n.formatMessage({id:t},{...r})}}},{getIntl:i,getFormatMessage:o}=r,a=r},31483:(e,t,n)=>{\"use strict\";n.d(t,{G:()=>r});const r=e=>Number(e)>1&&\"en-us\"===localStorage.getItem(\"initLanguage\")},80770:(e,t,n)=>{\"use strict\";n.d(t,{A:()=>x,CD:()=>m,Ez:()=>b,ST:()=>y,Sb:()=>f,jT:()=>g,lU:()=>h,s$:()=>S,xf:()=>v});var r=n(52883),i=n(34428),o=n(45258),a=n(33670),s=n(96299),l=n(37825),c=n(50606),u=n(88490),d=n(39207),p=n(23712);function f(e,t,n,r,i){s.Z.intl||s.Z.updateIntlInstance(n);const o=S(\"success\"),u={title:o.title,content:null!=e?e:o.content,okText:o.okText,centered:o.centered,maskClosable:o.maskClosable,onOk:t||l.mz,onCancel:r||l.mz};i?a.Z.success({...u,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(c.Z,{className:\"success-icon\"})}):a.Z.success(u)}function h(e,t,n,r){s.Z.intl||s.Z.updateIntlInstance(n);const i=S(\"fail\"),o={title:i.title,content:null!=e?e:i.content,okText:i.okText,centered:i.centered,maskClosable:i.maskClosable,onOk:t||l.mz};r?a.Z.error({...o,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(u.Z,{className:\"error-icon\"})}):a.Z.error(o)}function m(e,t,n,r,i){s.Z.intl||s.Z.updateIntlInstance(r);const o=S(\"info\"),c={title:null!=n?n:o.title,content:null!=e?e:o.content,okText:o.okText,centered:o.centered,maskClosable:o.maskClosable,onOk:t||l.mz};i?a.Z.info({...c,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(d.Z,{className:\"info-icon\"})}):a.Z.info(c)}function g(e,t,n,r,i,o){s.Z.intl||s.Z.updateIntlInstance(t);const c=S(\"error\"),d={title:n||c.title,content:null!=e?e:c.content,okText:c.okText,centered:c.centered,maskClosable:c.maskClosable,onOk:r||l.mz,className:i||\"\"};o?a.Z.error({...d,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(u.Z,{className:\"error-icon\"})}):a.Z.error(d)}function v(e,t,n,r){s.Z.intl||s.Z.updateIntlInstance(t);const i=S(\"warn\"),c={title:i.title,content:null!=e?e:i.content,okText:i.okText,centered:i.centered,maskClosable:i.maskClosable,onOk:n||l.mz};r?o.Z.warning({...c,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(d.Z,{className:\"warning-icon\"})}):a.Z.warn(c)}function y(e,t,n,r,i,c){s.Z.intl||s.Z.updateIntlInstance(r);const u=S(\"confirm\"),f={title:i||u.title,content:null!=e?e:s.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"}),okText:u.okText,centered:u.centered,maskClosable:u.maskClosable,cancelText:u.cancelText,onOk:t||l.mz,onCancel:n||l.mz};c?o.Z.confirm({...f,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(d.Z,{className:\"warning-icon\"})}):a.Z.confirm(f)}function b(e,t,n,r,o,c){s.Z.intl||s.Z.updateIntlInstance(r);const u=(0,p.jsxs)(\"div\",{className:\"pvms-advanced-confirm-modal\",children:[(0,p.jsx)(\"span\",{className:\"msg-info\",children:null!=e?e:s.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"})}),(0,p.jsx)(i.Z,{onChange:e=>{sessionStorage.setItem(c,e.target.checked)},children:s.Z.intl.formatMessage({id:\"neteco.pvms.common.noWarning.msg\"})})]}),d=S(\"confirm\");a.Z.confirm({title:o||d.title,content:u,okText:d.okText,centered:d.centered,maskClosable:d.maskClosable,cancelText:d.cancelText,onOk:t||l.mz,onCancel:n||l.mz})}function S(e){const t={centered:!0,maskClosable:!1,okText:s.Z.intl.formatMessage({id:\"common.button.ok\"})};switch(e){case\"confirm\":return{...t,cancelText:s.Z.intl.formatMessage({id:\"neteco.pvms.cancel\"}),title:s.Z.intl.formatMessage({id:\"neteco.pvms.confirm\"})};case\"warn\":case\"info\":return{...t,title:s.Z.intl.formatMessage({id:\"neteco.pvms.info\"}),content:s.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"})};case\"error\":return{...t,title:s.Z.intl.formatMessage({id:\"neteco.pvms.error\"}),content:s.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"})};case\"success\":return{...t,title:s.Z.intl.formatMessage({id:\"neteco.pvms.info\"}),content:s.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.doItSuc\"})};case\"fail\":return{...t,title:s.Z.intl.formatMessage({id:\"neteco.pvms.info\"}),content:s.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.doItFail\"})};default:return t}}function x(e,t,n,i){s.Z.intl||s.Z.updateIntlInstance(i),t&&r.Z.close(t),r.Z.error({key:t||\"error\",top:n||80,description:e||s.Z.intl.formatMessage({id:\"common.message.failure\"}),style:{paddingRight:48}})}},8394:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>h});var r=n(34428),i=n(45258),o=n(33670),a=n(96299),s=n(37825),l=n(50606),c=n(88490),u=n(39207),d=n(3308),p=n(23712);function f(e){const t={centered:!0,maskClosable:!1,okText:a.Z.intl.formatMessage({id:\"common.button.ok\"})};switch(e){case\"confirm\":return{...t,cancelText:a.Z.intl.formatMessage({id:\"neteco.pvms.cancel\"}),title:a.Z.intl.formatMessage({id:\"neteco.pvms.confirm\"})};case\"warn\":case\"info\":return{...t,title:a.Z.intl.formatMessage({id:\"neteco.pvms.info\"}),content:a.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"})};case\"error\":return{...t,title:a.Z.intl.formatMessage({id:\"neteco.pvms.error\"}),content:a.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"})};case\"success\":return{...t,title:a.Z.intl.formatMessage({id:\"neteco.pvms.info\"}),content:a.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.doItSuc\"})};case\"fail\":return{...t,title:a.Z.intl.formatMessage({id:\"neteco.pvms.info\"}),content:a.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.doItFail\"})};default:return t}}const h={success:function(e){const{message:t,intl:n,isNewStyle:r,onOk:i,onCancel:c,afterClose:u}=e;a.Z.intl||a.Z.updateIntlInstance(n);const d=f(\"success\"),h={title:d.title,content:null!=t?t:d.content,okText:d.okText,centered:d.centered,maskClosable:d.maskClosable,onOk:i||s.mz,onCancel:c||s.mz,afterClose:u||s.mz};return r?o.Z.success({...h,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(l.Z,{className:\"success-icon\"})}):o.Z.success(h)},failed:function(e){const{message:t,intl:n,isNewStyle:r,onOk:i,afterClose:l}=e;a.Z.intl||a.Z.updateIntlInstance(n);const u=f(\"fail\"),d={title:u.title,content:null!=t?t:u.content,okText:u.okText,centered:u.centered,maskClosable:u.maskClosable,onOk:i||s.mz,afterClose:l||s.mz};return r?o.Z.error({...d,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(c.Z,{className:\"error-icon\"})}):o.Z.error(d)},info:function(e){const{message:t,title:n,intl:r,isNewStyle:i,onOk:l,afterClose:c}=e;a.Z.intl||a.Z.updateIntlInstance(r);const d=f(\"info\"),h={title:null!=n?n:d.title,content:null!=t?t:d.content,okText:d.okText,centered:d.centered,maskClosable:d.maskClosable,onOk:l||s.mz,afterClose:c||s.mz};return i?o.Z.info({...h,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(u.Z,{className:\"info-icon\"})}):o.Z.info(h)},error:function(e){const{message:t,intl:n,title:r,className:i,isNewStyle:l,onOk:u,afterClose:d}=e;a.Z.intl||a.Z.updateIntlInstance(n);const h=f(\"error\"),m={title:r||h.title,content:null!=t?t:h.content,okText:h.okText,centered:h.centered,maskClosable:h.maskClosable,onOk:u||s.mz,className:i||\"\",afterClose:d||s.mz};return l?o.Z.error({...m,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(c.Z,{className:\"error-icon\"})}):o.Z.error(m)},warning:function(e){const{message:t,intl:n,isNewStyle:r,onOk:l,afterClose:c}=e;a.Z.intl||a.Z.updateIntlInstance(n);const d=f(\"warn\"),h={title:d.title,content:null!=t?t:d.content,okText:d.okText,centered:d.centered,maskClosable:d.maskClosable,onOk:l||s.mz,afterClose:c||s.mz};return r?i.Z.warning({...h,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(u.Z,{className:\"warning-icon\"})}):o.Z.warn(h)},confirm:function(e){const{message:t,intl:n,title:r,isNewStyle:l,onOk:c,onCancel:u,okText:h,afterClose:m,cancelText:g}=e;a.Z.intl||a.Z.updateIntlInstance(n);const v=f(\"confirm\"),y={title:r||v.title,content:null!=t?t:a.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"}),okText:h||v.okText,centered:v.centered,maskClosable:v.maskClosable,cancelText:g||v.cancelText,onOk:c||s.mz,onCancel:u||s.mz,afterClose:m||s.mz};return l?i.Z.confirm({...y,className:\"newNorm-modal\",centered:!0,icon:(0,p.jsx)(d.Z,{className:\"warning-icon\"})}):o.Z.confirm(y)},confirmAdvanced:function(e){const{message:t,intl:n,title:i,sessionKey:l,onOk:c,onCancel:u,afterClose:d,okText:h,cancelText:m}=e;a.Z.intl||a.Z.updateIntlInstance(n);const g=(0,p.jsxs)(\"div\",{className:\"pvms-advanced-confirm-modal\",children:[(0,p.jsx)(\"span\",{className:\"msg-info\",children:null!=t?t:a.Z.intl.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"})}),(0,p.jsx)(r.Z,{onChange:e=>{sessionStorage.setItem(l,e.target.checked)},children:a.Z.intl.formatMessage({id:\"neteco.pvms.common.noWarning.msg\"})})]}),v=f(\"confirm\");return o.Z.confirm({title:i||v.title,content:g,okText:h||v.okText,centered:v.centered,maskClosable:v.maskClosable,cancelText:m||v.cancelText,onOk:c||s.mz,onCancel:u||s.mz,afterClose:d||s.mz})}}},95059:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>i});var r=n(45258);n(88391);const i={operationSuccess:(e,t,n,i)=>{r.Z.success({title:e.formatMessage({id:\"neteco.pvms.info\"}),content:t||e.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.doItSuc\"}),okText:e.formatMessage({id:\"common.button.ok\"}),centered:!0,maskClosable:!1,onOk:n||(()=>{}),afterClose:i||(()=>{})})},operationFailed:(e,t,n,i)=>{r.Z.error({title:e.formatMessage({id:\"neteco.pvms.info\"}),content:t||e.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.doItFail\"}),okText:e.formatMessage({id:\"common.button.ok\"}),centered:!0,maskClosable:!1,onOk:n||(()=>{}),zIndex:i||1e3})},operationInfo:(e,t,n)=>{r.Z.info({title:e.formatMessage({id:\"neteco.pvms.info\"}),content:t||e.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"}),okText:e.formatMessage({id:\"common.button.ok\"}),centered:!0,maskClosable:!1,onOk:n||(()=>{})})},operationError:(e,t,n)=>{r.Z.error({title:e.formatMessage({id:\"neteco.pvms.info\"}),content:t||e.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"}),okText:e.formatMessage({id:\"neteco.pvms.cancel\"}),centered:!0,maskClosable:!1,onOk:n||(()=>{})})},operationWarn:(e,t)=>{r.Z.warn({title:e.formatMessage({id:\"neteco.pvms.info\"}),content:t||e.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"}),okText:e.formatMessage({id:\"common.button.ok\"}),centered:!0,maskClosable:!1})},operationConfirm:(e,t,n,i)=>r.Z.confirm({title:e.formatMessage({id:\"neteco.pvms.confirm\"}),content:t||e.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.smartLogger.handleFailed\"}),okText:e.formatMessage({id:\"common.button.ok\"}),centered:!0,maskClosable:!1,cancelText:e.formatMessage({id:\"neteco.pvms.cancel\"}),onOk:n||(()=>{}),onCancel:i||(()=>{})})}},68718:(e,t,n)=>{\"use strict\";n.d(t,{Bd:()=>b,DH:()=>D,EW:()=>Z,IB:()=>P,KS:()=>T,Kd:()=>E,Ki:()=>F,Nj:()=>C,Qh:()=>v,SY:()=>B,Tl:()=>U,Up:()=>L,WW:()=>M,Wf:()=>R,a7:()=>g,ao:()=>O,b:()=>_,bt:()=>w,dL:()=>k,ee:()=>H,gs:()=>V,nH:()=>y,om:()=>x,pT:()=>I,so:()=>N,uB:()=>A,v2:()=>u,vM:()=>S,wE:()=>m,xU:()=>z,xV:()=>j});var r=n(4342),i=n(99073),o=(n(83621),n(28976)),a=n(31519),s=n(37825),l=n(44184),c=n(65835);const u={COMPANY:a.e.stationReport.reportLevelNames.companyReport,SITE:a.e.stationReport.reportLevelNames.stationReport,INVERTER:a.e.stationReport.reportLevelNames.inverterReport,PCS:a.e.stationReport.reportLevelNames.PCSReport,STORAGE:a.e.stationReport.reportLevelNames.StorageReport},d=2,p=4,f=5,h=6,m=(e,t,n,r)=>e===o.Uc?n===i.b_?a.e.scope.root:t===i.b_?a.e.scope.topLevelCompany:a.e.scope.otherLevelCompany:e===o.mg?a.e.scope.station:r,g=(e,t,n)=>e?a.e.scope.station:t.moDn&&n&&n===i.b_?a.e.scope.topLevelCompany:(null==t?void 0:t.moDn)===i.b_?a.e.scope.root:a.e.scope.otherLevelCompany,v=e=>{c.$.saveAnalyticsData(a.e.monitorViewTree.searchTreeId,{pageName:a.e.monitorViewTree.pageName,actionName:a.e.monitorViewTree.searchTreeActionName,targetType:a.e.monitorViewTree.targetType[e]})},y=e=>{const t=m(e.mocId,e.parentDn,e.elementDn,a.e.scope.device);c.$.saveAnalyticsData(a.e.monitorViewTree.pickNodeId,{pageName:a.e.monitorViewTree.pageName,actionName:a.e.monitorViewTree.pickNodeActionName,nodeType:t})},b=e=>{const t=m(e.mocId,e.parentDn,e.elementDn);c.$.saveAnalyticsData(a.e.monitorViewTree.loadMoreId,{pageName:a.e.monitorViewTree.pageName,actionName:a.e.monitorViewTree.loadMoreActionName,scope:t})},S=(e,t)=>{const n=t.split(\"/\").map((e=>{return(t=e).includes(\"NE=\")||\"%2F\"===t?\"xxxxxxx\":t;var t})).join(\"/\");c.$.saveAnalyticsData(a.e.monitorViewTree.toggleTreeId,{pageName:a.e.monitorViewTree.pageName,actionName:a.e.monitorViewTree.toggleTreeActionName,treeStatus:e?a.e.monitorViewTree.treeStatus.open:a.e.monitorViewTree.treeStatus.close,currentRoute:n})},x=(e,t,n)=>{const i={date:a.e.timeDimension.day,month:a.e.timeDimension.month,year:a.e.timeDimension.year,lifetime:a.e.timeDimension.lifetime};let o=a.e.stationReport.methods.notStationReport;switch(t){case\"bySite\":case\"STORAGE\":o=a.e.stationReport.methods.stationMethod;break;case\"byTime\":o=a.e.stationReport.methods.timeMethod;break;case\"STORAGE_SUBARRAY\":o=a.e.stationReport.methods.storageSubarrayMethod;break;case\"STORAGE_OLD\":o=a.e.stationReport.methods.storageOldMethod;break;case\"STORAGE_CLUSTER\":o=a.e.stationReport.methods.storageClusterMethod;break;default:o=a.e.stationReport.methods.notStationReport}(0,r.Jm)().forEach((t=>{c.$.saveAnalyticsData(a.e.stationReport.reportSearchId,{pageName:u[e],method:o,timeDimension:i[n],roleName:null==t?void 0:t.name})}))},w=e=>{e.forEach((e=>{(0,r.Jm)().forEach((t=>{c.$.saveAnalyticsData(a.e.stationReport.changeConfigItemsId,{pageName:a.e.stationReport.pageName,roleName:null==t?void 0:t.name,configItems:a.e.configItems[e.key]})}))}))},C=(e,t,n)=>{const{reportLevelNames:r,subscribeReportActionName:o,subscribedMethod:s}=a.e.stationReport,l={[d]:a.e.timeDimension.day,[p]:a.e.timeDimension.month,[f]:a.e.timeDimension.year,[h]:a.e.timeDimension.lifetime},m={[i.Xc.BY_TIME]:s.byTime,[i.Xc.BY_SITE]:s.bySite};c.$.saveAnalyticsData(a.e.stationReport.subscribeReportId,{pageName:u[e]||r.stationReport,actionName:o,method:t?m[t]:s.noPlant,timeDimension:l[n]})},T=(e,t)=>{const n={date:a.e.timeDimension.day,month:a.e.timeDimension.month,year:a.e.timeDimension.year,lifetime:a.e.timeDimension.lifetime};c.$.saveAnalyticsData(a.e.stationReport.reportExportId,{pageName:u[e],actionName:a.e.stationReport.reportExportActionName,timeDimension:n[t]})},A=e=>{const{deviceType:t,deviceName:n,model:i,sn:o,status:l,areaIds:u,stationGridTime:d,stationType:p,softwareVersion:f}=e,h={ALL:a.e.deviceMgtView.filterConnectStatus.all,Connected:a.e.deviceMgtView.filterConnectStatus.withConnectStatus,Disconnected:a.e.deviceMgtView.filterConnectStatus.noConnectStatus};(0,r.Jm)().forEach((e=>{c.$.saveAnalyticsData(a.e.deviceMgtView.searchDeviceId,{pageName:a.e.deviceMgtView.pageName,actionName:a.e.deviceMgtView.searchDeviceActionName,roleName:null==e?void 0:e.name,filterDeviceType:t===s.Y?\"0\":String(t),filterDeviceName:n?a.e.deviceMgtView.filterDeviceName.withName:a.e.deviceMgtView.filterDeviceName.noName,filterDeviceSN:o?a.e.deviceMgtView.filterDeviceSN.withSN:a.e.deviceMgtView.filterDeviceSN.noSN,filterProductType:i?a.e.deviceMgtView.filterProductType.withType:a.e.deviceMgtView.filterProductType.noType,filterConnectStatus:h[l],filterAreaIds:u&&u!==s.Y?a.e.deviceMgtView.filterAreaIds.withAreaIds:a.e.deviceMgtView.filterAreaIds.noAreaIds,filterStationGridTime:d?a.e.deviceMgtView.filterStationGridTime.withStationGridTime:a.e.deviceMgtView.filterStationGridTime.noStationGridTime,filterStationType:p&&p!==s.Y?a.e.deviceMgtView.filterStationType.withStationType:a.e.deviceMgtView.filterStationType.noStationType,filterSoftwareVersion:f?a.e.deviceMgtView.filterSoftwareVersion.withSoftwareVersion:a.e.deviceMgtView.filterSoftwareVersion.noSoftwareVersion})}))},E=e=>{(0,r.Jm)().forEach((t=>{c.$.saveAnalyticsData(a.e.deviceMgtView.exportPerformanceId,{pageName:a.e.deviceMgtView.pageName,actionName:a.e.deviceMgtView.exportPerformanceActionName,roleName:null==t?void 0:t.name,processResult:e})}))},O=e=>{c.$.saveAnalyticsData(a.e.ESS3DView.changeId,{pageName:a.e.ESS3DView.pageName,actionName:e?a.e.ESS3DView.actionName.to3D:a.e.ESS3DView.actionName.to2D})},M=function(e,t){arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?c.$.saveAnalyticsData(e,t):(0,r.Jm)().forEach((n=>{c.$.saveAnalyticsData(e,{...t,roleName:n.name})}))},P=(e,t)=>{let n,r;const i=Object.entries(e).filter((e=>{let[t,n]=e;return!(0,l.xb)(n)&&\"_timestamp\"!==t})).map((e=>e[0])).map((e=>a.e.homeListView.homeListFilter[e]));if(!(0,l.xb)(t)){const{sortBy:e,sortOrder:i}=t;n=a.e.homeListView.homeListOrderItem[e],r=a.e.homeListView.homeListOrderType[i]}c.$.saveAnalyticsData(a.e.homeListView.searchId,{pageName:a.e.homeListView.pageName,filterItems:i,orderItem:n,orderType:r})},D=()=>{c.$.saveAnalyticsData(a.e.currentAlarm.toDefectAccessId,{pageName:a.e.currentAlarm.pageName,actionName:a.e.currentAlarm.toDefectActionName})},I=function(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?a.e.historyAlarm.pageName:a.e.currentAlarm.pageName;c.$.saveAnalyticsData(a.e.currentAlarm.exportAccessId,{pageName:e,actionName:a.e.currentAlarm.exportActionName})},N=()=>{(0,r.Jm)().forEach((e=>{c.$.saveAnalyticsData(a.e.companyManagementView.upgradeRoleAccessId,{pageName:a.e.companyManagementView.pageName,actionName:a.e.companyManagementView.upgradeRoleActionName,roleName:e.name})}))},_=()=>{(0,r.Jm)().forEach((e=>{c.$.saveAnalyticsData(a.e.stationDetailView.delDeviceAccessId,{pageName:a.e.stationDetailView.pageName,actionName:a.e.stationDetailView.delDeviceActionName,roleName:e.name})}))},j=()=>{(0,r.Jm)().forEach((e=>{c.$.saveAnalyticsData(a.e.stationEMS.saveEmsCfg,{pageName:a.e.stationEMS.pageName,roleName:null==e?void 0:e.name,actionName:a.e.stationEMS.saveEmsCfg.actionName})}))},k=()=>{(0,r.Jm)().forEach((e=>{c.$.saveAnalyticsData(a.e.stationEMS.selectSelfControl.selectSelfControlId,{pageName:a.e.stationEMS.pageName,roleName:null==e?void 0:e.name,actionName:a.e.stationEMS.selectSelfControl.actionName})}))},L=()=>{(0,r.Jm)().forEach((e=>{c.$.saveAnalyticsData(a.e.stationEMS.selectOtherControl.selectSelfControlId,{pageName:a.e.stationEMS.pageName,roleName:null==e?void 0:e.name,actionName:a.e.stationEMS.selectOtherControl.actionName})}))},R=()=>{(0,r.Jm)().forEach((e=>{c.$.saveAnalyticsData(a.e.stationEMS.jumpToEssSocPage.jumpToEssSocPageId,{pageName:a.e.stationEMS.pageName,roleName:null==e?void 0:e.name,actionName:a.e.stationEMS.jumpToEssSocPage.actionName})}))},Z=()=>{(0,r.Jm)().forEach((e=>{c.$.saveAnalyticsData(a.e.realtimeStateView.stationCompareAccessId,{pageName:a.e.realtimeStateView.pageName,actionName:a.e.realtimeStateView.stationCompareActionName,roleName:e.name})}))},B=()=>{const{type:e,versions:t}=(0,l.S7)(),n={browserType:e,browserVersion:t};c.$.saveAnalyticsData(a.e.client.browserId,n)},F=()=>{(0,r.Jm)().forEach((e=>{c.$.saveAnalyticsData(a.e.addOwnerUser.addOwnerUserId,{pageName:a.e.addOwnerUser.pageName,actionName:a.e.addOwnerUser.actionName,roleName:null==e?void 0:e.name})}))},z=()=>{(0,r.Jm)().forEach((e=>{c.$.saveAnalyticsData(a.e.unbindStation.unbindStationId,{pageName:a.e.unbindStation.pageName,actionName:a.e.unbindStation.actionName,roleName:null==e?void 0:e.name})}))},V=()=>{(0,r.Jm)().forEach((e=>{c.$.saveAnalyticsData(a.e.transferPermission.transferPermissionId,{pageName:a.e.transferPermission.pageName,actionName:a.e.transferPermission.actionName,roleName:null==e?void 0:e.name})}))},H=e=>{c.$.saveAnalyticsData(a.e.monitorTab.behaviorID,{tabType:e})},U=e=>{c.$.saveAnalyticsData(a.e.elecPriceEntry.behaviorID,{entryType:e})}},85397:(e,t,n)=>{\"use strict\";n.d(t,{DX:()=>a,ET:()=>p,EX:()=>d,Kb:()=>u,R0:()=>l,TD:()=>i,XS:()=>c,YM:()=>s,hg:()=>f,i$:()=>o});const{neto:r}=window,i=function(e,t){if(0===arguments.length)return null;if(!e)return null;const n=t||\"y-M-d h:m:s\";let r;\"object\"==typeof e?r=e:(10===String(e).length&&(e=1e3*parseInt(e)),r=new Date(e));const i={y:r.getFullYear(),M:r.getMonth()+1,d:r.getDate(),h:r.getHours(),m:r.getMinutes(),s:r.getSeconds(),w:r.getDay()};return n.replace(/(y|M|d|h|m|s|w)+/g,((e,t)=>{let n=i[t];return e.length>0&&n<10&&(n=\"0\"+n),n||0}))},o=function(e,t){if(isNaN(e))return e;e<41e8&&(e*=1e3);const n=new Date(e),r=n.getFullYear(),i=n.getMonth()+1,o=n.getDate(),a=n.getHours(),s=n.getMinutes(),l=n.getSeconds();return(t=(t=(t=(t=(t=(t=t.replace(/[y]{4}/,r)).replace(/[M]{2}/,i>9?i:\"0\"+i)).replace(/[d]{2}/,o>9?o:\"0\"+o)).replace(/[h]{2}/,a>9?a:\"0\"+a)).replace(/[m]{2}/,s>9?s:\"0\"+s)).replace(/[s]{2}/,l>9?l:\"0\"+l)).replace(/[w]{2}/,\"\")},a=function(e,t){switch(`${e}`){case\"createInspect\":return t.formatMessage({id:\"neteco.pvms.inspect.task.busiState.2\"});case\"startInspect\":return t.formatMessage({id:\"neteco.pvms.inspect.task.busiState.3\"});case\"excuteInspect\":return t.formatMessage({id:\"neteco.pvms.inspect.task.busiState.4\"});case\"confirmInspect\":return t.formatMessage({id:\"neteco.pvms.inspect.task.busiState.5\"});case\"finished\":return t.formatMessage({id:\"neteco.pvms.inspect.task.busiState.6\"});case null:return\"--\"}},s=function(e,t){switch(e){case\"archive\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.options.archive\"});case\"back\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.options.back\"});case\"export\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.options.export\"});case\"giveup\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.options.giveup\"});case\"submit\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.options.submit\"});case\"takeover\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.options.takeover\"});case null:return\"--\"}},l=function(e,t){switch(e){case\"confirmInspect\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.states.confirmInspect\"});case\"createInspect\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.states.createInspect\"});case\"defectWrite\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.states.defectWrite\"});case\"defectHandle\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.states.defectHandle\"});case\"defectConfirm\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.states.defectConfirm\"});case\"finished\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.states.finished\"});case\"giveup\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.wf.states.giveup\"});case null:return\"--\"}},c=function(e,t){switch(e){case 1:return t.formatMessage({id:\"neteco.pvms.inspect.inspectObj.lastResult.1\"});case 2:return t.formatMessage({id:\"neteco.pvms.inspect.inspectObj.lastResult.2\"});case 3:return t.formatMessage({id:\"neteco.pvms.inspect.inspectObj.lastResult.3\"});case 4:return t.formatMessage({id:\"neteco.pvms.inspect.inspectObj.lastResult.4\"});default:return\"--\"}},u=function(e,t){switch(e){case 0:return t.formatMessage({id:\"neteco.pvms.inspect.inspectObj.lastResult.1\"});case 1:return t.formatMessage({id:\"neteco.pvms.inspect.inspectObj.lastResult.2\"});case 2:return t.formatMessage({id:\"neteco.pvms.inspect.inspectObj.lastResult.3\"});default:return\"--\"}},d=function(e,t){switch(e){case\"1\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.dm.result.2\"});case\"2\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.dm.result.3\"});case\"3\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.dm.result.4\"});case\"4\":return t.formatMessage({id:\"neteco.pvms.partials.main.io.dm.result.5\"});case null:return\"--\"}},p=function(e){function t(e){return e.toString().padStart(2,\"0\")}let n=Math.floor(e/1e3),r=Math.floor(n/60),i=Math.floor(r/60);return n%=60,r%=60,`${t(i)}:${t(r)}:${t(n)}`},f=function(e,t,n){const r=window.atob(e),i=new ArrayBuffer(r.length),o=new Uint8Array(i);for(let e=0;e<r.length;e++)o[e]=r.charCodeAt(e);let a=document.createElement(\"a\");a.download=n,a.style.display=\"none\";const s=new Blob([i],{type:t});a.href=URL.createObjectURL(s),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},53137:(e,t,n)=>{\"use strict\";n.d(t,{aG:()=>u,Nu:()=>W,qS:()=>q,wU:()=>K,Ll:()=>Q,h8:()=>X,Tp:()=>N,dJ:()=>p,ZP:()=>f,FL:()=>E,bV:()=>A,z8:()=>C,BG:()=>_,fn:()=>j,MF:()=>Y,EM:()=>k,b3:()=>z,YC:()=>h,cO:()=>T,qM:()=>D,M0:()=>b,uf:()=>x,IX:()=>y,bX:()=>m,io:()=>S,ym:()=>U,JP:()=>O,pk:()=>d,LG:()=>P,PW:()=>M,ZA:()=>G,t9:()=>V,pE:()=>H,Pc:()=>g,sJ:()=>v,rJ:()=>w,m2:()=>F,fZ:()=>L,zi:()=>I});var r=n(99073),i=n(28976),o=n(4342),a=n(20928),s=n(49453),l=n(44184),c=n(37825);const u={company:\"company\",station:\"station\",device:\"device\",area:\"country\"};function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\";if(n)return\"COMPANY\"===n?u.company:\"STATION\"===n?u.station:u.device;const r=t.split(\",\").map((e=>Number(e))).find((e=>e!==i.mg&&e!==i.Uc));let o=u.company;return e||(r?o=u.device:t!==`${i.Uc}`&&(o=u.station)),o}function p(e,t){const{shouldFullPagination:n}=e;if(n){const{pageId:n,pageSize:r,parentDn:i,self:o,cond:a,needStatus:s=!0,companyTree:l,typeIdInclude:c}=e,{needPage:u=!0,MO_NAME:p,MOC_ID_INCLUDE:f,enableMocIdInclude:h=!0,searchType:m,EXCLUDE_SHARE_STATION:g,level:v,countryCode:y}=JSON.parse(a||\"{}\"),b=h&&f?f.split(\",\").map((e=>Number(e))):[],S=d(l,f,v);return t?{parentDn:i,filterName:p,filterNameType:m||S}:{parentDn:i,treeDepth:S,pageParam:{pageId:n,pageSize:r,needPage:u},filterCond:{name:p,nameType:m||S,mocIdInclude:b,countryCode:y,typeIdInclude:c},displayCond:{self:o,status:s,excludeShareStation:g}}}return{...e,node:void 0}}const f={loadDeviceTypeList:async()=>(0,s.U2)(\"/rest/neteco/web/config/device/v1/device-moc-type\")},h=async(e,t,n)=>{let r;if(t){let i=\"/rest/neteco/web/imodbus/v1/sunshine/verify-device?\",o=`esn=${e}&registerCode=${t}&deviceType=${n}`;r=await m(i+o,{})}else r=await m(`/rest/neteco/web/imodbus/v1/sunshine/verify-device?esn=${e}`,{});return r},m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4;return new Promise((r=>{(0,s.Sg)(e,t,n).then((e=>{\"string\"==typeof e&&(e=[]),r({success:!0,data:e})})).catch((e=>r({success:!1,data:e})))}))},g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4;return new Promise((r=>{(0,s.F0)(e,t,n).then((e=>r({success:!0,data:e}))).catch((e=>r({success:!1,data:e})))}))},v=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const i={\"conditionParams.curPage\":0,\"conditionParams.recordperpage\":500,\"conditionParams.parentDn\":e,\"conditionParams.monitoringRelation\":!(arguments.length>2&&void 0!==arguments[2])||arguments[2],\"conditionParams.mocTypes\":t.length>0?t.join(\",\"):void 0,\"conditionParams.signals\":n},o=await m(\"/rest/neteco/web/config/device/v1/children-list\",i),{success:a,data:s}=o;return a&&s.data?s.data.map((e=>({dn:e.dn,dnId:e.dnId,mocId:e.mocId,status:e.status||\"-\",name:e.mocTypeName||\"-\",type:e.paramValues[50009]||\"-\",soft:e.paramValues[50010]||\"-\",esn:e.paramValues[50012]||\"-\",chargeGunNo:e.paramValues[10003]||r.lH,workStatus:e.paramValues[10004],power:e.paramValues[10001],dailyCharge:e.paramValues[10032],accumulatedCharge:e.paramValues[10002]}))):[]},y=async e=>{const t=await m(`/rest/pvms/web/ivcurve/v1/devmanager/originaloptions?dnsList=${e}`,{}),{success:n,data:r}=t;if(n){const{data:e}=r,{currentModule:t}=e;return t&&t.length>0?{hasPvDetailConfigured:!0,pvDetailList:t}:{hasPvDetailConfigured:!1}}return{hasPvDetailConfigured:!1}},b=e=>{const t=p(e);return e.shouldFullPagination?g(\"/rest/dp/pvms/organization/v1/tree\",t):m(\"/rest/neteco/web/organization/v2/tree\",t,3e4)},S=e=>{const t=p(e);return g(\"/rest/dp/pvms/organization/v1/select-station\",t)},x=async(e,t)=>m(\"/rest/pvms/web/station/v1/layout/optimizer-info\",{inverterDn:e,moStatus:t}),w=async(e,t)=>(0,s.v_)(\"/rest/pvms/web/monitor/v1/refresh/signal/signal-refresh\",{dn:e,scenes:\"config\",operateSerial:t}),C=async e=>(0,s.v_)(\"/rest/pvms/station/v1/info/export-task\",e),T=async()=>(0,s.U2)(\"/rest/pvms/station/v1/info/export-task\"),A=e=>{(0,a.Z)(\"/rest/pvms/station/v1/info/download-task\",{taskId:e})},E=e=>{let t=`/rest/pvms/station/v1/info/export-task?taskId=${e}`;return(0,s.IV)(t)},O=async()=>m(\"/rest/pvms/web/systemtype/v1/system-type\"),M=e=>(0,s.U2)(\"/rest/neteco/web/organization/v2/check-shared-mo\",{targetDn:e}),P=async e=>{const{code:t,data:n}=await(0,s.Md)(\"/rest/neteco/web/config/device/v2/device-status-query\",{dn:e});return 0===t&&\"Connected\"===n.status},D=()=>new Promise((e=>{(0,s.U2)(\"/rest/pvms/web/security/v1/language\",{},\"text\").then((t=>{e(t)})).catch((()=>{e(\"zh\")}))})),I=()=>{(0,s.U2)(\"/rest/dp/pvms/dpaiplugin/v2/aifc/web/query-god-revenue\").then((e=>{window.globalVar.AIFCDeployState=!0})).catch((e=>{window.globalVar.AIFCDeployState=404!==e.status}))};function N(e){(0,s.v_)(\"/rest/neteco/web/organization/v2/users/is-cross-user\",[e]).then((e=>{var t;e.success&&e.data&&(window.globalVar.isCrossUser=null===(t=e.data[0])||void 0===t?void 0:t.isCross),window.globalVar.isCrossUser=!1})).catch((e=>{window.globalVar.isCrossUser=!1}))}const _=()=>(0,s.U2)(\"/rest/neteco/web/uniaccount/v1/accountControl\"),j=()=>(0,s.U2)(`/rest/neteco/web/organization/v2/users/${(0,o.n5)()}`),k=async()=>{const e=\"isCountyCloud\",t=sessionStorage.getItem(e);if(null!==t)return Boolean(\"true\"===t);const{success:n,data:r}=await(0,s.Sg)(\"/rest/pvms/web/installscene/v1/config/countyregion\");return sessionStorage.setItem(e,Boolean(n&&r)),Boolean(n&&r)},L=(e,t,n)=>{const r={type:\"access_external_res_error\",msg:JSON.stringify({logType:\"access_external_res_error\",res:\"map\",provider:e,errCode:t,errMsg:n})};(0,s.v_)(\"/rest/pvms/web/log/record-log\",r).catch((e=>{throw new Error(e)}))},R=\"Google Maps\",Z=\"error\",B=\"<AMap JSAPI> Error key\";function F(e){var t,n,r;(null==e?void 0:e.length)>0&&\"string\"==typeof e[0]&&(null!==(t=e[0])&&void 0!==t&&t.includes(R)&&null!==(n=e[0])&&void 0!==n&&n.includes(Z)&&L(\"google\",null,e[0]),null!==(r=e[0])&&void 0!==r&&r.includes(B)&&L(\"amap\",null,e[0]))}const z=()=>m(\"/rest/neteco/web/organization/v2/company/current\"),V=async e=>{const{success:t,data:n}=await z();if(t){var r;const{data:t}=n,i=await b({...e,shouldFullPagination:(0,o.p$)(),pageId:1,parentDn:t.moDn});return(null==i||null===(r=i.data)||void 0===r?void 0:r.childList)||(null==i?void 0:i.data)}return[]},H=async()=>{let e=!1;try{const{success:t,data:n}=await(0,s.Sg)(\"/rest/pvms/web/management/v1/config/remote_on_off\",{});t&&!0===(null==n?void 0:n.AustraliaSwitchEnable)&&(e=!0)}catch{(0,c.mz)()}return e},U=async()=>{var e;let{systemConfigs:t}=(null===(e=window.neteco)||void 0===e?void 0:e.fusionsolar)||{};if(t)return t;const[n,r]=await(0,l.AM)((0,s.Sg)(\"/rest/pvms/web/systemtype/v1/system-configs\"));return n||null==r||!r.success?null:(t=null==r?void 0:r.data,window.neteco.fusionsolar={...window.neteco.fusionsolar,systemConfigs:t},t)},G=()=>(0,s.U2)(\"/rest/dp/elecpriceservice/v1/currency\"),Y=async e=>{const[t,n]=await(0,l.AM)((0,s.U2)(\"/rest/dp/organization/v2/company/switch\",e));return t?[]:n},W=[u.area,u.station],K=[u.company,u.station],q=[u.area,u.station,u.device],Q=[u.company,u.station,u.device],X=[u.station,u.device]},55751:(e,t,n)=>{\"use strict\";function r(e,t){let n;const r=document.querySelector(e);return r&&(n=r.getBoundingClientRect().height-t),n}function i(e){return e?\"ascend\"===e?\"ASC\":\"DESC\":e}n.d(t,{P:()=>i,h:()=>r})},31519:(e,t,n)=>{\"use strict\";n.d(t,{e:()=>o});var r=n(26438),i=n(99073);const o={client:{browserId:\"FSWEB01010401\",ratioId:\"FSWEB01020401\"},homeListView:{pageName:\"HomeListView\",accessId:\"FSWEB03010101\",leaveId:\"FSWEB03010202\",searchId:\"FSWEB03010303\",homeListFilter:{searchName:\"1\",areaName:\"2\",deviceType:\"3\",installedCapacity:\"4\",gridTime:\"5\",plantStatus:\"6\",plantType:\"7\",deviceEsn:\"8\"},homeListOrderItem:{plantStatus:\"1\",name:\"2\",plantType:\"3\",areaName:\"4\",plantAddress:\"5\",gridConnectedTime:\"6\",installedCapacity:\"7\",optimizerNum:\"8\"},homeListOrderType:{ascend:\"1\",descend:\"2\"}},homeKPIView:{pageName:\"HomeKPIView\",accessId:\"FSWEB03020101\",leaveId:\"FSWEB03020202\"},homeMapView:{pageName:\"HomeMapView\",accessId:\"FSWEB03030101\",leaveId:\"FSWEB03030202\",changeMapId:\"FSWEB03030304\",changeMapActionName:\"changeMapType\"},mapTypes:{openStreet:\"1\",mapboxStreet:\"2\",mapboxSatellite:\"3\",mapboxCustom:\"4\",amapStreet:\"5\",amapSatellite:\"6\",amapCustom:\"7\",googleStreets:\"8\",googleSatellite:\"9\",blank:\"10\"},scope:{root:\"1\",topLevelCompany:\"2\",otherLevelCompany:\"3\",station:\"4\",device:\"5\",global:\"6\"},monitorViewTree:{pageName:\"MonitorView\",searchTreeId:\"FSWEB04010301\",searchTreeActionName:\"searchTree\",targetType:{company:\"1\",station:\"2\",device:\"3\"},pickNodeId:\"FSWEB04010302\",pickNodeActionName:\"pickRootNode\",loadMoreId:\"FSWEB04010303\",loadMoreActionName:\"loadMore\",toggleTreeId:\"FSWEB04010304\",toggleTreeActionName:\"toggleTree\",treeStatus:{close:1,open:2},pageVersionId:\"FSWEB04010305\",pageVersionName:\"pageVersion\"},timeDimension:{day:String(r.x4.dim),month:String(r.vc.dim),year:String(r.oP.dim),lifetime:String(r.NT.dim)},configItems:{stationName:\"1\",stationAddr:\"2\",installedCapacity:\"3\",radiationIntensity:\"4\",sunshineHours:\"5\",temperature:\"6\",theoryPower:\"7\",productPower:\"8\",inverterPower:\"9\",totalPower:\"10\",onGridPower:\"11\",perpowerRatio:\"12\",buyPower:\"13\",powerCuts:\"14\",powerCutsProfit:\"15\",usePower:\"16\",selfUsePower:\"17\",selfUsePowerRatio:\"18\",acPeakPower:\"19\",performanceRatio:\"20\",loadFacto:\"21\",reductionTotalCO2:\"22\",reductionTotalCoal:\"23\",powerProfit:\"24\",fmtCollectTimeStr:\"25\",planPower:\"26\",reductionTotalTree:\"27\"},stationReport:{accessId:\"FSWEB04020101\",leaveId:\"FSWEB04020202\",reportLevelNames:{stationReport:\"1\",inverterReport:\"2\",PCSReport:\"3\",StorageReport:\"4\",companyReport:\"5\"},reportSearchId:\"FSWEB04020303\",methods:{notStationReport:\"0\",timeMethod:\"1\",stationMethod:\"2\",storageSubarrayMethod:\"3\",storageOldMethod:\"4\",storageClusterMethod:\"5\"},changeConfigItemsId:\"FSWEB04020305\",pageName:\"StationReport\",reportExportId:\"FSWEB04020306\",reportExportActionName:\"exportReport\",subscribeReportId:\"FSWEB04020307\",subscribeReportActionName:\"subscribeReport\",subscribedMethod:{noPlant:\"0\",bySite:\"1\",byTime:\"2\"}},deviceMgtView:{pageName:\"DeviceMgtView\",accessId:\"FSWEB04030101\",leaveId:\"FSWEB04030202\",searchDeviceId:\"FSWEB04030303\",searchDeviceActionName:\"searchDevice\",filterDeviceName:{withName:\"1\",noName:\"2\"},filterDeviceSN:{withSN:\"1\",noSN:\"2\"},filterProductType:{withType:\"1\",noType:\"2\"},filterConnectStatus:{all:\"0\",withConnectStatus:\"1\",noConnectStatus:\"2\"},filterAreaIds:{withAreaIds:\"1\",noAreaIds:\"2\"},filterStationGridTime:{withStationGridTime:\"1\",noStationGridTime:\"2\"},filterStationType:{withStationType:\"1\",noStationType:\"2\"},filterSoftwareVersion:{withSoftwareVersion:\"1\",noSoftwareVersion:\"2\"},exportPerformanceId:\"FSWEB04030311\",exportPerformanceActionName:\"exportPerformanceInfo\",processResult:{success:\"0\",overScope:\"1\"},paramsSetting:{paramsSettingId:\"FSWEB04030307\",paramsSettingActionName:\"configSignals\",processResult:{success:\"0\",failOfSelectMoreStation:\"1\",failOfOutSystem:\"2\",fail:\"3\"}},swappingDevice:{swappingDeviceId:\"FSWEB04030308\",swappingDeviceActionName:\"swapDevice\",processResult:{success:\"0\",failOfTimeOut:\"1\",fail:\"2\"}},deleteDevice:{deleteDeviceId:\"FSWEB04030309\",deleteDeviceActionName:\"deleteDevice\"},exportBaseInfo:{exportBaseInfoId:\"FSWEB04030310\",exportBaseInfoActionName:\"exportBasicInfo\"},modifyDeviceInfo:{modifyDeviceInfoId:\"FSWEB04030312\",modifyDeviceInfoActionName:\"modifyDeviceInfo\"},jumpToStationView:{jumpToStationViewId:\"FSWEB04030304\",jumpToStationViewActionName:\"jumpToStationView\"},jumpToDeviceView:{jumpToDeviceViewId:\"FSWEB04030305\",jumpToDeviceViewActionName:\"jumpToDeviceView\"},releaseDevice:{releaseDeviceId:\"FSWEB04030306\",releaseDeviceActionName:\"releaseDevice\"},batchRenameDeviceInfo:{batchRenameDeviceInfoId:\"FSWEB04030313\",batchRenameDeviceInfoActionName:\"batchRenameDeviceInfo\"}},deviceTypes:{all:\"0\",EMMA:\"1\",ESS:\"2\",ESU:\"3\",NCU:\"4\",PCS:\"5\",PID:\"6\",STS:\"7\",CHARGE:\"8\",DCDC:\"9\",BACKUP_BOX:\"10\",SMART_LOGGER:\"11\",EMI:\"12\",METER:\"13\",AIR_CONDITIONER:\"14\",STRING_INVERTER:\"15\",DONGLE:\"16\",BATTERY_CLUSTER:\"17\",OPTIMIZER:\"18\",ESM:\"19\",TCUE:\"20\",LITHIUM_CELL:\"21\",CONTROLLER:\"22\"},stationOverview:{pageName:\"StationOverview\",accessId:\"FSWEB04050101\",leaveId:\"FSWEB04050202\"},stationType:{houseHold:i.x1.HOUSEHOLD_STATION,business:i.x1.BUSINESS_STATION,plant:i.x1.GROUND_STATION},stationLayoutView:{pageName:\"StationLayoutView\",accessId:\"FSWEB04060101\",leaveId:\"FSWEB04060202\",layoutType:{physical:\"1\",logical:\"2\"}},deviceOverview:{pageName:\"DeviceOverview\",accessId:\"FSWEB04080101\",leaveId:\"FSWEB04080202\"},currentAlarm:{pageName:\"CurrentAlarmView\",accessId:\"FSWEB04040101\",leaveId:\"FSWEB04040202\",toDefectAccessId:\"FSWEB04040311\",toDefectActionName:\"alarmToDefect\",exportAccessId:\"FSWEB04040312\",exportActionName:\"exportAlarm\"},historyAlarm:{pageName:\"HistoryAlarmView\",accessId:\"FSWEB04040103\",leaveId:\"FSWEB04040204\"},deviceDetail:{pageName:\"DeviceDetailView\",accessId:\"FSWEB04090101\",leaveId:\"FSWEB04090202\",resetDeviceName:\"resetDevice\",resetDeviceId:\"FSWEB04090311\",switchDeviceName:\"switchDevice\",switchDeviceId:\"FSWEB04090312\",operationTypes:{open:\"1\",close:\"2\"}},deviceHistoryData:{pageName:\"DeviceHistoryDataView\",accessId:\"FSWEB04110101\",leaveId:\"FSWEB04110202\"},deviceParams:{pageName:\"DeviceParamsView\",accessId:\"FSWEB04120101\",leaveId:\"FSWEB04120202\"},ESS3DView:{pageName:\"ESS3DView\",accessId:\"FSWEB04100101\",leaveId:\"FSWEB04100202\",changeId:\"FSWEB04100303\",actionName:{to2D:\"1\",to3D:\"2\"}},stationMgtView:{pageName:\"StationMgtView\",accessId:\"FSWEB05010101\",leaveId:\"FSWEB05010202\"},stationDetailView:{pageName:\"StationDetailView\",accessId:\"FSWEB05020101\",leaveId:\"FSWEB05020202\",delDeviceAccessId:\"FSWEB05020403\",delDeviceActionName:\"delStationDevice\"},realtimeStateView:{pageName:\"RealtimeStateView\",accessId:\"FSWEB07010101\",leaveId:\"FSWEB07010202\",stationCompareAccessId:\"FSWEB07010303\",stationCompareActionName:\"compareStation\"},inspectTaskMgtView:{pageName:\"InspectTaskMgtView\",accessId:\"FSWEB07030101\",leaveId:\"FSWEB07030202\",mode:{task:\"1\",station:\"2\"}},defectEliminationView:{pageName:\"DefectEliminationView\",accessId:\"FSWEB07040101\",leaveId:\"FSWEB07040202\",mode:{default:\"1\",filter:\"2\"}},inverterVariationPage:{pageName:\"InverterVariationPage\",accessId:\"FSWEB07050101\",leaveId:\"FSWEB07050202\"},stringVariationPage:{pageName:\"StringVariationPage\",accessId:\"FSWEB07060101\",leaveId:\"FSWEB07060202\"},specialOffer:{openRemindId:\"FSWEB08010301\",pageName:\"SpecialOfferPage\",actionName:\"inviteTickdata\",inviteSwitch:{notCheck:\"1\",check:\"2\"}},diagnosis:{pageName:\"ComponentDiagnosis\",accessId:\"FSWEB08020101\",leaveId:\"FSWEB08020202\",createActionName:\"createTask\",createId:\"FSWEB08020303\",viewActionName:\"viewReportOnline\",viewId:\"FSWEB08020304\",downloadActionName:\"downloadReport\",downloadId:\"FSWEB08020305\"},stationMigrate:{pageName:\"PlantMigration\",accessId:\"FSWEB05030101\",leaveId:\"FSWEB05030202\"},companyManagementView:{pageName:\"CompanyManagement\",accessId:\"FSWEB09010101\",leaveId:\"FSWEB09010202\",upgradeRoleAccessId:\"FSWEB09010303\",upgradeRoleActionName:\"upgradeUserRole\"},dataRepairView:{pageName:\"DataRepair\",accessId:\"FSWEB09020101\",leaveId:\"FSWEB09020202\"},customSummaryView:{pageName:\"ManualAggregation\",accessId:\"FSWEB09030101\",leaveId:\"FSWEB09030202\"},messagePublishView:{pageName:\"SendAnnouncement\",accessId:\"FSWEB09040101\",leaveId:\"FSWEB09040202\"},deviceInspectionView:{pageName:\"InspectTaskMgtView\",accessId:\"FSWEB07030101\",leaveId:\"FSWEB07030202\"},stationSubsystemPv:{pageName:\"SubSysPVView\",accessId:\"FSWEB04130101\",leaveId:\"FSWEB04130202\"},stationSubsystemEss:{pageName:\"SubSysESSView\",accessId:\"FSWEB04140101\",leaveId:\"FSWEB04140202\"},stationSubsystemCharge:{pageName:\"SubSysChargeView\",accessId:\"FSWEB04150101\",leaveId:\"FSWEB04150202\"},stationEMS:{pageName:\"StationEMS\",accessId:\"FSWEB04160101\",leaveId:\"FSWEB04160202\",selectSelfControl:{pageName:\"StationEMS\",actionName:\"SelectSelfControl\",selectSelfControlId:\"FSWEB04160303\"},selectOtherControl:{pageName:\"StationEMS\",actionName:\"SelectOtherControl\",selectSelfControlId:\"FSWEB04160304\"},saveEmsCfg:{pageName:\"StationEMS\",actionName:\"SaveEmsCfg\",saveEmsCfgId:\"FSWEB04160305\"},jumpToEssSocPage:{pageName:\"StationEMS\",actionName:\"jumpToEssSocPage\",jumpToEssSocPageId:\"FSWEB04160306\"}},negativeSwitch:{pageName:\"StationOverview\",actionName:\"operateSwitch\",switchId:\"FSWEB04050309\",switchType:{open:\"1\",close:\"2\"}},oldBigScreen:{company:{pageName:\"OldIocCompany\",accessId:\"FSWEB01010101\",leaveId:\"FSWEB01010202\"},station:{pageName:\"OldIocStation\",accessId:\"FSWEB01020101\",leaveId:\"FSWEB01020202\"}},newIocStation:{pageName:\"NewIocStation\",accessId:\"FSWEB01030101\",leaveId:\"FSWEB01030202\"},newIocPV:{pageName:\"NewIocPV\",accessId:\"FSWEB01040101\",leaveId:\"FSWEB01040202\"},newIocESS:{pageName:\"NewIocESS\",accessId:\"FSWEB01050101\",leaveId:\"FSWEB01050202\"},newIocCharge:{pageName:\"NewIocCharge\",accessId:\"FSWEB01060101\",leaveId:\"FSWEB01060202\"},newIocCfg:{pageName:\"NewIocCfg\",accessId:\"FSWEB01070101\",leaveId:\"FSWEB01070202\"},addOwnerUser:{pageName:\"StationUserView\",actionName:\"addOwnerUser\",addOwnerUserId:\"FSWEB04170301\"},unbindStation:{pageName:\"StationUserView\",actionName:\"unbindStation\",unbindStationId:\"FSWEB04170302\"},transferPermission:{pageName:\"StationUserView\",actionName:\"transferPermission\",transferPermissionId:\"FSWEB04170303\"},monitorTab:{behaviorID:\"FSWEB04180101\",tabType:{DETAIL:\"1\",PLANT_ENERGY_MANAGEMENT:\"2\",LAYOUT:\"3\",BENEFIT_ANALYSIS:\"4\",TREND:\"5\",REPORT:\"6\",DEVICE_MANAGEMENT:\"7\",ALARM_MANAGEMENT:\"8\",AIFC:\"9\",COEFFICIENT_ANALYSIS:\"10\",PLANT_PROFILE:\"11\",POWER_NORMALIZATION:\"12\",PV_DIAGNOSIS:\"13\",ESS_DIAGNOSIS:\"14\",PLANT_USERS:\"15\",LOAD_SHEDDING:\"16\"}},elecPriceEntry:{behaviorID:\"FSWEB05100101\",entryType:{BY_PLANT_MANAGEMENT_EDIT:\"1\",BY_PLANT_OVERVIEW:\"2\",BY_PLANT_BENEFIT_ANALYSIS:\"3\",BY_EMMA:\"4\",BY_ENERGY_MANAGEMENT_ASSISTANT:\"5\",BY_OPEN_NEGATIVE_RATE:\"6\",BY_PLANT_MANAGEMENT_CREATE:\"7\"}}}},44184:(e,t,n)=>{\"use strict\";n.d(t,{AM:()=>_,AZ:()=>Q,B7:()=>j,Dc:()=>H,F6:()=>de,HD:()=>E,Kn:()=>I,LK:()=>ne,Md:()=>Z,Q2:()=>B,S7:()=>G,Sz:()=>Y,VF:()=>S,VW:()=>k,W_:()=>se,Ws:()=>fe,X_:()=>J,Z4:()=>q,ae:()=>z,as:()=>W,c4:()=>ue,cW:()=>R,dG:()=>P,dU:()=>ve,e5:()=>F,eV:()=>ge,er:()=>X,f2:()=>oe,fR:()=>ce,g6:()=>me,hj:()=>O,iJ:()=>he,jz:()=>$,kJ:()=>A,kk:()=>V,lF:()=>x,lP:()=>re,le:()=>T,mf:()=>D,p$:()=>le,pB:()=>U,pM:()=>K,q6:()=>ae,q8:()=>ee,sJ:()=>C,vU:()=>N,ve:()=>L,xb:()=>w,zh:()=>pe});var r=n(42271),i=n(99073),o=n(51523),a=n.n(o),s=n(92915),l=n(56687),c=n(24301),u=n(4342),d=n(37920),p=n.n(d),f=n(88391),h=n(37825),m=n(49453),g=n(30912),v=(n(21678),n(68718)),y=n(23712);const{neteco:b}=window,S=e=>/^[\\u4E00-\\u9FA5]+$/.test(e),x=e=>[\"元\",\"度\"].includes(e);function w(e){return null==e||\"\"===e||Array.isArray(e)&&0===e.length||\"[object Object]\"===Object.prototype.toString.call(e)&&\"{}\"===JSON.stringify(e)}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"YYYY-MM-DD HH:mm:ss\";return w(e)?i.lH:t?p()(e).format(n):e}function T(e){return[null,void 0].includes(e)}function A(e){return e&&(e instanceof Array||Array.isArray(e)||\"[object Array]\"===Array.prototype.toString.call(e))}function E(e){return\"string\"==typeof e}function O(e){return\"number\"==typeof e}let M=0;function P(){let e=(new Date).valueOf();return e<=M?e=++M:M=e,e}function D(e){return\"function\"==typeof e}function I(e){return null!==e&&\"object\"==typeof e&&!function(e){return(e instanceof Date||\"[object Date]\"===Object.prototype.toString.call(e))&&!isNaN(e.getTime())}(e)&&!A(e)}function N(){var e;return null!==(null===(e=navigator)||void 0===e?void 0:e.userAgent.match(/Firefox\\//))}function _(e){return e.then((e=>[null,e])).catch((e=>[e,void 0]))}class j{static setInterval(e,t){const n=()=>{e.call(null),this.m_timer&&(clearTimeout(this.m_timer),this.m_timer=null),this.m_timer=setTimeout(n,t)};this.m_timer=setTimeout(n,t)}static clearInterval(){clearTimeout(this.m_timer),this.m_timer=null}}function k(){return\"true\"===sessionStorage.getItem(\"ncoAccountControl\")}function L(e){return new Promise(((t,n)=>{const r=document.createElement(\"script\");r.type=\"text/javascript\",r.src=e,r.onload=()=>{t(null)},r.onerror=e=>{n(e)},document.body.appendChild(r)}))}function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\";(0,u.p$)()&&(e=e.replace(/index\\.html/,\"cloud.html\")),b.microApp.jump({url:e,cloudUrl:t})}function Z(){var e;const t=document.querySelectorAll(\"script\"),n=Array.prototype.find.call(t,(e=>e.src.includes(\"framework.js\"))),r=null==n||null===(e=n.src)||void 0===e?void 0:e.match(/.*v=(.*)/);return(null==r?void 0:r.length)>1?r[1]:\"\"}function B(e){var t,n;let r=e;(0,u.p$)()&&(r=r.replace(/index\\.html/,\"cloud.html\"));const i=new URLSearchParams(window.location.search.slice(1)),o=document.createElement(\"a\");o.href=r;const a=new URLSearchParams(o.search.slice(1));[\"app-id\",\"instance-id\",\"zone-id\"].forEach((e=>function(e,t,n){const r=t.get(n);\"string\"==typeof r&&e.set(n,r)}(a,i,e)));let s=a.toString();s&&(s=\"?\"+s);let l=o.pathname+s+o.hash;return null!==(t=o.pathname)&&void 0!==t&&null!==(n=t.startsWith)&&void 0!==n&&n.call(t,\"/uniportal\")?l:\"/uniportal\"+l}async function F(){const e={locale:(0,g.Z)(\"_\"),isRegionQuery:!0},[t,n]=await _((0,m.U2)(\"/rest/dp/pvms/dporganizationwebsite/v3/company/area-list\",e));return t?[]:n}function z(e){let t=window.console;if(!t)return;const n={};return[\"error\",\"log\"].forEach((r=>{!function(r){const i=t[r];n[r]=i,t[r]=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e&&e(r),i.apply&&i.apply(t,r)}}(r)})),function(){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(window.console[e]=n[e])}}function V(e){return e?\"ascend\"===e?\"asc\":\"desc\":e}function H(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=e.map((e=>isNaN(e)?0:Number(e))),r=n.reduce(((e,t)=>e+Number(t)),0),o=[];for(let e=0;e<n.length;e++)if(0===r)o.push(i.Nw);else if(e!==n.length-1)o.push((100*n[e]/r).toFixed(t));else{const e=o.reduce(((e,t)=>e+Number(t)),0);o.push((100-e).toFixed(t))}return o}function U(){return\"xxxx-xxxx-4xxx-yxxx\".replace(/[xy]/g,(e=>{const t=16*window.twaver.Util.random()|0;return(\"x\"===e?t:3&t|8).toString(16)}))}const G=()=>{const e=navigator.userAgent.toLowerCase(),t={},n={WeixinBrowser:/MicroMessenger/i.test(e),IE:window.ActiveXObject||\"ActiveXObject\"in window,Edge:e.indexOf(\"edge\")>-1,Opera:e.indexOf(\"opera\")>-1,Chrome:e.indexOf(\"chrome\")>-1&&e.indexOf(\"safari\")>-1,Safari:e.indexOf(\"safari\")>-1&&-1===e.indexOf(\"chrome\"),QQBrowser:/qqbrowser/.test(e),Firefox:e.indexOf(\"firefox\")>-1};for(let r in n)if(n[r]){let n=\"\";\"IE\"===r?n=e.match(/(msie\\s|trident.*rv:)([\\w.]+)/)[2]:\"Chrome\"===r?n=e.match(/chrome\\/([\\d.]+)/)[1]:\"Firefox\"===r?n=e.match(/firefox\\/([\\d.]+)/)[1]:\"Opera\"===r?n=e.match(/opera\\/([\\d.]+)/)[1]:\"Safari\"===r?n=e.match(/version\\/([\\d.]+)/)[1]:\"Edge\"===r?n=e.match(/edge\\/([\\d.]+)/)[1]:\"QQBrowser\"===r&&(n=e.match(/qqbrowser\\/([\\d.]+)/)[1]),t.type=r,t.versions=n}return t},Y=()=>`${document.body.clientWidth}*${document.body.offsetHeight}`,W=e=>{try{return JSON.parse(e)}catch(e){return null}},K=e=>{if(\"string\"==typeof e)try{if(JSON.parse(e)&&(I(JSON.parse(e))||A(JSON.parse(e))))return!0}catch(e){return!1}return!1},q=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===i.x1.BUSINESS_STATION||t?(0,u.jA)()?\"neteco.pvms.aifc.revenueReport.CI.tit\":\"neteco.pvms.aifc.revenueReport.no.china.CI.tit\":\"neteco.pvms.aifc.EMMA\"},Q=e=>w(e)||e.startsWith(\"00\")||e.startsWith(\"+\")?e:\"00\"+e,X=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,v.Tl)(t),sessionStorage.elecPrice_dn_from_station=e,R(n?\"/dpelecpricewebsite/assets/build/cloud.html#/elecPrice/list\":\"/dpelecpricewebsite/assets/build/cloud.html#/feedIn/tariff\")},J=()=>{var e;return\"zh-cn\"===(null==b||null===(e=b.i18n)||void 0===e?void 0:e.getLocale())},$=e=>{const{labelClassName:t,labelContent:n,tooltipContent:r,IconComponent:i,TooltipComponent:o,iconClassName:a}=e,s=i||l.Z,u=o||c.Z;return(0,y.jsxs)(\"div\",{className:t,children:[(0,y.jsx)(\"span\",{title:n,children:n}),\" \",(0,y.jsx)(u,{title:r,children:(0,y.jsx)(s,{className:a})})]})};function ee(e,t){return typeof e==typeof t?e===t:null===e&&void 0===t||void 0===e&&null===t||(\"boolean\"==typeof e&&(e=Number(e)),\"boolean\"==typeof t&&(t=Number(t)),\"string\"==typeof e&&(e=Number(e)),\"string\"==typeof t&&(t=Number(t)),e===t)}function te(e,t){const{timeZoneOffset:n,dstOffset:r}=e[t]||{};if(!(0,s.default)(n)&&!(0,s.default)(r))return{timeZoneOffset:n,dstOffset:r}}function ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const n=e.find((e=>!(0,s.default)(e.timeZoneOffset)&&!(0,s.default)(e.dstOffset)));return e.map(((r,i)=>{var o;let a,l=\"\";if(0!==r.dstOffset&&(l=\"DST\"),!(0,s.default)(r.timeZoneOffset)&&!(0,s.default)(r.dstOffset)){const e=r.startTime+60*r.timeZoneOffset+60*r.dstOffset;return`${p().utc(1e3*e).format(t)} ${l}`}if(i>0&&(a=te(e,i-1)),i<e.length-1&&!a&&(a=te(e,i+1)),a=null!==(o=a)&&void 0!==o?o:n,a){const e=r.startTime+60*a.timeZoneOffset+60*a.dstOffset;return`${p().utc(1e3*e).format(t)} ${l}`}return`${p()(1e3*r.startTime).format(t)} ${l}`}))}const re=e=>e?e<ie(1)?e+\" B\":e<ie(2)?(e/ie(1)).toFixed(2)+\" KB\":e<ie(3)?(e/ie(2)).toFixed(2)+\" MB\":e<ie(4)?(e/ie(3)).toFixed(2)+\" GB\":(e/ie(4)).toFixed(2)+\" TB\":\"\",ie=e=>Math.pow(1024,e),oe=e=>{if(E(e)&&(e=e.trim()),e!==h.Y&&!w(e))return e},ae=async(e,t,n)=>await(async(e,t)=>{const n=await r.Z.getSupportRisk(),i=w(t)?void 0:t;if(n){const[t,n]=await _((0,m.U2)(`/rest/dp/pvms/webservice/v1/validate/text-risk-control?featureName=${e}&message=${i}`,null,\"text\",!1));return 451!==(null==t?void 0:t.status)}return!0})(e,t)?Promise.resolve():Promise.reject(n.formatMessage({id:\"neteco.pvms.sensitive.text\"})),se=()=>({list:[],total:0,page:1,pageSize:10}),le=function(e){return JSON.parse(JSON.stringify(e))},ce=e=>{const t=(0,f.useRef)(),[n,r]=(0,f.useState)(e);return(0,f.useEffect)((()=>{t.current&&t.current(n)}),[n]),[n,(e,n)=>{t.current=n,r(e)}]},ue=e=>a()(e,1e3),de=function(e){let t=null;const n=Object.keys(e);let r=null;for(const i of n)r=e[i],\"childList\"===i&&e.childList.length>0?t=de(r[0]):\"elementDn\"===i&&0===e.childList.length&&(t=e);return t},pe=()=>{var e,t,n,r;return\"1\"===(null===(e=window.neteco)||void 0===e||null===(t=e.custom)||void 0===t||null===(n=t.getFusionSolarCustom)||void 0===n||null===(r=n.call(t))||void 0===r?void 0:r.cloudMenuSwitch)};function fe(e,t){const n=new Set(e);return t.some((e=>!n.has(e)))}function he(e){var t;return null==e||null===(t=e.split(\"\"))||void 0===t?void 0:t.every((e=>\"*\"===e))}function me(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"YYYY-MM-DD HH:mm:ss\",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.lH;const r=p()(e);return!T(e)&&r.isValid()?w(t)?r:r.format(t):n}const ge=e=>{const t=URL.createObjectURL(e),n=window.top.document.createElement(\"a\");n.download=e.name,n.style.display=\"none\",n.href=t,window.top.document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),window.top.document.body.removeChild(n)};function ve(e){const t=null==e?void 0:e.trim();return\"\"!==t&&!Number.isNaN(Number(t))}},44772:(e,t,n)=>{\"use strict\";n.d(t,{DS:()=>h,Hb:()=>p,MF:()=>y,N5:()=>m,Ug:()=>d,Wj:()=>f,X6:()=>v,iB:()=>g,l_:()=>s,mk:()=>c,n0:()=>l,xX:()=>u});var r=n(96299),i=n(37920),o=n.n(i),a=n(44184);function s(e){const t=(0,a.HD)(e)?e:r.Z.intl.formatMessage({id:\"common.message.notEmpty\"});return{required:!0,validator:(e,n,r)=>{n&&0!==n.trim().length?r():r(t)}}}function l(){return{required:!0,message:r.Z.intl.formatMessage({id:\"common.message.notEmpty\"})}}function c(){return{required:!0,message:\" \"}}function u(e){return{max:e,message:r.Z.intl.formatMessage({id:\"neteco.pvms.validator.maxlength\"},{0:e})}}function d(e,t,n){const i=new RegExp(`^(\\\\-)?\\\\d+(\\\\.\\\\d{1,${n}})?$`);return{validator:(o,a,s)=>{const l=(null==a?void 0:a.length)>0&&(Number(a)<e||Number(a)>t),c=(null==a?void 0:a.length)>0&&!i.test(a);l||c?s(r.Z.intl.formatMessage({id:\"neteco.pvms.station.availability.addECO.effectAmount.rule\"},{0:e,1:t,2:n})):s()}}}function p(e,t){const n=new RegExp(\"^(\\\\-)?\\\\d+$\");return{validator:(i,o,a)=>{const s=(null==o?void 0:o.length)>0&&(Number(o)<e||Number(o)>t),l=(null==o?void 0:o.length)>0&&!n.test(o);s||l?a(r.Z.intl.formatMessage({id:\"neteco.pvms.ncoSystemParameter.message.inputValidIntegerInRange\"},{0:e,1:t})):a()}}}function f(e,t){const n=new RegExp(`^[a-zA-Z0-9!#$%&'*+\\\\/=?^_\\`{|}~.-]{1,200}@${e}$`);return{validator:(e,i,o)=>{if((null==i?void 0:i.length)>0){const e=null==i?void 0:i.replaceAll(\"；\",\";\").split(\";\").filter((e=>\"\"!==e));e.length>t?o(r.Z.intl.formatMessage({id:\"neteco.operation.inviteCode.message.overNumTip\"},{0:t})):e.some((e=>!n.test(e)))?o(r.Z.intl.formatMessage({id:\"neteco.operation.inviteCode.message.onlyHWTip\"})):0===e.length?o(r.Z.intl.formatMessage({id:\"common.message.notEmpty\"})):o()}else o()}}}function h(){return{validator:(e,t,n)=>{t&&t<o()()?n(r.Z.intl.formatMessage({id:\"neteco.pvms.power.deadlineOut\"})):n()}}}function m(e){const t=new RegExp(`^-?(0|([1-9][0-9]*))(\\\\.[\\\\d]{1,${e}})?$`);return{validator:(n,i)=>i&&!t.test(i)?Promise.reject(r.Z.intl.formatMessage({id:\"neteco.pvms.elecPrice.percentage.validate\"},{number:e})):Promise.resolve()}}function g(){const e=/^-?(0|([1-9][0-9]*))(\\.[\\d]+)?$/;return{validator:(t,n)=>n&&!e.test(n)?Promise.reject(r.Z.intl.formatMessage({id:\"neteco.pvms.validator.correctNumber\"})):Promise.resolve()}}function v(){return{validator:(e,t)=>{const n=Number(t),i=Math.abs(n);return t&&Number(t)&&n!==i?Promise.reject(r.Z.intl.formatMessage({id:\"neteco.pvms.validator.positiveNumber\"})):Promise.resolve()}}}const y=e=>({validator:(t,n)=>n&&/[\\u{10000}-\\u{10FFFF}]/u.test(n)?Promise.reject(e):Promise.resolve()})},85549:(e,t,n)=>{\"use strict\";async function r(e){const t={\"zh-cn\":\"zh-CN\",\"en-us\":\"en-US\",\"fr-fr\":\"fr-FR\",\"ja-jp\":\"ja-JP\",\"it-it\":\"it-IT\",\"nl-nl\":\"nl-NL\",\"pt-br\":\"pt-BR\",\"de-de\":\"de-DE\",\"es-es\":\"es-ES\",\"pl-pl\":\"pl-PL\",\"vi-vn\":\"vi-VN\",\"ko-kr\":\"ko-KR\",\"uk-ua\":\"uk-UA\",\"hu-hu\":\"hu-HU\",\"tr-tr\":\"tr-TR\",\"zh-tw\":\"zh-TW\",\"ro-ro\":\"ro-RO\",\"cs-cz\":\"cs-CZ\",\"th-th\":\"th-TH\"},r=t[null==e?void 0:e.toLowerCase()]||t[\"en-us\"];return n(32414)(`./${r}.js`).then((e=>e.default))}n.r(t),n.d(t,{default:()=>r})},67178:(e,t,n)=>{\"use strict\";n.d(t,{Mb:()=>r,Vh:()=>i});const r=\"NCOMESSAGECONTAINER/START_LOADING\",i=\"NCOMESSAGECONTAINER/SET_NO_READ_COUNT\"},16436:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(67178);const i={loading:!1,noReadCount:0,msgNoticeCount:0,pubNoticeCount:0},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.Vh:return{...n,noReadCount:t.payload.count,msgNoticeCount:t.payload.msgNoticeCount,pubNoticeCount:t.payload.pubNoticeCount};default:return n}}},18914:(e,t,n)=>{\"use strict\";n.d(t,{LQ:()=>s,Mb:()=>r,OU:()=>a,T_:()=>i,UQ:()=>o});const r=\"NCOMESSAGENOTI/START_LOADING\",i=\"NCOMESSAGENOTI/FINISH_LOADING\",o=\"NCOMESSAGENOTI/SET_TOPIC_ITEMS\",a=\"NCOMESSAGENOTI/SET_MESSAGE_DETAIL\",s=\"NCOMESSAGENOTI/SET_QUERY_CONDITION\"},82717:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>u});var r=n(37920),i=n.n(r),o=n(18914);const a={loading:!1,queryCondition:{},tableData:{list:[],total:0,page:1,pageSize:10},topicItems:[],messageDetail:{}},s=e=>e&&i()(e).format(\"YYYY-MM-DD HH:mm:ss\"),l=e=>{let{list:t,...n}=e;return{...n,list:t.map((e=>{let{receivedTime:t,dealTime:n,...r}=e;return{...r,receivedTime:s(t),dealTime:s(n)}}))}},c=e=>{let{editTime:t,...n}=e;return{...n,editTime:s(t)}},u=(e,t)=>{const n=null!=e?e:a;switch(t.type){case o.Mb:return{...n,loading:!0};case o.T_:return{...n,loading:!1,tableData:l(t.payload)};case o.UQ:return{...n,topicItems:t.payload};case o.OU:return{...n,messageDetail:c(t.payload)};case o.LQ:return{...n,queryCondition:t.payload};default:return n}}},93690:(e,t,n)=>{\"use strict\";n.d(t,{Bn:()=>c,LQ:()=>o,Mb:()=>r,OU:()=>l,Pc:()=>a,T_:()=>i,go:()=>u,pV:()=>s});const r=\"NCOMESSAGEPUBLISH/START_LOADING\",i=\"NCOMESSAGEPUBLISH/FINISH_LOADING\",o=\"NCOMESSAGEPUBLISH/SET_QUERY_CONDITION\",a=\"NCOMESSAGEPUBLISH/SELECTED_ROWS_SET\",s=\"NCOMESSAGEPUBLISH/RESET_SELECTED_ROWS\",l=\"NCOMESSAGEPUBLISH/SET_MESSAGE_DETAIL\",c=\"NCOMESSAGEPUBLISH/START_PUBLISH_LOAD\",u=\"NCOMESSAGEPUBLISH/FINISH_PUBLISH_LOAD\"},5117:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>u});var r=n(37920),i=n.n(r),o=n(93690),a=n(44184);const s={loading:!1,publishLoad:!1,queryCondition:{},tableData:{list:[],total:0,page:1,pageSize:10},selectedRows:[],resetSelectedRows:1,messageDetail:{id:\"\",content:\"\",topic:\"\",users:[],roles:[],multiLanguages:[],valid:\"\",comDn:\"\"}},l=e=>{let{list:t,...n}=e;return{...n,list:t.map((e=>{let{validTimeStr:t,editTime:n,openTime:r,...i}=e;return{...i,validTimeStr:(0,a.sJ)(t),editTime:(0,a.sJ)(n,!0),openTime:(0,a.sJ)(r,!0)}}))}},c=e=>{let{content:t,users:n,roles:r,topic:o,id:s,detailUrl:l,multiLanguages:c,validTimeStr:u,comDn:d}=e,p=n.map((e=>{let{userid:t,userName:n}=e;return{userId:t,username:n}}));return(0,a.xb)(d)||(p={dn:d,users:p}),{content:t,topic:o,users:p,roles:r,id:s,detailUrl:l,multiLanguages:c,valid:(0,a.xb)(u)?null:i()(new Date(u)),comDn:d}},u=(e,t)=>{const n=null!=e?e:s;switch(t.type){case o.Mb:return{...n,loading:!0};case o.T_:return{...n,loading:!1,tableData:l(t.payload)};case o.LQ:return{...n,queryCondition:t.payload};case o.Pc:return{...n,selectedRows:t.payload};case o.pV:return{...n,resetSelectedRows:t.payload};case o.OU:return{...n,messageDetail:c(t.payload)};case o.Bn:return{...n,publishLoad:!0};case o.go:return{...n,publishLoad:!1};default:return n}}},86443:(e,t,n)=>{\"use strict\";n.d(t,{LQ:()=>a,Mb:()=>r,OU:()=>o,T_:()=>i});const r=\"NCOMESSAGERECIVED/START_LOADING\",i=\"NCOMESSAGERECIVED/FINISH_LOADING\",o=\"NCOMESSAGERECIVED/SET_MESSAGE_DETAIL\",a=\"NCOMESSAGERECIVED/SET_QUERY_CONDITION\"},49736:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>d});var r=n(37920),i=n.n(r),o=n(86443),a=n(99073);const s={loading:!1,queryCondition:{},tableData:{list:[],total:0,page:1,pageSize:10},messageDetail:{}},l=e=>e&&i()(e).format(\"YYYY-MM-DD HH:mm:ss\"),c=e=>{let{list:t,...n}=e;return{...n,list:t.map((e=>{let{topic:t,introduceId:n,receivedTime:r,readTime:i,...o}=e;return{...o,topic:t||a.lH,introduceId:n||a.lH,receivedTime:l(r)||a.lH,readTime:l(i)||a.lH}}))}},u=e=>{let{editTime:t,...n}=e;return{...n,editTime:l(t)}},d=(e,t)=>{const n=null!=e?e:s;switch(t.type){case o.Mb:return{...n,loading:!0};case o.T_:return{...n,loading:!1,tableData:c(t.payload)};case o.OU:return{...n,messageDetail:u(t.payload)};case o.LQ:return{...n,queryCondition:t.payload};default:return n}}},50700:(e,t,n)=>{\"use strict\";n.d(t,{B7:()=>o,Mb:()=>r,T_:()=>i});const r=\"NCOMONITORCONTAINER/START_LOADING\",i=\"NCOMONITORCONTAINER/FINISH_LOADING\",o=\"NCOMONITORCONTAINER/UPADATE_CONDITION\"},81535:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(50700);const i={loading:!1,buttonLoading:!1,sortCondition:{},searchCondition:{},tableData:{list:[],total:0,page:1,pageSize:10}},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.Mb:return{...n,loading:!0};case r.B7:return{...n,searchCondition:t.payload};case r.T_:return{...n,loading:!1,tableData:{...t.payload}};default:return n}}},99002:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>W});var r=n(45258),i=n(70535),o=n(62073),a=n(17489),s=n(5776),l=n(21148),c=n(88391),u=n(93706),d=n(99994),p=n.n(d),f=n(64120),h=n(95059),m=n(49453);const g=e=>(0,m.U2)(\"/rest/pvms/web/business/v1/airconditioning/airconditioning-real-time\",{airConditioningDn:e});var v=n(65595),y=n(84272),b=n(19330),S=n(23712);const x=e=>{let{titleName:t=(()=>{throw new Error(\"Title Name Null Not Allowed!\")})()}=e;return(0,S.jsx)(\"h2\",{className:\"ncoDevice_type_title\",children:t})};var w=n(34641),C=n(79397);const{twaver:T,neteco:A}=window;class E extends C.Z{constructor(e,t,n){super(e,t,n),this._box=e.getElementBox(),this._tagFinder=null,this.tempNode=null}api(){return g(this._apiParams)}fetch(e){this.api().then((t=>{e?this.refresh(t):this.load(t);const n=this._network.getInteractionhandler(\"callback\");n&&n(t)}))}load(e){this.removeSelection();const t=(0,f.default)(e.data,(e=>10002===e.id));if(!t||0===t.length)return;const n=t[0].realValue,r=A?A.util.iUnescape(A.util.iUnescape(t[0].name)):t[0].name;this.tempNode=new T.Node(\"air_thermohygrometer\"),this.tempNode.c(\"temp\",(n<0||n>100?0:Number(parseFloat(n).toFixed(1)))||0).c(\"name\",r||\"\"),this.tempNode.setImage(\"air_thermohygrometer\"),this.tempNode.setLocation(0,0),this.tempNode.setSize(206,204),this.tempNode.setToolTip(`<div style=\"width: 100%;height: 100% ;display: flex; flex-direction: column;justify-content: center;\\n    padding:0 10px \"><span style=\"margin-left: 5px;\">${r}</span></div>`),this._box.add(this.tempNode),window.twaver.Util.getToolTipDiv().style.background=\"#fff\"}removeSelection(){this._network.getSelectionModel().setFilterFunction((()=>!1))}async refresh(e){const t=(0,f.default)(e.data,(e=>10002===e.id));if(!t)return;const n=t[0].realValue||0;this._tagFinder=new T.QuickFinder(this._box,\"id\",null),this.tempNode=this._tagFinder.findFirst(\"air_thermohygrometer\"),this.tempNode.c(\"temp\",parseFloat(n).toFixed(1)-0||0)}}var O=n(53137),M=n(59516),P=n(68718),D=n(31519),I=n(69131),N=n(65835);const{pageName:_,switchDeviceId:j,switchDeviceName:k,operationTypes:L,accessId:R,leaveId:Z}=D.e.deviceDetail,{operationInfo:B,operationWarn:F,operationError:z}=h.Z,{neteco:V}=window,H={dataLoaderClass:E,enhancerClasses:[class{constructor(e){this._network=e,this.init()}init(){this._handler=this.centerLayoutHandler.bind(this),this._network.removeViewListener(this._handler),this._network.addViewListener(this._handler)}centerLayoutHandler(e){\"validateEnd\"===e.kind&&this._network.zoomOverview()}getApiMethods(){return[\"AirconditionerCenterLayoutEnhancer\"]}}]},{Paragraph:U}=l.Z,G=new Map([[\"33595393\",\"ncoInverterTable.column.device\"],[\"10006\",\"neteco.pvms.pointTable.modelCode\"],[\"33595396\",\"neteco.pvms.devUpgrade.devType\"],[\"10041\",\"neteco.pvms.DCChild.esnCode\"],[\"50020\",\"neteco.pvms.partials.main.dm.detailInfo.devInfo.devChangeHistory\"],[\"10040\",\"ncoPvTable.column.softwareVersion\"],[\"10105\",\"neteco.pvms.device.upgrade.packageName\"]]);class Y extends c.Component{constructor(e){super(e),this.loadDataHandler=async(e,t,n)=>{const{success:r,data:i,failCode:o}=await t(e);r&&(this.setState({[n]:\"realTimeData\"===n?i:this.convertBasicData(i)}),\"realTimeData\"===n&&(this.setState({currentAirStatus:i[0]&&(\"2\"===i[0].value||\"5\"===i[0].value)}),1===o?this.setState({switchDisable:!0}):this.setState({switchDisable:!1})))},this.getDecoupleRealData=async e=>{const{success:t,data:n}=await(e=>(0,m.U2)(\"/rest/pvms/web/device/v1/device-realtime-data\",{deviceDn:e}))(e);t&&this.setState({decoupleData:n})},this.convertBasicData=e=>{const{intl:t}=this.props,n=new Map;for(const t of e)n.set(String(t.id),t.realValue||t.value||\"-\");const r=[];for(const[e,i]of G)r.push({name:t.formatMessage({id:i}),value:V.util.iUnescape(n.get(e))});return r},this.changeStatusHandler=e=>{(0,P.WW)(j,{pageName:_,operationType:e?L.open:L.close,actionName:k}),this.setState({passwordModalStatus:!0})},this.hidePasswordModal=()=>{this.setState({passwordModalStatus:!1,password:\"\"})},this.verifyThePassword=async()=>{const{deviceDn:e,intl:t}=this.props,{password:n,currentAirStatus:r,passwordFailTime:i,currentAirStatus:o}=this.state;try{const{success:c,data:u,failCode:d}=await(a=e,s=r?0:1,l=n,(0,m.Md)(\"/rest/pvms/web/business/v1/airconditioning/switch-on-off\",{airConditioningDn:a,changeValues:JSON.stringify([{id:\"29006\",value:s}]),pwd:l}));if(c)this.setState({currentAirStatus:!o,passwordModalStatus:!1,password:\"\",passwordFailTime:0}),B(t,t.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.doItSuc\"}));else if(1===d){const e=i+1;if(this.setState({passwordFailTime:e}),e<3)F(t,t.formatMessage({id:2===e?\"com.huawei.neteco.adapter.verification.fails\":\"neteco.pvms.systemSetting.authError\"}));else{const{Prel:e,location:t}=window;t.href=e.logoutUrl}}else{this.setState({passwordModalStatus:!1,password:\"\",passwordFailTime:0});let e=\"neteco.pvms.partials.main.dm.devControlDialog.doItFail\";u[0].data&&u[0].data.data.length&&(e=u[0].data.data[0]),F(t,t.formatMessage({id:e}))}}catch(e){z(t,t.formatMessage({id:\"neteco.pvms.ajax.error\"}))}finally{this.setState({doVerifyLoading:!1})}var a,s,l},this.getAirRealTimeData=e=>{const{success:t,data:n,failCode:r}=e;this.setState({realTimeData:n||[],currentAirStatus:n[0]&&(\"2\"===n[0].value||\"5\"===n[0].value)}),1===r?this.setState({switchDisable:!0}):this.setState({switchDisable:!1})},this.getBaseDeviceData=()=>{const{deviceDn:e}=this.props;(0,v.nP)({deviceDn:e,signalIds:\"10006,10041,10040,10105,50020\"}).then((e=>{if(e.success){const{data:t=[]}=e;this.setState({basicInfoData:this.convertBasicData(t)})}}))},this.getAirData=(e,t)=>{const{isInModal:n}=this.props;this.getBaseDeviceData(),this.getDecoupleRealData(e),n&&this.loadDataHandler(e,g,\"realTimeData\"),this.refreshRealTime=setInterval((()=>{this.loadDataHandler(e,g,\"realTimeData\"),this.getDecoupleRealData(e)}),t*I.v.monitorAirConditioner_refreshRealTime),(0,M.lVp)(M.jSe)&&this.checkSwitchAuthority(),e&&(0,O.PW)(e).then((e=>{const{success:t,data:n}=e;t&&this.setState({isInSharedStation:n})}))},this.checkSwitchAuthority=async()=>{if((0,M.lVp)(M.uAD)){const e=await(0,y.pm)();if(e&&!0===e.success){const t=p()(e.data,(e=>\"switch_enable\"===e.paramName));t&&\"1\"===t.paramValue&&this.setState({isShowSwitch:!0})}}},this.buildStatusItem=(e,t,n)=>{const{name:r,realValue:i}=e,{switchDisable:o}=this.state,a=((e,t)=>{const{id:n,value:r}=e;if(t)return\"\";switch(n){case 10007:return\"2\"===r?\"running\":\"5\"===r?\"fault\":\"off\";case 10008:return\"1\"===r?\"running\":\"2\"===r?\"fault\":\"off\";default:return\"2\"===r?\"running\":\"3\"===r?\"fault\":\"off\"}})(e,o),s=V.util.iUnescape(V.util.iUnescape(r));return(0,S.jsxs)(\"div\",{className:n?\"modal-realtime-status-item\":\"realtime-status-item\",children:[(0,S.jsx)(\"div\",{className:`status ${a}`,title:i}),(0,S.jsx)(\"div\",{className:\"status-name\",title:s,children:(0,S.jsx)(U,{ellipsis:!0,children:s})})]},t)},this.state={airConditioners:{},realTimeData:[],basicInfoData:[],currentAirDn:\"\",currentAirStatus:!1,passwordModalStatus:!1,doVerifyLoading:!1,password:\"\",passwordFailTime:0,switchDisable:!1,isShowSwitch:!1,isInSharedStation:!1,decoupleData:[]},this.startTime=N.$.pageAccess(R,{pageName:_,deviceType:String(null==e?void 0:e.selectedTreeNode.mocId)})}componentDidMount(){const{deviceDn:e,subscriptionTime:t}=this.props;this.getAirData(e,t)}componentDidUpdate(e){const{subscriptionTime:t,deviceDn:n}=this.props;t!==e.subscriptionTime&&(this.refreshRealTime&&clearInterval(this.refreshRealTime),this.refreshRealTime=setInterval((()=>{this.loadDataHandler(n,g,\"realTimeData\"),this.getDecoupleRealData(n)}),t*I.v.monitorAirConditioner_refreshRealTime)),n!==e.deviceDn&&(clearInterval(this.refreshRealTime),this.getAirData(n,t))}componentWillUnmount(){var e;N.$.pageLeave(this.startTime,Z,{pageName:_,deviceType:String(null===(e=this.props)||void 0===e?void 0:e.selectedTreeNode.mocId)}),this.refreshRealTime&&clearInterval(this.refreshRealTime),this.setState=()=>{}}render(){var e,t;const{realTimeData:n,basicInfoData:l,currentAirStatus:c,switchDisable:u,isShowSwitch:d,passwordModalStatus:p,doVerifyLoading:h,password:m,isInSharedStation:g,decoupleData:v}=this.state,{deviceDn:y,intl:C,nodeName:T,selectedTreeNode:A,isInModal:E}=this.props;let O=[];n&&n.length>0&&(O=n.slice(0,4));const M=null!==(e=null===(t=v[1])||void 0===t?void 0:t.signals)&&void 0!==e?e:[];return(0,f.default)(M,(e=>10002===e.id)),M.map((e=>{var t;return e.value=null!==(t=e.value)&&void 0!==t?t:\"-\",e})),H.apiParams=y,H.handlers={callback:this.getAirRealTimeData},(0,S.jsxs)(\"div\",{className:\"nco-monitor-air-condition-detail tab-content\",children:[(0,S.jsx)(\"div\",{className:\"content\",children:(0,S.jsxs)(\"div\",{className:E?\"\":\"air-content\",children:[(0,S.jsxs)(\"div\",{className:E?\"\":\"top-content\",children:[(0,S.jsx)(\"div\",{className:\"top-content-title \"+(E?\"hide\":\"\"),title:V.util.iUnescape(T),children:(0,S.jsx)(U,{ellipsis:{rows:1},children:V.util.iUnescape(T)})}),(0,S.jsx)(\"div\",{className:E?\"top-content-buttons-3D\":\"top-content-buttons\",children:d&&!g&&(0,S.jsx)(s.Z,{checked:c,disabled:!1,onChange:this.changeStatusHandler,checkedChildren:C.formatMessage({id:\"pvms.device.info.remote.switch.on\"}),unCheckedChildren:C.formatMessage({id:\"pvms.device.info.remote.switch.off\"})})})]}),(0,S.jsxs)(\"div\",{className:E?\"\":\"bottom-content\",children:[(0,S.jsx)(\"div\",{className:\"bottom-content-left \"+(E?\"hide\":\"\"),children:(0,S.jsx)(\"div\",{className:\"thermometer-area\",children:(0,S.jsx)(b.Z,{...H})})}),(0,S.jsxs)(\"div\",{className:\"bottom-content-right\",children:[(0,S.jsxs)(\"div\",{className:\"basic-info\",children:[(0,S.jsx)(x,{titleName:C.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.realData\"})||\" \"}),(0,S.jsx)(\"div\",{className:\"real-time-status\",children:O.map(((e,t)=>this.buildStatusItem(e,t,E)))})]}),(0,S.jsx)(\"div\",{className:\"air-details-info\",children:(0,S.jsx)(w.Z,{data:M,columns:E?2:6})}),(0,S.jsx)(\"div\",{className:E?\"mt_1\":\"basic-info\",children:(0,S.jsx)(w.Z,{title:C.formatMessage({id:\"neteco.pvms.devEport.basicInfo\"})||\" \",data:l,columns:E?2:3,type:\"base\",isBasicInfo:!0})})]})]})]})}),(0,S.jsx)(r.Z,{title:C.formatMessage({id:\"neteco.pvms.systemSetting.secondAuth\"}),visible:p,onOk:()=>{this.setState({doVerifyLoading:!0}),this.verifyThePassword()},confirmLoading:h,onCancel:this.hidePasswordModal,centered:!0,destroyOnClose:!0,children:(0,S.jsxs)(i.Z,{children:[(0,S.jsx)(a.Z,{span:6,children:(0,S.jsx)(\"span\",{children:C.formatMessage({id:\"neteco.pvms.systemSetting.userPassword\"})})}),(0,S.jsx)(a.Z,{span:18,children:(0,S.jsx)(o.Z,{type:\"password\",value:m,onChange:e=>this.setState({password:e.target.value}),onCopy:e=>{e.preventDefault()},onCut:e=>{e.preventDefault()}})})]})})]})}}const W=(0,u.ZP)(Y)},82758:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>x});var r=n(32449),i=n(88391),o=n(93706),a=n(43986),s=n(80067),l=n(59516),c=n(4911),u=n(31519),d=n(64218),p=n(65835),f=n(23712);const{TabPane:h}=r.Z,{currentAlarm:m,historyAlarm:g,scope:v}=u.e,{current:y,history:b}=s.ye;class S extends i.Component{constructor(e){super(e),this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.getBehaviorParams=(e,t)=>{let n=v.device;return(0,d.jE)(t)&&(n=v.station),(0,d.B5)(t)&&(n=v.root),{pageName:e===y?m.pageName:g.pageName,scope:n}},this.getAccessId=e=>e===y?m.accessId:g.accessId,this.getLeaveId=e=>e===y?m.leaveId:g.leaveId,this.changeActiveTab=e=>{this.setState({curTab:e}),e===y?(p.$.pageLeave(this.startTime,g.leaveId,this.getBehaviorParams(b,this.props.mocId)),this.startTime=p.$.pageAccess(m.accessId,this.getBehaviorParams(y,this.props.mocId))):(p.$.pageLeave(this.startTime,m.leaveId,this.getBehaviorParams(y,this.props.mocId)),this.startTime=p.$.pageAccess(g.accessId,this.getBehaviorParams(b,this.props.mocId)))},this.state={curTab:y},this.startTime=p.$.pageAccess(m.accessId,this.getBehaviorParams(y,e.mocId))}componentWillUnmount(){p.$.pageLeave(this.startTime,this.getLeaveId(this.state.curTab),this.getBehaviorParams(this.state.curTab,this.props.mocId))}render(){const e={deviceDn:this.props.deviceDn,mocId:this.props.mocId,alarmType:s.MP.device,pageSize:this.props.pageSize,scroll:this.props.scroll,hideDownload:this.props.hideDownload,getAlarmStatistic:this.props.getAlarmStatistic},t=this.props.noBorder,n=(0,l.lVp)(l.o2t);return(0,f.jsx)(f.Fragment,{children:n?(0,f.jsx)(\"div\",{className:\"nco-monitor-alarm-container tab-content\",children:(0,f.jsx)(\"div\",{className:\"content\",children:(0,f.jsx)(\"div\",{className:\"left-content\",children:(0,f.jsxs)(r.Z,{className:t?\"aui-tabs no-border\":\"aui-tabs\",defaultActiveKey:\"curAlarm\",onChange:this.changeActiveTab,destroyInactiveTabPane:!0,children:[(0,f.jsx)(h,{tab:this.intlMessage(\"neteco.pvms.alarmMgt.activeAlarm.title\"),children:(0,f.jsx)(a.Z,{...e,dataType:y})},y),(0,f.jsx)(h,{tab:this.intlMessage(\"neteco.pvms.partials.main.io.historyAlarm.title\"),children:(0,f.jsx)(a.Z,{...e,dataType:b})},b)]})})})}):(0,f.jsx)(\"div\",{className:\"nco-app-container-empty nco-alarm-container-empty\",children:(0,f.jsx)(c.Z,{})})})}}const x=(0,o.ZP)(S)},20610:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>r});const r=n(82758).Z},21438:(e,t,n)=>{\"use strict\";n.d(t,{M:()=>r,W:()=>i});const r=\"NCOBATTERYREALTIMEDATATABLE/START_LOADING\",i=\"NCOBATTERYREALTIMEDATATABLE/FINISH_LOADING\"},71041:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>o});var r=n(21438);const i={loading:!1,amount:[{}]},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\";switch(t.type){case r.M:return{...e,loading:!0};case r.W:return{...e,loading:!1,amount:t.payload};default:return e}}},35169:(e,t,n)=>{\"use strict\";n.d(t,{C2:()=>s,JU:()=>d,P7:()=>c,Zg:()=>r,au:()=>i,bP:()=>p,c_:()=>l,em:()=>h,fo:()=>o,r5:()=>a,tC:()=>u,td:()=>f});const r=\"NCOCHARGECONTAINER/BASIC_START_LOADING\",i=\"NCOCHARGECONTAINER/BASIC_FINISH_LOADING\",o=\"NCOCHARGECONTAINER/REALTIME_START_LOADING\",a=\"NCOCHARGECONTAINER/REALTIME_FINISH_LOADING\",s=\"NCOCHARGECONTAINER/CHARGE_STATUS_FINISH_LOAD\",l=\"NCOCHARGECONTAINER/CONFIG_START_LOADING\",c=\"NCOCHARGECONTAINER/CONFIG_FINISH_LOADING\",u=\"NCOCHARGECONTAINER/PROCESS_START_LOADING\",d=\"NCOCHARGECONTAINER/PROCESS_FINISH_LOADING\",p=\"NCOCHARGECONTAINER/PROCESS_FINISH_LOAD_PARTIAL\",f=\"NCOCHARGECONTAINER/RESET\",h=\"NCOCHARGECONTAINER/HISTORY_INDICATOR_FINISH_LOAD\"},91609:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>k});var r=n(23774),i=n(93706),o=n(70535),a=n(17489),s=n(88391),l=n(2326),c=(n(34641),n(49453)),u=n(35169),d=n(80553),p=n(44184);const f=e=>{e({type:u.r5,data:[]})};var h=n(16910),m=(n(64218),n(6197)),g=n(53137),v=n(80770),y=n(49100),b=n(59516),S=n(31519),x=n(69131),w=n(65835),C=n(33371),T=n(98455),A=n(99073),E=n(23712);const{pageName:O,accessId:M,leaveId:P}=S.e.deviceDetail,D=\"0\",I=\"1\",{neteco:N}=window;class _ extends s.Component{constructor(e){super(e),this.getProcessData=()=>{var e,t,n,r,i;const{intl:o,processData:a}=this.props;let s=\"--\";return[0,1,2,3,4,5,6,7,8,9,10,11,97,98,99].includes(a.chargeStatus)&&(s=[97,98,99].includes(a.chargeStatus)?o.formatMessage({id:`neteco.pvms.chargeRealTimeChargeStatusNumber.Monitoring.${a.chargeStatus}`}):a.chargeStatusRealValue||\"--\"),[{enumMap:{},id:10011,name:o.formatMessage({id:\"neteco.pvms.storage.batteryPack.table.workStatus\"}),realValue:s,iconClassName:this.getChargeStatusClassName(a.chargeStatus),unit:\"\",value:s},{enumMap:{},id:10002,name:o.formatMessage({id:\"neteco.pvms.charge.device.realTime.currentChargedTime\"}),iconClassName:\"icon-current-charged-time-filled\",unit:(null===(e=a.currentChargedTime)||void 0===e?void 0:e.unit)||\"Min\",value:null!==(t=null===(n=a.currentChargedTime)||void 0===n?void 0:n.value)&&void 0!==t?t:\"--\"},{enumMap:{},id:10001,name:o.formatMessage({id:\"neteco.pvms.charge.device.realTime.currentCharged\"}),iconClassName:\"icon-current-charged-filled\",unit:(null===(r=a.currentCharged)||void 0===r?void 0:r.unit)||\"kWh\",value:this.number2String(null===(i=a.currentCharged)||void 0===i?void 0:i.value)}]},this.number2String=e=>null==e?\"--\":Number(e).toFixed(3),this.getStationType=async()=>{const{deviceDn:e}=this.props,[t,n]=await(0,p.AM)((0,c.U2)(\"/rest/dp/pvms/device/belong-station/station-info\",{dn:e}));n&&this.setState({stationType:n.stationType})},this.getChargeRealTimeData=async()=>{const{chargeDnId:e,chargeGunDnId:t}=this.state,{queryChargeProcessData:n,queryChargeConfigData:r,queryChargeRealTimeData:i}=this.props;e&&(e=>(0,c.v_)(\"/rest/neteco/web/homemgr/v1/charger/status/charge-status\",{dnId:e}).catch((()=>99)))(e).then((o=>{r(e,t,o.chargeStatus),n(o.chargeStatus,t,e),i(e,t,o.chargeStatus)})).catch((()=>{n(98,t,e),i(e,t,98)}))},this.getChargeElementInfo=async e=>{(0,g.M0)({parentDn:e,self:!1,companyTree:!1,cond:'{\"BUSINESS_DEVICE\":1, \"MOC_ID_INCLUDE\":\"60080\", \"needPage\": true}',shouldFullPagination:!0}).then((e=>{var t;const{success:n,data:r}=e;if(n&&(r.length>0||(null===(t=r.childList)||void 0===t?void 0:t.length)>0)){const{elementDn:e,elementId:t,nodeName:n,mocId:i,isParent:o}=r[0]||r.childList[0];60080!==i&&o?this.getChargeElementInfo(e):this.getChargeData(e,t,n,!0)}}))},this.initLoadOpt=()=>{const{selectedTreeNode:e={}}=this.props;if(e&&e.elementDn){if((0,h.jE)(e.mocId)){const{elementDn:t}=e;t&&this.getChargeElementInfo(t)}else{const{elementDn:t,elementId:n,nodeName:r}=e;this.getChargeData(t,n,r)}this.setState({shouldShow:!0})}},this.getChargeData=(e,t,n,r)=>{const{queryChargeBasicInfo:i,intl:o}=this.props;e&&((0,m.O0)(e,[\"33595393\"]).then((e=>{var t;(null==e?void 0:e.length)>0&&this.setState({chargeName:N.util.iUnescape(null===(t=e[0])||void 0===t?void 0:t.value)})})).catch(),(0,g.M0)({shouldFullPagination:!0,parentDn:e,self:!1,companyTree:!1,cond:'{\"BUSINESS_DEVICE\":1, \"MOC_ID_INCLUDE\":\"60081\", \"needPage\": true}'}).then((e=>{var a;const s=parseInt(t,10),{success:l,data:u}=e;let d;if(l&&(u.length>0||(null===(a=u.childList)||void 0===a?void 0:a.length)>0)){const e=u[0]||u.childList[0];d=parseInt(e.elementId,10)}this.setState({chargeDnId:s,chargeGunDnId:d,shouldShow:!0,shouldShowHistoryTab:!0},(()=>{i(t,n,o),r&&(0,c.v_)(\"/rest/neteco/web/homemgr/v1/device/history/device-statistics-signal\",[s,d].filter((e=>e))).then().catch(),this.getChargeRealTimeData()}))})).catch())},this.getChargeStatusClassName=e=>{switch(e){case 0:return\"icon-charge-status-standby-filled\";case 1:return\"icon-charge-status-gun-inserted-filled\";case 2:case 10:return\"icon-charge-status-timed-charging-waitting-filled\";case 3:case 11:return\"icon-charge-status-charging-filled\";case 4:return\"icon-success-filled\";case 5:return\"icon-charge-status-fault-filled\";case 7:return\"icon-charge-status-equipment-upgrade-filled\";case 8:return\"icon-charge-status-charging-starts-filled\";case 9:return\"icon-charge-status-alarm-filled\";default:return\"icon-closed-filled\"}},this.updatePassword=async()=>{const{selectedTreeNode:e={}}=this.props,t=await(async e=>{const[t,n]=await(0,p.AM)((0,c.Md)(\"/rest/dp/pvms/web/v1/charge/modify-charge-password\",{dn:e}));return t?{}:n})(null==e?void 0:e.elementDn);null!=t&&t.success?(0,v.Sb)(this.props.intl.formatMessage({id:\"neteco.pvms.modifySucceed\"})):(0,v.jT)(this.props.intl.formatMessage({id:\"neteco.pvms.modifyFailed\"}))},this.updatePasswordModalTip=()=>{const{intl:e}=this.props,t=e.formatMessage({id:\"neteco.pvms.deviceChangePwd.confirm\"});return(0,v.ST)(t,this.updatePassword)},this.renderCard=(e,t)=>{const{intl:n}=this.props;return(0,E.jsx)(C.Z,{title:n.formatMessage({id:e}),className:\"nco-charge-card\",children:(0,E.jsx)(o.Z,{gutter:[16,16],children:null==t?void 0:t.map((e=>(0,E.jsx)(a.Z,{span:8,children:(0,E.jsxs)(\"div\",{className:\"nco-charge-card-area\",children:[(0,E.jsx)(\"span\",{className:\"nco-charge-card-title\",children:e.title}),(0,E.jsx)(\"span\",{className:\"nco-charge-card-value\",children:`${(0,p.xb)(e.value)||e.value===A.Nw?A.lH:e.value} ${e.unit||\"\"}`})]})},e.id)))})})},this.showUpdatePasswordButton=()=>{const{realTimeInfoData:e}=this.props;for(let t=0;t<e.length;t++){let n=10100===e[t].id,r=[I,D].includes(e[t].realValue);if(n&&r)return!0;if(n)return!1}return!0},this.state={shouldShow:!1,stationType:A.x1.HOUSEHOLD_STATION},this.startTime=w.$.pageAccess(M,{pageName:O,deviceType:String(e.mocId)})}componentDidMount(){const{subscriptionTime:e}=this.props;this.timer&&clearInterval(this.timer),this.timer=setInterval((()=>{this.getChargeRealTimeData()}),e*x.v.monitorCharge_RealTime),this.initLoadOpt(),this.getStationType()}componentWillUnmount(){w.$.pageLeave(this.startTime,P,{pageName:O,deviceType:String(this.props.mocId)}),this.timer&&clearInterval(this.timer),this.props.reset()}render(){const{shouldShow:e,chargeName:t}=this.state;if(!e)return null;let{intl:n,selectedTreeNode:r={},basicInfoData:i,configInfoData:o,realTimeInfoData:a,processData:s}=this.props;const{stationType:l}=this.state,c=n.formatMessage({id:\"neteco.pvms.partials.main.io.dm.heads.deviceName\"}),{elementDn:u,mocId:d}=r,p=e=>e.filter((e=>\"false\"!==e.displayExp)),f=document.querySelector(\".charging-action\"),m=\"icon-closed-filled\"===this.getChargeStatusClassName(s.chargeStatus),g=this.showUpdatePasswordButton();return(0,E.jsx)(\"div\",{className:\"nco-monitor-charge-detail tab-content\",children:(0,E.jsx)(\"div\",{className:\"content\",children:(0,E.jsx)(\"div\",{className:\"storage-box-content\",children:(0,E.jsxs)(\"div\",{className:\"content-main\",children:[(0,E.jsxs)(\"div\",{className:\"content-main-left \"+(g&&null!=f&&f.firstChild?\"hasAuthButton\":\"noAuthButton\"),children:[(0,E.jsx)(\"div\",{className:\"logo-style\",children:(0,E.jsx)(\"img\",{src:\"/pvmswebsite/assets/build/images/station/charge_realTime_logo.png\"})}),l===A.x1.BUSINESS_STATION&&(0,E.jsx)(T.Z,{className:\"nco-monitor-charge-detail\",message:n.formatMessage({id:\"neteco.pvms.monitor.details.message\"}),showIcon:!0}),(0,E.jsxs)(\"div\",{className:\"basic-title-information-style\",children:[(0,E.jsx)(\"div\",{className:\"major-title\",children:n.formatMessage({id:\"neteco.pvms.systemSetting.basicInfo\"})}),(0,E.jsxs)(\"div\",{className:\"basic-key-and-value-style\",children:[(0,E.jsx)(\"div\",{className:`key-style ${n.locale}`,title:c,children:c}),(0,E.jsx)(\"div\",{className:\"value-style\",title:t||\"-\",children:t||\"-\"})]}),null==i?void 0:i.map((e=>{var t;let r=e.name,i=e.realValue?e.realValue+(null!==(t=e.unit)&&void 0!==t?t:\"\"):\"-\";return 20029===e.id&&(r=n.formatMessage({id:\"ncoNewDeviceManagement.label.esn\"}),i=e.realValue),(0,E.jsxs)(\"div\",{className:\"basic-key-and-value-style\",children:[(0,E.jsx)(\"div\",{className:`key-style ${n.locale}`,title:r,children:r}),(0,E.jsx)(\"div\",{className:\"value-style\",title:i,children:i})]})}))]})]}),(0,E.jsxs)(\"div\",{className:\"content-main-right\",children:[g&&(0,E.jsx)(\"div\",{className:\"charging-action\",children:(0,E.jsx)(y.Z,{operationId:b.qS6,targetId:[u],targetType:(0,h.jE)(d)?\"plant\":\"device\",intl:n,useDp:!0,onClick:this.updatePasswordModalTip,children:n.formatMessage({id:\"neteco.pvms.charging.update.password\"})})}),(0,E.jsx)(\"div\",{className:\"mar-botm\",children:this.getProcessData().map((e=>(0,E.jsxs)(C.Z,{className:\"single-realTime-module-style\",children:[(0,E.jsx)(\"div\",{className:\"realtime-info-icon-style\",children:(0,E.jsx)(\"span\",{className:`${e.iconClassName} ${m?\"offline\":\"\"}`})}),(0,E.jsxs)(\"div\",{className:\"realTime-value-width-style\",children:[(0,E.jsx)(\"div\",{className:\"realtime-title\",children:e.name}),(0,E.jsx)(\"div\",{className:\"realtime-value\",children:`${e.value} ${e.unit}`})]})]})))}),a&&a.length>0&&this.renderCard(\"neteco.pvms.partials.main.dm.detailInfo.charge.realData\",p(a)),o&&o.length>0&&this.renderCard(\"neteco.pvms.chargeGun.device.config.data\",p(o))]})]})})})})}}const j=(0,l.EN)(_),k=(0,r.$j)((e=>({basicInfoLoading:e.ncoMonitorChargeDetail.basicInfoLoading,realTimeInfoLoading:e.ncoMonitorChargeDetail.realTimeInfoLoading,processDataLoading:e.ncoMonitorChargeDetail.processDataLoading,configInfoLoading:e.ncoMonitorChargeDetail.configInfoLoading,realTimeInfoData:e.ncoMonitorChargeDetail.realTimeInfoData,basicInfoData:e.ncoMonitorChargeDetail.basicInfoData,processData:e.ncoMonitorChargeDetail.processData,configInfoData:e.ncoMonitorChargeDetail.configInfoData,historyData:e.ncoMonitorChargeDetail.historyData,defaultList:e.ncoMonitorChargeDetail.defaultList,historyIndicator:e.ncoMonitorChargeDetail.historyIndicator,dn2Indicators:e.ncoMonitorChargeDetail.dn2Indicators})),(e=>({queryChargeBasicInfo:(t,n,r)=>{((e,t)=>{(0,c.v_)(\"/rest/neteco/web/homemgr/v1/device/get-config-info\",{conditions:[{dnId:t,queryAll:!1,signals:[20029,10007,10003,20001,10001]}]}).then((n=>{e({type:u.au,data:[...n[t]]})})).catch()})(e,t)},queryChargeProcessData:(t,n,r)=>{((e,t,n,r)=>{3===t||11===t?(0,c.v_)(\"/rest/neteco/web/homemgr/v1/charger/device/query-process-data\",{devices:[{dnId:r}]}).then((n=>{const r={chargeStatus:t};var i,o,a;n&&n[0]&&((0,p.xb)(null===(i=n[0].chargedTime)||void 0===i?void 0:i.value)||(r.currentChargedTime=n[0].chargedTime),(0,p.xb)(null===(o=n[0].chargedEnergy)||void 0===o?void 0:o.value)||(r.currentCharged=n[0].chargedEnergy),(0,p.xb)(null===(a=n[0].chargingPower)||void 0===a?void 0:a.value)||(r.currentChargePower=n[0].chargingPower)),e({type:u.bP,data:r})})).catch((()=>{e({type:u.bP,data:{chargeStatus:t}})})):((e,t)=>{e({type:u.JU,data:{chargeStatus:t}})})(e,t)})(e,t,0,r)},queryChargeRealTimeData:(t,n,r)=>{((e,t,n)=>{(0,c.v_)(\"/rest/neteco/web/homemgr/v1/device/get-realtime-info\",{conditions:[{dnId:t,queryAll:!0},n&&{dnId:n,queryAll:!0}].filter((e=>e))}).then((r=>{if(r){const o=n?(0,d.Z)([...r[t],...r[n]]):(0,d.Z)([...r[t]]);if(n&&r[n].length>0){var i;const t=r[n].filter((e=>10004===e.id));((e,t)=>{e({type:u.C2,data:t})})(e,(null===(i=t[0])||void 0===i?void 0:i.realValue)||\"--\")}e({type:u.r5,data:o})}else f(e)})).catch((()=>{f(e)}))})(e,t,n)},queryChargeConfigData:(t,n,r)=>{((e,t,n)=>{(0,c.v_)(\"/rest/neteco/web/homemgr/v1/device/get-config-info\",{conditions:[{dnId:t,queryAll:!1,signals:[20013,20012,538976598]},n&&{dnId:n,queryAll:!1,signals:[20003,20006,20007,20004,20002,538976529]}].filter((e=>e))}).then((r=>{const i=n?(0,d.Z)([...r[t],...r[n]]):(0,d.Z)([...r[t]]);e({type:u.P7,data:i})})).catch()})(e,t,n)},reset:()=>{(e=>{e({type:u.td})})(e)}})))((0,i.ZP)(j))},13531:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>b});var r=n(88391),i=n(93706),o=n(65595),a=n(34641),s=n(9641),l=n(19330),c=n(16910),u=n(31519),d=n(69131),p=n(65835),f=n(23712);const{pageName:h,accessId:m,leaveId:g}=u.e.deviceDetail,{neteco:v}=window;class y extends r.Component{constructor(e){var t;super(e),t=this,this.getStationDcDcRealTimeDeviceData=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&t.setState({dcDcRealTimeDeviceLoading:!0}),(0,o.nJ)({dcToDcDn:t.state.dcDcDn}).then((e=>{if(e.success){const{realTimeData:n=[],basicData:r=[]}=e.data;r.length>0&&t.setState({dcDcBaseDeviceData:t.convertBasicData(r)}),t.setState({dcDcRealTimeDeviceData:n.map((e=>{return{status:(t=e.enumMap,n=e.value,(t[n]?n:null)||\"\"),label:e.name||\"\",value:e.realValue||e.value||\"-\",unit:(0,c._v)(e.unit)||\"\",id:e.id};var t,n}))})}})).finally((()=>{t.setState({dcDcRealTimeDeviceLoading:!1})}))},this.convertBasicData=e=>{const{intl:t}=this.props,n=new Map;for(const t of e)n.set(String(t.id),t.realValue||t.value||\"-\");const r=[];return r.push({name:t.formatMessage({id:\"ncoInverterTable.column.device\"}),value:v.util.iUnescape(n.get(\"33595393\"))}),r.push({name:t.formatMessage({id:\"neteco.pvms.pointTable.modelCode\"}),value:v.util.iUnescape(n.get(\"10009\"))}),r.push({name:t.formatMessage({id:\"neteco.pvms.devUpgrade.devType\"}),value:v.util.iUnescape(n.get(\"33595396\"))}),r.push({name:t.formatMessage({id:\"neteco.pvms.DCChild.esnCode\"}),value:v.util.iUnescape(n.get(\"10007\"))}),r.push({name:t.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.devInfo.devChangeHistory\"}),value:v.util.iUnescape(n.get(\"50020\"))}),r.push({name:t.formatMessage({id:\"ncoPvTable.column.softwareVersion\"}),value:v.util.iUnescape(n.get(\"10008\"))}),r.push({name:t.formatMessage({id:\"neteco.pvms.device.upgrade.packageName\"}),value:v.util.iUnescape(n.get(\"10105\"))}),r};const{selectedTreeNode:{elementDn:n}}=e;this.state={dcDcRealTimeDeviceData:[],dcDcBaseDeviceData:[],dcDcRealTimeDeviceLoading:!1,dcDcDn:n,batterySideLeftTitle:\"\",batterySideRightTitle:\"\",batterySideLeftData:[],batterySideRightData:[],deviceMoStatus:\"\",batterySideLoading:!1},this.startTime=p.$.pageAccess(m,{pageName:h,deviceType:String(null==e?void 0:e.selectedTreeNode.mocId)})}getDcDcData(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.setState({batterySideLoading:!0}),(0,o.rk)({dcToDcDn:this.state.dcDcDn}).then((e=>{const t=[],n=[];if(e.success){const{batterySideLeft:r,batterySideRight:i}=e.data,{intl:o}=this.props;if(!r||!i)return;r.batteryList.map((e=>{e.current.name=o.formatMessage({id:e.current.name}),e.voltage.name=o.formatMessage({id:e.voltage.name}),t.push(e.current),t.push(e.voltage)})),i.batteryList.map((e=>{e.current.name=o.formatMessage({id:e.current.name}),e.voltage.name=o.formatMessage({id:e.voltage.name}),n.push(e.current),n.push(e.voltage)})),this.setState({batterySideLeftTitle:e.data.batterySideLeft.batterySideName,batterySideRightTitle:e.data.batterySideRight.batterySideName,batterySideLeftData:t||[],batterySideRightData:n||[],deviceMoStatus:e.data.deviceMoStatus||\"Disconnected\"})}})).catch((e=>{this.setState({batterySideLeftTitle:\"\",batterySideRightTitle:\"\",batterySideLeftData:[],batterySideRightData:[],deviceMoStatus:\"\"})})).finally((()=>{this.setState({batterySideLoading:!1})}))}componentDidMount(){this.getStationDcDcRealTimeDeviceData(!0),this.getDcDcData(!0),this.subArrayTimer=setInterval((()=>{this.getStationDcDcRealTimeDeviceData(),this.getDcDcData()}),this.props.subscriptionTime*d.v.monitorStationDcDcOverview_getDcDcData)}componentDidUpdate(e){this.props.subscriptionTime!==e.subscriptionTime&&(this.subArrayTimer&&clearInterval(this.subArrayTimer),this.subArrayTimer=setInterval((()=>{this.getStationDcDcRealTimeDeviceData(),this.getDcDcData()}),this.props.subscriptionTime*d.v.monitorStationDcDcOverview_getDcDcData))}componentWillUnmount(){var e;p.$.pageLeave(this.startTime,g,{pageName:h,deviceType:String(null===(e=this.props)||void 0===e?void 0:e.selectedTreeNode.mocId)}),clearInterval(this.subArrayTimer),this.setState=()=>{}}render(){const{intl:e,selectedTreeNode:{nodeName:t},isInModal:n}=this.props,{dcDcDn:r,dcDcRealTimeDeviceLoading:i,dcDcRealTimeDeviceData:o,dcDcBaseDeviceData:u,batterySideLeftTitle:d,batterySideRightTitle:p,batterySideLeftData:h,batterySideRightData:m,deviceMoStatus:g,batterySideLoading:y}=this.state,b={dataLoaderClass:s.Z,apiParams:{status:g||\"\",type:\"dcdc\"}};return n?(0,f.jsxs)(\"div\",{className:\"bottom-content-right\",children:[h.length>0&&(0,f.jsx)(\"div\",{className:\"dcdc-details-info\",children:(0,f.jsx)(a.Z,{title:e.formatMessage({id:d})||\" \",data:h,columns:2})}),o.length>0&&(0,f.jsx)(\"div\",{className:\"dcdc-details-info\",children:(0,f.jsx)(a.Z,{title:v.util.iUnescape(t)||\" \",data:o,form:\"dcdc\",columns:2})}),m.length>0&&(0,f.jsx)(\"div\",{className:\"dcdc-details-info\",children:(0,f.jsx)(a.Z,{title:e.formatMessage({id:p})||\" \",data:m,columns:2})}),u.length>0&&(0,f.jsx)(\"div\",{className:\"basic-info\",children:(0,f.jsx)(a.Z,{title:e.formatMessage({id:\"neteco.pvms.devEport.basicInfo\"})||\" \",data:u,columns:2,type:\"base\",isBasicInfo:!0})})]}):(0,f.jsx)(\"div\",{className:\"nco-monitor-station-dcdc-overview tab-content\",children:(0,f.jsx)(\"div\",{className:\"content\",children:(0,f.jsx)(\"div\",{className:\"dcdc-content\",children:(0,f.jsxs)(\"div\",{className:\"bottom-content \"+((0,c.VP)()?\"bottom-content-new\":\"\"),children:[(0,f.jsx)(\"div\",{className:\"bottom-content-left\",children:(0,f.jsx)(l.Z,{...b})}),(0,f.jsxs)(\"div\",{className:\"bottom-content-right\",children:[h.length>0&&(0,f.jsx)(\"div\",{className:\"dcdc-details-info\",children:(0,f.jsx)(a.Z,{title:e.formatMessage({id:d})||\" \",data:h,columns:5})}),o.length>0&&(0,f.jsx)(\"div\",{className:\"dcdc-details-info\",children:(0,f.jsx)(a.Z,{title:v.util.iUnescape(t)||\" \",data:o,form:\"dcdc\",columns:5})}),m.length>0&&(0,f.jsx)(\"div\",{className:\"dcdc-details-info\",children:(0,f.jsx)(a.Z,{title:e.formatMessage({id:p})||\" \",data:m,columns:5})}),u.length>0&&(0,f.jsx)(\"div\",{className:\"basic-info\",children:(0,f.jsx)(a.Z,{title:e.formatMessage({id:\"neteco.pvms.devEport.basicInfo\"})||\" \",data:u,columns:3,type:\"base\",isBasicInfo:!0})})]})]})})})})}}const b=(0,i.ZP)(y)},13616:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>p});var r=n(88391),i=n(93706),o=n(51523),a=n.n(o),s=n(19330),l=n(9641),c=n(56828),u=n(16910),d=n(23712);const p=(0,i.ZP)((e=>{let{selectedTreeNode:t,props:n,subscriptionTime:i}=e;const[o,p]=(0,r.useState)(\"calc(100vh - 10.25rem)\"),f={apiParams:{mpptDn:t.elementDn,status:\"Connected\",type:\"inverter\"},dataLoaderClass:l.Z};(0,r.useEffect)((()=>(h(),window.addEventListener(\"resize\",h),()=>{window.removeEventListener(\"resize\",h)})),[]);const h=a()((()=>{var e;const t=(null===(e=document.querySelector(\"#setting-button-container .setting-btns-wrapper\"))||void 0===e?void 0:e.getBoundingClientRect().height)||65;p(`calc(100vh - ${164+t}px)`)}),600);return(0,d.jsxs)(\"div\",{className:\"station-inverter-overview \"+((0,u.VP)()?\"station-inverter-overview-new\":\"\"),children:[(0,d.jsx)(\"div\",{id:\"setting-button-container\"}),(0,d.jsxs)(\"div\",{className:\"station-inverter-content \"+((0,u.VP)()?\"station-inverter-content-new\":\"\"),style:{height:o},children:[(0,d.jsx)(\"div\",{className:\"left\",children:(0,d.jsx)(\"div\",{className:\"tw-view-container\",children:(0,d.jsx)(s.Z,{...f})})}),(0,d.jsx)(c.Z,{props:n,selectedTreeNode:t,subscriptionTime:i,overflowSettingActions:!0})]})]})}))},5320:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>r});const r=n(10875).Z},10875:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>L});var r=n(41779),i=n(15694),o=n(41541),a=n(88391),s=n(78939),l=n(93706),c=n(99994),u=n.n(c),d=n(95059),p=n(96182),f=n(34641),h=n(19330),m=n(9641),g=n(53137),v=n(16910),y=n(5083),b=n(59516),S=n(31519),x=n(68718),w=n(84272),C=n(69131),T=n(65835),A=n(23712);const{operationConfirm:E,operationInfo:O,operationFailed:M}=d.Z,{neteco:P}=window,{resetDeviceId:D,resetDeviceName:I,pageName:N,accessId:_,leaveId:j}=S.e.deviceDetail;class k extends a.Component{constructor(e){super(e),this.getRectifierInfo=e=>{const{intl:t}=this.props;(0,p.t)(e).then((e=>{const{code:t,data:n}=e,{dn:r,deviceStatus:i}=n.find((e=>\"60039\"===e.mocId.toString()))||{};if(0===t){const e=\"10011,10002,10001,10009\";(0,p.DD)({elementDn:r,signals:e}).then((e=>{const{success:t,data:n}=e;t&&\"Disconnected\"!==i?this.updateState({rectifierInfo:n.map((e=>({value:P.util.iUnescape(e.value)||\"\",label:e.name||\"-\",unit:e.unit||\"\"})))}):this.updateState({rectifierInfo:n.map((e=>({value:\"-\",label:e.name||\"-\",unit:e.unit||\"\"})))})})),(0,p.t)(r).then((e=>{const{code:t,data:n}=e;if(0===t&&n.length>0){const e=[];n.map((t=>{\"60040\"===t.mocId.toString()&&e.push({name:t.name,deviceStatus:t.deviceStatus,...t.paramValues})})),e.sort(((e,t)=>(null==e?void 0:e.name.match(/\\d/)[0])-(null==t?void 0:t.name.match(/\\d/)[0]))),this.updateState({rectifierTable:e,rectifierTableLoading:!1})}else this.updateState({rectifierTable:[],rectifierTableLoading:!0})}))}else this.updateState({rectifierInfo:[]})}))},this.buildStatusIcon=(e,t)=>\"Disconnected\"!==t&&[\"0\",\"1\"].includes(e)?(0,A.jsx)(\"span\",{className:\"1\"===e?\"baterry-rectifier-status-icon yes\":\"baterry-rectifier-status-icon no\"}):(0,A.jsx)(\"span\",{className:\"baterry-rectifier-status-icon unknown\"}),this.getRealTimeInfo=e=>{const{storageBoxType:t}=this.props;(0,p.B8)(e).then((e=>{const{success:t,data:n}=e;if(t){const e=new Map,t=10012;n.forEach((n=>{var r;null!==(r=n.signals)&&void 0!==r&&r.some((e=>e.id===t))&&e.set(\"realTimeData\",n.signals)})),this.updateState({realtimeInfo:e.get(\"realTimeData\").map((e=>({value:P.util.iUnescape(e.value)||\"\",label:e.name||\"-\",unit:e.unit||\"\",id:e.id||\"\"}))),loading:!1})}else this.updateState({realtimeInfo:[],loading:!1})}))},this.getRealTimeData=e=>{const{intl:t}=this.props;this.setState({loading:!0}),(0,p.kO)(e).then((e=>{const{success:n,data:r}=e;n?this.updateState({tableinfo:r.map((e=>({id:e.deviceName,...e,batteryType:t.formatMessage({id:\"-\"===e.batteryType?\"-\":`neteco.pvms.battery.type${e.batteryType}`})}))),loading:!1}):this.updateState({tableinfo:[],loading:!1})})),(0,p.Rt)(e).then((e=>{const{success:t,data:n}=e;t?this.updateState({iconStatus:e.data}):this.updateState({iconStatus:\"\"})}))},this.getBasicDataLabel=e=>{const{intl:t}=this.props;switch(e){case\"deviceName\":return t.formatMessage({id:\"ncoNewDeviceManagement.label.deviceName\"});case\"deviceType\":return t.formatMessage({id:\"ncoHomeSearchBarView.label.stationDeviceTypes\"});case\"stationName\":return t.formatMessage({id:\"ncoHomeSearchBarView.label.stationName\"});case\"stationAddress\":return t.formatMessage({id:\"ncoNewDeviceManagement.form.item.placeholder.stationAddress\"});default:return e}},this.hideSignalId=[33595395,21022],this.getBasicData=e=>{let{elementDn:t,signals:n}=e;(0,p.Dm)(t).then((e=>{const{success:t,data:n}=e;t?this.updateState({basicInfo:n.filter((e=>!this.hideSignalId.includes(e.id))).map((e=>({value:P.util.iUnescape(e.value)||\"\",label:this.getBasicDataLabel(e.name)||\"-\",unit:e.unit||\"\"})))}):this.updateState({basicInfo:[]})}))},this.startResetLoading=()=>{this.setState({resetLoading:!0})},this.filishResetLoading=()=>{this.setState({resetLoading:!1})},this.resetClick=()=>{(0,x.WW)(D,{pageName:N,actionName:I});const{intl:e}=this.props,t={successCallback:e=>this.resetStorageBoxInfo(e)};E(e,e.formatMessage({id:\"neteco.pvms.reset.tips\"}),(()=>{(0,v.Nu)(\"use-verify-pass\",t)}))},this.resetStorageBoxInfo=async e=>{const{intl:t,selectedTreeNode:n}=this.props,{elementDn:r}=n;this.startResetLoading();const i=await(0,p.Z)(r,e),{code:o,data:a}=i;if(0===o)O(t,t.formatMessage({id:\"neteco.pvms.storageBox.resetsuccess\"}));else if(1020===o)M(t,t.formatMessage({id:\"neteco.pvms.device.management.not_exists\"}));else{const e=a&&Object.keys(a).length>0&&Object.values(a)[0];M(t,t.formatMessage({id:e||\"neteco.pvms.ipLock.modifyFailed\"}))}this.filishResetLoading()},this.updateState=e=>{this.setState({...this.state,...e})},this.renderMain=()=>{const{intl:e,selectedTreeNode:t,isInModal:n}=this.props,{nodeName:a}=t,{loading:l,iconStatus:c,tableinfo:u,realtimeInfo:d,switchState:p,rectifierTable:g,rectifierTableLoading:v,isInSharedStation:b}=this.state,S=[\"ratedChargeCapacity\",\"ratedDischargeCapacity\",\"ratedChargePower\",\"ratedDischargePower\",\"workBatteryModuleNumber\",\"batteryModuleNumber\",\"DCToDCNumber\",\"batteryClusterNumber\",\"chargeableCapacity\",\"dischargeableCapacity\"],x=[{title:\" \",dataIndex:\"name\",key:\"title\",align:\"center\",ellipsis:!0,width:\"12.5rem\"},{title:e.formatMessage({id:\"neteco.pvms.basicUnifSignal.backup.backupStatusItem.4\"}),dataIndex:\"10022\",key:\"error\",align:\"center\",ellipsis:!0,render:(e,t)=>this.buildStatusIcon(e,t.deviceStatus)},{title:e.formatMessage({id:\"neteco.pvms.storageBox.detail.protect\"}),dataIndex:\"10023\",key:\"protect\",align:\"center\",ellipsis:!0,render:(e,t)=>this.buildStatusIcon(e,t.deviceStatus)},{title:e.formatMessage({id:\"neteco.pvms.storageBox.detail.comFailure\"}),dataIndex:\"10024\",key:\"comFailure\",align:\"center\",ellipsis:!0,render:(e,t)=>this.buildStatusIcon(e,t.deviceStatus)},{title:e.formatMessage({id:\"neteco.pvms.storageBox.detail.powerOff\"}),dataIndex:\"10025\",key:\"powerOff\",align:\"center\",ellipsis:!0,render:(e,t)=>this.buildStatusIcon(e,t.deviceStatus)},{title:e.formatMessage({id:\"neteco.pvms.storageBox.detail.outputOver\"}),dataIndex:\"10026\",key:\"outputOver\",align:\"center\",ellipsis:!0,render:(e,t)=>this.buildStatusIcon(e,t.deviceStatus)}],w=[],C=[{title:e.formatMessage({id:\"neteco.pvms.storageBox.detail.deviceName\"}),dataIndex:\"title\",key:\"title\",ellipsis:!0,width:\"17.5rem\"}];S.forEach(((t,n)=>{w.push({key:`${n} + 1`,title:e.formatMessage({id:`neteco.pvms.storageBox.detail.${t}`})})})),u&&u.forEach((e=>{const{deviceName:t}=e;C.push({title:t,dataIndex:t,ellipsis:!0}),S.forEach(((n,r)=>{w[r][t]=e[n]}))}));const T={apiParams:{status:c,type:\"ess\"},dataLoaderClass:m.Z};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(\"div\",{className:\"content-top\",children:[(0,A.jsx)(\"div\",{className:\"content-top-storageBoxName\",children:P.util.iUnescape(a)}),(0,A.jsxs)(\"div\",{className:n?\"content-top-reset-inModal\":\"content-top-reset\",children:[(0,A.jsx)(y.Z,{}),p&&(0,A.jsx)(o.Z,{disabled:!this.state.connectState,onClick:this.resetClick,children:(0,A.jsx)(s.Z,{id:\"neteco.pvms.dataCollector.dataCollector_remoteReset\"})})]})]}),(0,A.jsxs)(\"div\",{className:\"content-main\",children:[!n&&(0,A.jsx)(\"div\",{className:\"content-main-left\",children:(0,A.jsx)(h.Z,{...T})}),(0,A.jsxs)(\"div\",{className:\"content-main-right\",children:[(0,A.jsxs)(\"div\",{children:[(0,A.jsx)(\"div\",{className:\"baterry-realtime-text\",children:e.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.realData\"})}),(0,A.jsxs)(\"div\",{className:\"mar-botm\",children:[(0,A.jsx)(\"div\",{className:\"baterry-realtime-container\",children:(0,A.jsx)(f.Z,{data:this.state.realtimeInfo,columns:5,deviceType:t.mocId})}),(0,A.jsx)(i.Z,{loading:l,dataSource:w,columns:C,pagination:!1,rowKey:e=>e.key})]}),(0,A.jsx)(\"div\",{className:\"baterry-realtime-text\",children:e.formatMessage({id:\"neteco.pvms.storageBox.detail.rectifier\"})}),(0,A.jsxs)(\"div\",{className:\"mar-botm baterry-rectifier-container\",children:[(0,A.jsx)(\"div\",{className:\"baterry-realtime-container\",children:(0,A.jsx)(f.Z,{data:this.state.rectifierInfo,columns:5})}),(0,A.jsx)(i.Z,{loading:v,dataSource:g,columns:x,pagination:!1,rowKey:e=>e.name})]})]}),(0,A.jsx)(r.Z,{}),(0,A.jsx)(\"div\",{className:\"baterry-baseInfo-container\",children:(0,A.jsx)(f.Z,{title:e.formatMessage({id:\"neteco.pvms.devEport.basicInfo\"}),data:this.state.basicInfo,valueBottom:!0,columns:3,type:\"base\",isBasicInfo:!0})})]})]})]})},this.state={loading:!1,iconStatus:\"\",connectState:!1,switchState:!1,isInSharedStation:!1},this.startTime=T.$.pageAccess(_,{pageName:N,deviceType:String(null==e?void 0:e.selectedTreeNode.mocId)})}componentDidMount(){const{selectedTreeNode:e,subscriptionTime:t}=this.props,{elementDn:n}=e;this.getBasicData({elementDn:n,signals:\"10012,10013,10014,10015,10016,10017,10045,10046,10047,10049\"}),this.getRealTimeData(n),this.getRealTimeInfo(n),this.getRectifierInfo(n),(0,g.LG)(n).then((e=>{this.setState({connectState:e})})),this.timer=setInterval((()=>{this.getRealTimeData(n)}),t*C.v.monitorStorageBoxDetail_getRealTime),this.realtimeInfoTimer=setInterval((()=>{this.getRealTimeInfo(n)}),t*C.v.monitorStorageBoxDetail_getRealTime),(0,b.lVp)(b.u4l)&&(0,w.pm)().then((e=>{const{success:t,data:n}=e;if(t){const e=u()(n,[\"paramName\",\"switch_enable\"]);e&&\"1\"===e.paramValue&&this.setState({switchState:!0})}})).catch((e=>{})),n&&(0,g.PW)(n).then((e=>{const{success:t,data:n}=e;t&&this.setState({isInSharedStation:n})}))}componentDidUpdate(e){if(this.props.subscriptionTime!==e.subscriptionTime){const{selectedTreeNode:e,subscriptionTime:t}=this.props,{elementDn:n}=e;this.timer&&clearInterval(this.timer),this.realtimeInfoTimer&&clearInterval(this.realtimeInfoTimer),this.timer=setInterval((()=>{this.getRealTimeData(n)}),t*C.v.monitorStorageBoxDetail_getRealTime),this.realtimeInfoTimer=setInterval((()=>{this.getRealTimeInfo(n)}),t*C.v.monitorStorageBoxDetail_getRealTime)}}componentWillUnmount(){var e;T.$.pageLeave(this.startTime,j,{pageName:N,deviceType:String(null===(e=this.props)||void 0===e?void 0:e.selectedTreeNode.mocId)}),clearInterval(this.timer),clearInterval(this.realtimeInfoTimer),this.setState=()=>{}}render(){const{isInModal:e}=this.props;return e?this.renderMain():(0,A.jsx)(\"div\",{className:\"nco-monitor-storage-box-detail tab-content\",children:(0,A.jsx)(\"div\",{className:\"content\",children:(0,A.jsx)(\"div\",{className:\"storage-box-content\",children:this.renderMain()})})})}}const L=(0,l.ZP)(k)},96182:(e,t,n)=>{\"use strict\";n.d(t,{B8:()=>o,DD:()=>p,Dm:()=>a,Km:()=>i,Rt:()=>u,Z:()=>l,kO:()=>c,t:()=>d,uT:()=>s});var r=n(49453);n(80864);const i=e=>{let{elementDn:t,signals:n}=e;return(0,r.U2)(\"/rest/pvms/web/business/v1/container/right-information\",{deviceDn:t,signals:n})},o=e=>(0,r.U2)(\"/rest/pvms/web/device/v1/device-realtime-data\",{deviceDn:e}),a=e=>(0,r.U2)(\"/rest/pvms/web/business/v1/container/detail-basic\",{deviceDn:e}),s=e=>(0,r.U2)(\"/rest/pvms/web/device/v1/deviceExt/is-device-online\",{dn:e}),l=(e,t)=>(0,r.Md)(\"/rest/neteco/config/device/v1/config/set-signal-with-randomval\",{dn:e,changeValues:JSON.stringify([{id:\"20001\",value:\"0\"}]),randomVal:null==t?void 0:t.check}),c=e=>(0,r.U2)(\"/rest/pvms/web/business/v1/container/detail-battery-clusters\",{deviceDn:e}),u=e=>(0,r.U2)(\"/rest/pvms/web/business/v1/container/status\",{deviceDn:e}),d=e=>(0,r.U2)(\"/rest/neteco/web/config/device/v1/children-list\",{\"conditionParams.parentDn\":e}),p=e=>{let{elementDn:t,signals:n}=e;return(0,r.U2)(\"/rest/pvms/web/device/v1/deviceExt/get-device-signals\",{dn:t,signalIds:n})}},5083:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>w});var r=n(45258),i=n(29266),o=n(88391),a=n(93706),s=n(44851),l=n(88490),c=n(79790),u=n(771),d=n(4342),p=n(49453),f=n(44184),h=n(41541),m=n(62073),g=n(23712);const v=(0,o.forwardRef)(((e,t)=>(0,g.jsx)(m.Z,{...e,ref:t,onChange:t=>{const n=t.target.value.replace(/[^0-9]/g,\"\");var r;t.target.value=n,null===(r=e.onChange)||void 0===r||r.call(e,t)}}))),y=(0,a.ZP)((e=>{let{length:t=6,value:n,onChange:r}=e;const i=Array(t).fill(\"\"),[a,s]=(0,o.useState)(i.map(((e,t)=>{var r;return null!==(r=null==n?void 0:n[t])&&void 0!==r?r:\"\"}))),l=i.map((()=>(0,o.useRef)(null)));return(0,g.jsx)(\"div\",{className:\"verificationCode-input-array\",onPaste:e=>{var n,i,o,a;e.preventDefault();let c=null!==(n=null===(i=e.clipboardData)||void 0===i?void 0:i.getData(\"text\"))&&void 0!==n?n:\"\";const u=c.replace(/\\D/g,\"\");c=u.slice(0,t);const d=c.split(\"\");s(d),r(c),null===(o=l[c.length<t-1?c.length:t-1])||void 0===o||null===(a=o.current)||void 0===a||a.focus()},children:i.map(((e,n)=>{var i;return(0,g.jsx)(v,{ref:l[n],autoComplete:\"off\",value:null!==(i=null==a?void 0:a[n])&&void 0!==i?i:\"\",className:\"verification-input\",onChange:e=>((e,n)=>{var i;const o=[...a];var c,u;o[e]=n,s(o),r(null!==(i=null==o?void 0:o.join(\"\"))&&void 0!==i?i:\"\"),\"\"!==n&&e<t-1&&(null===(c=l[e+1])||void 0===c||null===(u=c.current)||void 0===u||u.focus())})(n,e.target.value),onKeyDown:e=>((e,t)=>{var n,r;\"Backspace\"===t.key&&e>0&&\"\"===a[e]&&(null===(n=l[e-1])||void 0===n||null===(r=n.current)||void 0===r||r.focus())})(n,e),maxLength:1},n)}))})}));let b=null;const S=[{code:\"1220\",errorMsg:\"neteco.pvms.nologin.verificationCode.intervalTime\"},{code:\"1221\",errorMsg:\"common.verifyCode.identityLocked\"},{code:\"1222\",errorMsg:\"common.verifyCode.terminalLocked\"},{code:\"0\",errorMsg:\"neteco.pvms.register.send.code.failed\"},{code:\"8\",errorMsg:\"neteco.ncoRegistIntaller.sendcode.ip.lock\"}],x=(0,a.ZP)((e=>{let{sendType:t,className:n,onChange:r,showError:i,verifyMsg:a,areaCode:s,intl:l,contact:c,userName:u,...d}=e;const[f,m]=(0,o.useState)(l.formatMessage({id:\"neteco.pvms.nologin.button.getVerificationCode\"})),[v,x]=(0,o.useState)(!1),[w,C]=(0,o.useState)(!1),[T,A]=(0,o.useState)(l.formatMessage({id:\"neteco.pm.performance.sync.create.failed.system.error\"}));return(0,o.useEffect)((()=>(b&&clearInterval(b),()=>{b&&clearInterval(b)})),[]),(0,g.jsxs)(\"div\",{children:[(0,g.jsx)(y,{...d,onChange:r,length:6}),(0,g.jsxs)(\"div\",{className:\"getVerifyCode-buttonArea\",children:[(0,g.jsx)(h.Z,{type:\"text\",onClick:async()=>{let e={userName:u,type:t};(0,p.v_)(\"/rest/dp/pvms/dporganizationwebsite/v2/users/verify-code\",e,null,\"text\").then((()=>{x(!0),C(!1),A(\"\"),(()=>{let e=60;b=setInterval((()=>{e--,e<=0?(m(l.formatMessage({id:\"neteco.pvms.common.verifycode.reacquirere.btn\"})),x(!1),clearInterval(b)):m(l.formatMessage({id:\"neteco.pvms.common.verifycode.countdown.btn\"},{second:e}))}),1e3)})()})).catch((e=>{x(!1),C(!0);let t=\"\";var n;e.responseText&&(t=JSON.parse(e.responseText),A((e=>{const t=S.find((t=>t.code===e));return l.formatMessage({id:(null==t?void 0:t.errorMsg)||\"neteco.pm.performance.sync.create.failed.system.error\"})})(null===(n=t)||void 0===n?void 0:n.reasonArgs[0])))}))},className:\"get-verificationCode-button\",disabled:v,children:f}),(w||i)&&(0,g.jsx)(\"span\",{className:\"getVerifyCode-errorMessage\",children:Boolean(a)?a:T})]})]})}));n(44772);const w=(0,a.ZP)((e=>{let{intl:t,okCallback:n,tipContent:a,id:h,isNew:m=!1}=e;const[v,y]=(0,o.useState)(!1),[b,S]=(0,o.useState)(!1),[w,C]=(0,o.useState)({}),[T,A]=(0,o.useState)(\"\"),[E,O]=(0,o.useState)(),[M,P]=(0,o.useState)(\"pwd\"),[D,I]=(0,o.useState)([]),[N,_]=(0,o.useState)({}),[j,k]=(0,o.useState)(),[L,R]=(0,o.useState)(\"\"),[Z,B]=(0,o.useState)(!1),[F,z]=(0,o.useState)(),[V,H]=(0,o.useState)(),[U,G]=(0,o.useState)(!1),[Y]=i.Z.useForm(),[W,K]=s.Z.useModal();(0,d.n5)(),(0,o.useEffect)((()=>{X(),q()}),[]);const q=async()=>{const e=(0,d.vW)();H(e);const[t,n]=await(0,f.AM)((0,p.U2)(\"/rest/dpcloud/usermgnt/er/v1/users/personalinfo\"));if(n.success){const{email:e,phoneNumber:t,country:r}=n.payload;_({email:e,cellphone:t,nationCode:r})}},Q=()=>(0,d.jA)()?\"phone\":\"email\",X=async()=>{const[e,t]=await(0,f.AM)((0,p.U2)(\"/rest/dp/pvms/organization/v3/users/verification/mode\"));if(t){const e=(e=>-1===e.indexOf(\"pwd\")||e.length>2?e.filter((e=>\"pwd\"===e||e===Q())):e)(t);if(I(e),0===t.length?P(\"pwd\"):t.length>1&&-1===t.indexOf(\"pwd\")?P(Q()):P(t[0]),t.length>2){const e=Q();z(e)}else t.length>1&&-1!==t.indexOf(\"pwd\")?z(t[1]):z(null)}},J=e=>{const{email:n=\"\",nationCode:r=\"\",cellphone:i=\"\"}=N;return{phone:{title:t.formatMessage({id:\"neteco.pvms.verifyPassword.phone.title\"}),content:t.formatMessage({id:\"neteco.pvms.verifyPassword.phone.content\"},{areaCode:`+${Number(r)}`,phoneNumber:i}),sendType:\"phone\"},email:{title:t.formatMessage({id:\"neteco.pvms.verifyPassword.email.title\"}),content:t.formatMessage({id:\"neteco.pvms.verifyPassword.email.content\"},{email:n}),sendType:\"email\"},pwd:{title:t.formatMessage({id:\"neteco.pvms.verifyPassword.pwd.title\"}),content:t.formatMessage({id:\"neteco.pvms.device.management.emma.network.reconstruction.create.task.verify.password.tip\"}),sendType:\"\"}}[null!=e?e:M]},{title:$,content:ee,notAvailable:te,sendType:ne}=(0,o.useMemo)((()=>J(M)),[M,N]),re=e=>{let{detail:t}=e;y(!0),n||C(t)};return(0,o.useEffect)((()=>(window.addEventListener(\"use-verify-pass\",re),()=>{window.removeEventListener(\"use-verify-pass\",re)})),[]),(0,g.jsxs)(s.Z,{className:\"nco-verify-pass-modal\",title:$,visible:v,maskClosable:!1,zIndex:1001,onOk:async()=>{const[e,t]=await(0,f.AM)(Y.validateFields());e||(Y.submit(),G(!0),setTimeout((()=>G(!1)),1e3))},centered:!0,onCancel:()=>{const{errorCallback:e,param:t}=w;Y.resetFields(),y(!1),S(!1),e&&e(t)},destroyOnClose:!0,okButtonProps:{loading:U},children:[Boolean(a)&&(0,g.jsx)(\"div\",{className:\"nco-verify-password-tip\",children:a}),(0,g.jsxs)(i.Z,{onFinish:e=>{if(\"pwd\"!==M){const{cellphone:e=\"\",email:t=\"\"}=N,n={type:M,scene:\"restPWD\"};Y.setFieldsValue({contactInfo:n})}return n?n(Y,S,O):(e=>{const{userPass:n,verificationCode:i}=e;(0,f.xb)(e)?r.Z.error({title:t.formatMessage({id:\"neteco.pvms.error\"}),content:t.formatMessage({id:\"neteco.pm.performance.sync.create.failed.system.error\"}),icon:(0,g.jsx)(l.Z,{className:\"error-icon\"}),zIndex:2e3,centered:!0,className:\"newNorm-modal verifyPwd-newNorm-modal\"}):\"pwd\"===M?(e=>{const{successCallback:n,errorCallback:i,param:o,source:a}=w;e===T&&b||(A(e),(async(e,t)=>\"home\"===t?(0,p.v_)(\"/rest/neteco/web/homemgr/v1/device/config/credit\",e):(0,p.v_)(\"/rest/pvms/web/management/v1/config/change_Pwd\",e))({pwdCode:e},a).then((e=>{const{success:t,data:r}=e,{number:i}=r;return t?(Y.resetFields(),y(!1),S(!1),n&&n(r,o),!0):i>0?(S(!0),!1):void neteco.util.logout()})).catch((()=>((m?W:r.Z).error({title:t.formatMessage({id:\"neteco.pvms.systemSetting.authError\"}),centered:!0}),i&&i(),!1))))})(n):(e=>{const{successCallback:n,errorCallback:r,param:i}=w;var o;(o={type:M,scene:\"restPWD\",code:e},(0,p.v_)(\"/rest/dp/pvms/netecoorganizationservice/v2/check-verify-code\",o)).then((e=>{const t={check:e.randomVal};return Y.resetFields(),y(!1),S(!1),n&&n(t,i),B(!1),!0})).catch((e=>(B(!0),R(t.formatMessage({id:\"common.verifyCode.error\"})),r&&r(),!1)))})(i)})(e)},form:Y,children:[(0,g.jsx)(\"div\",{className:\"nco-verify-password-tip\",children:ee}),\"pwd\"===M?(0,g.jsx)(i.Z.Item,{label:t.formatMessage({id:\"neteco.pvms.userDialog.password\"}),name:\"userPass\",validateStatus:b?\"error\":\"\",help:(()=>{if(b)return e=t.formatMessage({id:E||\"neteco.pvms.checkPwd.error\"}),(0,g.jsxs)(\"div\",{className:\"error-tip\",children:[(0,g.jsx)(u.Z,{}),e]});var e})(),rules:[{required:!0,validator:(e,n)=>(0,f.xb)(n)?(S(!0),O(t.formatMessage({id:\"neteco.pvms.systemSetting.inputAlternate.password\"})),Promise.reject(new Error)):(S(!1),O(null),Promise.resolve())}],children:(0,g.jsx)(c.Z.Password,{onChange:e=>{e.target.value!==T&&S(!1)},keepVisible:!1})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.Z.Item,{name:\"verificationCode\",rules:[{required:!0,validator:(e,n)=>(0,f.xb)(n)?(S(!0),O(t.formatMessage({id:\"email\"===M?\"neteco.pvms.systemSetting.getpass.inputmailcode\":\"neteco.pvms.registter.phone.vercode\"})),Promise.reject(new Error)):(S(!1),O(null),Promise.resolve())}],children:(0,g.jsx)(x,{sendType:ne,userName:V,contact:N,onChange:e=>k(e),showError:Z||b,verifyMsg:L||E,intl:t})}),(0,g.jsx)(i.Z.Item,{name:\"contactInfo\",className:\"hidden-item\"})]})]}),D.length>1&&(0,g.jsxs)(\"div\",{children:[(0,g.jsx)(\"span\",{children:t.formatMessage({id:\"neteco.pvms.verifyPassword.pwd.notAvailable\"})}),\" \",(0,g.jsx)(\"span\",{className:\"not-abailable-otherway\",onClick:()=>{const e=D.filter((e=>e!==M))[0];z(M),P(e),S(!1),O(null),B(!1)},children:J(F).title})]}),K]})}))},70440:(e,t,n)=>{\"use strict\";n.d(t,{$k:()=>d,Ap:()=>f,B5:()=>x,Bp:()=>F,DW:()=>y,H7:()=>Z,HJ:()=>E,KS:()=>k,Ne:()=>b,Ou:()=>T,Po:()=>M,QL:()=>u,Rj:()=>g,Rm:()=>h,SL:()=>B,Th:()=>w,VA:()=>z,XD:()=>c,Y2:()=>v,Yu:()=>D,Z9:()=>s,Zr:()=>l,bF:()=>O,fJ:()=>V,fy:()=>m,hy:()=>L,jE:()=>S,kt:()=>A,mu:()=>j,pC:()=>_,vN:()=>p,xD:()=>N,yV:()=>I,zg:()=>C,zt:()=>R,zz:()=>P});var r=n(83621),i=(n(4342),n(64218)),o=n(44184);const a=[59986,60001,60002,60003,60010,60015,60026,60043,60044,69999,60092,60067],s=e=>20838===e,l=e=>20822===e,c=e=>20835===e,u=e=>20816===e,d=e=>20815===e,p=e=>60066===e,f=e=>60022===e,h=e=>20836===e,m=e=>20837===e,g=e=>20844===e,v=e=>60014===e,y=e=>20821===e,b=e=>20851===e,S=e=>20801===e,x=e=>20800===e||-1===e,w=e=>20824===e,C=e=>60080===e,T=e=>20819===e,A=e=>20814===e,E=e=>20811===e,O=e=>20847===e,M=(e,t)=>20847===e&&(0,i.EB)().includes(Number(t)),P=e=>a.includes(e),D=e=>e===r.o.BACKUP_BOX,I=e=>e===r.o.ESM,N=e=>e===r.o.GENEARTOR,_=e=>e===r.o.GENEARTOR_SET,j=(e,t)=>c(e)&&23077===t,k=(e,t)=>a.includes(e)&&23078===t,L=(e,t)=>c(e)&&23080===t,R=(e,t)=>v(e)&&23081===t,Z=e=>r.o.CONTROLLER===e,B=e=>e===r.o.CHARGE_PILE_CI,F=e=>e===r.o.CHARGE_GUN_CI,z=e=>e===r.o.CHARGE_DC,V=e=>{if((0,o.xb)(e))return!1;const t=e.match(/SmartLogger(\\d+)/i);return!!t&&t[1]>=5e3}},19129:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>i});const r={loading:!1},i=(e,t)=>{const n=null!=e?e:r;switch(t.type){case\"NCOMONITORLAYOUTCONTAINER/START_LOADING\":return{...n,loading:!0};case\"NCOMONITORLAYOUTCONTAINER/FINISH_LOADING\":return{...n,loading:!1};default:return n}}},5439:(e,t,n)=>{\"use strict\";n.d(t,{TG:()=>o,_R:()=>i,bx:()=>r});const r=\"NCO_STATION/QUERY_GOD_REVENUE\",i=\"NCO_SET_SHARE_STATION_STATUS\",o=\"NCO_CLEAR_STATION_STORE\"},30979:(e,t,n)=>{\"use strict\";n.d(t,{W:()=>i,Z:()=>o});var r=n(5439);const i={emmaGodState:{feShowLogic:{switch:{show:void 0,open:void 0},tab:void 0,tip:void 0},feRes:{feIntro:\"\",actInstrPath:\"\",feIntroTitle:\"\"},upgrade:{isUpgrade:void 0,success:void 0}},isShareStation:!1},o=(e,t)=>{const n=null!=e?e:i;switch(t.type){case r.bx:return{...n,emmaGodState:t.payload};case r._R:return{...n,isShareStation:t.payload};case r.TG:return i;default:return n}}},10290:(e,t,n)=>{\"use strict\";n.d(t,{w:()=>r});const r=\"NCOMONITORSUBMATRIXCONTAINER/SET_SOFTWAREVERSION\"},17085:(e,t,n)=>{\"use strict\";n.d(t,{k:()=>r});const r=new(n(40401).x)},53744:(e,t,n)=>{\"use strict\";n.d(t,{A_:()=>i,Ge:()=>r,MO:()=>o,kJ:()=>a,m_:()=>s});const r=\"NCOMONITORDEVICEPROPCONFIGMODAL/START_LOAD_SIGNALS\",i=\"NCOMONITORDEVICEPROPCONFIGMODAL/FINISH_LOAD_SIGNALS\",o=\"NCOMONITORDEVICEPROPCONFIGMODAL/START_REFRESH_LOAD_SIGNALS\",a=\"NCOMONITORDEVICEPROPCONFIGMODAL/FINISH_REFRESH_LOAD_SIGNALS\",s=\"NCOMONITORDEVICEPROPCONFIGMODAL/LOCK_LOAD_DN\"},13051:(e,t,n)=>{\"use strict\";n.d(t,{Pn:()=>T,_1:()=>A,al:()=>y,b0:()=>M,eZ:()=>C,rJ:()=>O,ty:()=>E});var r=n(2955),i=n(44184),o=n(53744),a=n(49453),s=n(87937),l=n(16910),c=n(64218),u=n(91650),d=n(54568),p=n(59516);const f=new Set([20819,20821]),h=new Set([230190021,230200009]),m=new Set([22100,22101]),g=new Set([230200061,21021,230320241,230320283,230190100,230190101,230200223,230700059]),v=new Set([230320643,230320642,230320645,230320644]),y=async e=>{let{rows:t,changeValues:n,callbacks:r,form:o,checkPwd:s,initSignalMap:u,plantDn:p}=e;if(1===t.length){const[{dn:e}]=t;let p=[];const f=n[21021];for(const e in n)21021!==Number(e)&&p.push({id:e,value:n[e]});void 0!==f&&p.push({id:21021,value:f});const h=o.isFieldTouched(\"33595393\"),m=\"33595393\";h||(p=p.filter((e=>e.id!==m))),p=(0,d.qE)(p,u,230320278,230320485);const v=p.map((e=>(0,l.Cx)(e.id)?(e.value=(0,l.uY)(e.value),e):e)),y=async t=>{const[n,o]=await(0,i.AM)((0,a.Md)(\"/rest/pvms/web/device/v1/deviceExt/set-config-signals\",{dn:e,changeValues:JSON.stringify(v),randomVal:null==t?void 0:t.check}));if(n)return void r.failCallbacks.forEach((e=>e(l,p)));const{code:s,data:l}=o;e.split(\",\").filter(Boolean).length>1?r.batchCallbacks.forEach((e=>e(l))):0===s&&0===l[0].code?r.okCallbacks.forEach((e=>e())):r.failCallbacks.forEach((e=>e(l,p)))},S=v.filter((e=>g.has(Number(e.id))));if(S.length){const e=new Map;S.forEach((t=>{e.set(t.id,t.value)}));let t=!1;if([...e.values()].every((n=>\"5\"!==n&&\"7\"!==n&&(1!==e.size||\"[]\"!==n)||(t=!0,!1))),t&&(\"[]\"===e.get(\"230200061\")||\"[]\"===e.get(\"230200223\")||\"[]\"===e.get(\"230320283\")||\"[]\"===e.get(\"230190101\"))||\"[]\"===e.get(\"230700059\"))return void r.failCallbacks.forEach((e=>e([{data:{data:[\"neteco.pvms.TOUSeting.errorTip\"]}}])))}if(!function(e){const t=e.filter((e=>b.has(Number(e.id))));for(let e=0;e<t.length;e++){const{value:n}=t[e];if(\"[]\"===n)return!1}return!0}(v))return void r.failCallbacks.forEach((e=>e([{data:{data:[\"neteco.pvms.BatteryControlSeting.errorTip\"]}}])));const x=v.findIndex((e=>e.id===String(d.YU))),w=v.findIndex((e=>e.id===String(d.ie)));if(x>-1&&w>-1&&x>w){const e=v[x];v.splice(x,1),v.splice(w,0,e)}o.validateFields().then((()=>{const e=v.filter((e=>[\"230470075\",\"230470076\",\"21105\",\"21106\",\"230532071\"].includes(String(e.id)))),{callback:t,needAuthSignals:r}=s,i=Object.keys(n),o=r.filter((e=>i.includes(String(e.id))));if(e.length||o.length){const e={successCallback:e=>{t(),y(e)},errorCallback:t};(0,c.Nu)(\"use-verify-pass\",e)}else y()})).catch((()=>{const{callback:e}=s;e()}))}},b=new Set([230320486,230700179,230200219]),S=(e,t)=>{const n=e.map((e=>{const{enumList:t={}}=e,n=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push([e,t[e]]);const{id:r}=e;return{...e,disabled:!(0,p.lVp)(p.qS6),value:(0,l.Cx)(r)||(0,l.BH)(r)?(0,l.IZ)(e.value):window.neteco.util.iUnescape(e.value),type:\"ENUM\"===e.dataType?\"select\":\"input\",tips:e.tips,enums:n,signalKey:e.id,help:e.tips,editable:e.edit,limit:e.valueRange&&e.valueRange.displayRange||null,name:(0,l.aH)(e.name)}}));if(20815===t)return n.filter((e=>!v.has(e.signalKey)));if(f.has(t)&&e.some((e=>{let{id:t}=e;return h.has(t)}))){const e={message:\"neteco.pvms.partials.main.dm.devParamMenu.dongleV2Param.tips\",id:\"dongleProtectSignalTip\"};return[...n,e]}if(f.has(t)&&e.some((e=>{let{id:t}=e;return m.has(t)}))){const e={id:\"dongleReportSignalTip\",message:\"neteco.pvms.partials.main.dm.devParamMenu.dongleReport.tips.pvms\"};return[...n,e]}return n},x=()=>({type:o.MO}),w=()=>({type:o.kJ}),C=async(e,t,n,i)=>{e({type:o.Ge});let a=[];if(!t||0===t.length)return;let s=\"\";if(1===t.length){const[c]=t,{dn:d,mocTypeName:p,name:f,mocId:h}=c;if(!d)return;if(s=d,e((l=d,{type:o.m_,payload:l})),Object.keys(n).length>0){const e=JSON.stringify(JSON.parse(n.changeParam).filter((e=>{let{id:t}=e;return!u.Ne.has(t)})));n.changeParam=e}const m=(0,r.U2)(\"/rest/pvms/web/device/v1/deviceExt/get-config-signals\",{dn:d,...n}).then((e=>Promise.resolve(e))).catch((()=>Promise.resolve({code:-1}))),g=await m,{okCallbacks:v=[],failCallbacks:y=[]}=i;0===g.code?(v.forEach((e=>e())),a=[{type:f||p||\"UNKNOWN\",groups:g.data.map((e=>({name:e.groupName,signals:S(e.configSignalDisplayList,h)}))).filter((e=>e.signals.length>0))}]):y.forEach((e=>e()))}var l;window.dispatchEvent(new CustomEvent(\"reload_nco_device_prop\",{detail:{deviceTypesWithConfigSignals:a,dn:s}})),e((e=>({type:o.A_,payload:e}))({deviceTypesWithConfigSignals:a,dn:s}))},T=async()=>{const{success:e,data:t}=await(0,r.U2)(\"/rest/pvms/web/privacy/v1/privacy/has-agreed\",{disclaimer:\"v1.0\"});return!(!e||!t)},A=()=>(0,a.Md)(\"/rest/pvms/web/privacy/v1/privacy/update-agree-status\",{disclaimer:\"v1.0\",isSelect:1}),E=async e=>{const[t,n]=await(0,i.AM)((0,r.U2)(\"/rest/dp/neteco/monitor/v1/pvms/signal/refresh-state\",{operateSerial:e}));return!(null==n||!n.hasRefreshed)};function O(e,t,n,r,i){r&&e(x()),(0,s.rJ)(t,n).then((t=>{i(t),e(w())}))}const M=async e=>{const t=new FormData;for(const n in e)if(Object.hasOwnProperty.call(e,n)){const r=e[n];t.append(n,r)}return await(0,a.cd)(\"/rest/dp/pvms/device/v1/cert/upload\",t)}},17432:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>q});var r=n(70535),i=n(88391),o=n(17489),a=n(41541),s=n(34428),l=n(7029),c=n(29266),u=n(62073),d=n(92252),p=n(79790),f=n(66915),h=n(24301),m=n(56687),g=n(64436),v=n(8508),y=n(15319),b=n(57644),S=n(96519),x=n(16910),w=n(10749),C=n(77531),T=n(59709),A=n(28107),E=n(14077),O=n(59516),M=n(44184),P=n(54568),D=n(80770),I=n(13528),N=n(64218),_=n(92902),j=n(10412),k=n(23712);const{Option:L}=d.Z,{neteco:R}=window,Z=230320486,B=[21021,230320241,230190100,230154821],F=230700179,z=230320484,V=230320279,H=230190172,U=window.neteco.i18n.getLocale(),{refreshTouParam:G}=w.Z,Y=[\"dongleProtectSignalTip\",\"dongleReportSignalTip\"];class W extends i.Component{constructor(e){super(e),this.makeNormalInput=()=>{const{signal:e={},itemValue:t=\"\",tips:n=\"\"}=this.state,{edit:r=!1,validatePattern:i}=e,o=i?R.util.iUnescape(i):void 0,{useDP:a}=this.props,s=a?p.Z:u.Z;return(0,k.jsx)(c.Z.Item,{children:(0,k.jsx)(s,{title:t,value:t,disabled:!r||e.disabled,onChange:t=>{const{formTouchConfig:n={}}=this.props,{isFormTouched:r,touchForm:i}=n;!r&&(0,M.mf)(i)&&i({...e,value:t.target.value}),o&&!new RegExp(o).test(t.target.value)?this.setState({isWrongValue:!0}):this.setState({isWrongValue:!1,itemValue:t.target.value})},onBlur:t=>{const{signalRefresh:r,validatePattern:i}=e,o=i?R.util.iUnescape(i):void 0;o&&!new RegExp(o).test(t.target.value)&&(this.setState({isWrongValue:!0}),(0,D.CD)(n)),\"HW_MODBUS_DEVICE_REFRESH\"===r&&(0,x.Nu)(\"add_chain_value\",{value:t.target.value,sig:e,shouldReload:!0})}})})},this.makeNormalInputNumber=()=>{const{signal:e,itemValue:t,isWrongValue:n}=this.state,{edit:r=!1}=e,{precision:i=0,id:o}=e,a=n?{border:\"1px solid red\"}:{},s=i>0?1/Math.pow(10,i):1;let u={};(0,I.Dq)()&&(u={decimalSeparator:\",\"});const{useDP:d}=this.props,p=d?j.Z:l.Z;return(0,k.jsx)(c.Z.Item,{children:(0,k.jsx)(p,{...u,isNewStyle:d,style:{...a,width:\"100%\"},value:t,step:s,disabled:!r||e.disabled,onChange:t=>{const{formTouchConfig:n={}}=this.props,{isFormTouched:r,touchForm:i}=n;!r&&(0,M.mf)(i)&&i({...e,value:t}),this.setState({itemValue:t}),(0,P.mE)(e,`${t}`)?(this.setState({isWrongValue:!1}),(0,x.Nu)(\"change_form_uncontrolled_error\",{signalId:o,remove:!0})):(this.setState({isWrongValue:!0}),(0,x.Nu)(\"change_form_uncontrolled_error\",{remove:!1,signalId:o}))},onBlur:t=>{const{signalRefresh:n}=e;(0,P.mE)(e,`${(0,I.xP)(t.target.value)}`)?(this.setState({isWrongValue:!1}),\"HW_MODBUS_DEVICE_REFRESH\"===n&&(0,x.Nu)(\"add_chain_value\",{shouldReload:!0,sig:e,value:(0,I.xP)(t.target.value)})):this.setState({isWrongValue:!0})}})})},this.checkRefresh=e=>{const{signal:t={}}=this.state,{signalRefresh:n}=t;\"HW_MODBUS_DEVICE_REFRESH\"===n&&(0,x.Nu)(\"add_chain_value\",{sig:t,value:e,shouldReload:!0})},this.findGridStatus=e=>{for(const t of e){const e=t.signals&&t.signals.find((e=>e.id===V));if(e&&\"0\"===e.value)return!0}return!1},this.findPeakShavingStatus=e=>{for(const t of e){const e=t.signals&&t.signals.find((e=>e.id===z));if(e&&\"1\"===e.value)return!0}return!1},this.peakShavingSpecialHandle=(e,t,n,r)=>t.id===z&&\"1\"===n&&this.findGridStatus(r)?((0,D.CD)(e.formatMessage({id:\"neteco.pvms.device.peakShaving.tips\"})),!0):!(t.id!==V||\"0\"!==n||!this.findPeakShavingStatus(r)||((0,D.CD)(e.formatMessage({id:\"neteco.pvms.device.gridCharge.tips\"})),0)),this.makeNormalSelect=()=>{const{intl:e,signals:t,useDP:n}=this.props,{signal:r,itemValue:i,rulesConfig:o={}}=this.state,{edit:a=!1}=r;let s;const l=(0,P.dY)(r);s=l.find((e=>e.key===i))?i:\"\";const u=n?f.Z:d.Z;return(0,k.jsxs)(c.Z.Item,{children:[(0,k.jsx)(u,{disabled:!a||r.disabled,virtual:!1,value:s,showSearch:l.length>5,listHeight:160,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,getPopupContainer:e=>e.parentNode||document.body,style:{width:\"100%\"},onChange:n=>{const{formTouchConfig:i={},groups:a}=this.props,{touchForm:s}=i;if(this.peakShavingSpecialHandle(e,r,n,a))return;if(o){const{pass:r=!0,message:i}=(0,g.T)(\"select\")(t,o,n);if(!r)return void(0,D.CD)(e.formatMessage({id:i}))}const{confirmation:l,config:c,dependSignalIds:u}=o;if(u){const{pass:i=!0,message:a}=(0,g.C)(t,o,n);if(!i)return void(0,D.ST)(e.formatMessage({id:a}),(()=>{this.checkRefresh(n),this.setState({itemValue:n}),(0,M.mf)(s)&&s({...r,value:n})}))}l?c?c===n?(0,D.ST)(e.formatMessage({id:l}),(()=>{this.checkRefresh(n),this.setState({itemValue:n}),(0,M.mf)(s)&&s({...r,value:n})})):(this.checkRefresh(n),this.setState({itemValue:n}),(0,M.mf)(s)&&s({...r,value:n})):(0,D.ST)(e.formatMessage({id:l}),(()=>{this.checkRefresh(n),this.setState({itemValue:n}),(0,M.mf)(s)&&s({...r,value:n})})):((0,M.mf)(s)&&s({...r,value:n}),this.checkRefresh(n),this.setState({itemValue:n}))},children:l.map((e=>(0,k.jsx)(L,{children:e.displayName},e.key)))}),[\"230190032\"].includes(String(r.id))&&(0,k.jsxs)(\"div\",{className:\"pvms-refresh-tip-div\",children:[(0,k.jsx)(\"img\",{src:\"/pvmswebsite/assets/build/images/groupIcon/ic_importmdpi.png\"}),(0,k.jsx)(\"span\",{className:\"pvms-refresh-tip\",children:e.formatMessage({id:\"neteco.pvms.deviceManagement.needRefrsh\"})})]})]})},this.makeFormItemRules=()=>{const{signal:e}=this.state,{validatePattern:t,tips:n,id:r}=e,i=[],o=t?R.util.iUnescape(t):void 0;return o&&i.push({pattern:new RegExp(o),message:n||\"\"}),(0,x.Cx)(r)&&i.push({pattern:/^((2(5[0-5]|[0-4]\\d))|[0-1]?\\d{1,2})(\\.((2(5[0-5]|[0-4]\\d))|[0-1]?\\d{1,2})){3}$/,message:\"\"}),i},this.makeControlledInput=()=>{const{signal:e}=this.state,{intl:t}=this.props,{value:n,id:r,useDP:i}=e,o=33595393===r,a=i?p.Z:u.Z;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(c.Z.Item,{title:n,name:`${r}`,rules:this.makeFormItemRules(),initialValue:n,children:(0,k.jsx)(a,{disabled:o||e.disabled,title:n,onChange:t=>{const{formTouchConfig:n={}}=this.props,{isFormTouched:r,touchForm:i}=n,o=t.target.value;!r&&(0,M.mf)(i)&&i({...e,value:o})}})}),(()=>{if(\"21018\"===String(r))return(0,k.jsxs)(\"div\",{className:\"pvms-sensitive-operation-tip-div\",children:[(0,k.jsx)(\"img\",{src:\"/pvmswebsite/assets/build/images/groupIcon/ic_importmdpi.png\"}),(0,k.jsx)(\"span\",{className:\"pvms-sensitive-operation-tip\",children:t.formatMessage({id:\"neteco.pvms.stationInfo.addStation.devNameCheck\"})})]})})()]})},this.hideFormExplain=()=>{const{signal:e={}}=this.state,{id:t}=e,n=document.querySelector(`#signal-config-form-item-${t} .ant-form-item-explain`);n&&n.classList.remove(\"color-red\")},this.showFormExplain=()=>{const{signal:e={}}=this.state,{id:t}=e;setTimeout((()=>{const e=document.querySelector(`#signal-config-form-item-${t} .ant-form-item-explain`);e&&e.classList.add(\"color-red\")}),500)},this.makeCheckBox=()=>{const{signal:e}=this.state,{id:t,value:n,edit:r}=e;let i=[],o=[];try{o=JSON.parse(n).map((e=>{let{label:t,checked:n,disabled:r}=e;return{label:t,value:t,checked:n,disabled:r}})),i=o.filter((e=>!e.disabled))}catch(e){}const a=o.filter((e=>e.checked)).map((e=>e.value)),l=Object.fromEntries([[`${t}`,a]]);return this.props.controlConfig.form.setFieldsValue(l),(0,k.jsx)(c.Z.Item,{name:`${t}`,children:(0,k.jsx)(s.Z.Group,{options:i,disabled:!r||e.disabled,onChange:e=>{const{formTouchConfig:n={},controlConfig:r={}}=this.props,{form:i}=r,{touchForm:a}=n,s=o.map((t=>({...t,checked:e.indexOf(t.value)>=0})));22100===t&&this.checkRefresh(s),(0,M.mf)(a)&&a({id:t,value:s});const l=Object.fromEntries([[`${t}`,e]]);i.setFieldsValue(l)}})})},this.makeControlledInputNumber=()=>{const{controlConfig:e={},intl:t,deviceMocId:n,tabKey:r}=this.props,{signal:i}=this.state,{form:o}=e,{value:a,id:s,precision:u=0,valueRange:d,validatePattern:p,unit:f}=i,h=p?R.util.iUnescape(p):void 0;let m=[],v={};d&&(m=d.ranges?d.ranges:[]),m.length>0&&(v=m[0]);const{maxValue:y,minValue:b}=v;let S={step:u>0?1/Math.pow(10,u):1,disabled:i.disabled};(0,I.Dq)()&&(S={...S,decimalSeparator:\",\"});const{useDP:x}=this.props,w=x?j.Z:l.Z;return(0,k.jsxs)(c.Z.Item,{noStyle:!0,children:[(0,k.jsx)(c.Z.Item,{name:r?`${r}-${s}`:`${s}`,initialValue:a,validateTrigger:\"onBlur\",rules:[{validator:(e,n)=>{if(\"NA\"===n||null===n||\"\"===n)return this.hideFormExplain(),Promise.resolve();if(void 0===n)return this.hideFormExplain(),Promise.reject(\"\");if(void 0===b&&void 0===y&&!new RegExp(h).test(`${n}`))return this.hideFormExplain(),Promise.reject(\"\");const r=String(n).split(\".\")[1];if(!x&&r&&r.length>u)return this.hideFormExplain(),Promise.reject(\"\");const i=parseFloat(n);if(isNaN(i))return this.hideFormExplain(),Promise.reject(\"\");const a=Number(Number(y).toFixed(u)),s=Number(Number(b).toFixed(u));if(void 0!==b&&i<s)return this.hideFormExplain(),Promise.reject(\"\");if(void 0!==y&&i>a)return this.hideFormExplain(),Promise.reject(\"\");const{rulesConfig:l}=this.state;if(l){const e=(0,g.T)(\"number\");if(e){const n=e(o,l,i),{pass:r=!0,message:a}=n;if(!r)return this.showFormExplain(),Promise.reject(t.formatMessage({id:a}));const{compareSignalIds:s=[]}=l,c=s.map((e=>({name:`${e}`,value:o.getFieldValue(`${e}`),error:void 0})));o.setFields(c)}}return this.hideFormExplain(),Promise.resolve()}}],children:(0,k.jsx)(w,{...S,style:{width:\"100%\"},isNewStyle:x,onChange:e=>{const{formTouchConfig:t={},allTabItems:n}=this.props,{touchForm:a}=t,l=(0,I.xP)(e);if(r){const t=n.map((t=>Object.fromEntries([[`${t.key}-${s}`,e]])));o.setFieldsValue(Object.assign({},...t))}(0,M.mf)(a)&&a({id:i.id,value:String(l)})},onBlur:e=>{var r,s;if(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 230200031===(null==e?void 0:e.id)}(i)&&20821===n){const{formTouchConfig:n={}}=this.props,{touchForm:r}=n,s=(0,I.xP)(e.target.value),l=Object.fromEntries([[`${i.id}`,a]]);Number(s)!==Number(a)&&Number(s)>.02*y&&Number(s)<=y&&(0,D.ST)(t.formatMessage({id:\"neteco.pvms.param.setting.powerIncreaseThreshold.vol\"}),(()=>{r&&(0,M.mf)(r)&&r({id:i.id,value:s})}),(()=>{o.setFieldsValue(l),r&&(0,M.mf)(r)&&r({id:i.id,value:a})}))}const l=null===(r=this.state)||void 0===r||null===(s=r.rulesConfig)||void 0===s?void 0:s.compareSignalIds;l&&o.validateFields(l.map((e=>`${e}`)))},suffix:f,value:a})}),(()=>{if([\"230470075\",\"230470076\",\"21105\",\"21106\"].includes(String(s)))return(0,k.jsxs)(\"div\",{className:\"pvms-sensitive-operation-tip-div\",children:[(0,k.jsx)(\"img\",{src:\"/pvmswebsite/assets/build/images/groupIcon/ic_importmdpi.png\"}),(0,k.jsx)(\"span\",{className:\"pvms-sensitive-operation-tip\",children:t.formatMessage({id:\"neteco.pvms.SensitiveOperation.Tip\"})})]})})()]})},this.makeControlledSelect=()=>{const{signal:e,rulesConfig:t={}}=this.state,{intl:n,useDP:r}=this.props,{id:i,value:o,enumList:a={},enumListEntry:s}=e,{Option:l}=d.Z;let u,p;u=s instanceof Array&&s.length>0?s.map((e=>{const t=Object.entries(e)[0],n=t[0],r=t[1];return{key:String(n),displayName:R.util.iUnescape(String(r))}})):Object.entries(a).map((e=>({key:String(e[0]),displayName:R.util.iUnescape(String(e[1]))}))),p=u.find((e=>e.key===o))?o:\"\";const{controlConfig:h={}}=this.props,{form:m}=h,g=r?f.Z:d.Z;return(0,k.jsx)(c.Z.Item,{name:`${i}`,rules:[],initialValue:p,children:(0,k.jsx)(g,{getPopupContainer:e=>e.parentNode||document.body,disabled:e.disabled,virtual:!1,showSearch:u.length>5,listHeight:160,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0,onChange:r=>{const{formTouchConfig:o={}}=this.props,{touchForm:a}=o,s=230102182===i,l=s?\"0\":m.getFieldValue(`${i}`),c=s?\"\":{id:i,value:String(r)};(0,M.mf)(a)&&a(c);const u=Object.fromEntries([[`${i}`,r]]),d=Object.fromEntries([[`${i}`,l]]),{confirmation:p}=t;if(p){if(s){if(\"0\"===r)return;m.setFieldsValue(d)}(0,D.ST)(n.formatMessage({id:p}),(()=>{(0,x.Nu)(\"add_chain_value\",{sig:e,value:r,shouldReload:!1}),m.setFieldsValue(u),s&&(0,M.mf)(a)&&a({id:i,value:String(r)})}),(()=>{m.setFieldsValue(d),s&&(0,M.mf)(a)&&a({id:i,value:\"0\"})}))}else m.setFieldsValue(u)},children:u.map((e=>(0,k.jsx)(l,{children:e.displayName},e.key)))})})},this.makeDisableGeneratorForm=()=>{const{formTouchConfig:e={},intl:t,signal:n,dn:r}=this.props,{value:i,id:o}=n,{touchForm:a}=e,s={intl:t,id:o,value:i,dn:r,disabled:n.disabled,touchForm:(0,M.mf)(a)&&a};return n&&(0,k.jsx)(c.Z.Item,{children:(0,k.jsx)(T.Z,{...s})})},this.setJpTouValue=(e,t)=>{(0,x.Nu)(\"add_chain_value\",{sig:e,value:t,shouldReload:!1})},this.makeJpSmartLogger=()=>{const{formTouchConfig:e={},intl:t,signal:n,dn:r,type:i,communicationDeviceDn:o,controlConfig:a,signals:s}=this.props,{value:l,id:u}=n,{touchForm:d}=e,{form:p}=a,f={value:l,intl:t,id:u,form:p,signals:s,dn:\"EMS\"===i?o:r,disabled:n.disabled,touchForm:(0,M.mf)(d)&&d,setJpTouValue:e=>this.setJpTouValue(n,e)};return n&&(0,k.jsx)(c.Z.Item,{children:u===Z||u===F||230200219===u?(0,k.jsx)(A.Z,{...f}):(0,k.jsx)(C.Z,{...f})})},this.isShowUploadBtn=e=>[H].includes(e.id),this.makeFormItem=()=>{const{dn:e}=this.props,{signal:t,isControlled:n}=this.state;return this.isShowUploadBtn(t)?(0,O.lVp)(O.Lel)?(0,k.jsx)(_.Z,{dn:e}):null:this.isRenderMultilineTime(t)?this.makeJpSmartLogger():(0,P.Fc)(t)?this.makeDisableGeneratorForm():(0,P.mo)(t)?this.makeCheckBox():(0,P.Hr)(t)?n?this.makeControlledTouTable():this.makeTouTable():(0,P.wF)(t)||(0,P.C3)(t)||(0,P.KA)(t)||(0,P._w)(t)?n?this.makeControlledDiSchedulingTable():this.makeDiSchedulingTable():(0,P.wo)(t)?n?this.makeControlledBatteryInOutTable():this.makeBatteryInOutTable():(0,P.HD)(t)||(0,x.Cx)(t.id)?n?this.makeControlledInput():this.makeNormalInput():(0,P.hj)(t)?n?this.makeControlledInputNumber():this.makeNormalInputNumber():(0,P.No)(t)?n?this.makeControlledSelect():this.makeNormalSelect():this.makeNormalInput()},this.isRenderMultilineTime=e=>(0,P.MU)(e)||(0,P.oD)(e)||(0,P.af)(e)||(0,P.Sl)(e)||(0,P.Qn)(e)||(0,P.L9)(e)||(0,P.Gg)(e)||(0,P.Ku)(e),this.peakShavingTip=()=>(0,k.jsxs)(\"span\",{children:[(0,k.jsx)(\"img\",{src:\"/pvmswebsite/assets/build/images/home/tipsIcon.png\",className:\"peak-shaving-tip-icon\"}),this.props.intl.formatMessage({id:\"neteco.pvms.peakShaving.must.full.week\"})]}),this.workModelTip=()=>{const{intl:e}=this.props;return(0,k.jsx)(h.Z,{title:(0,k.jsx)(a.Z,{href:this.getHelpUrl(),type:\"link\",target:\"_blank\",rel:\"noopener noreferrer\",children:e.formatMessage({id:\"neteco.pvms.device.setting.workModelTips\"})}),overlayStyle:{maxWidth:\"none\"},children:(0,k.jsx)(m.Z,{className:\"config-item-tip-icon\"})})},this.getHelpUrl=()=>`https://info.support.huawei.com/DpinfoAppBiz/#/u?i=3sm0eHsA&l=${window.neteco.i18n.getLocale()}`,this.buildDescription=(e,t,n,r)=>(0,N.Zr)(this.props.deviceMocId)&&21023===n&&r?(0,k.jsx)(h.Z,{title:this.props.intl.formatMessage({id:\"i18n_fi_sun_cant_setting_tip1\"}),children:(0,k.jsx)(m.Z,{className:\"config-item-tip-icon\"})}):(0,x.Ou)(this.props.deviceMocId)&&230190046===n?(0,k.jsx)(h.Z,{title:this.props.intl.formatMessage({id:\"neteco.pvms.monitor.failurePowerId.message\"}),children:(0,k.jsx)(m.Z,{className:\"config-item-tip-icon\"})}):r&&!t&&e?(0,k.jsx)(h.Z,{title:R.util.iUnescape(e),children:(0,k.jsx)(m.Z,{className:\"config-item-tip-icon\"})}):(0,k.jsx)(\"div\",{}),this.handleSignalName=(e,t)=>{const{useDP:n}=this.props;return[H].includes(e.id)?\"\":t?n?`${R.util.iUnescape(t)}`:`${R.util.iUnescape(t)}:`:t};const{signal:t={},deviceMocId:n,tabKey:r}=e;this.state={isControlled:(0,P.GM)(t),itemValue:(0,P.Mz)(t),rulesConfig:(0,v.b)(n,t,r)||{},showFormExplain:!1,selfVoltage:\"\",diErrorData:\"\",signal:t},this.upLoadFormRef=i.createRef()}componentWillUnmount(){this.state.isControlled||(this.refRefreshTouParam&&this.refRefreshTouParam.unsubscribe(),this.setState=()=>({}))}componentDidMount(){this.state.isControlled||(this.refRefreshTouParam=G.subscribe((()=>{this.setState({isWrongValue:!1})})))}componentWillReceiveProps(e){const{controlConfig:t={}}=this.props,{signal:n={}}=e,{form:r}=t,{value:i,edit:o}=n,{signal:a,isControlled:s,itemValue:l}=this.state,{value:c,edit:u}=a;this.setState({signal:n}),i===c&&o===u&&i===l||(this.setState({itemValue:i}),s?r&&c!==i&&r.setFields([{value:i,error:void 0,name:`${n.id}`}]):(0,x.Nu)(\"refresh_stashed_value\",{signal:n,newValue:i}))}makeDiSchedulingTable(){return(0,k.jsx)(S.ZP,{})}makeTouTable(){return(0,k.jsx)(y.Z,{})}makeControlledDiSchedulingTable(){const{formTouchConfig:e={},controlConfig:t={},intl:n}=this.props,{isFormTouched:r,touchForm:i,setDiState:o}=e,{form:a}=t,{signal:s,diErrorData:l}=this.state,{id:u,value:d}=s,p=`ACTIVE_POWER_${u}`,f=`WATTLESS_POWER_${u}`,h=[{id:p,targetId:f,type:1,value:d,title:n.formatMessage({id:\"neteco.pvms.device.di.scheduling.di.activePowerDispatch\"})},{targetId:p,id:f,type:2,value:d,title:n.formatMessage({id:\"neteco.pvms.device.di.scheduling.di.reactivePowerDispatch\"})}],m=e=>{this.setState({diErrorData:e})};return(0,k.jsx)(\"div\",{children:null==h?void 0:h.map((e=>{let{id:t,targetId:n,type:u,value:d,title:p}=e;return(0,k.jsx)(c.Z.Item,{name:`${t}`,rules:[{validator:function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(n)?(t=n[0],o&&o(u-1,!1)):o&&o(u-1,!0),r||(0,M.mf)(i)&&i(),Promise.resolve()}}],initialValue:d||\"[]\",children:(0,k.jsx)(S.ZP,{handleChange:e=>{a.setFields([{name:`${s.id}_`,value:e.data,error:void 0}])},type:u,targetId:n,newValue:a.getFieldValue(`${n}_`),signalValue:d,id:t,title:p,diErrorData:l,changeDIError:m,disabled:s.disabled,hiddenDI4:this.props.hiddenDI4})})}))})}makeControlledTouTable(){const{formTouchConfig:e={}}=this.props,{touchForm:t}=e,{signal:n}=this.state,{id:r,value:i,disabled:o}=n;return(0,k.jsx)(c.Z.Item,{name:`${r}`,rules:[{validator:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(r)||(0,M.mf)(t)&&t({id:n.id,value:String(r)}),Promise.resolve()}}],initialValue:i||\"[]\",children:(0,k.jsx)(y.Z,{signalValue:this.state.signal.value,disabled:o})})}makeBatteryInOutTable(){return(0,k.jsx)(b.Z,{dn:this.props.dn})}makeControlledBatteryInOutTable(){const{formTouchConfig:e={},intl:t}=this.props,{isFormTouched:n,touchForm:r}=e,{signal:i}=this.state,{id:o,value:a,disabled:s}=i;return(0,k.jsx)(c.Z.Item,{name:`${o}`,rules:[{validator:function(e){let i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(a)?(i=a[0],Promise.reject(t.formatMessage({id:i}))):(!n&&(0,M.mf)(r)&&r({id:o,value:String(a)}),Promise.resolve())}}],initialValue:a||\"[]\",children:(0,k.jsx)(b.Z,{signalValue:a,dn:this.props.dn,disabled:s})})}render(){const{signal:e,isWrongValue:t=!1}=this.state,{controlConfig:n,intl:i,selectedRows:a}=this.props,{valueRange:s,description:l,validatePattern:c,showTips:u}=e,d=(0,x.kJ)(e.id,e.name);let p,f=!1;s&&s.displayRange&&(p=s.displayRange);const h=(0,P.L6)(e),m=(0,P.hj)(e)&&e.validatePattern;(p||h||m)&&(f=!0);const{form:g}=n,v=g.getFieldError(e.id),y=v&&v.length>0||t,b=(0,P.mo)(e)||(0,P.MU)(e)||(0,P.oD)(e)||(0,P.Hr)(e)||(0,P.wF)(e)||(0,P._w)(e)||(0,P.C3)(e)||(0,P.KA)(e)||(0,P.wo)(e)||(0,P.af)(e)||(0,P.Sl)(e)||(0,P.Qn)(e)||(0,P.L9)(e)||(0,P.Gg)(e)||(0,P.Ku)(e);return(0,k.jsx)(o.Z,{id:`signal-config-form-item-${e.id}`,span:b?24:8,children:Y.includes(e.id)?(0,k.jsx)(r.Z,{className:\"left-padding-content\",type:\"flex\",children:(0,k.jsx)(o.Z,{span:24,children:\"zh-cn\"===U?(0,k.jsxs)(r.Z,{type:\"flex\",justify:\"center\",children:[(0,k.jsx)(o.Z,{span:21,children:(0,k.jsx)(\"span\",{style:{color:\"red\"},children:i.formatMessage({id:e.message})})}),(0,k.jsx)(o.Z,{span:3})]}):(0,k.jsx)(r.Z,{type:\"flex\",justify:\"center\",children:(0,k.jsx)(o.Z,{span:24,children:(0,k.jsx)(\"span\",{style:{color:\"red\"},children:i.formatMessage({id:e.message})})})})})}):(0,k.jsxs)(r.Z,{className:\"left-padding-content\",type:\"flex\",children:[(0,k.jsx)(o.Z,{span:24,children:(0,k.jsxs)(r.Z,{type:\"flex\",justify:\"start\",children:[(0,k.jsx)(o.Z,{span:13,children:(0,k.jsxs)(\"span\",{className:\"signal-config-signal-name\",children:[this.handleSignalName(e,d),(e.id===Z||e.id===F)&&this.peakShavingTip(),B.includes(e.id)&&this.workModelTip(),this.buildDescription(l,c,e.id,u)]})}),(0,k.jsx)(o.Z,{span:8})]})}),(0,k.jsx)(o.Z,{span:24,children:(0,k.jsxs)(r.Z,{type:\"flex\",justify:\"flex-start\",children:[(0,k.jsx)(o.Z,{span:b?22:13,children:this.makeFormItem()}),!b&&(0,k.jsx)(o.Z,{span:11,className:\"signal-item-right-part\",children:f?(0,k.jsx)(o.Z,{span:21,className:\"right-part \"+(y?\"right-part-red\":\"\"),children:(0,k.jsx)(E.Z,{intl:i,dn:this.props.dn,signal:e,device:a[0]})}):(0,k.jsx)(o.Z,{span:21,className:\"right-part\"})})]})})]})})}}const K=W,q=e=>{let{form:t,signals:n,intl:i,formTouchConfig:o,mocId:a,dn:s,groups:l,communicationDeviceDn:c,selectedRows:u,useDP:d,hiddenDI4:p,tabKey:f,allTabItems:h,type:m}=e;const g=(0,x.lW)(n,a);return(0,k.jsx)(\"div\",{className:\"form-items-wrapper\",children:(0,k.jsx)(\"div\",{className:\"config-items-wrapper\",children:(0,k.jsx)(r.Z,{children:g.map((e=>(0,k.jsx)(K,{signals:g,dn:s,formTouchConfig:o,signal:e,deviceMocId:a,controlConfig:{form:t},intl:i,groups:l,communicationDeviceDn:c,selectedRows:u,useDP:d,hiddenDI4:p,tabKey:f,allTabItems:h,type:m},e.id)))})})})}},59709:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>f});var r=n(29266),i=n(85055),o=n(88391),a=n(37920),s=n.n(a),l=n(10749),c=n(44184),u=n(23712);const{refreshTouParam:d}=l.Z,p=\"HH:mm\",f=e=>{let{value:t,id:n,intl:a,disabled:l,touchForm:f}=e;const[h,m]=(0,o.useState)([]),g=(0,o.useRef)(),v=(0,o.useRef)(null),y=(0,o.useRef)(null),{iUnescape:b}=neteco.util;(0,o.useEffect)((()=>{const e=t&&(0,c.pM)(b(t))&&JSON.parse(b(t))||{},{startTime:n,endTime:r}=e,i={startTime:n?s()(n,p):\"\",endTime:r?s()(r,p):\"\"};return m(i),v.current=d.subscribe((()=>{g&&g.current&&g.current.resetFields()})),()=>{v.current&&v.current.unsubscribe(),clearTimeout(y.current)}}),[t]);const S=e=>a.formatMessage({id:e});if(!Array.isArray(h))return(0,u.jsx)(\"div\",{children:(0,u.jsxs)(r.Z,{name:\"disableGenerator\",onValuesChange:(e,t)=>{y.current=setTimeout((()=>{g.current.validateFields([\"startTime\",\"endTime\"]).then((()=>{const e=(e=>{const{startTime:t,endTime:n}=e;return t&&n?{startTime:s()(t).format(p),endTime:s()(n).format(p)}:\"\"})(t);e.repeatPeriod=[7,1,2,3,4,5,6],f({id:n,value:JSON.stringify(e)},\"singlelineTime\")})).catch((()=>{f(null,\"jpTou\")}))}),100)},ref:g,children:[(0,u.jsx)(r.Z.Item,{style:{width:\"120px\",display:\"inline-block\"},name:\"startTime\",validateFirst:!0,initialValue:h.startTime,rules:[{validator:(e,t)=>t?Promise.resolve():Promise.reject(S(\"neteco.pvms.device.timePeriodConfigTable.emptyTimeInput\"))}],children:(0,u.jsx)(i.Z,{format:p,disabled:l})}),\"-\",(0,u.jsx)(r.Z.Item,{style:{width:\"120px\",display:\"inline-block\"},name:\"endTime\",validateFirst:!0,initialValue:h.endTime,rules:[e=>{let{getFieldValue:t}=e;return{validator:(e,n)=>((e,t,n)=>t?s()(n(\"startTime\"),p).isSame(s()(t,p),\"minute\")?Promise.reject(S(\"neteco.pvms.device.timePeriodConfigTable.inputDifferentTime\")):Promise.resolve():Promise.reject(S(\"neteco.pvms.device.timePeriodConfigTable.emptyTimeInput\")))(0,n,t)}}],children:(0,u.jsx)(i.Z,{format:p,disabled:l})})]})})}},62995:(e,t,n)=>{\"use strict\";n.d(t,{Z:()=>An});var r=n(33670),i=n(41541),o=n(26887),a=n(45258),s=n(21148),l=n(88391),c=n(78939),u=n(93706),d=n(99994),p=n.n(d),f=n(55534),h=n.n(f),m=n(37825),g=n(95059),v=n(62073),y=n(7029),b=n(70535),S=n(17489),x=n(13528),w=n(69131),C=n(23712);const{operationSuccess:T,operationFailed:A,operationInfo:E}=g.Z;class O extends l.Component{constructor(e){super(e),this.validatePrecision=(e,t)=>!e||e.length<=t,this.validateValueRange=e=>{if(null==e||\"\"===e)return!1;const{limits:t,validatePattern:n,precision:r}=this.props,i=String(e).split(\".\")[1];if(!this.validatePrecision(i,r))return!1;let o=!1;if(0===t.length)o=new RegExp(n).test(`${e}`);else for(let n=0;n<t.length;n++){const r=t[n],{minClose:i}=r,{maxClose:a}=r,s=parseFloat(r.min),l=parseFloat(r.max);o=(i?e>=s:e>s)&&(a?e<=l:e<l)?o||!0:o||!1}return o},this.handleChange=e=>{const{precision:t}=this.props;if(void 0===t)return;this.setState({value:e});const n=this.validateValueRange(e),{hasClickedPreset:r}=this.state;r?this.setState({hasInputError:!n,hasClickedPreset:!1,presetAlready:!1}):this.setState({hasInputError:!n,presetAlready:!1})},this.startSaving=()=>{this.setState({saving:!0})},this.doPreset=()=>{const{type:e,device:t,intl:n,precision:r}=this.props;if(this.setState({hasClickedPreset:!0}),!this.validateValueRange(this.state.value))return E(n,n.formatMessage({id:\"neteco.pvms.power.config.validate\"},{number:r})),void this.setState({hasClickedPreset:!1});const i=function*(e,t,n){return\"ACTIVE_POWER\"===e?yield{success:!0,message:n.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.poweradjust.1\"})}:\"REACTIVE_POWER\"===e?yield{success:!0,message:n.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.poweradjust.2\"})}:yield{success:!0,message:n.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.poweradjust.3\"})},{success:!0,message:n.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.poweradjust.success\"})}}(e,0,n),o=i.next(),{value:a}=o,{message:s}=a;this.state.presetResult.push(s),this.setState({presetResult:this.state.presetResult}),this.interval=setInterval((()=>{const e=i.next(),{value:t,done:n}=e,{success:r,message:o}=t;n?(this.state.presetResult.push(o),this.setState({presetAlready:r,presetResult:this.state.presetResult}),this.interval&&clearInterval(this.interval)):this.setState({presetResult:o})}),w.v.regulationModal_presetResult)},this.clearStatus=()=>{this.interval&&clearInterval(this.interval),this.setState({presetAlready:!1,presetResult:[],hasClickedPreset:!1,saving:!1,value:void 0,hasInputError:!1})},this.inputNumberConfigs=()=>{(0,x.Dq)()&&this.setState({inputNumberProps:{decimalSeparator:\",\"}})},this.rangeFormat=e=>{let t=e;var n;return(0,x.Dq)()&&(t=null===(n=t)||void 0===n?void 0:n.replace(/\\./g,\",\")),t},this.state={value:\"\",progress:[],saving:!1,hasClickedPreset:!1,presetAlready:!1,presetResult:[],inputNumberProps:{}}}componentWillUnmount(){this.interval&&clearInterval(this.interval)}componentDidMount(){this.inputNumberConfigs()}render(){const{visible:e,onOk:t,onCancel:n,type:r,intl:o,displayRange:s,unit:l,deviceName:c,deviceDn:u}=this.props,{presetResult:d,value:p,inputNumberProps:f}=this.state,{rangeFormat:h}=this,m={okCallbacks:[n,this.clearStatus,e=>{let t=\"\";t=\"object\"==typeof e?e.description||\"common.message.success\":\"string\"==typeof e?e:\"neteco.pvms.inspect.assignSucess\",T(o,o.formatMessage({id:t}))}],failCallbacks:[n,this.clearStatus,e=>A(o,o.formatMessage({id:e}))]};let g=\"\",x=\"\",w=null;const{signalId:O}=this.props;\"ACTIVE_POWER\"===r&&(w=O,g=o.formatMessage({id:\"neteco.pvms.paramsSetting.unifiedSetting.devControl.actPowerReg\"}),x=o.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.actPowerReg\"})),\"REACTIVE_POWER\"===r&&(w=O,g=o.formatMessage({id:\"neteco.pvms.paramsSetting.unifiedSetting.devControl.reacPowerReg\"}),x=o.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.reactPowerReg\"})),\"POWER_FACTOR\"===r&&(w=O,g=o.formatMessage({id:\"neteco.pvms.paramsSetting.unifiedSetting.devControl.powFactorReg\"}),x=o.formatMessage({id:\"neteco.pvms.partials.main.dm.detailInfo.curInfo.powerFactorRegulation\"}));const M=n,P={padding:\"10px 0\"},{saving:D,hasInputError:I,hasClickedPreset:N,presetAlready:_}=this.state,j=I?{border:\"1px solid red\"}:{};return(0,C.jsx)(\"div\",{className:\"nco-regulation-modal-wrapper\",children:(0,C.jsx)(a.Z,{className:\"nco-regulation-modal\",title:g,visible:e,footer:null,destroyOnClose:!0,onCancel:()=>{this.clearStatus(),M()},centered:!0,maskClosable:!1,children:(0,C.jsxs)(\"div\",{style:{padding:\"0 10px\"},children:[(0,C.jsxs)(b.Z,{type:\"flex\",align:\"middle\",style:P,children:[(0,C.jsx)(S.Z,{span:10,children:o.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.devName\"})}),(0,C.jsx)(S.Z,{span:14,children:window.neteco.util.iUnescape(c)})]}),(0,C.jsxs)(b.Z,{type:\"flex\",align:\"middle\",style:P,children:[(0,C.jsx)(S.Z,{span:10,children:o.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.controlType\"})}),(0,C.jsx)(S.Z,{span:14,children:x})]}),(0,C.jsxs)(b.Z,{type:\"flex\",align:\"middle\",style:P,children:[(0,C.jsx)(S.Z,{span:10,children:o.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.regVal\"})}),(0,C.jsxs)(S.Z,{span:14,children:[(0,C.jsx)(y.Z,{style:{width:\"10rem\",...j},value:p,onChange:this.handleChange,...f}),\" \",l]})]}),(0,C.jsxs)(b.Z,{type:\"flex\",align:\"middle\",style:P,children:[(0,C.jsx)(S.Z,{span:10,children:o.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.regRange\"})}),(0,C.jsx)(S.Z,{span:14,style:I?{color:\"red\"}:{color:\"black\"},children:h(s)})]}),(0,C.jsxs)(b.Z,{type:\"flex\",justify:\"center\",align:\"middle\",style:P,children:[(0,C.jsx)(i.Z,{disabled:I||N,style:{marginRight:\"1rem\"},onClick:()=>{this.doPreset()},children:o.formatMessage({id:\"neteco.pvms.documentManage.isRe\"})}),(0,C.jsx)(i.Z,{disabled:!_||I,style:{marginRight:\"1rem\"},onClick:()=>{this.validateValueRange(this.state.value)?(this.startSaving(),t(u,w,this.state.value,m)):E(o,o.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.inputCorrectVal\"}))},loading:D,type:\"primary\",children:o.formatMessage({id:\"neteco.pvms.partials.main.dm.devControlDialog.submit\"})}),(0,C.jsx)(i.Z,{onClick:()=>{n(),this.clearStatus()},children:o.formatMessage({id:\"common.button.cancel\"})})]}),(0,C.jsx)(b.Z,{style:P,children:(0,C.jsx)(S.Z,{span:24,children:(0,C.jsx)(v.Z.TextArea,{rows:4,disabled:!0,value:d.join(\"\\n\"),style:{backgroundColor:\"#fff\",color:\"black\"}})})})]})})})}}const M=(0,u.ZP)(O);var P=n(59516),D=n(5083),I=n(6197),N=n(64218),_=n(70440),j=n(53137),k=n(49453),L=n(84272),R=n(57266),Z=n(4342),B=n(49100);const{Paragraph:F}=s.Z,{operationConfirm:z,operationInfo:V}=g.Z;class H extends l.Component{constructor(e){super(e),this.getInterface=async e=>{const{deviceDn:t}=this.props;return(0,k.U2)(\"/rest/pvms/web/device/v1/optimizer-search-progress\",{deviceDn:t,startSearchTask:e})},this.getCurrentProgress=async e=>{const{intl:t}=this.props,{data:n,success:r}=await this.getInterface(e);r?this.setState({currentProgress:n.process,processColor:\"\"}):e?(this.timer&&clearInterval(this.timer),V(t,t.formatMessage({id:\"neteco.pvms.optimizerSearch.searchFail\"}))):(-1===n.code&&(this.timer&&clearInterval(this.timer),V(t,t.formatMessage({id:\"neteco.pvms.optimizerSearch.searchFail\"}),(()=>{this.setState({disabledButton:!1,showProgress:!1})}))),-2===n.code&&(this.timer&&clearInterval(this.timer),this.setState({processColor:\"rgb(95,96,93)\"})),-5===n.code&&(this.timer&&clearInterval(this.timer),this.setState({currentProgress:100,processColor:\"\",failCode:n.code})))},this.componentDidMount=async()=>{const{data:e,success:t}=await this.getInterface(!1);t&&0!==e.process&&(this.setState({currentProgress:e.process,showProgress:!0}),100!==e.process?(this.timer=setInterval((()=>this.getCurrentProgress(!1)),w.v.optimizerSearch_getCurrentProgress),this.setState({disabledButton:!0})):this.setState({disabledButton:!1})),-2===e.code&&this.setState({disabledButton:!0,showProgress:!1})},this.componentDidUpdate=(e,t)=>{const{intl:n}=this.props,{currentProgress:r,failCode:i}=this.state;if(100===r&&t.currentProgress!==r){if(clearInterval(this.timer),this.setState({disabledButton:!1}),-5===i)return void V(n,n.formatMessage({id:\"ncoStationContainer.tabs.label.device.optimizer.search.finished\"}),(()=>{this.setState({disabledButton:!1})}));const{deviceDn:e}=this.props;(0,L.FD)(e,10106).then((e=>{const{success:t,data:r}=e;if(t&&r&&r.signals){const{signals:e}=r;if(\"{}\"!==JSON.stringify(e)){const{value:t}=e[10106];t&&V(n,n.formatMessage({id:\"neteco.pvms.device.optimizer.search.finished\"},{num:t}))}}}))}},this.clickOptSearch=()=>{const{intl:e,deviceDn:t}=this.props;return z(e,e.formatMessage({id:\"ncoStationContainer.tabs.label.device.optimizer.search.tips\"}),(async()=>{const n=await(0,k.Md)(\"/rest/neteco/config/device/v1/config/set-signal\",{dn:t,changeValues:JSON.stringify([{id:\"21089\",value:\"0\"}])});try{0===n.code?(V(e,e.formatMessage({id:\"neteco.pvms.partials.main.dm.devLocation.locationOperateSuc\"})),this.startShowProgress()):V(e,e.formatMessage({id:\"neteco.pvms.partials.main.dm.devLocation.locationOperateFail\"}))}catch(t){V(e,e.formatMessage({id:\"neteco.pvms.partials.main.dm.devLocation.locationOperateFail\"}))}}))},this.startShowProgress=()=>{this.setState({currentProgress:0,showProgress:!0,disabledButton:!0}),this.getCurrentProgress(!0),this.timer=setInterval((()=>this.getCurrentProgress(!1)),w.v.optimizerSearch_getCurrentProgress)},this.language=(0,Z.ej)(\"locale\")||\"en-us\",this.state={currentProgress:0,showProgress:!1,disabledButton:!1,processColor:\"\"}}componentWillUnmount(){clearInterval(this.timer)}render(){const{intl:e}=this.props,{currentProgress:t,showProgress:n,disabledButton:r,processColor:i}=this.state;return(0,C.jsxs)(\"div\",{className:\"nco-optmizer-search-box\",children:[n?(0,C.jsx)(R.Z,{type:\"circle\",percent:t,width:35,strokeColor:i}):\"\",(0,C.jsx)(\"span\",{title:e.formatMessage({id:\"ncoStationContainer.tabs.label.device.optimizer.search\"}),children:(0,C.jsx)(B.Z,{operationId:P.ZTu,targetId:[this.props.deviceDn],targetType:\"device\",intl:this.props.intl,type:\"primary\",onClick:this.clickOptSearch,disabled:r,children:(0,C.jsx)(c.Z,{id:\"ncoStationContainer.tabs.label.device.optimizer.search\"})})})]})}}const U=(0,u.ZP)(H);var G=n(25947),Y=n(83621);const{DEVICE_STATUS:W,MODE:K,CURRENT_GENERATION:q,POWER_FACTOR:Q,CUMULATIVE_GENERATION:X,GRID_FREQUENCY:J,OUTPUT_REACTIVE_POWER:$,INTERNAL_TEMPERATURE:ee,INPUT_TOTAL_POWER:te,RATED_POWER:ne,UP_TIME:re,OFF_TIME:ie,OUTPUT_WAY:oe,ACTIVE_POWER:ae,AB_VOLTAGE:se,BC_VOLTAGE:le,CA_VOLTAGE:ce,A_CURRENT:ue,B_CURRENT:de,C_CURRENT:pe,A_VOLTAGE:fe,B_VOLTAGE:he,C_VOLTAGE:me}=G.ZP.HOUSEHOLD_INVERTER_REALTIME_SIGNAL_KEYS,{METER_OUTPUT_WAY:ge,METER_STATUS:ve,METER_ACTIVE_CAP:ye,METER_REVERSE_ACTIVE_CAP:be,METER_POWER_FACTOR:Se,METER_REACTIVE_POWER:xe,METER_GRID_RATE:we,METER_A_ACTIVE_POWER:Ce,METER_B_ACTIVE_POWER:Te,METER_C_ACTIVE_POWER:Ae,METER_A_U:Ee,METER_B_U:Oe,METER_C_U:Me,METER_A_I:Pe,METER_B_I:De,METER_C_I:Ie}=G.ZP.HOUSEHOLD_METER_REALTIME_SIGNAL_KEYS,{BATTERY_STATUS:Ne,BATTERY_SOC:_e,BATTERY_CHARGE_DISCHARGE_MODE:je,BATTERY_SOH:ke,BATTERY_CHARGE_CAP:Le,BATTERY_BUS_BAR_U:Re,BATTERY_DISCHARGE_CAP:Ze,BATTERY_CHARGE_DISCHARGE_POWER:Be,BATTERY_BACKUP_TIME:Fe,BATTERY_RATED_CAPACITY:ze}=G.ZP.HOUSEHOLD_STORAGE_REALTIME_SIGNAL_KEYS,{DEVICE_STATUS:Ve,CURRENT_GENERATION:He,CUMULATIVE_GENERATION:Ue,ACTIVE_POWER:Ge,OUTPUT_REACTIVE_POWER:Ye,INPUT_TOTAL_POWER:We,RATED_POWER:Ke,EFFICIENCY:qe,POWER_FACTOR:Qe,GRID_FREQUENCY:Xe,INTERNAL_TEMPERATURE:Je,UP_TIME:$e,OFF_TIME:et,OUTPUT_WAY:tt,AB_VOLTAGE:nt,BC_VOLTAGE:rt,CA_VOLTAGE:it,A_CURRENT:ot,B_CURRENT:at,C_CURRENT:st,A_VOLTAGE:lt,B_VOLTAGE:ct,C_VOLTAGE:ut,DC_CURRENT:dt,DC_VOLTAGE:pt,DC_POWER:ft,INSULATION_IMPEDANCE:ht}=G.ZP.STRING_INVERTER_REALTIME_SIGNAL_KEYS,{WIND_SPEED:mt,WIND_DIRECTION:gt,PV_TEMPERATURE:vt,TEMPERATURE:yt,IRR:bt,RADIANT_TOTAL:St,STATUS:xt}=G.ZP.EMI_REALTIME_SIGNAL_KEYS,{DEVICE_MODEL:wt,ESN:Ct,MODBUS_VERSION:Tt,SOFT_VERSON:At,MODULE_STATE:Et,OUTPUT_VOLTAGE:Ot,OUTPUT_CURRENT:Mt,MODULE_TEMP:Pt,AB_CURRENT:Dt,BC_CURRENT:It,AC_CURRENT:Nt,GRID_FREQUENCY:_t,CONNECT_STATE:jt}=G.ZP.PID_REALTIME_SIGNAL_KEYS,{AB_V:kt,BC_V:Lt,CA_V:Rt,A_V:Zt,B_V:Bt,C_V:Ft,GRID_FREQUENCY:zt,POWER_FACTOR:Vt,A_A:Ht,B_A:Ut,C_A:Gt,TOTAL_VIEWABLE_FACTOR:Yt,ACTIVE_POWER:Wt,ACTIVE_POWER_A:Kt,ACTIVE_POWER_B:qt,ACTIVE_POWER_C:Qt,POSITIVE_TOTAL_ACTIVE_POWER:Xt,REVERSE_TOTAL_ACTIVE_POWER:Jt,REACTIVE_POWER:$t,REACTIVE_POWER_QA:en,REACTIVE_POWER_QB:tn,REACTIVE_POWER_QC:nn,POSITIVE_TOTAL_REACTIVE_POWER:rn,REVERSE_TOTAL_REACTIVE_POWER:on}=G.ZP.GATEWAY_ENERGY_METER_REALTIME_SIGNAL_KEYS;var an=n(66417),sn=n(65595),ln=n(44184),cn=n(31519),un=n(68718),dn=n(24301),pn=n(80770);const{operationSuccess:fn,operationFailed:hn,operationConfirm:mn,operationInfo:gn}=g.Z,{Paragraph:vn}=s.Z,{resetDeviceId:yn,resetDeviceName:bn,pageName:Sn,switchDeviceId:xn,switchDeviceName:wn,operationTypes:Cn}=cn.e.deviceDetail;class Tn extends l.Component{constructor(e){super(e),this.intlMessage=(e,t)=>this.props.intl.formatMessage({id:e},t),this.componentDidUpdate=e=>{const{realtimeInformation:t}=this.props;h()(e.realtimeInformation,t)||this.getDeviceStatus(t)},this.checkRemoteControl=()=>{(0,P.lVp)(P.jSe)&&(0,L.pm)().then((e=>{const{success:t,data:n}=e;if(t){const e=p()(n,[\"paramName\",\"switch_enable\"]);e&&\"1\"===e.paramValue&&this.setState({remoteSwitchState:!0})}})).catch((()=>{this.setState({remoteSwitchState:!1})}))},this.checkShareStation=()=>{this.props.deviceDn&&(0,j.PW)(this.pr